<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é›¨æ°´çš„å¤©ç©ºè½äº†é›¨</title>
  
  <subtitle>rainSkyã®ä¹Œæ‰˜é‚¦</subtitle>
  <link href="https://rain-sky.github.io/atom.xml" rel="self"/>
  
  <link href="https://rain-sky.github.io/"/>
  <updated>2021-08-08T12:35:11.454Z</updated>
  <id>https://rain-sky.github.io/</id>
  
  <author>
    <name>rain-Sky</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>webé¡»çŸ¥</title>
    <link href="https://rain-sky.github.io/2021/08/08/web%E9%A1%BB%E7%9F%A5/"/>
    <id>https://rain-sky.github.io/2021/08/08/web%E9%A1%BB%E7%9F%A5/</id>
    <published>2021-08-08T11:01:16.000Z</published>
    <updated>2021-08-08T12:35:11.454Z</updated>
    
    <content type="html"><![CDATA[<h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><h3 id="httpæŠ¥æ–‡"><a href="#httpæŠ¥æ–‡" class="headerlink" title="httpæŠ¥æ–‡"></a>httpæŠ¥æ–‡</h3><blockquote><p>è¯·æ±‚æŠ¥æ–‡ï¼Œé€šå¸¸åˆ†è¯·æ±‚è¡Œï¼Œè¯·æ±‚å¤´ï¼Œè¯·æ±‚ä½“</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808172308.jpeg"></p><blockquote><p>ä¸€ä¸ªä¾‹å­</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808180756.png"></p><blockquote><p>å“åº”æŠ¥æ–‡ï¼Œå“åº”è¡Œï¼Œå“åº”å¤´ï¼Œå“åº”ä½“(åƒç»„è£…æ•°æ®åçš„html)</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808173413.jpeg"></p><blockquote><p>ä¸€ä¸ªæŠ¥æ–‡ä¾‹å­</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808180521.png"></p><h3 id="getä¸post"><a href="#getä¸post" class="headerlink" title="getä¸post"></a>getä¸post</h3><p>å…³äºgetä¸postçš„åŒºåˆ«ï¼š<a href="https://zhuanlan.zhihu.com/p/57361216">æ¨èé˜…è¯»</a></p><p><span class="github-emoji"><span>ğŸ’‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f487.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸¤ç§æŠ¥æ–‡çš„æ¯”å¯¹</p><p>getæ–¹æ³•æ²¡æœ‰è¯·æ±‚ä½“ï¼Œæ•°æ®é€šè¿‡urlä¼ é€’ï¼Œä¸æ­¢?ä¸€ç§å†™æ³•ï¼Œrestfulä¹Ÿæ˜¯urlçš„ä¸€ç§ä¼ å‚é£æ ¼ï¼Œpostæ–¹æ³•æœ‰è¯·æ±‚ä½“</p><table><thead><tr><th align="center"></th><th align="center">GET</th><th align="center">POST</th></tr></thead><tbody><tr><td align="center">åé€€æŒ‰é’®/åˆ·æ–°</td><td align="center">æ— å®³</td><td align="center">æ•°æ®ä¼šè¢«é‡æ–°æäº¤ï¼ˆæµè§ˆå™¨åº”è¯¥å‘ŠçŸ¥ç”¨æˆ·æ•°æ®ä¼šè¢«é‡æ–°æäº¤ï¼‰ã€‚</td></tr><tr><td align="center">ä¹¦ç­¾</td><td align="center">å¯æ”¶è—ä¸ºä¹¦ç­¾</td><td align="center">ä¸å¯æ”¶è—ä¸ºä¹¦ç­¾</td></tr><tr><td align="center">ç¼“å­˜</td><td align="center">èƒ½è¢«ç¼“å­˜</td><td align="center">ä¸èƒ½ç¼“å­˜</td></tr><tr><td align="center">ç¼–ç ç±»å‹</td><td align="center">application/x-www-form-urlencoded</td><td align="center">application/x-www-form-urlencoded æˆ– multipart/form-dataã€‚ä¸ºäºŒè¿›åˆ¶æ•°æ®ä½¿ç”¨å¤šé‡ç¼–ç ã€‚</td></tr><tr><td align="center">å†å²</td><td align="center">å‚æ•°ä¿ç•™åœ¨æµè§ˆå™¨å†å²ä¸­ã€‚</td><td align="center">å‚æ•°ä¸ä¼šä¿å­˜åœ¨æµè§ˆå™¨å†å²ä¸­ã€‚</td></tr><tr><td align="center">å¯¹æ•°æ®é•¿åº¦çš„é™åˆ¶</td><td align="center">æ˜¯çš„ã€‚å½“å‘é€æ•°æ®æ—¶ï¼ŒGET æ–¹æ³•å‘ URL æ·»åŠ æ•°æ®ï¼›URL çš„é•¿åº¦æ˜¯å—é™åˆ¶çš„ï¼ˆURL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦ï¼‰ã€‚</td><td align="center">æ— é™åˆ¶ã€‚</td></tr><tr><td align="center">å¯¹æ•°æ®ç±»å‹çš„é™åˆ¶</td><td align="center">åªå…è®¸ ASCII å­—ç¬¦ã€‚</td><td align="center">æ²¡æœ‰é™åˆ¶ã€‚ä¹Ÿå…è®¸äºŒè¿›åˆ¶æ•°æ®ã€‚</td></tr><tr><td align="center">å®‰å…¨æ€§</td><td align="center">ä¸ POST ç›¸æ¯”ï¼ŒGET çš„å®‰å…¨æ€§è¾ƒå·®ï¼Œå› ä¸ºæ‰€å‘é€çš„æ•°æ®æ˜¯ URL çš„ä¸€éƒ¨åˆ†ã€‚åœ¨å‘é€å¯†ç æˆ–å…¶ä»–æ•æ„Ÿä¿¡æ¯æ—¶ç»ä¸è¦ä½¿ç”¨ GET ï¼</td><td align="center">POST æ¯” GET æ›´å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ä¸ä¼šè¢«ä¿å­˜åœ¨æµè§ˆå™¨å†å²æˆ– web æœåŠ¡å™¨æ—¥å¿—ä¸­ã€‚</td></tr><tr><td align="center">å¯è§æ€§</td><td align="center">æ•°æ®åœ¨ URL ä¸­å¯¹æ‰€æœ‰äººéƒ½æ˜¯å¯è§çš„ã€‚</td><td align="center">æ•°æ®ä¸ä¼šæ˜¾ç¤ºåœ¨ URL ä¸­ã€‚</td></tr></tbody></table><h2 id="requestä¸response"><a href="#requestä¸response" class="headerlink" title="requestä¸response"></a>requestä¸response</h2><h3 id="tomcatä¸€æ¬¡ç®€å•çš„è¯·æ±‚å“åº”è¿‡ç¨‹"><a href="#tomcatä¸€æ¬¡ç®€å•çš„è¯·æ±‚å“åº”è¿‡ç¨‹" class="headerlink" title="tomcatä¸€æ¬¡ç®€å•çš„è¯·æ±‚å“åº”è¿‡ç¨‹"></a>tomcatä¸€æ¬¡ç®€å•çš„è¯·æ±‚å“åº”è¿‡ç¨‹</h3><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808180050.png"></p><h3 id="tomcatå†…ç½®å¯¹è±¡"><a href="#tomcatå†…ç½®å¯¹è±¡" class="headerlink" title="tomcatå†…ç½®å¯¹è±¡"></a>tomcatå†…ç½®å¯¹è±¡</h3><p>åœ¨ä¹‹å‰å­¦ä¹ è¿‡ç¨‹ä¸­ä½¿ç”¨çš„å¯¹è±¡å¤§éƒ¨åˆ†éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±ä½¿ç”¨newå…³é”®å­—æˆ–è€…åå°„åˆ›å»ºçš„ï¼Œç°åœ¨å®¹å™¨ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬åªè¦ç›´æ¥ä½¿ç”¨å³å¯ï¼Œä¸éœ€è¦æˆ‘ä»¬å†å»åˆ›å»ºè¿™äº›å¯¹è±¡ï¼Œåœ¨Tomcatå®¹å™¨ä¸­æä¾›äº†ä¹ç§å†…ç½®å¯¹è±¡ï¼Œæœ‰ä¸€äº›ä¸å¸¸ç”¨ã€‚è¿™äº›å†…ç½®å¯¹è±¡çš„åå­—å’Œç±»å‹å¿…é¡»è®°ä¸‹æ¥ã€‚</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>pageContext</strong></td><td><strong>javax.servlet.jsp.PageContext</strong></td><td>è¡¨ç¤ºçš„æ˜¯é¡µé¢ä¸Šä¸‹æ–‡ç¯å¢ƒ</td></tr><tr><td><strong>request</strong></td><td><strong>HttpServletRequest</strong></td><td>è¡¨ç¤ºä¸€æ¬¡ç”¨æˆ·è¯·æ±‚</td></tr><tr><td><strong>response</strong></td><td><strong>HttpServletResponse</strong></td><td>è¡¨ç¤ºä¸€æ¬¡å“åº”</td></tr><tr><td><strong>session</strong></td><td><strong>HttpSession</strong></td><td>è¡¨ç¤ºä¸€ä¸ªç”¨æˆ·ä¿¡æ¯</td></tr><tr><td><strong>application</strong></td><td><strong>ServletContext</strong></td><td>è¡¨ç¤ºæœåŠ¡å™¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ</td></tr><tr><td><strong>page</strong></td><td><strong>Object</strong></td><td>è¡¨ç¤ºä¸€ä¸ªé¡µé¢å¯¹è±¡</td></tr><tr><td><strong>out</strong></td><td><strong>JspWiter</strong></td><td>å¯ä»¥ä½¿ç”¨å…¶è¾“å‡ºä¿¡æ¯</td></tr><tr><td><strong>exception</strong></td><td><strong>throwable</strong></td><td>è¡¨ç¤ºå¼‚å¸¸ä¿¡æ¯</td></tr><tr><td><strong>config</strong></td><td><strong>ServletConfig</strong></td><td>å¯ä»¥è·å–é…ç½®æ–‡ä»¶çš„ä¸€äº›ä¿¡æ¯</td></tr></tbody></table><h3 id="request"><a href="#request" class="headerlink" title="request"></a>request</h3><blockquote><p>requestçš„å‡½æ•°å¤§æ¦‚å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»</p></blockquote><ul><li>è·å–è¯·æ±‚å¤´</li><li>è·å–è¯·æ±‚ä½“</li><li>è·å–è¯·æ±‚è¡Œ</li></ul><p>å…·ä½“å¯ä»¥å‚çœ‹å®˜ç½‘è§£é‡Š</p><p><a href="https://link.zhihu.com/?target=http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletRequest.html">HttpServletRequest API</a></p><blockquote><p>requeståŸŸ</p></blockquote><p>requestå¯¹è±¡åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨requestæ¥ä¼ è¾“æ•°æ®ã€‚requeståŸŸå¯¹è±¡ä¸åƒServletåŸŸä¸€æ ·ä¸€ç›´èƒ½ä½¿ç”¨ï¼Œrequeståªèƒ½åœ¨ä¸€æ¬¡è¯·æ±‚è¿‡ç¨‹ä¹‹ä¸­ä¼ é€’æ•°æ®ï¼Œè¯·æ±‚ç»“æŸå³è‡ªåŠ¨é”€æ¯ã€‚å…·ä½“ä½¿ç”¨æ¶‰åŠåˆ°ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š</p><ul><li>setAttribute(String name, Object o)</li><li>getAttribute(String name)</li><li>removeAttribute(String name)</li></ul><blockquote><p>ä¹±ç é—®é¢˜</p></blockquote><p>åœ¨è·å–è¯·æ±‚æŠ¥æ–‡ç›¸å…³çš„å†…å®¹çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šå‘ç°è·å–åˆ°çš„å†…å®¹æ˜¯ä¹±ç çš„å†…å®¹ã€‚é€šå¸¸æƒ…å†µæ˜¯æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€çš„è¯·æ±‚å‚æ•°ä¸­åŒ…å«ä¸­æ–‡å­—ç¬¦ï¼ŒæœåŠ¡å™¨è·å–åˆ°çš„è¯·æ±‚å‚æ•°çš„å€¼æ˜¯ä¹±ç ã€‚</p><p>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå› ä¸ºæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å®è´¨ä¸Šæ˜¯socketæµï¼Œæ‰€ä»¥è¦å…ˆå°†è¯·æ±‚å‚æ•°ï¼ˆå­—ç¬¦ï¼‰è½¬æ¢æˆå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯ç¼–ç è¿‡ç¨‹ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚å‚æ•°åè¿›è¡Œè§£ç ï¼ˆå­—èŠ‚è½¬å­—ç¬¦ï¼‰ï¼Œç„¶åå°è£…åˆ°requestå¯¹è±¡ä¸­ã€‚å¦‚æœå®¢æˆ·ç«¯çš„ç¼–ç ä¸æœåŠ¡å™¨ç«¯çš„è§£ç ä¸ç»Ÿä¸€ï¼Œå°±ä¼šå¯¼è‡´é€šè¿‡requestè·å–åˆ°çš„è¯·æ±‚å‚æ•°çš„å€¼æ˜¯ä¹±ç ã€‚</p><p>æ‰€ä»¥ä¸ºäº†è§£å†³requestä¹±ç çš„é—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æœåŠ¡å™¨ç«¯è®¾ç½®ç›¸åº”çš„è§£ç æ ¼å¼å³å¯ã€‚</p><p>å…·ä½“è®¾ç½®ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(<span class="string">"utf-8"</span>);  <span class="comment">//è®¾ç½®requestå¯¹è±¡çš„è§£ç æ–¹å¼</span></span><br></pre></td></tr></tbody></table></figure><h3 id="response"><a href="#response" class="headerlink" title="response"></a>response</h3><p>Tomcatä¼ ç»™Servletæ—¶ï¼Œå®ƒè¿˜æ˜¯ç©ºçš„å¯¹è±¡ã€‚Servleté€»è¾‘å¤„ç†åå¾—åˆ°ç»“æœï¼Œæœ€ç»ˆé€šè¿‡response.write()æ–¹æ³•ï¼Œå°†ç»“æœå†™å…¥responseå†…éƒ¨çš„ç¼“å†²åŒºã€‚Tomcatä¼šåœ¨servletå¤„ç†ç»“æŸåï¼Œæ‹¿åˆ°responseï¼Œéå†é‡Œé¢çš„ä¿¡æ¯ï¼Œç»„è£…æˆHTTPå“åº”å‘ç»™å®¢æˆ·ç«¯ã€‚</p><p>HttpServletResponseå¯¹è±¡ä»£è¡¨æœåŠ¡å™¨çš„å“åº”ã€‚è¿™ä¸ªå¯¹è±¡ä¸­å°è£…äº†å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€å‘é€å“åº”å¤´ï¼Œå‘é€å“åº”çŠ¶æ€ç çš„æ–¹æ³•ã€‚</p><blockquote><p>responseçš„å‡½æ•°å¤§æ¦‚å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»</p></blockquote><ul><li>è®¾ç½®å“åº”çŠ¶æ€è¡Œ</li><li>è®¾ç½®å“åº”å¤´</li><li>è®¾ç½®å“åº”å®ä½“</li></ul><p>å…·ä½“å¯ä»¥å‚çœ‹å®˜ç½‘è§£é‡Šï¼š</p><p><a href="https://link.zhihu.com/?target=http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletRequest.html">HttpServletResponse API</a></p><blockquote><p>ä¹±ç é—®é¢˜</p></blockquote><p>æœ‰æ—¶å€™æœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€çš„æ•°æ®åŒ…å«ä¸­æ–‡å­—ç¬¦ï¼Œåœ¨ æµè§ˆå™¨ä¸­æ˜¾ç¤ºçš„æ˜¯ä¹±ç ã€‚ä¹±ç çš„åŸå› æ˜¯ response å¯¹è±¡çš„å­—ç¬¦è¾“å‡ºæµåœ¨ç¼–ç æ—¶é‡‡ç”¨çš„å­—ç¬¦ç è¡¨æ˜¯ ISO-8859-1ï¼Œè¯¥ç è¡¨ä¸å…¼å®¹ä¸­æ–‡ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°ä¹±ç çš„é—®é¢˜ã€‚å¤„ç†ä¹±ç é—®é¢˜ï¼Œæœ‰ä¸‹é¢ä¸¤ç§æ–¹æ¡ˆï¼š</p><p>æ–¹æ³•ä¸€ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>);    <span class="comment">//è®¾ç½® HttpServletResponseä½¿ç”¨utf-8ç¼–ç </span></span><br><span class="line">response.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/html;charset=utf-8"</span>);    <span class="comment">//é€šçŸ¥æµè§ˆå™¨ä½¿ç”¨utf-8è§£ç </span></span><br></pre></td></tr></tbody></table></figure><p>æ–¹æ³•äºŒï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);    <span class="comment">//åŒ…å«æ–¹æ³•ä¸€çš„ä¸¤ä¸ªåŠŸèƒ½</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>é‡å®šå‘æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p></blockquote><ul><li>æ–¹æ³•ä¸€</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨å“åº”å¤´ä¸­æ·»åŠ 302çŠ¶æ€ç ï¼Œå‘Šè¯‰æµè§ˆå™¨éœ€è¦è¿›è¡Œé‡å®šå‘ </span></span><br><span class="line">response.setStatus(<span class="number">302</span>)ï¼›</span><br><span class="line"><span class="comment">//åœ¨å“åº”å¤´ä¸­æ·»åŠ Locationï¼ŒæŒ‡å®šé‡å®šå‘çš„ä½ç½® </span></span><br><span class="line">response.setHeader(<span class="string">"Location"</span>, <span class="string">"http://www.baidu.com"</span>);</span><br></pre></td></tr></tbody></table></figure><ul><li>æ–¹æ³•äºŒ</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setRedirect(<span class="string">"http://www.baidu.com"</span>)</span><br></pre></td></tr></tbody></table></figure><blockquote><p>ç¦æ­¢ç¼“å­˜</p></blockquote><p>æœ‰æ—¶å€™æˆ‘ä»¬æƒ³è®©ç”¨æˆ·ç«¯ä¸ç¼“å­˜html,css,jsç­‰èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹responseå¤´è¿›è¡Œä¸€å®šçš„è®¾ç½®æ¥å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="string">"Cache-Control"</span>, <span class="string">"no-cache"</span>);</span><br><span class="line">response.setHeader(<span class="string">"Pragma"</span>, <span class="string">"no-cache"</span>);</span><br><span class="line">response.setDateHeader(<span class="string">"Expires"</span>, -<span class="number">1</span>);</span><br></pre></td></tr></tbody></table></figure><blockquote><p>æ–‡ä»¶ä¼ é€</p></blockquote><p>å®¢æˆ·ç«¯æœ‰æ—¶å€™ä¼šè¯·æ±‚æŸå¼ å›¾ç‰‡çš„å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦å°†å›¾ç‰‡æ–‡ä»¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä¸€èˆ¬æ¥è¯´ä½¿ç”¨Responseä¼ é€å›¾ç‰‡çš„åšæ³•å¦‚ä¸‹ï¼š</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        è·å¾—å›¾ç‰‡çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">        String path = getServletContext().getRealPath(<span class="string">"man.jpg"</span>);</span><br><span class="line">        System.out.println(path);</span><br><span class="line"><span class="comment">//        è·å–æœ¬åœ°å­—èŠ‚è¾“å…¥æµ</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(path);</span><br><span class="line"><span class="comment">//        è·å–æœ¬åœ°å­—èŠ‚è¾“å‡ºæµ</span></span><br><span class="line">        ServletOutputStream sos = response.getOutputStream();</span><br><span class="line">        <span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//        å»ºç«‹ä¸€ä¸ªæ•°ç»„ ä¸€æ¬¡è¯»1024ä¸ªå­—èŠ‚</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len=fis.read(bytes))!=-<span class="number">1</span>){</span><br><span class="line">            out.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">        }</span><br><span class="line">        fis.close();</span><br><span class="line">        sos.close();</span><br></pre></td></tr></tbody></table></figure><h2 id="cookieä¸session"><a href="#cookieä¸session" class="headerlink" title="cookieä¸session"></a>cookieä¸session</h2><p><a href="https://zhuanlan.zhihu.com/p/27669892">æ¨èé˜…è¯»</a></p><h3 id="httpæ˜¯ä¸ªæ— çŠ¶æ€åè®®"><a href="#httpæ˜¯ä¸ªæ— çŠ¶æ€åè®®" class="headerlink" title="httpæ˜¯ä¸ªæ— çŠ¶æ€åè®®"></a>httpæ˜¯ä¸ªæ— çŠ¶æ€åè®®</h3><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808195850.png"></p><h3 id="cookieå’Œsessionè§£é‡Š"><a href="#cookieå’Œsessionè§£é‡Š" class="headerlink" title="cookieå’Œsessionè§£é‡Š"></a>cookieå’Œsessionè§£é‡Š</h3><p><strong>cookie</strong></p><ul><li>å®¢æˆ·ç«¯æŠ€æœ¯   ï¼ˆå“åº”ï¼Œè¯·æ±‚ï¼‰</li></ul><p><strong>session</strong></p><ul><li>æœåŠ¡å™¨æŠ€æœ¯ï¼Œåˆ©ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥ä¿å­˜ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼Ÿ æˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯æˆ–è€…æ•°æ®æ”¾åœ¨Sessionä¸­ï¼</li></ul><blockquote><p>æŠ¥æ–‡é‡Œçš„æ ·å­</p></blockquote><p>â‘ è¯·æ±‚æŠ¥æ–‡ï¼ˆæ²¡æœ‰Cookie ä¿¡æ¯çš„çŠ¶æ€ï¼‰</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/reader/</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: hackr.jp</span><br><span class="line">*é¦–éƒ¨å­—æ®µå†…æ²¡æœ‰Cookieçš„ç›¸å…³ä¿¡æ¯</span><br></pre></td></tr></tbody></table></figure><p>â‘¡å“åº”æŠ¥æ–‡ï¼ˆæœåŠ¡å™¨ç«¯ç”ŸæˆCookie ä¿¡æ¯ï¼‰</p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Date</span>: Thu, 12 Jul 2012 07:12:20 GMT</span><br><span class="line"><span class="attribute">Server</span>: Apache</span><br><span class="line">ï¼œSet-Cookie: sid=1342077140226724; path=/; expires=Wed,10-Oct-12 07:12:20 GMTï¼</span><br><span class="line"><span class="attribute">Content-Type</span>: text/plain; charset=UTF-8</span><br></pre></td></tr></tbody></table></figure><p>â‘¢è¯·æ±‚æŠ¥æ–‡ï¼ˆè‡ªåŠ¨å‘é€ä¿å­˜ç€çš„Cookie ä¿¡æ¯ï¼‰</p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/image/</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: hackr.jp</span><br><span class="line"><span class="attribute">Cookie</span>: sid=1342077140226724</span><br></pre></td></tr></tbody></table></figure><blockquote><p>å…³äºCookie çš„é¦–éƒ¨å­—æ®µ</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808200006.png"></p><p><strong>set-Cookie</strong></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Set-Cookie</span>: status=enable; expires=Tue, 05 Jul 2011 07:26:31 GMT; â‡’</span><br><span class="line">path=/; domain=.hackr.jp;</span><br></pre></td></tr></tbody></table></figure><p><strong>å±æ€§è§£é‡Š</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808200442.png"></p><p><strong>expires å±æ€§</strong></p><p>Cookie çš„expires å±æ€§æŒ‡å®šæµè§ˆå™¨å¯å‘é€Cookie çš„æœ‰æ•ˆæœŸã€‚å½“çœç•¥expires å±æ€§æ—¶ï¼ŒCookieä»…åœ¨æµè§ˆå™¨å…³é—­ä¹‹å‰æœ‰æ•ˆã€‚<br>å¦å¤–ï¼Œä¸€æ—¦Cookie ä»æœåŠ¡å™¨ç«¯å‘é€è‡³å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¸å­˜åœ¨å¯ä»¥æ˜¾å¼åˆ é™¤Cookie çš„æ–¹æ³•ã€‚ä½†å¯é€šè¿‡è¦†ç›–å·²è¿‡æœŸçš„Cookieï¼Œå®ç°å¯¹å®¢æˆ·ç«¯Cookie çš„å®è´¨æ€§åˆ é™¤æ“ä½œã€‚</p><p><strong>path å±æ€§</strong></p><p>Cookie çš„path å±æ€§å¯ç”¨äºé™åˆ¶æŒ‡å®šCookie çš„å‘é€èŒƒå›´çš„æ–‡ä»¶ç›®å½•ã€‚ä¸è¿‡å¦æœ‰åŠæ³•å¯é¿å¼€è¿™é¡¹é™åˆ¶ï¼Œçœ‹æ¥å¯¹å…¶ä½œä¸ºå®‰å…¨æœºåˆ¶çš„æ•ˆæœä¸èƒ½æŠ±æœ‰æœŸå¾…ã€‚</p><p> <strong>domain å±æ€§</strong></p><p>é€šè¿‡Cookie çš„domain å±æ€§æŒ‡å®šçš„åŸŸåå¯åšåˆ°ä¸ç»“å°¾åŒ¹é…ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œ å½“æŒ‡å®š<a href="http://example.com/">http://example.com</a> åï¼Œ é™¤<a href="http://example.com/">http://example.com</a> ä»¥å¤–ï¼Œ<a href="https://link.zhihu.com/?target=http://www.example.com">Example Domain</a>æˆ–www2.example.com ç­‰éƒ½å¯ä»¥å‘é€Cookieã€‚å› æ­¤ï¼Œé™¤äº†é’ˆå¯¹å…·ä½“æŒ‡å®šçš„å¤šä¸ªåŸŸåå‘é€Cookie ä¹‹å¤–ï¼Œä¸æŒ‡å®šdomain å±æ€§æ˜¾å¾—æ›´å®‰å…¨ã€‚</p><p> <strong>secure å±æ€§</strong></p><p>Cookie çš„secure å±æ€§ç”¨äºé™åˆ¶Web é¡µé¢ä»…åœ¨HTTPS å®‰å…¨è¿æ¥æ—¶ï¼Œæ‰å¯ä»¥å‘é€Cookieã€‚å‘é€Cookie æ—¶ï¼ŒæŒ‡å®šsecure å±æ€§çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚<br>Set-Cookie: name=value; secure<br>ä»¥ä¸Šä¾‹å­ä»…å½“åœ¨https ï¼š//<a href="https://link.zhihu.com/?target=http://www.example.com/">Example Domain</a>ï¼ˆHTTPSï¼‰å®‰å…¨è¿æ¥çš„æƒ…å†µä¸‹æ‰ä¼šè¿›è¡ŒCookie çš„å›æ”¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿åŸŸåç›¸åŒæ—¶http : //<a href="https://link.zhihu.com/?target=http://www.example.com/">Example Domain</a>ï¼ˆHTTPï¼‰ ä¹Ÿä¸ä¼šå‘ç”ŸCookie å›æ”¶è¡Œä¸ºã€‚å½“çœç•¥secure å±æ€§æ—¶ï¼Œä¸è®ºHTTP è¿˜æ˜¯HTTPSï¼Œéƒ½ä¼šå¯¹Cookie è¿›è¡Œå›æ”¶ã€‚</p><p> <strong>HttpOnly å±æ€§</strong></p><p>Cookie çš„HttpOnly å±æ€§æ˜¯Cookie çš„æ‰©å±•åŠŸèƒ½ï¼Œå®ƒä½¿JavaScript è„šæœ¬æ— æ³•è·å¾—Cookieã€‚å…¶ä¸»è¦ç›®çš„ä¸ºé˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆCross-sitescriptingï¼ŒXSSï¼‰å¯¹Cookie çš„ä¿¡æ¯çªƒå–ã€‚<br>å‘é€æŒ‡å®šHttpOnly å±æ€§çš„Cookie çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚<br>Set-Cookie: name=value; HttpOnly<br>é€šè¿‡ä¸Šè¿°è®¾ç½®ï¼Œé€šå¸¸ä»Web é¡µé¢å†…è¿˜å¯ä»¥å¯¹Cookie è¿›è¡Œè¯»å–æ“ä½œã€‚ä½†ä½¿ç”¨JavaScript çš„document.cookie å°±æ— æ³•è¯»å–é™„åŠ HttpOnly å±æ€§åçš„Cookie çš„å†…å®¹äº†ã€‚å› æ­¤ï¼Œä¹Ÿå°±æ— æ³•åœ¨XSS ä¸­åˆ©ç”¨JavaScript åŠ«æŒCookie äº†ã€‚<br>è™½ç„¶æ˜¯ç‹¬ç«‹çš„æ‰©å±•åŠŸèƒ½ï¼Œä½†Internet Explorer 6 SP1 ä»¥ä¸Šç‰ˆæœ¬ç­‰å½“ä¸‹çš„ä¸»æµæµè§ˆå™¨éƒ½å·²ç»æ”¯æŒè¯¥æ‰©å±•äº†ã€‚å¦å¤–é¡ºå¸¦ä¸€æï¼Œè¯¥æ‰©å±•å¹¶éæ˜¯ä¸ºäº†é˜²æ­¢XSS è€Œå¼€å‘çš„ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯Session</p></blockquote><p>åœ¨è®¡ç®—æœºä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œåº”ç”¨ä¸­ï¼Œç§°ä¸ºâ€œä¼šè¯æ§åˆ¶â€ã€‚Session å¯¹è±¡å­˜å‚¨ç‰¹å®šç”¨æˆ·ä¼šè¯æ‰€éœ€çš„å±æ€§åŠé…ç½®ä¿¡æ¯ã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºçš„ Web é¡µä¹‹é—´è·³è½¬æ—¶ï¼Œå­˜å‚¨åœ¨ Session å¯¹è±¡ä¸­çš„å˜é‡å°†ä¸ä¼šä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªç”¨æˆ·ä¼šè¯ä¸­ä¸€ç›´å­˜åœ¨ä¸‹å»ã€‚å½“ç”¨æˆ·è¯·æ±‚æ¥è‡ªåº”ç”¨ç¨‹åºçš„ Web é¡µæ—¶ï¼Œå¦‚æœè¯¥ç”¨æˆ·è¿˜æ²¡æœ‰ä¼šè¯ï¼Œåˆ™ Web æœåŠ¡å™¨å°†è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª Session å¯¹è±¡ã€‚å½“ä¼šè¯è¿‡æœŸæˆ–è¢«æ”¾å¼ƒåï¼ŒæœåŠ¡å™¨å°†ç»ˆæ­¢è¯¥ä¼šè¯ã€‚Session å¯¹è±¡æœ€å¸¸è§çš„ä¸€ä¸ªç”¨æ³•å°±æ˜¯å­˜å‚¨ç”¨æˆ·çš„é¦–é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·æŒ‡æ˜ä¸å–œæ¬¢æŸ¥çœ‹å›¾å½¢ï¼Œå°±å¯ä»¥å°†è¯¥ä¿¡æ¯å­˜å‚¨åœ¨ Session å¯¹è±¡ä¸­ã€‚</p><blockquote><p>é€šè¿‡Cookieæ¥ç®¡ç†Session</p></blockquote><p>åŸºäºè¡¨å•è®¤è¯çš„æ ‡å‡†è§„èŒƒå°šæœªæœ‰å®šè®ºï¼Œä¸€èˆ¬ä¼šä½¿ç”¨Cookie æ¥ç®¡ç†Sessionï¼ˆä¼šè¯ï¼‰ã€‚<br>åŸºäºè¡¨å•è®¤è¯æœ¬èº«æ˜¯é€šè¿‡æœåŠ¡å™¨ç«¯çš„Web åº”ç”¨ï¼Œå°†å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ç”¨æˆ·ID å’Œå¯†ç ä¸ä¹‹å‰ç™»å½•è¿‡çš„ä¿¡æ¯åšåŒ¹é…æ¥è¿›è¡Œè®¤è¯çš„ã€‚<br>ä½†é‰´äºHTTP æ˜¯æ— çŠ¶æ€åè®®ï¼Œä¹‹å‰å·²è®¤è¯æˆåŠŸçš„ç”¨æˆ·çŠ¶æ€æ— æ³•é€šè¿‡åè®®å±‚é¢ä¿å­˜ä¸‹æ¥ã€‚å³ï¼Œæ— æ³•å®ç°çŠ¶æ€ç®¡ç†ï¼Œå› æ­¤å³ä½¿å½“è¯¥ç”¨æˆ·ä¸‹ä¸€æ¬¡ç»§ç»­è®¿é—®ï¼Œä¹Ÿæ— æ³•åŒºåˆ†ä»–ä¸å…¶ä»–çš„ç”¨æˆ·ã€‚äºæ˜¯æˆ‘ä»¬ä¼šä½¿ç”¨Cookie æ¥ç®¡ç†Sessionï¼Œä»¥å¼¥è¡¥HTTP åè®®ä¸­ä¸å­˜åœ¨çš„çŠ¶æ€ç®¡ç†åŠŸèƒ½ã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808203421.png"></p><p>Session ç®¡ç†åŠCookie çŠ¶æ€ç®¡ç†</p><ul><li>æ­¥éª¤ä¸€ï¼šå®¢æˆ·ç«¯æŠŠç”¨æˆ·ID å’Œå¯†ç ç­‰ç™»å½•ä¿¡æ¯æ”¾å…¥æŠ¥æ–‡çš„å®ä½“éƒ¨åˆ†ï¼Œé€šå¸¸æ˜¯ä»¥POST æ–¹æ³•æŠŠè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ã€‚è€Œè¿™æ—¶ï¼Œä¼šä½¿ç”¨HTTPS é€šä¿¡æ¥è¿›è¡ŒHTML è¡¨å•ç”»é¢çš„æ˜¾ç¤ºå’Œç”¨æˆ·è¾“å…¥æ•°æ®çš„å‘é€ã€‚</li><li>æ­¥éª¤äºŒï¼šæœåŠ¡å™¨ä¼šå‘æ”¾ç”¨ä»¥è¯†åˆ«ç”¨æˆ·çš„Session IDã€‚é€šè¿‡éªŒè¯ä»å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ç™»å½•ä¿¡æ¯è¿›è¡Œèº«ä»½è®¤è¯ï¼Œç„¶åæŠŠç”¨æˆ·çš„è®¤è¯çŠ¶æ€ä¸Session ID ç»‘å®šåè®°å½•åœ¨æœåŠ¡å™¨ç«¯ã€‚<br>å‘å®¢æˆ·ç«¯è¿”å›å“åº”æ—¶ï¼Œä¼šåœ¨é¦–éƒ¨å­—æ®µSet-Cookie å†…å†™å…¥Session IDï¼ˆå¦‚PHPSESSID=028a8câ€¦ï¼‰ã€‚<br>ä½ å¯ä»¥æŠŠSession ID æƒ³è±¡æˆä¸€ç§ç”¨ä»¥åŒºåˆ†ä¸åŒç”¨æˆ·çš„ç­‰ä½å·ã€‚ç„¶è€Œï¼Œå¦‚æœSession ID è¢«ç¬¬ä¸‰æ–¹ç›—èµ°ï¼Œå¯¹æ–¹å°±å¯ä»¥ä¼ªè£…æˆä½ çš„èº«ä»½è¿›è¡Œæ¶æ„æ“ä½œäº†ã€‚å› æ­¤å¿…é¡»é˜²æ­¢Session ID è¢«ç›—ï¼Œæˆ–è¢«çŒœå‡ºã€‚ä¸ºäº†åšåˆ°è¿™ç‚¹ï¼ŒSession ID åº”ä½¿ç”¨éš¾ä»¥æ¨æµ‹çš„å­—ç¬¦ä¸²ï¼Œä¸”æœåŠ¡å™¨ç«¯ä¹Ÿéœ€è¦è¿›è¡Œæœ‰æ•ˆæœŸçš„ç®¡ç†ï¼Œä¿è¯å…¶å®‰å…¨æ€§ã€‚<br>å¦å¤–ï¼Œä¸ºå‡è½»è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰é€ æˆçš„æŸå¤±ï¼Œå»ºè®®äº‹å…ˆåœ¨Cookie å†…åŠ ä¸Šhttponly å±æ€§ã€‚</li><li>æ­¥éª¤ä¸‰ï¼šå®¢æˆ·ç«¯æ¥æ”¶åˆ°ä»æœåŠ¡å™¨ç«¯å‘æ¥çš„Session ID åï¼Œä¼šå°†å…¶ä½œä¸ºCookie ä¿å­˜åœ¨æœ¬åœ°ã€‚ä¸‹æ¬¡å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å‘é€Cookieï¼Œæ‰€ä»¥Session ID ä¹Ÿéšä¹‹å‘é€åˆ°æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ç«¯å¯é€šè¿‡éªŒè¯æ¥æ”¶åˆ°çš„Session ID è¯†åˆ«ç”¨æˆ·å’Œå…¶è®¤è¯çŠ¶æ€ã€‚</li></ul><h3 id="ç®€å•æµ‹è¯•"><a href="#ç®€å•æµ‹è¯•" class="headerlink" title="ç®€å•æµ‹è¯•"></a>ç®€å•æµ‹è¯•</h3><p>é¡µé¢</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>$Title$<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Testè¡¨å•<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/test"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"a"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"b"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>åç«¯æˆ‘ä»¬æœ‰è¿™ä¹ˆä¿©ä¸ªæ¥å£</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@RequestMapping("/test")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mytest</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>{</span><br><span class="line">        HttpSession session = request.getSession();</span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        System.out.println(request.getRemoteAddr());</span><br><span class="line">        System.out.println(request.getParameter(<span class="string">"a"</span>));</span><br><span class="line">        System.out.println(request.getMethod());</span><br><span class="line">        System.out.println(request.getQueryString());</span><br><span class="line">        System.out.println(Arrays.toString(request.getCookies()));</span><br><span class="line">        System.out.println(request.getSession());</span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">        response.getWriter().print(<span class="string">"hello world!"</span>);</span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"user"</span>,<span class="string">"123123"</span>);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">        response.getWriter().close();</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"><span class="comment">//è¾“å‡º-------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">GET</span><br><span class="line">a=<span class="number">1</span>&amp;b=<span class="number">2</span></span><br><span class="line">[javax.servlet.http.Cookie@182e275a, javax.servlet.http.Cookie@5028c586, javax.servlet.http.Cookie@1653a78a, javax.servlet.http.Cookie@6ed70ac5, javax.servlet.http.Cookie@72af4b2]</span><br><span class="line">org.apache.catalina.session.StandardSessionFacade@<span class="number">11380524</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>å¯åŠ¨æœåŠ¡ï¼Œæˆ‘ä»¬é¦–å…ˆè®¿é—®/testï¼Œæ§åˆ¶å°æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°</p><p>è¯·æ±‚æŠ¥æ–‡ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚å‚æ•°ï¼Œurlä¸Šï¼Œè¯·æ±‚å¤´ä¸­è‡ªåŠ¨æºå¸¦ä¿å­˜çš„æ‰€æœ‰cookie</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808202412.png"></p><p>å†çœ‹çœ‹å“åº”å¤´ï¼Œæˆ‘ä»¬æœ‰ç»™ä»–è®¾ç½®ä¸€ä¸ªcookieï¼Œçœ‹çœ‹æ˜¯å¦æ¥åˆ°ï¼Œå¯ä»¥çœ‹åˆ°æ ¼å¼åŒ–åçš„å“åº”å¤´ä¸­æ˜¯æœ‰æˆ‘ä»¬è®¾ç½®çš„cookieçš„</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210808202803.png"></p><p>å†çœ‹çœ‹æµè§ˆå™¨cookieä¿¡æ¯</p><img src="https://gitee.com/rain-sky/images/raw/master/20210808202941.png" style="zoom:67%;"><blockquote><p>æ€è€ƒä¸€ä¸‹ï¼Œæœ‰äº†cookieä¹‹åæˆ‘ä»¬å¯ä»¥å¹²ä»€ä¹ˆï¼Ÿ(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»*)</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;http&quot;&gt;&lt;a href=&quot;#http&quot; class=&quot;headerlink&quot; title=&quot;http&quot;&gt;&lt;/a&gt;http&lt;/h2&gt;&lt;h3 id=&quot;httpæŠ¥æ–‡&quot;&gt;&lt;a href=&quot;#httpæŠ¥æ–‡&quot; class=&quot;headerlink&quot; title=&quot;httpæŠ¥</summary>
      
    
    
    
    
    <category term="web" scheme="https://rain-sky.github.io/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>mybatis plus</title>
    <link href="https://rain-sky.github.io/2021/08/08/mybatis-plus/"/>
    <id>https://rain-sky.github.io/2021/08/08/mybatis-plus/</id>
    <published>2021-08-08T00:54:04.000Z</published>
    <updated>2021-08-10T03:52:59.424Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æŒ‡å¼•ï¼š<a href="https://mp.baomidou.com/guide/">https://mp.baomidou.com/guide/</a></p></blockquote><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>MyBatis-Plus (opens new window)ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª MyBatis (opens new window)çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p><p><strong>æ¡†æ¶ç»“æ„</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210809100927.jpeg"></p><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><h3 id="å¿«é€Ÿhello-worldï¼"><a href="#å¿«é€Ÿhello-worldï¼" class="headerlink" title="å¿«é€Ÿhello worldï¼"></a>å¿«é€Ÿhello worldï¼</h3><blockquote><p>springbootä¸­ä½¿ç”¨mybatis-plus</p></blockquote><p>åŸºæœ¬é¡¹ç›®ç»“æ„ï¼Œå¯åŠ¨ç±»åŠ ä¸Š@MapperScan(â€œcom.chen.mapperâ€)</p><img src="https://gitee.com/rain-sky/images/raw/master/20210809145640.png" style="zoom: 67%;"><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> maven</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¦‚æœéœ€è¦è¿æ¥MySQLå†å¯¼å…¥ä»¥ä¸‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> application.propertise</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment"># æ­¤å¤„ä½¿ç”¨äº†MySQL8çš„é©±åŠ¨ï¼Œæ‰€ä»¥urléœ€è¦å¸¦ä¸Šæ—¶åŒºè®¾ç½®</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis_plus?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;timeZone=UTC</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123123</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>3âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0033-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> pojo</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//--------------å¯¹åº”è¡¨------------------------------</span></span><br><span class="line">CREATE TABLE user</span><br><span class="line">(</span><br><span class="line"><span class="function">id <span class="title">BIGINT</span><span class="params">(<span class="number">20</span>)</span> NOT NULL COMMENT 'ä¸»é”®ID',</span></span><br><span class="line"><span class="function">name <span class="title">VARCHAR</span><span class="params">(<span class="number">30</span>)</span> NULL DEFAULT NULL COMMENT 'å§“å',</span></span><br><span class="line"><span class="function">age <span class="title">INT</span><span class="params">(<span class="number">11</span>)</span> NULL DEFAULT NULL COMMENT 'å¹´é¾„',</span></span><br><span class="line"><span class="function">email <span class="title">VARCHAR</span><span class="params">(<span class="number">50</span>)</span> NULL DEFAULT NULL COMMENT 'é‚®ç®±',</span></span><br><span class="line"><span class="function">PRIMARY <span class="title">KEY</span> <span class="params">(id)</span></span></span><br><span class="line"><span class="function">)</span>;</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>4âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0034-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> mapper</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>{</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ’‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f487.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>åŸºæœ¬å®Œæˆï¼Œæµ‹è¯•çœ‹çœ‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">//å‚æ•°wrapperä¸ºæ¡ä»¶æ„é€ å™¨</span></span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(<span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">for</span> (User user : list) {</span><br><span class="line">        System.out.println(user.toString());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ’¦</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a6.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> è¾“å‡ºæƒ…å†µ</p><figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">User(id=1, name=Jone, age=18, email=test1@baomidou.com)</span><br><span class="line">User(id=2, name=Jack, age=20, email=test2@baomidou.com)</span><br><span class="line">User(id=3, name=Tom, age=28, email=test3@baomidou.com)</span><br><span class="line">User(id=4, name=Sandy, age=21, email=test4@baomidou.com)</span><br><span class="line">User(id=5, name=Billie, age=24, email=test5@baomidou.com)</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ”š</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f51a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è‡³æ­¤ä¸€ä¸ªåŸºæœ¬çš„hello worldå·²ç»å®Œæˆï¼Œæˆ‘ä»¬ä¸ºå†™mybatis.xmlï¼Œä¹Ÿæœªç¼–å†™ä»»ä½•ä¸€ä¸ªmapper.xmlï¼Œå¦‚æ­¤ç®€å•æˆ‘ä»¬ä¾¿å®Œæˆäº†ä¸€ä¸ªåŸºç¡€çš„crudç¨‹åºã€‚</p><h3 id="é…ç½®æ—¥å¿—"><a href="#é…ç½®æ—¥å¿—" class="headerlink" title="é…ç½®æ—¥å¿—"></a>é…ç½®æ—¥å¿—</h3><p>ä½¿ç”¨æ ‡å‡†æ—¥å¿—è¾“å‡ºï¼Œæƒ³ä½¿ç”¨log4jéœ€è¦å¯¼å…¥ä¾èµ–</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹ä¸Šè¿°hello world ç¨‹åºçš„æ—¥å¿—è¾“å‡ºï¼Œå¯ä»¥çœ‹åˆ°åˆ›å»ºsqlsessionï¼Œä½¿ç”¨é»˜è®¤hikariæ•°æ®æºï¼Œjdbcè¿æ¥ï¼ŒæŸ¥è¯¢sqlï¼ŒæŸ¥è¯¢æƒ…å†µ</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Creating a new SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73fc518f] was not registered for synchronization because synchronization is not active</span><br><span class="line">JDBC Connection [HikariProxyConnection@397857830 wrapping com.mysql.cj.jdbc.ConnectionImpl@5580d62f] will not be managed by Spring</span><br><span class="line">==&gt;  Preparing: SELECT id,name,age,email FROM user </span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: id, name, age, email</span><br><span class="line">&lt;==        Row: 1, Jone, 18, test1@baomidou.com</span><br><span class="line">&lt;==        Row: 2, Jack, 20, test2@baomidou.com</span><br><span class="line">&lt;==        Row: 3, Tom, 28, test3@baomidou.com</span><br><span class="line">&lt;==        Row: 4, Sandy, 21, test4@baomidou.com</span><br><span class="line">&lt;==        Row: 5, Billie, 24, test5@baomidou.com</span><br><span class="line">&lt;==      Total: 5</span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73fc518f]</span><br><span class="line">User(id=1, name=Jone, age=18, email=test1@baomidou.com)</span><br><span class="line">User(id=2, name=Jack, age=20, email=test2@baomidou.com)</span><br><span class="line">User(id=3, name=Tom, age=28, email=test3@baomidou.com)</span><br><span class="line">User(id=4, name=Sandy, age=21, email=test4@baomidou.com)</span><br><span class="line">User(id=5, name=Billie, age=24, email=test5@baomidou.com)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h3><blockquote><p>å¢åŠ </p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertTest</span><span class="params">()</span></span>{</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setName(<span class="string">"rain"</span>);</span><br><span class="line">    user.setEmail(<span class="string">"1816046563@qq.com"</span>);</span><br><span class="line">    <span class="keyword">int</span> insert = userMapper.insert(user);</span><br><span class="line">    System.out.println(insert);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>â˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2601.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è¾“å‡º</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: INSERT INTO user ( id, name, age, email ) VALUES ( ?, ?, ?, ? ) </span><br><span class="line">==&gt; Parameters: 1424633039211765761(Long), rain(String), 18(Integer), 1816046563@qq.com(String)</span><br><span class="line">&lt;==    Updates: 1</span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d73ead]</span><br><span class="line">1</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æˆ‘ä»¬æ²¡æœ‰ç»™ä»–è®¾ç½®ä¸»é”®IDï¼Œä»–è‡ªå·±ç”Ÿæˆäº†ä¸€ä¸ªï¼ˆlongå‹ï¼‰ï¼Œè¿™æ˜¯å’‹æ¥çš„</p><p><span class="github-emoji"><span>ğŸ’</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f481.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç­”æ¡ˆæ˜¯é›ªèŠ±ç®—æ³•ç”Ÿæˆ</p><p>åˆ†å¸ƒå¼å”¯ä¸€IDç”Ÿæˆæ³•ï¼š</p><p>æ•°æ®åº“è‡ªå¢å­—æ®µï¼Œ UUIDï¼Œredisç”Ÿæˆï¼Œé›ªèŠ±ç®—æ³•</p><blockquote><p>æ›´æ–°</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">uptateTest</span><span class="params">()</span></span>{</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1424633039211765761L</span>);</span><br><span class="line">    user.setName(<span class="string">"snow"</span>);</span><br><span class="line">    <span class="keyword">int</span> i = userMapper.updateById(user);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ’¦</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a6.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è¾“å‡º</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: UPDATE user SET name=? WHERE id=? </span><br><span class="line">==&gt; Parameters: snow(String), 1424633039211765761(Long)</span><br><span class="line">&lt;==    Updates: 1</span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73fc518f]</span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ…°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f170.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¯ä»¥çœ‹åˆ°æ ¹æ®æ¡ä»¶è‡ªåŠ¨æ‹¼æ¥äº†SQL</p><p>å¯ä»¥çœ‹åˆ°ä¹‹å‰å¢åŠ çš„ç”¨æˆ·çš„åç§°å·²ç»è¢«ä¿®æ”¹</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210809155340.png"></p><blockquote><p>æŸ¥è¯¢æ“ä½œ</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢æµ‹è¯•,æ‰¹é‡æŸ¥è¯¢</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectByBathId</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢1ï¼Œ2ï¼Œ3ï¼Œ4å·ç”¨æˆ·</span></span><br><span class="line">    List&lt;User&gt; list = userMapper.selectBatchIds(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br><span class="line">    <span class="keyword">for</span> (User user : list) {</span><br><span class="line">        System.out.println(user.toString());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">//ä½¿ç”¨mapæ–¹å¼çš„æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectByMap</span><span class="params">()</span></span>{</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">"name"</span>,<span class="string">"kamisato"</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectByMap(map);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ“ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4c3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> åˆ†é¡µæŸ¥è¯¢</p><h3 id="ä¹è§‚é”é…ç½®"><a href="#ä¹è§‚é”é…ç½®" class="headerlink" title="ä¹è§‚é”é…ç½®"></a>ä¹è§‚é”é…ç½®</h3><p><a href="https://www.jianshu.com/p/5a081ff5de58">æ–‡ç« æ¨è</a></p><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ‚²è§‚é”ï¼šæ€»æ˜¯è®¤ä¸ºä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¸Šé”</p><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¹è§‚é”ï¼šæ€»æ˜¯è®¤ä¸ºä¸ä¼šå‡ºé—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¸ä¸Šé”</p><p>é€šè¿‡ä¹è§‚é”+è‡ªæ—‹çš„æ–¹å¼ï¼Œè§£å†³æ•°æ®æ›´æ–°çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè€Œä¸”é”ç²’åº¦æ¯”äº’æ–¥é”ä½ï¼Œå¹¶å‘æ€§èƒ½å¥½ã€‚</p><p>ä¹è§‚é”æœºåˆ¶ï¼š</p><ol><li>æŠ½å‡ºè®°å½•ï¼Œè·å–å½“å‰version</li><li>æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šversion</li><li>æ‰§è¡Œæ›´æ–°æ—¶ï¼Œset version where version = oldVersion</li><li>versionç‰ˆæœ¬ä¸ç›¸é…ï¼Œæ›´æ–°å¤±è´¥</li></ol><blockquote><p>ä¹è§‚é”çš„å®ç°æ–¹å¼å¯ä»¥æ˜¯åœ¨è®°å½•ä¸­æ·»åŠ ä¸€ä¸ªversionå­—æ®µï¼Œåœ¨æ¯æ¬¡æ›´æ–°å‰è·å–è¯¥ç‰ˆæœ¬å­—æ®µï¼Œæ›´æ–°æ—¶æ¯”å¯¹ç‰ˆæœ¬å­—æ®µï¼Œå¦‚æœæ›´æ–°æˆåŠŸç‰ˆæœ¬å­—æ®µ+1ï¼Œè¿™é‡Œä»‹ç»MPçš„ä¹è§‚é”å®ç°æ–¹å¼</p></blockquote><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>userè¡¨æ·»åŠ versionå­—æ®µï¼Œintå‹ï¼Œé»˜è®¤å€¼ä¸º1</p><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ³¨å…¥ä¹è§‚é”æ’ä»¶</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan("com.chen.mapper")</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ—§ç‰ˆ,mybatis3.0.5ç‰ˆæœ¬æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OptimisticLockerInterceptor <span class="title">optimisticLockerInterceptor</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> OptimisticLockerInterceptor();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°ç‰ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//    @Bean</span></span><br><span class="line"><span class="comment">//    public MybatisPlusInterceptor mybatisPlusInterceptor() {</span></span><br><span class="line"><span class="comment">//        MybatisPlusInterceptor mybatisPlusInterceptor = new MybatisPlusInterceptor();</span></span><br><span class="line"><span class="comment">//        mybatisPlusInterceptor.addInnerInterceptor(new OptimisticLockerInnerInterceptor());</span></span><br><span class="line"><span class="comment">//        return mybatisPlusInterceptor;</span></span><br><span class="line"><span class="comment">//    }</span></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>3âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0033-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>useræ·»åŠ versionå­—æ®µå¹¶åŠ ä¸Š@Version</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="meta">@TableId(type = IdType.ID_WORKER)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">...</span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> version;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>4âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0034-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æµ‹è¯•ï¼Œä¿®æ”¹ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ï¼Œæ¨¡æ‹Ÿæ’é˜Ÿå¤šçº¿ç¨‹æ“ä½œ</p><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ³¨æ„ï¼Œversionåˆå§‹å€¼ä¸èƒ½ä¸ºnull</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">versionTest</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿçº¿ç¨‹1ä¿®æ”¹IDä¸º1çš„ç”¨æˆ·æ•°æ®</span></span><br><span class="line">    User user1 = userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    user1.setEmail(<span class="string">"123@qq.com"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿçº¿ç¨‹2ä¸­é€”ä¿®æ”¹IDä¸º1çš„ç”¨æˆ·æ•°æ®</span></span><br><span class="line">    User user2 = userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    user2.setEmail(<span class="string">"321@qq.com"</span>);</span><br><span class="line">    <span class="keyword">int</span> i = userMapper.updateById(user2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿçº¿ç¨‹2å·²ç»æ”¹å˜äº†IDä¸º1ç”¨æˆ·æ•°æ®åï¼Œçº¿ç¨‹1å†æäº¤æ•°æ®</span></span><br><span class="line">    <span class="keyword">int</span> j = userMapper.updateById(user1);</span><br><span class="line">    System.out.println(<span class="string">"user2æäº¤è¿”å›ï¼š"</span>+j+<span class="string">"\n"</span>+<span class="string">"user1æäº¤è¿”å›ï¼š"</span>+i);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ’¦</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a6.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è¾“å‡ºï¼Œå¯ä»¥çœ‹åˆ°æ‰§è¡Œæ›´æ–°ä¼šå¸¦ä¸Šversionå­—æ®µï¼Œç”±è¾“å‡ºå¯ä»¥çŸ¥é“usr1æ›´æ–°å¤±è´¥</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//USER2å…ˆæäº¤</span></span><br><span class="line">==&gt;  Preparing: UPDATE user SET name=?, age=?, email=?, gmt_modified=?, version=? WHERE id=? AND version=? </span><br><span class="line">==&gt; Parameters: Jone(String), <span class="number">18</span>(Integer), <span class="number">321</span><span class="meta">@qq</span>.com(String), <span class="number">2021</span>-08-<span class="number">10</span> <span class="number">11</span>:<span class="number">29</span>:<span class="number">09.634</span>(Timestamp), <span class="number">3</span>(Integer), <span class="number">1</span>(Long), <span class="number">1</span>(Integer)</span><br><span class="line">&lt;==    Updates: <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">==&gt;  Preparing: UPDATE user SET name=?, age=?, email=?, gmt_modified=?, version=? WHERE id=? AND version=? </span><br><span class="line">==&gt; Parameters: Jone(String), <span class="number">18</span>(Integer), <span class="number">123</span><span class="meta">@qq</span>.com(String), <span class="number">2021</span>-08-<span class="number">10</span> <span class="number">11</span>:<span class="number">29</span>:<span class="number">09.743</span>(Timestamp), <span class="number">3</span>(Integer), <span class="number">1</span>(Long), <span class="number">1</span>(Integer)    <span class="comment">//USER2æäº¤åæ­¤æ—¶versionå·²ç»æ˜¯2äº†,æ•…ç‰ˆæœ¬æ¯”å¯¹å¤±è´¥</span></span><br><span class="line">&lt;==    Updates: <span class="number">0</span></span><br><span class="line">user2æäº¤è¿”å›ï¼š<span class="number">1</span></span><br><span class="line">user1æäº¤è¿”å›ï¼š<span class="number">0</span></span><br></pre></td></tr></tbody></table></figure><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><h3 id="è‡ªåŠ¨å¡«å……"><a href="#è‡ªåŠ¨å¡«å……" class="headerlink" title="è‡ªåŠ¨å¡«å……"></a>è‡ªåŠ¨å¡«å……</h3><p><span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ä¸€èˆ¬æ¥è¯´æ‰€æœ‰çš„æ•°æ®åº“è¡¨éƒ½éœ€è¦æœ‰gmt_createï¼Œgmt_modifiedä¸¤ä¸ªå­—æ®µï¼Œåˆ›å»ºæ—¶é—´ï¼Œä¿®æ”¹æ—¶é—´ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›æ‰‹åŠ¨å»è®¾ç½®ä»–ï¼Œå¸Œæœ›æœ‰è‡ªåŠ¨åŒ–çš„æ“ä½œèƒ½å¤Ÿå¡«å……ä»–ã€‚</p><blockquote><p>æ•°æ®åº“çº§åˆ«</p></blockquote><p>åœ¨æˆ‘ä»¬ä¸Šè¿°userè¡¨ä¸­å¢åŠ è¿™ä¸¤ä¸ªå­—æ®µï¼Œé»˜è®¤å€¼ä¸ºå½“å‰æ—¶é—´æˆ³</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210809162150.png"></p><p><span class="github-emoji"><span>â­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/23ed.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>åŒæ—¶æ›´æ–°å®ä½“ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="meta">@TableId(type = IdType.ID_WORKER)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Date gmtCreate;</span><br><span class="line">    <span class="keyword">private</span> Date gmtModified;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æµ‹è¯•ä¸€ä¸ªæ’å…¥æ“ä½œ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertTest</span><span class="params">()</span></span>{</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setName(<span class="string">"rain"</span>);</span><br><span class="line">    user.setEmail(<span class="string">"1816046563@qq.com"</span>);</span><br><span class="line">    <span class="keyword">int</span> insert = userMapper.insert(user);</span><br><span class="line">    System.out.println(insert);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ’¦</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a6.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è¾“å‡º</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: INSERT INTO user ( id, name, age, email ) VALUES ( ?, ?, ?, ? ) </span><br><span class="line">==&gt; Parameters: 1424648512569647106(Long), rain(String), 18(Integer), 1816046563@qq.com(String)</span><br><span class="line">&lt;==    Updates: 1</span><br><span class="line">Closing non transactional SqlSession </span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ™ˆ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f648.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>çœ‹çœ‹æ•°æ®åº“</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210809163013.png"></p><blockquote><p>ä»£ç çº§åˆ«</p></blockquote><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å°†ä¸Šè¿°æ•°æ®åº“çš„é»˜è®¤å€¼ä»¥åŠæ›´æ–°æ“ä½œåˆ é™¤æ‰</p><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¢åŠ æ³¨è§£@TableFieldï¼Œè¯¦ç»†ç”¨æ³•è§æ³¨è§£éƒ¨åˆ†</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Date gmtCreate;</span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> Date gmtModified;</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>3âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0033-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è‡ªå®šä¹‰æ³¨è§£å¤„ç†å™¨ï¼Œæ³¨å…¥IOCå®¹å™¨</p><p><a href="https://mp.baomidou.com/guide/auto-fill-metainfo.html">é˜…è¯»</a></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>{</span><br><span class="line">    <span class="comment">//æ’å…¥æ—¶çš„ç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>{</span><br><span class="line">        log.info(<span class="string">"å¼€å§‹å¤„ç†æ’å…¥å¡«å……æ“ä½œ..."</span>);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"gmtCreate"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"gmtModified"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//æ›´æ–°æ—¶çš„ç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>{</span><br><span class="line">        log.info(<span class="string">"å¼€å§‹å¤„ç†æ›´æ–°å¡«å……æ“ä½œ..."</span>);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">"gmtModified"</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>4âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0034-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æµ‹è¯•æ’å…¥ä¸æ›´æ–°æ“ä½œ</p><p>æ’å…¥æ“ä½œ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertTest</span><span class="params">()</span></span>{</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setName(<span class="string">"kamisato"</span>);</span><br><span class="line">    user.setEmail(<span class="string">"181604663@qq.com"</span>);</span><br><span class="line">    userMapper.insert(user);</span><br><span class="line">}</span><br><span class="line"><span class="comment">//è¾“å‡ºå¦‚ä¸‹---------------------------</span></span><br><span class="line">==&gt;  Preparing: <span class="function">INSERT INTO <span class="title">user</span> <span class="params">( id, name, age, email, gmt_create, gmt_modified )</span> <span class="title">VALUES</span> <span class="params">( ?, ?, ?, ?, ?, ? )</span> </span></span><br><span class="line"><span class="function"></span>==&gt; Parameters: <span class="number">1424658513090609154</span>(Long), kamisato(String), <span class="number">18</span>(Integer), <span class="number">181604663</span><span class="meta">@qq</span>.com(String), <span class="number">2021</span>-08-09 <span class="number">17</span>:<span class="number">07</span>:<span class="number">13.053</span>(Timestamp), <span class="number">2021</span>-08-09 <span class="number">17</span>:<span class="number">07</span>:<span class="number">13.054</span>(Timestamp)</span><br><span class="line">&lt;==    Updates: <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹æ•°æ®åº“ï¼Œå¯ä»¥çœ‹åˆ°åœ¨æ’å…¥çš„æ—¶å€™ä¸¤ä¸ªä¸–ç•Œéƒ½è¢«å¡«å……ä¸Šäº†</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210809170747.png"></p><p>æ›´æ–°æ“ä½œ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">uptateTest</span><span class="params">()</span></span>{</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1424658513090609154L</span>);</span><br><span class="line">    user.setName(<span class="string">"kamisato"</span>);</span><br><span class="line">    user.setEmail(<span class="string">"123456@qq.com"</span>);</span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line">}</span><br><span class="line"><span class="comment">//è¾“å‡ºå¦‚ä¸‹-----------------------------</span></span><br><span class="line">==&gt;  Preparing: UPDATE user SET name=?, email=?, gmt_modified=? WHERE id=? </span><br><span class="line">==&gt; Parameters: kamisato(String), <span class="number">123456</span><span class="meta">@qq</span>.com(String), <span class="number">2021</span>-08-09 <span class="number">17</span>:<span class="number">10</span>:<span class="number">55.83</span>(Timestamp), <span class="number">1424658513090609154</span>(Long)</span><br><span class="line">&lt;==    Updates: <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹æ•°æ®åº“ï¼Œå¯ä»¥çœ‹åˆ°åœ¨æ›´æ–°çš„æ—¶å€™ä¿®æ”¹æ—¶é—´æ›´æ–°äº†</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210809171137.png"></p><p><span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è‡³æ­¤ç®€å•çš„è‡ªåŠ¨å¡«å……åŠŸèƒ½å‘Šä¸€æ®µè½~</p><h3 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h3><h4 id="TableName"><a href="#TableName" class="headerlink" title="@TableName"></a>@TableName</h4><ul><li>æè¿°ï¼šè¡¨åæ³¨è§£</li></ul><table><thead><tr><th align="center">å±æ€§</th><th align="center">ç±»å‹</th><th align="center">å¿…é¡»æŒ‡å®š</th><th align="center">é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td align="center">value</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td>è¡¨å</td></tr><tr><td align="center">schema</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td>schema</td></tr><tr><td align="center">keepGlobalPrefix</td><td align="center">boolean</td><td align="center">å¦</td><td align="center">false</td><td>æ˜¯å¦ä¿æŒä½¿ç”¨å…¨å±€çš„ tablePrefix çš„å€¼(å¦‚æœè®¾ç½®äº†å…¨å±€ tablePrefix ä¸”è‡ªè¡Œè®¾ç½®äº† value çš„å€¼)</td></tr><tr><td align="center">resultMap</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td>xml ä¸­ resultMap çš„ id</td></tr><tr><td align="center">autoResultMap</td><td align="center">boolean</td><td align="center">å¦</td><td align="center">false</td><td>æ˜¯å¦è‡ªåŠ¨æ„å»º resultMap å¹¶ä½¿ç”¨(å¦‚æœè®¾ç½® resultMap åˆ™ä¸ä¼šè¿›è¡Œ resultMap çš„è‡ªåŠ¨æ„å»ºå¹¶æ³¨å…¥)</td></tr><tr><td align="center">excludeProperty</td><td align="center">String[]</td><td align="center">å¦</td><td align="center">{}</td><td>éœ€è¦æ’é™¤çš„å±æ€§å(@since 3.3.1)</td></tr></tbody></table><h4 id="TableId"><a href="#TableId" class="headerlink" title="@TableId"></a>@TableId</h4><p>æè¿°ï¼šä¸»é”®æ³¨è§£</p><table><thead><tr><th align="center">å±æ€§</th><th align="center">ç±»å‹</th><th align="center">å¿…é¡»æŒ‡å®š</th><th align="center">é»˜è®¤å€¼</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">value</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td align="center">ä¸»é”®å­—æ®µå</td></tr><tr><td align="center">type</td><td align="center">Enum</td><td align="center">å¦</td><td align="center">IdType.NONE</td><td align="center">ä¸»é”®ç±»å‹</td></tr></tbody></table><p>å¯é€‰å€¼</p><table><thead><tr><th align="center">å€¼</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">AUTO</td><td align="center">æ•°æ®åº“IDè‡ªå¢</td></tr><tr><td align="center">NONE</td><td align="center">æ— çŠ¶æ€,è¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹(æ³¨è§£é‡Œç­‰äºè·Ÿéšå…¨å±€,å…¨å±€é‡Œçº¦ç­‰äº INPUT)</td></tr><tr><td align="center">INPUT</td><td align="center">insertå‰è‡ªè¡Œsetä¸»é”®å€¼</td></tr><tr><td align="center">ASSIGN_ID</td><td align="center">åˆ†é…ID(ä¸»é”®ç±»å‹ä¸ºNumber(Longå’ŒInteger)æˆ–String)(since 3.3.0),ä½¿ç”¨æ¥å£<code>IdentifierGenerator</code>çš„æ–¹æ³•<code>nextId</code>(é»˜è®¤å®ç°ç±»ä¸º<code>DefaultIdentifierGenerator</code>é›ªèŠ±ç®—æ³•)</td></tr><tr><td align="center">ASSIGN_UUID</td><td align="center">åˆ†é…UUID,ä¸»é”®ç±»å‹ä¸ºString(since 3.3.0),ä½¿ç”¨æ¥å£<code>IdentifierGenerator</code>çš„æ–¹æ³•<code>nextUUID</code>(é»˜è®¤defaultæ–¹æ³•)</td></tr><tr><td align="center">ID_WORKER</td><td align="center">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ID é•¿æ•´å‹ç±»å‹(please use <code>ASSIGN_ID</code>)</td></tr><tr><td align="center">UUID</td><td align="center">32ä½UUIDå­—ç¬¦ä¸²(please use <code>ASSIGN_UUID</code>)</td></tr><tr><td align="center">ID_WORKER_STR</td><td align="center">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ID å­—ç¬¦ä¸²ç±»å‹(please use <code>ASSIGN_ID</code>)</td></tr></tbody></table><blockquote><p>ä½¿ç”¨</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="comment">//è®¾ç½®ç”ŸæˆIDç±»å‹</span></span><br><span class="line">    <span class="meta">@TableId(type = IdType.ID_WORKER)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="TableField"><a href="#TableField" class="headerlink" title="@TableField"></a>@TableField</h4><ul><li>æè¿°ï¼šå­—æ®µæ³¨è§£(éä¸»é”®)</li></ul><table><thead><tr><th align="center">å±æ€§</th><th align="center">ç±»å‹</th><th align="center">å¿…é¡»æŒ‡å®š</th><th align="center">é»˜è®¤å€¼</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">value</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td align="center">æ•°æ®åº“å­—æ®µå</td></tr><tr><td align="center">el</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td align="center">æ˜ å°„ä¸ºåŸç”Ÿ <code>#{ ... }</code> é€»è¾‘,ç›¸å½“äºå†™åœ¨ xml é‡Œçš„ <code>#{ ... }</code> éƒ¨åˆ†</td></tr><tr><td align="center">exist</td><td align="center">boolean</td><td align="center">å¦</td><td align="center">true</td><td align="center">æ˜¯å¦ä¸ºæ•°æ®åº“è¡¨å­—æ®µ</td></tr><tr><td align="center">condition</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td align="center">å­—æ®µ <code>where</code> å®ä½“æŸ¥è¯¢æ¯”è¾ƒæ¡ä»¶,æœ‰å€¼è®¾ç½®åˆ™æŒ‰è®¾ç½®çš„å€¼ä¸ºå‡†,æ²¡æœ‰åˆ™ä¸ºé»˜è®¤å…¨å±€çš„ <code>%s=#{%s}</code>,<a href="https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/SqlCondition.java">å‚è€ƒ(opens new window)</a></td></tr><tr><td align="center">update</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td align="center">å­—æ®µ <code>update set</code> éƒ¨åˆ†æ³¨å…¥, ä¾‹å¦‚ï¼šupdate=â€%s+1â€ï¼šè¡¨ç¤ºæ›´æ–°æ—¶ä¼šset version=version+1(è¯¥å±æ€§ä¼˜å…ˆçº§é«˜äº <code>el</code> å±æ€§)</td></tr><tr><td align="center">insertStrategy</td><td align="center">Enum</td><td align="center">N</td><td align="center">DEFAULT</td><td align="center">ä¸¾ä¾‹ï¼šNOT_NULL: <code>insert into table_a(&lt;if test="columnProperty != null"&gt;column&lt;/if&gt;) values (&lt;if test="columnProperty != null"&gt;#{columnProperty}&lt;/if&gt;)</code></td></tr><tr><td align="center">updateStrategy</td><td align="center">Enum</td><td align="center">N</td><td align="center">DEFAULT</td><td align="center">ä¸¾ä¾‹ï¼šIGNORED: <code>update table_a set column=#{columnProperty}</code></td></tr><tr><td align="center">whereStrategy</td><td align="center">Enum</td><td align="center">N</td><td align="center">DEFAULT</td><td align="center">ä¸¾ä¾‹ï¼šNOT_EMPTY: <code>where &lt;if test="columnProperty != null and columnProperty!=''"&gt;column=#{columnProperty}&lt;/if&gt;</code></td></tr><tr><td align="center">fill</td><td align="center">Enum</td><td align="center">å¦</td><td align="center">FieldFill.DEFAULT</td><td align="center">å­—æ®µè‡ªåŠ¨å¡«å……ç­–ç•¥</td></tr><tr><td align="center">select</td><td align="center">boolean</td><td align="center">å¦</td><td align="center">true</td><td align="center">æ˜¯å¦è¿›è¡Œ select æŸ¥è¯¢</td></tr><tr><td align="center">keepGlobalFormat</td><td align="center">boolean</td><td align="center">å¦</td><td align="center">false</td><td align="center">æ˜¯å¦ä¿æŒä½¿ç”¨å…¨å±€çš„ format è¿›è¡Œå¤„ç†</td></tr><tr><td align="center">jdbcType</td><td align="center">JdbcType</td><td align="center">å¦</td><td align="center">JdbcType.UNDEFINED</td><td align="center">JDBCç±»å‹ (è¯¥é»˜è®¤å€¼ä¸ä»£è¡¨ä¼šæŒ‰ç…§è¯¥å€¼ç”Ÿæ•ˆ)</td></tr><tr><td align="center">typeHandler</td><td align="center">Class&lt;? extends TypeHandler&gt;</td><td align="center">å¦</td><td align="center">UnknownTypeHandler.class</td><td align="center">ç±»å‹å¤„ç†å™¨ (è¯¥é»˜è®¤å€¼ä¸ä»£è¡¨ä¼šæŒ‰ç…§è¯¥å€¼ç”Ÿæ•ˆ)</td></tr><tr><td align="center">numericScale</td><td align="center">String</td><td align="center">å¦</td><td align="center">â€œâ€</td><td align="center">æŒ‡å®šå°æ•°ç‚¹åä¿ç•™çš„</td></tr></tbody></table><p><a href="https://mp.baomidou.com/guide/annotation.html#tablefield">å„å±æ€§å¯é€‰é¡¹å‚è§0</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æŒ‡å¼•ï¼š&lt;a href=&quot;https://mp.baomidou.com/guide/&quot;&gt;https://mp.baomidou.com/guide/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; c</summary>
      
    
    
    
    
    <category term="-mybatis" scheme="https://rain-sky.github.io/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>vmvareä½¿ç”¨è®°å½•</title>
    <link href="https://rain-sky.github.io/2021/07/26/vmvare%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
    <id>https://rain-sky.github.io/2021/07/26/vmvare%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</id>
    <published>2021-07-26T08:10:51.000Z</published>
    <updated>2021-07-27T06:56:14.329Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä½¿ç”¨vmwareå®‰è£…centOS7"><a href="#ä½¿ç”¨vmwareå®‰è£…centOS7" class="headerlink" title="ä½¿ç”¨vmwareå®‰è£…centOS7"></a>ä½¿ç”¨vmwareå®‰è£…centOS7</h2><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><p><strong>1.å…ˆå‡†å¤‡é…ç½®åˆ’åˆ†ç©ºé—´</strong></p><img src="https://gitee.com/rain-sky/images/raw/master/20210726162129.png" style="zoom: 50%;"><hr><img src="https://gitee.com/rain-sky/images/raw/master/20210726162433.png" style="zoom: 67%;"><hr><img src="https://gitee.com/rain-sky/images/raw/master/20210726162828.png" style="zoom:67%;"><p><strong>2. é…ç½®å¥½é•œåƒæ–‡ä»¶åå³å¯å¯åŠ¨</strong></p><p>å¯åŠ¨åå¼€å§‹é…ç½®</p><img src="https://gitee.com/rain-sky/images/raw/master/20210726164734.png" style="zoom: 67%;"><p>ç‚¹å‡»è½¯ä»¶é€‰æ‹©</p><img src="https://gitee.com/rain-sky/images/raw/master/20210726165346.png" style="zoom:80%;"><blockquote><p>æˆ‘ä»¬æƒ³ä½¿ç”¨å›¾å½¢ç•Œé¢å› æ­¤é€‰ä¸­Gnomeæ¡Œé¢ï¼Œå¦‚æœé€‰ä¸­å¼€å‘å·¥å…·ä¼šé»˜è®¤å®‰è£…gccï¼Œjdkï¼Œmysqlç­‰ç¯å¢ƒ</p></blockquote><p><strong>3.è‡ªä¸»åˆ†åŒº</strong></p><p>ä¸€èˆ¬æˆ‘ä»¬è‡ªå·±åˆ†ä¸‰åŒºï¼ŒbootåŒºï¼ˆ1Gï¼‰ï¼ŒswapåŒºï¼ˆ2Gï¼Œä¸´æ—¶å……å½“å†…å­˜ä½œç”¨ï¼‰ï¼Œæ ¹åˆ†åŒº</p><img src="https://gitee.com/rain-sky/images/raw/master/20210726170119.png" style="zoom:67%;"><p>ç‚¹å‡»å®Œæˆåå¼€å§‹åˆ†åŒºï¼Œé…ç½®bootåˆ†åŒºï¼Œå…¶ä½™åŒç†ï¼Œå…¶ä¸­swapåˆ†åŒºæ–‡ä»¶ç³»ç»Ÿéœ€ä¸ºswap</p><img src="https://gitee.com/rain-sky/images/raw/master/20210726170444.png" style="zoom: 80%;"><hr><img src="https://gitee.com/rain-sky/images/raw/master/20210726170919.png" style="zoom: 80%;"><p>åˆ†åŒºå®Œæˆåé…ç½®å®Œrootç”¨æˆ·ä¸ä¸€ä¸ªæ™®é€šç”¨æˆ·ç­‰å¾…å®‰è£…å®Œæˆå³å¯ã€‚</p><h3 id="ä¸‰ç§ç½‘ç»œè¿æ¥"><a href="#ä¸‰ç§ç½‘ç»œè¿æ¥" class="headerlink" title="ä¸‰ç§ç½‘ç»œè¿æ¥"></a>ä¸‰ç§ç½‘ç»œè¿æ¥</h3><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726212731.png"></p><h3 id="è™šæ‹Ÿæœºå…‹éš†"><a href="#è™šæ‹Ÿæœºå…‹éš†" class="headerlink" title="è™šæ‹Ÿæœºå…‹éš†"></a>è™šæ‹Ÿæœºå…‹éš†</h3><blockquote><p>å½“æˆ‘ä»¬éœ€è¦æ‰“é€ ä¸€ä¸ªé›†ç¾¤æ€ä¹ˆåŠï¼Œæˆ‘ä»¬éœ€è¦å¤šä¸ªè™šæ‹Ÿæœºç³»ç»Ÿï¼Œæ— éœ€å¤šæ¬¡å®‰è£…ï¼Œå…‹éš†å³å¯</p></blockquote><ul><li><p>æ–¹å¼ä¸€ï¼šæ‹·è´è™šæœºæœºå®‰è£…æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨èœå•æ æ‰“å¼€å¤åˆ¶åçš„æ–‡ä»¶</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726213153.png"></p></li><li><p>æ–¹å¼äºŒï¼šVMwareè‡ªå¸¦å…‹éš†ï¼ˆéœ€å…ˆå…³é—­è¢«å…‹éš†ç³»ç»Ÿï¼‰,å³é”®ç„¶åç®¡ç†å…‹éš†æ‰€è¦å…‹éš†çš„ç³»ç»Ÿå³å¯</p><img src="https://gitee.com/rain-sky/images/raw/master/20210726213651.png" style="zoom:67%;"></li></ul><h3 id="è™šæ‹Ÿæœºå¿«ç…§"><a href="#è™šæ‹Ÿæœºå¿«ç…§" class="headerlink" title="è™šæ‹Ÿæœºå¿«ç…§"></a>è™šæ‹Ÿæœºå¿«ç…§</h3><p>*<em>å¿«ç…§æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿ(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»</em>)**</p><p>ç­”ï¼šé”™è¯¯æ¢å¤</p><p>å‡å¦‚åœ¨açŠ¶æ€ä¸‹æˆ‘ä»¬æ‹ä¸‹ä¸€ä¸ªå¿«ç…§ï¼Œåœ¨a-&gt;bçš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä¸€äº›é”™è¯¯å¯¼è‡´ç³»ç»Ÿé—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¿«ç…§æ¥æ¢å¤ï¼Œå½“ç„¶è¿™æ ·è‚¯å®šæ˜¯æœ‰ä»£ä»·çš„ï¼Œå¦‚å­˜å‚¨æ¶ˆè€—ã€‚</p><p><strong>ä½¿ç”¨</strong></p><p>å³é”®ï¼Œå¿«ç…§ï¼Œæ‹æ‘„å¿«ç…§</p><p>éœ€è¦æ¢å¤æŸä¸€ä¸ªå¿«ç…§æ—¶å³é”®å¿«ç…§ï¼Œå¿«ç…§ç®¡ç†ï¼Œè½¬åˆ°å³å¯</p><img src="https://gitee.com/rain-sky/images/raw/master/20210726220239.png" style="zoom:67%;"><h3 id="vmtools"><a href="#vmtools" class="headerlink" title="vmtools"></a>vmtools</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä½¿ç”¨vmwareå®‰è£…centOS7&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨vmwareå®‰è£…centOS7&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨vmwareå®‰è£…centOS7&quot;&gt;&lt;/a&gt;ä½¿ç”¨vmwareå®‰è£…centOS7&lt;/h2&gt;&lt;h3 id=&quot;å®‰è£…æ­¥éª¤&quot;</summary>
      
    
    
    
    
    <category term="vmware" scheme="https://rain-sky.github.io/tags/vmware/"/>
    
    <category term="è™šæ‹Ÿæœº" scheme="https://rain-sky.github.io/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>linxuä½¿ç”¨</title>
    <link href="https://rain-sky.github.io/2021/07/26/linxu%E4%BD%BF%E7%94%A8/"/>
    <id>https://rain-sky.github.io/2021/07/26/linxu%E4%BD%BF%E7%94%A8/</id>
    <published>2021-07-26T08:08:59.000Z</published>
    <updated>2021-07-30T13:38:29.594Z</updated>
    
    <content type="html"><![CDATA[<h2 id="linuxç›®å½•ç»“æ„"><a href="#linuxç›®å½•ç»“æ„" class="headerlink" title="linuxç›®å½•ç»“æ„"></a>linuxç›®å½•ç»“æ„</h2><h3 id="ç›®å½•ç»“æ„ä»‹ç»"><a href="#ç›®å½•ç»“æ„ä»‹ç»" class="headerlink" title="ç›®å½•ç»“æ„ä»‹ç»"></a>ç›®å½•ç»“æ„ä»‹ç»</h3><img src="https://gitee.com/rain-sky/images/raw/master/20210727150755.png" style="zoom: 50%;"><p>ä»¥ä¸‹æ˜¯å¯¹è¿™äº›ç›®å½•çš„è§£é‡Šï¼š</p><ul><li><p><strong>/bin</strong>ï¼š<br>bin æ˜¯ Binaries (äºŒè¿›åˆ¶æ–‡ä»¶) çš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚</p></li><li><p><strong>/bootï¼š</strong><br>è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨ Linux æ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚</p></li><li><p><strong>/dev ï¼š</strong><br>dev æ˜¯ Device(è®¾å¤‡) çš„ç¼©å†™, è¯¥ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯ Linux çš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨ Linux ä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚</p></li><li><p><strong>/etcï¼š</strong><br>etc æ˜¯ Etcetera(ç­‰ç­‰) çš„ç¼©å†™,è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚</p></li><li><p><strong>/home</strong>ï¼š<br>ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨ Linux ä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ aliceã€bob å’Œ eveã€‚</p></li><li><p><strong>/lib</strong>ï¼š<br>lib æ˜¯ Library(åº“) çš„ç¼©å†™è¿™ä¸ªç›®å½•é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äº Windows é‡Œçš„ DLL æ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚</p></li><li><p><strong>/lost+found</strong>ï¼š<br>è¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œå½“ç³»ç»Ÿéæ³•å…³æœºåï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚</p></li><li><p><strong>/media</strong>ï¼š<br>linux ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ã€å…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åï¼ŒLinux ä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚</p></li><li><p><strong>/mnt</strong>ï¼š<br>ç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰é©±æŒ‚è½½åœ¨ /mnt/ ä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹å…‰é©±é‡Œçš„å†…å®¹äº†ã€‚</p></li><li><p><strong>/opt</strong>ï¼š<br>opt æ˜¯ optional(å¯é€‰) çš„ç¼©å†™ï¼Œè¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚ä½ å®‰è£…ä¸€ä¸ªORACLEæ•°æ®åº“åˆ™å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚é»˜è®¤æ˜¯ç©ºçš„ã€‚</p></li><li><p><strong>/proc</strong>ï¼š<br>proc æ˜¯ Processes(è¿›ç¨‹) çš„ç¼©å†™ï¼Œ/proc æ˜¯ä¸€ç§ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰å†…æ ¸è¿è¡ŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç‰¹æ®Šæ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚<br>è¿™ä¸ªç›®å½•çš„å†…å®¹ä¸åœ¨ç¡¬ç›˜ä¸Šè€Œæ˜¯åœ¨å†…å­˜é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹é‡Œé¢çš„æŸäº›æ–‡ä»¶ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥å±è”½ä¸»æœºçš„pingå‘½ä»¤ï¼Œä½¿åˆ«äººæ— æ³•pingä½ çš„æœºå™¨ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all</span><br></pre></td></tr></tbody></table></figure></li><li><p><strong>/root</strong>ï¼š<br>è¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚</p></li><li><p><strong>/sbin</strong>ï¼š<br>s å°±æ˜¯ Super User çš„æ„æ€ï¼Œæ˜¯ Superuser Binaries (è¶…çº§ç”¨æˆ·çš„äºŒè¿›åˆ¶æ–‡ä»¶) çš„ç¼©å†™ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚</p></li><li><p><strong>/selinux</strong>ï¼š<br> è¿™ä¸ªç›®å½•æ˜¯ Redhat/CentOS æ‰€ç‰¹æœ‰çš„ç›®å½•ï¼ŒSelinux æ˜¯ä¸€ä¸ªå®‰å…¨æœºåˆ¶ï¼Œç±»ä¼¼äº windows çš„é˜²ç«å¢™ï¼Œä½†æ˜¯è¿™å¥—æœºåˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯å­˜æ”¾selinuxç›¸å…³çš„æ–‡ä»¶çš„ã€‚</p></li><li><p><strong>/srv</strong>ï¼š<br> è¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚</p></li><li><p><strong>/sys</strong>ï¼š</p><p>è¿™æ˜¯ Linux2.6 å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–ã€‚è¯¥ç›®å½•ä¸‹å®‰è£…äº† 2.6 å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ sysfs ã€‚</p><p>sysfs æ–‡ä»¶ç³»ç»Ÿé›†æˆäº†ä¸‹é¢3ç§æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼šé’ˆå¯¹è¿›ç¨‹ä¿¡æ¯çš„ proc æ–‡ä»¶ç³»ç»Ÿã€é’ˆå¯¹è®¾å¤‡çš„ devfs æ–‡ä»¶ç³»ç»Ÿä»¥åŠé’ˆå¯¹ä¼ªç»ˆç«¯çš„ devpts æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>è¯¥æ–‡ä»¶ç³»ç»Ÿæ˜¯å†…æ ¸è®¾å¤‡æ ‘çš„ä¸€ä¸ªç›´è§‚åæ˜ ã€‚</p><p>å½“ä¸€ä¸ªå†…æ ¸å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå¯¹åº”çš„æ–‡ä»¶å’Œç›®å½•ä¹Ÿåœ¨å†…æ ¸å¯¹è±¡å­ç³»ç»Ÿä¸­è¢«åˆ›å»ºã€‚</p></li><li><p><strong>/tmp</strong>ï¼š<br>tmp æ˜¯ temporary(ä¸´æ—¶) çš„ç¼©å†™è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ã€‚</p></li><li><p><strong>/usr</strong>ï¼š<br> usr æ˜¯ unix shared resources(å…±äº«èµ„æº) çš„ç¼©å†™ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äº windows ä¸‹çš„ program files ç›®å½•ã€‚</p></li><li><p><strong>/usr/binï¼š</strong><br>ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚</p></li><li><p><strong>/usr/sbinï¼š</strong><br>è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚</p></li><li><p><strong>/usr/srcï¼š</strong><br>å†…æ ¸æºä»£ç é»˜è®¤çš„æ”¾ç½®ç›®å½•ã€‚</p></li><li><p><strong>/var</strong>ï¼š<br>var æ˜¯ variable(å˜é‡) çš„ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚</p></li><li><p><strong>/run</strong>ï¼š<br>æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ã€‚å½“ç³»ç»Ÿé‡å¯æ—¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰æˆ–æ¸…é™¤ã€‚å¦‚æœä½ çš„ç³»ç»Ÿä¸Šæœ‰ /var/run ç›®å½•ï¼Œåº”è¯¥è®©å®ƒæŒ‡å‘ runã€‚</p></li></ul><h3 id="è¿œç¨‹ç™»é™†"><a href="#è¿œç¨‹ç™»é™†" class="headerlink" title="è¿œç¨‹ç™»é™†"></a>è¿œç¨‹ç™»é™†</h3><p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»é™†ï¼Ÿ</strong></p><ul><li>ä¸€èˆ¬å¼€å‘ä¸­linuxæœåŠ¡å™¨ä¸ºå¼€å‘ç»„å…±äº«</li><li>é¡¹ç›®æ­£å¼ä¸Šçº¿æ¶è®¾åœ¨å…¬ç½‘ä¸Š</li><li>éœ€è¦è¿œç¨‹ç™»é™†è¿›è¡Œç³»ç»Ÿç®¡ç†</li></ul><p><strong>ä½¿ç”¨xshellè¿›è¡Œè¿œç¨‹ç™»é™†</strong></p><p>å‰å¾€xshellå®˜ç½‘ä¸‹è½½ <a href="https://www.netsarang.com/zh/free-for-home-school/">xshell </a> é€‰æ‹©éå•†ä¸šç”¨é€”çš„free-for-home-schoolï¼Œå¡«å†™å§“åé‚®ç®±åå‰å¾€é‚®ç®±è·å–ä¸‹è½½é“¾æ¥</p><p><strong>è¿œç¨‹ç™»é™†çš„å‰æ</strong></p><ul><li>è¿œç¨‹ç™»é™†æœºå™¨çš„ip</li><li>æœ¬æœºèƒ½å¤Ÿpingé€š</li></ul><p>æŸ¥çœ‹linuxçš„ipï¼Œä½¿ç”¨å‘½ä»¤ifconfigï¼Œens33ä¸ºè™šæ‹Ÿç½‘å¡</p><img src="https://gitee.com/rain-sky/images/raw/master/20210727163418.png" style="zoom: 67%;"><p><strong>ä½¿ç”¨xshellåˆ›å»ºä¸€ä¸ªä¼šè¯</strong></p><p>èœå•æ æ–°å»ºä¸€ä¸ªä¼šè¯ï¼Œåç§°éšæ„ï¼Œä¸»æœºä¸ºå…¬ç½‘ipï¼Œç«¯å£å·22</p><img src="https://gitee.com/rain-sky/images/raw/master/20210727164018.png" style="zoom: 50%;"><p>ç‚¹å‡»ç¡®å®šåç‚¹å‡»ä¼šè¯å¼¹å‡º</p><img src="https://gitee.com/rain-sky/images/raw/master/20210727164210.png" style="zoom: 50%;"><ul><li>ä¸€æ¬¡æ€§æ¥å—ï¼Œä¸‹æ¬¡è¿œç¨‹ç™»é™†æ—¶éœ€é‡æ–°ç™»å½•</li><li>æ¥å—å¹¶ä¿å­˜ï¼Œä¸‹æ­¤ç™»å½•ç›´æ¥è¿æ¥ä¸Šäº†</li></ul><p>æˆåŠŸåå¦‚å›¾æ‰€ç¤º</p><img src="https://gitee.com/rain-sky/images/raw/master/20210727164459.png" style="zoom: 50%;"><h3 id="è¿œç¨‹æ–‡ä»¶ä¼ è¾“"><a href="#è¿œç¨‹æ–‡ä»¶ä¼ è¾“" class="headerlink" title="è¿œç¨‹æ–‡ä»¶ä¼ è¾“"></a>è¿œç¨‹æ–‡ä»¶ä¼ è¾“</h3><p><strong>ä½¿ç”¨xftpè¿œç¨‹ä¼ è¾“</strong></p><p>ä¸‹è½½æ–¹å¼å¦‚xshell</p><p><strong>æ–°å»ºä¸€ä¸ªä¼šè¯å¦‚å›¾æ‰€ç¤º</strong></p><img src="https://gitee.com/rain-sky/images/raw/master/20210727165722.png" style="zoom: 67%;"><p>åˆ›å»ºå®Œæˆåè¿æ¥ç™»é™†å³å¯ï¼ŒæˆåŠŸåå¦‚å›¾</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210727170311.png"></p><p>è§£å†³ä¹±ç é—®é¢˜ï¼Œæ›´æ”¹ä¸ºutf-8</p><img src="https://gitee.com/rain-sky/images/raw/master/20210727170615.png" style="zoom: 50%;"><h3 id="viä¸vim"><a href="#viä¸vim" class="headerlink" title="viä¸vim"></a>viä¸vim</h3><p><strong>ä»€ä¹ˆæ˜¯viä»€ä¹ˆæ˜¯vim</strong></p><p>viæ˜¯Linuxå†…ç½®æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œvimå¯ä»¥çœ‹ä½œviçš„å¢å¼ºç‰ˆï¼Œå…·æœ‰ç¨‹åºç¼–å†™èƒ½åŠ›ã€‚</p><p><strong>ä¸‰ç§æ¨¡å¼</strong></p><ul><li>é»˜è®¤æ¨¡å¼ï¼šå¯ä»¥å¤åˆ¶ç²˜è´´åˆ é™¤æ–‡æœ¬ï¼Œç§»åŠ¨å…‰æ ‡</li><li>ç¼–è¾‘æ¨¡å¼ï¼šæŒ‰ä¸‹iï¼Œoï¼Œaï¼Œrä»»æ„ä¸€ä¸ªå³å¯è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå…·æœ‰ç¼–è¾‘æ–‡æœ¬åŠŸèƒ½</li><li>å‘½ä»¤è¡Œæ¨¡å¼ï¼šåœ¨é»˜è®¤æ¨¡å¼ä¸‹è¾“å…¥ï¼šå·å³å¯è¿›å…¥ï¼Œè‹¥åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹æŒ‰ä¸‹escé€€å‡ºåå†è¾“å…¥ä¸€ä¸ªï¼šå·å³å¯è¿›å…¥ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹å¯ä»¥å®Œæˆå­˜ç›˜ï¼Œè¯»å–ï¼Œæ›¿æ¢ï¼Œæ˜¾ç¤ºè¡Œå·ï¼Œç¦»å¼€vimç­‰æ“ä½œ</li></ul><p><strong>å®ä¾‹</strong></p><p>ä½¿ç”¨xshellè¿œç¨‹ç™»å½•Linuxç¼–å†™ä¸€ä¸ªhello javaç¨‹åºã€‚</p><ol><li>ä½¿ç”¨å‘½ä»¤è¡Œvim hello.javaå¼€å§‹è¿›å…¥vimç¼–å†™Javaç¨‹åºï¼Œåˆšå¼€å§‹è¿›å…¥è¾“å…¥æ–‡æœ¬æ— ååº”ï¼Œå› ä¸ºæ˜¯é»˜è®¤æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼</li><li>åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼åï¼Œå®Œæˆæ–‡æœ¬ç¼–å†™åˆ‡æ¢åˆ°å‘½ä»¤è¡Œæ¨¡å¼</li><li>è¿›å…¥åˆ°å‘½ä»¤è¡Œæ¨¡å¼åï¼Œä½¿ç”¨wqï¼ˆqä¸ä¿å­˜é€€å‡ºï¼Œq!å¼ºåˆ¶é€€å‡ºï¼‰å®Œæˆå†™å…¥å¹¶é€€å‡ºvim</li></ol><p><img src="https://gitee.com/rain-sky/images/raw/master/20210727173041.png"></p><p>å¯ä»¥çœ‹åˆ°å½“å‰è·¯å¾„å³/ ä¸‹å‡ºç°æˆ‘ä»¬ç¼–å†™çš„æ–‡ä»¶ï¼Œå†æ¬¡ç¼–è¾‘è¯¥æ–‡ä»¶åªéœ€å†æ¬¡vim hello.java</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210727173234.png"></p><p><strong>å‘½ä»¤æ¨¡å¼ä¸‹çš„ä¸€äº›æŒ‡ä»¤</strong></p><table><thead><tr><th align="left">æŒ‡ä»¤è¡Œçš„å‚¨å­˜ã€ç¦»å¼€ç­‰æŒ‡ä»¤</th><th></th></tr></thead><tbody><tr><td align="left">:w</td><td>å°†ç¼–è¾‘çš„æ•°æ®å†™å…¥ç¡¬ç›˜æ¡£æ¡ˆä¸­(å¸¸ç”¨)</td></tr><tr><td align="left">:w!</td><td>è‹¥æ–‡ä»¶å±æ€§ä¸ºã€åªè¯»ã€æ—¶ï¼Œå¼ºåˆ¶å†™å…¥è¯¥æ¡£æ¡ˆã€‚ä¸è¿‡ï¼Œåˆ°åº•èƒ½ä¸èƒ½å†™å…¥ï¼Œ è¿˜æ˜¯è·Ÿä½ å¯¹è¯¥æ¡£æ¡ˆçš„æ¡£æ¡ˆæƒé™æœ‰å…³å•Šï¼</td></tr><tr><td align="left">:q</td><td>ç¦»å¼€ vi (å¸¸ç”¨)</td></tr><tr><td align="left">:q!</td><td>è‹¥æ›¾ä¿®æ”¹è¿‡æ¡£æ¡ˆï¼Œåˆä¸æƒ³å‚¨å­˜ï¼Œä½¿ç”¨ ! ä¸ºå¼ºåˆ¶ç¦»å¼€ä¸å‚¨å­˜æ¡£æ¡ˆã€‚</td></tr><tr><td align="left">æ³¨æ„ä¸€ä¸‹å•Šï¼Œé‚£ä¸ªæƒŠå¹å· (!) åœ¨ vi å½“ä¸­ï¼Œå¸¸å¸¸å…·æœ‰ã€å¼ºåˆ¶ã€çš„æ„æ€ï½</td><td></td></tr><tr><td align="left">:wq</td><td>å‚¨å­˜åç¦»å¼€ï¼Œè‹¥ä¸º :wq! åˆ™ä¸ºå¼ºåˆ¶å‚¨å­˜åç¦»å¼€ (å¸¸ç”¨)</td></tr><tr><td align="left">ZZ</td><td>è¿™æ˜¯å¤§å†™çš„ Z å–”ï¼è‹¥æ¡£æ¡ˆæ²¡æœ‰æ›´åŠ¨ï¼Œåˆ™ä¸å‚¨å­˜ç¦»å¼€ï¼Œè‹¥æ¡£æ¡ˆå·²ç»è¢«æ›´åŠ¨è¿‡ï¼Œåˆ™å‚¨å­˜åç¦»å¼€ï¼</td></tr><tr><td align="left">:w [filename]</td><td>å°†ç¼–è¾‘çš„æ•°æ®å‚¨å­˜æˆå¦ä¸€ä¸ªæ¡£æ¡ˆï¼ˆç±»ä¼¼å¦å­˜æ–°æ¡£ï¼‰</td></tr><tr><td align="left">:r [filename]</td><td>åœ¨ç¼–è¾‘çš„æ•°æ®ä¸­ï¼Œè¯»å…¥å¦ä¸€ä¸ªæ¡£æ¡ˆçš„æ•°æ®ã€‚äº¦å³å°† ã€filenameã€ è¿™ä¸ªæ¡£æ¡ˆå†…å®¹åŠ åˆ°æ¸¸æ ‡æ‰€åœ¨è¡Œåé¢</td></tr><tr><td align="left">:n1,n2 w [filename]</td><td>å°† n1 åˆ° n2 çš„å†…å®¹å‚¨å­˜æˆ filename è¿™ä¸ªæ¡£æ¡ˆã€‚</td></tr><tr><td align="left">:! command</td><td>æš‚æ—¶ç¦»å¼€ vi åˆ°æŒ‡ä»¤è¡Œæ¨¡å¼ä¸‹æ‰§è¡Œ command çš„æ˜¾ç¤ºç»“æœï¼ä¾‹å¦‚ ã€:! ls /homeã€å³å¯åœ¨ vi å½“ä¸­çœ‹ /home åº•ä¸‹ä»¥ ls è¾“å‡ºçš„æ¡£æ¡ˆä¿¡æ¯ï¼</td></tr><tr><td align="left">:set nu</td><td>æ˜¾ç¤ºè¡Œå·ï¼Œè®¾å®šä¹‹åï¼Œä¼šåœ¨æ¯ä¸€è¡Œçš„å‰ç¼€æ˜¾ç¤ºè¯¥è¡Œçš„è¡Œå·</td></tr><tr><td align="left">:set nonu</td><td>ä¸ set nu ç›¸åï¼Œä¸ºå–æ¶ˆè¡Œå·ï¼</td></tr></tbody></table><h3 id="å…³æœºä¸é‡å¯"><a href="#å…³æœºä¸é‡å¯" class="headerlink" title="å…³æœºä¸é‡å¯"></a>å…³æœºä¸é‡å¯</h3><p><strong>ä¸€.shutdown å‘½ä»¤</strong></p><p>ä½œç”¨ï¼šå…³é—­æˆ–é‡å¯ç³»ç»Ÿ<br>ä½¿ç”¨æƒé™ï¼šè¶…çº§ç®¡ç†å‘˜ä½¿ç”¨<br>å¸¸ç”¨é€‰é¡¹<br>\1. -r å…³æœºåç«‹å³é‡å¯<br>\2. -hå…³æœºåä¸é‡å¯<br>\3. -få¿«é€Ÿå…³æœºï¼Œé‡å¯æ—¶è·³è¿‡fsck(file system checkç”¨æ¥æ£€æŸ¥å’Œç»´æŠ¤ä¸ä¸€è‡´çš„æ–‡ä»¶ç³»ç»Ÿã€‚)<br>\4. -nå¿«é€Ÿå…³æœºä¸ç»è¿‡initç¨‹åº<br>shutdownä»¥ä¸€ç§å®‰å…¨çš„æ–¹å¼å…³é—­ç³»ç»Ÿã€‚æ‰€æœ‰ç™»é™†ç”¨æˆ·éƒ½å¯ä»¥çœ‹åˆ°å…³æœºä¿¡æ¯æç¤ºï¼Œå¹¶ä¸” login å°†è¢«é˜»å¡ã€‚å¯ä»¥æŒ‡å®šç«‹åˆ»å…³æœºï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç³»ç»Ÿåœ¨ä¸€å®šçš„å»¶æ—¶åå…³æœºã€‚æ‰€æœ‰è¿›ç¨‹éƒ½å°†æ¥æ”¶åˆ° SIGTERM ä¿¡å·ã€‚è¿™å¯ä»¥ä½¿ vi ç­‰ç¨‹åºæœ‰æ—¶é—´å°†å¤„äºç¼–è¾‘çŠ¶æ€çš„æ–‡ä»¶è¿›è¡Œå­˜å‚¨ï¼Œé‚®ä»¶å’Œæ–°é—»ç¨‹åºè¿›ç¨‹åˆ™å¯ä»¥å°†æ‰€æœ‰ç¼“å†²æ± å†…çš„æ•°æ®è¿›è¡Œé€‚å½“çš„æ¸…é™¤ç­‰ç­‰ã€‚ shutdown é€šè¿‡é€šçŸ¥ init è¿›ç¨‹ï¼Œè¦æ±‚å®ƒæ”¹æ¢è¿è¡Œçº§åˆ«æ¥å®ç°ã€‚è¿è¡Œçº§åˆ« 0 ç”¨æ¥å…³é—­ç³»ç»Ÿï¼Œè¿è¡Œçº§åˆ« 6 ç”¨æ¥é‡å¯ç³»ç»Ÿï¼Œè¿è¡Œçº§åˆ« 1 ç”¨æ¥ä½¿ç³»ç»Ÿè¿›å…¥æ‰§è¡Œç³»ç»Ÿç®¡ç†ä»»åŠ¡çŠ¶æ€ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡º -h æˆ– -r æ ‡å¿—æ—¶ï¼Œè¿™æ˜¯ shutdown å‘½ä»¤çš„é»˜è®¤å·¥ä½œçŠ¶æ€ã€‚</p><p><strong>äºŒ.haltå‘½ä»¤</strong></p><p>ä½œç”¨ï¼šå…³é—­ç³»ç»Ÿ<br>ä½¿ç”¨æƒé™ï¼šè¶…çº§ç®¡ç†å‘˜<br>å¸¸ç”¨é€‰é¡¹<br>\1. -dä¸æŠŠè®°å½•å†™åˆ°/var/log/wtmpæ–‡ä»¶é‡Œ<br>\2. -på…³é—­ç³»ç»Ÿï¼Œé¡ºä¾¿åšå…³é—­ç”µæºçš„åŠ¨ä½œpoweroff<br>\3. -få¼ºè¿«å…³æœºï¼Œä¸å‘¼å«shutdownè¿™ä¸ªæŒ‡ä»¤<br>å®è´¨ä¸Šhaltå°±æ˜¯è°ƒç”¨shutdown -hã€‚haltæ‰§è¡Œæ—¶ï¹æ€æ­»åº”ç”¨è¿›ç¨‹ï¹æ‰§è¡Œsyncç³»ç»Ÿè°ƒç”¨ï¹æ–‡ä»¶ç³»ç»Ÿå†™æ“ä½œå®Œæˆåå°±ä¼šåœæ­¢å†…æ ¸ã€‚</p><p><strong>ä¸‰.initå‘½ä»¤</strong></p><p>ä½¿ç”¨æƒé™ï¼šè¶…çº§ç®¡ç†å‘˜<br>å¸¸ç”¨é€‰é¡¹<br>0-6ï¼šè¡¨ç¤ºç³»ç»Ÿè¿è¡Œçš„7ä¸ªçº§åˆ«<br>0ï¼šå…³æœºçº§åˆ«<br>1ï¼šå•ç”¨æˆ·çº§åˆ«ï¼Œè¿è¡Œrc.sysinitå’Œrc1.dç›®å½•ä¸‹çš„è„šæœ¬<br>2ï¼šå¤šç”¨æˆ·ï¼Œä½†ç³»ç»Ÿä¸ä¼šå¯åŠ¨NFSï¼Œå­—ç¬¦æ¨¡å¼<br>3ï¼šå¤šç”¨æˆ·ï¼Œå­—ç¬¦æ¨¡å¼ï¼Œç³»ç»Ÿå¯åŠ¨å…·æœ‰ç½‘ç»œåŠŸèƒ½<br>4ï¼šç”¨æˆ·è‡ªå®šä¹‰çº§åˆ«<br>5ï¼šå›¾å½¢ç•Œé¢æ¨¡å¼<br>6ï¼šé‡å¯çº§åˆ«</p><p><strong>å››.poweroffå‘½ä»¤</strong></p><p>ä½œç”¨ï¼šå…³é—­ç³»ç»Ÿå’Œå…³é—­ç”µæº<br>ä½¿ç”¨æƒé™ï¼šæ‰€ç”¨ç”¨æˆ·<br>å¸¸ç”¨é€‰é¡¹<br>\1. -på…³æœºåå…³é—­ç”µæº<br>\2. -få¼ºåˆ¶å…³æœºï¼Œä¸è°ƒç”¨shutdown<br>\3. -wä¸æ˜¯çœŸæ­£å…³æœºï¼Œåªæ˜¯å°†ä¿¡æ¯å†™å…¥åˆ°æ–‡ä»¶/var/log/wtmp<br>poweroffåœ¨å…³é—­è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¹‹åï¼Œæœ€åè¿˜ä¼šå‘é€ACPIæŒ‡ä»¤ï¼Œé€šçŸ¥ç”µæºï¼Œæœ€ååˆ‡æ–­ç”µæºä¾›åº”ï¼Œå½“ç„¶è·¯ç”±å™¨ç­‰åµŒå…¥ç³»ç»Ÿä¸æ”¯æŒACPIçš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ— æ•ˆã€‚</p><p><strong>äº”.rebootå‘½ä»¤</strong></p><p>ä½œç”¨ï¼šé‡å¯ç³»ç»Ÿ<br>ä½¿ç”¨æƒé™ï¼šè¶…çº§ç®¡ç†å‘˜<br>å¸¸ç”¨é€‰é¡¹<br>\1. -nåœ¨é‡å¯å‰ä¸å°†å†…å­˜èµ„æ–™å†™å›ç¡¬ç›˜<br>\2. -få¼ºè¿«é‡å¯ï¼Œä¸å‘¼å«shutdownæŒ‡ä»¤<br>\3. -dä¸æŠŠè®°å½•å†™åˆ°/var/log/wtmp<br>\4. -wä¸æ˜¯çœŸæ­£é‡å¯ï¼Œåªæ˜¯æŠŠä¿¡æ¯å†™å…¥/var/log/wtmp<br>rebootçš„å·¥ä½œè¿‡ç¨‹å·®ä¸å¤šè·Ÿhaltä¸€æ ·ï¹ä¸è¿‡å®ƒæ˜¯å¼•å‘ä¸»æœºé‡å¯ï¹è€Œhaltæ˜¯å…³æœºã€‚å®ƒçš„å‚æ•°ä¸haltç›¸å·®ä¸å¤šã€‚</p><blockquote><p>å¸¸è§„ç”¨æˆ·ä¸‹ä½¿ç”¨su -root åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œrootç”¨æˆ·ä¸‹ä½¿ç”¨logoutå³å¯é€€å›å¸¸è§„ç”¨æˆ·ï¼Œæ³¨æ„ï¼Œå›¾å½¢ç•Œé¢ä¸‹çš„å‘½ä»¤è¡Œlogoutå‘½ä»¤æ— æ•ˆ</p></blockquote><h3 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h3><p><strong>åŸºæœ¬è¯­æ³•</strong></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">adduser ç”¨æˆ·å (åˆ›å»ºåä¼šåœ¨homeç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºåŒåç”¨æˆ·ç›®å½•)</span><br><span class="line">æˆ–è€…</span><br><span class="line">adduser -d æ–‡ä»¶å ç”¨æˆ·å (è‡ªå®šä¹‰ç”¨æˆ·ç›®å½•å)</span><br><span class="line">-----------------------------------------------------</span><br><span class="line">ä½¿ç”¨è¯¥å‘½ä»¤ä¿®æ”¹å¯†ç ï¼špasswd ç”¨æˆ·å</span><br><span class="line">-----------------------------------------------------</span><br><span class="line">åˆ é™¤ç”¨æˆ·ï¼šuserdel ç”¨æˆ·å (ä¸ä¼šåˆ é™¤homeä¸‹çš„ç”¨æˆ·æ–‡ä»¶å¤¹)</span><br><span class="line">userdel -r ç”¨æˆ·å(è¿å¸¦åˆ é™¤ç”¨æˆ·æ–‡ä»¶å¤¹)</span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼š id ç”¨æˆ·å</span><br><span class="line">åˆ‡æ¢ç”¨æˆ·ï¼šsu -ç”¨æˆ·åï¼ˆä»æƒé™é«˜çš„ç”¨æˆ·åˆ°ä½çš„ç”¨æˆ·æ— éœ€è¾“å…¥å¯†ç ï¼Œåä¹‹éœ€è¦ï¼‰</span><br><span class="line">å›é€€åˆ°åŸæ¥ç”¨æˆ·ï¼šeixt/logout</span><br><span class="line">æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼š who am iï¼ˆæ˜¾ç¤ºç¬¬ä¸€æ¬¡ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼‰</span><br><span class="line">------------- ----------------------------------------</span><br><span class="line">ç”¨æˆ·ç»„ç›¸å…³ï¼ˆPS:æ–°å»ºä¸€ä¸ªç”¨æˆ·ä¼šè‡ªåŠ¨æœ‰ä¸€ä¸ªç”¨æˆ·ååŒåç»„ï¼‰ï¼š</span><br><span class="line">æ–°å¢ä¸€ä¸ªç»„ï¼šgroupadd ç»„å</span><br><span class="line">åˆ é™¤ä¸€ä¸ªç»„ï¼šgroupdel ç»„å</span><br><span class="line">å¢åŠ ç”¨æˆ·æ—¶ç›´æ¥åŠ ä¸Šç»„ï¼š useradd -g ç»„å ç”¨æˆ·å </span><br><span class="line">ä¿®æ”¹ç”¨æˆ·ç»„ï¼šusermod -g ç»„å ç”¨æˆ·å</span><br><span class="line">------------------------------------------------------</span><br><span class="line">é”å®šç”¨æˆ·ï¼Œä¸èƒ½ç™»å½•ï¼špasswd -l ç”¨æˆ·å  [ä¹Ÿå¯ä½¿ç”¨usermod -l ç”¨æˆ·å]</span><br><span class="line">æŸ¥çœ‹ç”¨æˆ·çŠ¶æ€ï¼špasswd -s ç”¨æˆ·å</span><br><span class="line">è§£é”ç”¨æˆ·ï¼špasswd -u ç”¨æˆ·å</span><br><span class="line">æ¸…ç©ºä¸€ä¸ªç”¨æˆ·å¯†ç ï¼Œä¹‹åæ— å¯†ç ä¹Ÿæ— æ³•ç™»å½•ï¼špasswd -d ç”¨æˆ·å</span><br></pre></td></tr></tbody></table></figure><p>ç”¨æˆ·ä¸ç»„ç›¸å…³æ–‡ä»¶</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728151910.png"></p><h3 id="ä½¿ç”¨æŒ‡ä»¤"><a href="#ä½¿ç”¨æŒ‡ä»¤" class="headerlink" title="ä½¿ç”¨æŒ‡ä»¤"></a>ä½¿ç”¨æŒ‡ä»¤</h3><p><strong>æŒ‡å®šè¿è¡Œçº§åˆ«</strong></p><p>ä¸ƒä¸ªè¿è¡Œçº§åˆ«ï¼Œä¸‰äº”å¸¸ç”¨ï¼š</p><ul><li>0 - halt(åœæ­¢/å…³æœº)(ä¸è¦å°†è¿è¡Œçº§åˆ«è®¾ç½®ä¸º0)</li><li>1 - å•ç”¨æˆ·æ¨¡å¼</li><li>2 - å¤šç”¨æˆ·æ¨¡å¼ï¼Œæ— ç½‘ç»œ</li><li>3 - å¤šç”¨æˆ·æ¨¡å¼æœ‰ç½‘ç»œ</li><li>4 - æœªä½¿ç”¨(ä¿ç•™)</li><li>5 - å›¾å½¢åŒ–ç•Œé¢</li><li>6 - é‡å¯(ä¸è¦å°†è¿è¡Œçº§åˆ«è®¾ç½®ä¸º6)</li></ul><p>åˆ‡æ¢çº§åˆ«ï¼šinit[0123456]</p><p>æŸ¥çœ‹çº§åˆ«ï¼šsystemctl get-default</p><p><strong>rootå¯†ç æ‰¾å›</strong></p><ul><li><p>å¯åŠ¨ç³»ç»Ÿè¿›å…¥å¼€æœºç•Œé¢ï¼ŒæŒ‰ä¸‹eè¿›å…¥ç¼–è¾‘ç•Œé¢</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728154616.png"></p></li><li><p>å°†å…‰æ ‡å®šä½åˆ°æ­¤å¤„å¹¶è¾“å…¥init=/bin/shï¼Œå†æŒ‰ä¸‹ctrl+xé‡å¯è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728154828.png"></p></li><li><p>é‡å¯åè¾“å…¥mount -o remount,rw /</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728155051.png"></p></li><li><p>ä¸Šè¿°æŒ‡ä»¤è¾“å…¥åå›è½¦å†è¾“å…¥passwdå†å›è½¦ï¼Œè¾“å…¥ä¸¤æ¬¡æ–°å¯†ç å³å¯</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728155248.png"></p></li><li><p>å†ä¸Šå›¾æœ€åä¸€è¡Œé”®å…¥touch /.autorelabelï¼ˆæ³¨æ„ï¼štouchä¸/ ä¸­é—´æœ‰ç©ºæ ¼ï¼‰</p></li><li><p>ä¸Šè¿°æŒ‡ä»¤æ‰§è¡Œåå†å›è½¦é”®å…¥exec /.sbin/init å†å›è½¦ç­‰å¾…ç³»ç»Ÿä¿®æ”¹å¯†ç åé‡å¯ï¼Œè¿™ä¸ªæ—¶é—´ä¼šæ¯”è¾ƒé•¿</p></li></ul><p><strong>å¸®åŠ©æŒ‡ä»¤</strong></p><ul><li><p>man è·å–å¸®åŠ©ä¿¡æ¯</p><p>è¯­æ³•ï¼šman [å‘½ä»¤æˆ–è€…é…ç½®æ–‡ä»¶]ï¼Œå¦‚è·å–lså‘½ä»¤å¸®åŠ©ä¿¡æ¯ï¼Œman  ls</p></li><li><p>helpæŒ‡ä»¤</p><p>è¯­æ³•ï¼šhelp  å‘½ä»¤</p></li></ul><p>ä¸¾ä¸ªæ —å­ï¼Œè¾“å…¥ man ls</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728160931.png"></p><p><code>man</code>åŒ…å«<code>9</code>ä¸ªç« èŠ‚ï¼Œç« èŠ‚ç”¨æ•°å­—è¡¨ç¤ºï¼Œåˆ†åˆ«æ˜¯ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æˆ·å‘½ä»¤ </span><br><span class="line">ç³»ç»Ÿè°ƒç”¨ </span><br><span class="line">Cåº“è°ƒç”¨</span><br><span class="line">è®¾å¤‡æ–‡ä»¶åŠç‰¹æ®Šæ–‡ä»¶ </span><br><span class="line">é…ç½®æ–‡ä»¶æ ¼å¼ </span><br><span class="line">æ¸¸æˆ</span><br><span class="line">æ‚é¡¹ </span><br><span class="line">ç®¡ç†ç±»çš„å‘½ä»¤</span><br><span class="line">Linux å†…æ ¸API</span><br></pre></td></tr></tbody></table></figure><p><strong>æŸ¥æ‰¾ç±»æŒ‡ä»¤</strong></p><blockquote><p>findå‘½ä»¤</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728165504.png"></p><blockquote><p>locateæŒ‡ä»¤</p></blockquote><p>ç”¨äºå¿«é€Ÿå®šä½æŸä¸ªæ–‡ä»¶ä½ç½®ï¼ŒåŸç†æ˜¯åˆ›å»ºäº†ä¸€ä¸ªç´¢å¼•æ•°æ®åº“,åœ¨ä½¿ç”¨è¯¥æŒ‡ä»¤ä¹‹å‰å¿…é¡»å…ˆä½¿ç”¨updatedbæŒ‡ä»¤</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728165917.png"></p><blockquote><p>grepæŒ‡ä»¤</p></blockquote><p>grepè¿‡æ»¤æŸ¥æ‰¾ï¼Œâ€|â€ç®¡é“ç¬¦å·ï¼Œè¡¨ç¤ºå°†å‰æŒ‡ä»¤ç»“æœè½¬ç»™åé¢ä¸€æ¡æŒ‡ä»¤å¤„ç†ï¼ŒåŸºæœ¬è¯­æ³•ï¼šgrep [é€‰é¡¹]  æŸ¥æ‰¾å†…å®¹  æºæ–‡ä»¶</p><p>ä¸€ä¸ªä¾‹å­ï¼ŒæŸ¥æ‰¾Hello.javaæ–‡ä»¶ä¸­helloæ‰€åœ¨çš„ä½ç½®å¹¶æ˜¾ç¤ºè¡Œå·</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210728170732.png"></p><p><strong>å‹ç¼©ä¸è§£å‹ç¼©ç±»</strong></p><img src="https://gitee.com/rain-sky/images/raw/master/20210728170945.png" style="zoom:50%;"><blockquote><p>zipæŒ‡ä»¤ï¼šzip [é€‰é¡¹]  xxx.zip  å°†è¦å‹ç¼©çš„å†…å®¹</p><p>-r è¡¨ç¤ºé€’å½’å‹ç¼©æ•´ä¸ªæ–‡ä»¶å¤¹ä¸‹å†…å®¹</p></blockquote><p>ä¾‹å­ï¼Œå‹ç¼©homeç›®å½•ï¼šzip -r myhome.zip /home/</p><blockquote><p>unzipæŒ‡ä»¤ï¼šunzip [é€‰é¡¹]   xxx.zip </p><p>-d æŒ‡å®šè§£å‹åå­˜æ”¾ç›®å½•</p></blockquote><p>ä¾‹å­ï¼Œè§£å‹ä¸Šä¾‹å¹¶è§£å‹åˆ°/opt/tmpæ–‡ä»¶å¤¹ä¸‹ï¼šunzip -d /opt/tmp /home/myhome.zip</p><blockquote><p>taræŒ‡ä»¤</p></blockquote><img src="https://gitee.com/rain-sky/images/raw/master/20210728203128.png" style="zoom:50%;"><h3 id="ç»„ç®¡ç†"><a href="#ç»„ç®¡ç†" class="headerlink" title="ç»„ç®¡ç†"></a>ç»„ç®¡ç†</h3><p><strong>æ¦‚å¿µ</strong></p><p>linuxä¸­æ¯ä¸ªç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªç»„ï¼Œä¸èƒ½ç‹¬ç«‹äºç»„å¤–ï¼Œæ¯ä¸ªæ–‡ä»¶æœ‰æ‰€æœ‰è€…ï¼Œæ‰€åœ¨ç»„ï¼Œå…¶ä»–ç»„ç­‰æ¦‚å¿µã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼š</p><p>æœ‰A,B,Cä¸‰ä¸ªç»„ï¼Œç”²å±äºAç»„ï¼Œç”²ç”¨æˆ·åˆ›å»ºäº†hello.txtæ–‡ä»¶ï¼Œé‚£ä¹ˆç”²å°±æ˜¯è¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼ŒAå°±æ˜¯è¯¥æ–‡ä»¶çš„æ‰€åœ¨ç»„ï¼ŒBï¼ŒCç›¸å¯¹è¯¥æ–‡ä»¶æ¥è¯´å°±æ˜¯å…¶ä»–ç»„ã€‚</p><p><strong>ç›¸å…³æŒ‡ä»¤</strong></p><blockquote><p>ä½¿ç”¨cat /etc/groupå¯ä»¥æŸ¥çœ‹ç»„åŠå…¶å±æ€§ä¿¡æ¯</p></blockquote><p>æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰è€…ï¼šls -ahl</p><p>ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…ï¼šchown ç”¨æˆ·å[:æ‰€åœ¨ç»„]   æ–‡ä»¶å ã€å‚æ•°ï¼š-Rå¦‚æœæ˜¯ç›®å½•ï¼Œåˆ™ä½¿å…¶å­ç›®å½•é€’å½’ç”Ÿæ•ˆã€‘</p><p>ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç»„ï¼šchgrp ç»„å æ–‡ä»¶å</p><p>ä¿®æ”¹ç”¨æˆ·æ‰€åœ¨ç»„ï¼šusermod -g ç»„å ç”¨æˆ·å / usermod -d ç›®å½•å ç”¨æˆ·å æ”¹å˜è¯¥ç”¨æˆ·ç™»å½•çš„åˆå§‹ç›®å½•</p><p><strong>æƒé™ä»‹ç»</strong></p><p>ä½¿ç”¨ls -læ˜¾ç¤ºæ–‡ä»¶è¯¦ç»†ä¿¡æ¯</p><p>ä¸¾ä¸ªæå­ï¼š</p><p>å…¶ä¸­ - ä»£è¡¨æ™®é€šæ–‡ä»¶</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210729100110.png"></p><p>rwxæƒé™ä»‹ç»</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210729101245.png"></p><p><strong>æƒé™ä¿®æ”¹</strong></p><p>æ–¹å¼ä¸€ï¼š+ï¼Œ-ï¼Œ=å˜æ›´æƒé™</p><p>u:æ‰€æœ‰è€…ï¼Œg:æ‰€åœ¨ç»„ï¼Œo:å…¶ä»–ç»„ï¼Œa:æ‰€æœ‰äºº</p><p>ä¸¾ä¸ªæ —å­ï¼š</p><p>chmod u=rwx,g=rx,o=x æ–‡ä»¶å/ç›®å½•å</p><p>chmod o+w   æ–‡ä»¶å/ç›®å½•å  ã€ç»™å…¶ä»–ç»„èµ‹äºˆå†™çš„æƒé™ã€‘</p><p>chmod a-x    æ–‡ä»¶å/ç›®å½•å   ã€å»é™¤æ‰€æœ‰äººæ‰§è¡Œçš„æƒé™ã€‘</p><h3 id="crondå®šæ—¶ä»»åŠ¡è°ƒåº¦"><a href="#crondå®šæ—¶ä»»åŠ¡è°ƒåº¦" class="headerlink" title="crondå®šæ—¶ä»»åŠ¡è°ƒåº¦"></a>crondå®šæ—¶ä»»åŠ¡è°ƒåº¦</h3><blockquote><p>æ­¤å‘å°†æ¥å†å¡«</p></blockquote><h3 id="ç£ç›˜ç®¡ç†"><a href="#ç£ç›˜ç®¡ç†" class="headerlink" title="ç£ç›˜ç®¡ç†"></a>ç£ç›˜ç®¡ç†</h3><p><strong>ç¤ºæ„</strong></p><blockquote><p>LinuxæŒ‚è½½æœºåˆ¶ï¼š<a href="http://c.biancheng.net/view/2859.html">é“¾æ¥</a></p></blockquote><p>çº æ­£ä¸€ä¸ªè¯¯åŒºï¼Œå¹¶ä¸æ˜¯æ ¹ç›®å½•ä¸‹ä»»ä½•ä¸€ä¸ªç›®å½•éƒ½å¯ä»¥ä½œä¸ºæŒ‚è½½ç‚¹ï¼Œç”±äºæŒ‚è½½æ“ä½œä¼šä½¿å¾—åŸæœ‰ç›®å½•ä¸­æ–‡ä»¶è¢«éšè—ï¼Œå› æ­¤æ ¹ç›®å½•ä»¥åŠç³»ç»ŸåŸæœ‰ç›®å½•éƒ½ä¸è¦ä½œä¸ºæŒ‚è½½ç‚¹ï¼Œä¼šé€ æˆç³»ç»Ÿå¼‚å¸¸ç”šè‡³å´©æºƒï¼ŒæŒ‚è½½ç‚¹æœ€å¥½æ˜¯æ–°å»ºçš„ç©ºç›®å½•ã€‚</p><blockquote><p>åˆ†åŒº</p></blockquote><img src="https://gitee.com/rain-sky/images/raw/master/20210729163948.png" style="zoom:50%;"><p><strong>ç›¸å…³æŒ‡ä»¤</strong></p><blockquote><p>æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡æŒ‚è½½æƒ…å†µï¼šlsblk  æˆ–è€…lsblk -f</p></blockquote><p>å’Œæˆ‘ä»¬é…ç½®è™šæ‹Ÿæœºæ—¶ä¸€è‡´ï¼Œbootåˆ†åŒº1Gï¼Œäº¤æ¢åˆ†åŒº2Gï¼Œæ ¹åˆ†åŒº17G</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210729164250.png"></p><p> ç¡¬ç›˜è¯´æ˜ï¼š</p><p>linuxç¡¬ç›˜åˆ†IDEå’ŒSCSIç›˜ï¼Œç›®å‰åŸºæœ¬æ˜¯SCSI</p><img src="https://gitee.com/rain-sky/images/raw/master/20210729164853.png" style="zoom: 80%;"><p><strong>å¢åŠ ä¸€å—ç¡¬ç›˜</strong></p><blockquote><p>æ­¤å‘å°†æ¥å†å¡«~</p></blockquote><p><strong>ç£ç›˜æƒ…å†µæŸ¥è¯¢</strong></p><ul><li>æŸ¥è¯¢ç³»ç»Ÿæ•´ä½“ç£ç›˜ä½¿ç”¨æƒ…å†µï¼šdf -h</li></ul><img src="https://gitee.com/rain-sky/images/raw/master/20210729165603.png" style="zoom:50%;"><ul><li><p>æŸ¥è¯¢æŒ‡å®šç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µï¼šdu -h /ç›®å½•</p><p>-hï¼šå¸¦è®¡é‡å•ä½</p><p>-aï¼šå«æ–‡ä»¶</p><p>-cï¼šå¢åŠ æ±‡æ€»å€¼</p><p>â€“max-depth=1ï¼šæŒ‡å®šæŸ¥è¯¢æ·±åº¦ï¼Œæ­¤å¤„1ä¸ºç¤ºä¾‹</p></li><li><p>ç»Ÿè®¡æŸæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶ä¸ªæ•°ï¼šls -l  /ç›®å½• | grep â€œ^-â€œ | wc -l</p><img src="https://gitee.com/rain-sky/images/raw/master/20210729170510.png" style="zoom: 67%;"></li></ul><h3 id="ç½‘ç»œé…ç½®åŸç†"><a href="#ç½‘ç»œé…ç½®åŸç†" class="headerlink" title="ç½‘ç»œé…ç½®åŸç†"></a>ç½‘ç»œé…ç½®åŸç†</h3><p><strong>ç¤ºæ„</strong></p><p>æ­¤å¤„éœ€è¦å…³é—­windowsé˜²ç«å¢™ï¼Œcentos7æ‰å¯pingé€šå®¿ä¸»ï¼Œè™šæ‹Ÿæœºé€šè¿‡vmnet8ä¸å®¿ä¸»æœºé€šä¿¡ï¼Œä¸ºæ­¤éœ€è¦ä¿è¯centos7çš„ipä¸vmnet8åœ¨åŒä¸€ç½‘æ®µã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210729173020.png"></p><p><strong>ç½‘ç»œç¯å¢ƒé…ç½®</strong></p><ul><li>è‡ªåŠ¨åˆ†é…DCHP</li></ul><p><span class="github-emoji"><span>ğŸ¦</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f366.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å…ˆä¸è¯´äº†~</p><ul><li>æŒ‡å®šIP</li></ul><img src="https://gitee.com/rain-sky/images/raw/master/20210729174610.png" style="zoom:67%;"><p><span class="github-emoji"><span>â­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/23ed.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ä¿®æ”¹å¦‚ä¸‹</p><img src="https://gitee.com/rain-sky/images/raw/master/20210729174846.png" style="zoom:67%;"><p><span class="github-emoji"><span>â­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/23ed.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å†ä¿®æ”¹vmnet8é…ç½®</p><img src="https://gitee.com/rain-sky/images/raw/master/20210729175149.png" style="zoom: 67%;"><p><span class="github-emoji"><span>â­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/23ed.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> é‡å¯ç½‘ç»œæœåŠ¡æˆ–é‡å¯ç³»ç»Ÿä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</p><p>service network restartï¼Œrebootå‡å¯</p><blockquote><p>PS<span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>:å¦‚æœä½¿ç”¨äº†xshellè¿œç¨‹ç™»é™†åˆ«å¿˜è®°è¯¥ä¸»æœºåé¸­~</p></blockquote><p><strong>ä¸»æœºä¸hostæ˜ å°„</strong></p><p>åœ¨hostsä¸‹é…ç½®ä¸€è¡Œæ˜ å°„å…³ç³»å³å¯ï¼Œå¦‚æ·»åŠ ï¼š192.168.2.128 rainsky</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730095417.png"></p><p>è§£æè¿‡ç¨‹ï¼š</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730095615.png"></p><h3 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h3><p>åœ¨Linuxä¸­æ¯ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºéƒ½ç§°ä¸ºä¸€ä¸ªè¿›ç¨‹ï¼Œåˆ†é…ä¸€ä¸ªIDå·ï¼ˆPIDï¼‰ã€‚</p><p><strong>ç›¸å…³æŒ‡ä»¤</strong></p><blockquote><p>psæŒ‡ä»¤</p></blockquote><p>å‚æ•°ï¼š</p><p>-eï¼šæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹</p><p>-fï¼šå…¨æ ¼å¼æ˜¾ç¤º(ä¾¿äºæŸ¥æ‰¾å­çˆ¶è¿›ç¨‹ï¼Œppidå·å³ä¸ºçˆ¶è¿›ç¨‹å·)</p><p>-a ï¼šæ˜¾ç¤ºå½“å‰ç»ˆç«¯æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯</p><p>-u ï¼šä»¥ç”¨æˆ·æ ¼å¼æ˜¾ç¤º</p><p>-xï¼šæ˜¾ç¤ºåå°è¿›ç¨‹è¿è¡Œå‚æ•°</p><p>ä½¿ç”¨ps -aux | more åˆ†é¡µæŸ¥çœ‹</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730100522.png"></p><p>æœ‰æ—¶å€™æˆ‘ä»¬åªéœ€è¦æŸ¥çœ‹è‡ªå·±æƒ³è¦çœ‹çš„æŸä¸€ä¸ªç¨‹åºæ˜¯å¦è¿è¡Œï¼Œä½¿ç”¨ç®¡é“æµå³å¯</p><p>for exampleï¼šps -ef | grep sshd</p><p><strong>ç»ˆæ­¢è¿›ç¨‹</strong></p><blockquote><p>killå‘½ä»¤ä¸killallå‘½ä»¤</p></blockquote><p>åŸºæœ¬è¯­æ³•ï¼š</p><p>kill [é€‰é¡¹] è¿›ç¨‹å·</p><p>killall è¿›ç¨‹å·</p><p>å¸¸ç”¨é€‰é¡¹ï¼š</p><p>-9ï¼šè¡¨ç¤ºå¼ºåˆ¶ç»ˆæ­¢</p><p><em>å®è·µä¸€ä¸‹</em></p><p>æ€é™¤ä¸€ä¸ªéæ³•ç”¨æˆ·è¿›ç¨‹ï¼š</p><p>ä½¿ç”¨rainç”¨æˆ·è¿œç¨‹ç™»å½•æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ps -ef | grep sshdåˆ—å‡ºç”¨æˆ·è¿›ç¨‹ï¼Œç„¶åä½¿ç”¨ç›¸å…³å‘½ä»¤ç»ˆæ­¢è¯¥ç”¨æˆ·è¿›ç¨‹å³å¯ã€‚</p><p>ç»ˆæ­¢è¿œç¨‹ç™»é™†æœåŠ¡ï¼š</p><p>ps -ef | grep sshdæŸ¥æ‰¾å‡ºsshè¿›ç¨‹/user/sbin/sshd -Dï¼Œæ€æ‰è¯¥è¿›ç¨‹ï¼Œé‡æ–°å¯åŠ¨è¯¥æœåŠ¡ä½¿ç”¨/bin/systemctl start sshd.service</p><p><strong>æŸ¥çœ‹è¿›ç¨‹æ ‘</strong></p><blockquote><p>pstree [é€‰é¡¹]</p></blockquote><p>-p æ˜¾ç¤ºè¿›ç¨‹pid</p><p>-u æ˜¾ç¤ºè¿›ç¨‹ç”¨æˆ·</p><h4 id="æœåŠ¡ç®¡ç†"><a href="#æœåŠ¡ç®¡ç†" class="headerlink" title="æœåŠ¡ç®¡ç†"></a>æœåŠ¡ç®¡ç†</h4><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730102945.png"></p><p>â€“æŸ¥çœ‹å½“å‰æœåŠ¡å™¨æ‰€æœ‰æœåŠ¡</p><p>service â€“status-all </p><p>â€“ æŸ¥çœ‹å½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„æœåŠ¡</p><p>service â€“status-all | grep running</p><p>â€“æŸ¥çœ‹æŒ‡å®šæœåŠ¡è¿è¡ŒçŠ¶æ€å¦‚ httpd</p><p>service â€“status-all | grep httpd</p><p>æˆ– service httpd status</p><p>â€“æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨è‡ªå¯åŠ¨çš„æœåŠ¡åˆ—è¡¨</p><p>chkconfig â€“list</p><hr><p>â€“centos7ç‰ˆæœ¬</p><p>â€“æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æœåŠ¡</p><p>systemctl | grep running</p><p>â€“åˆ—å‡ºè¿è¡Œçš„æœåŠ¡</p><p>initctl list</p><p>â€“æŸ¥çœ‹æŒ‡å®šæœåŠ¡è¿è¡ŒçŠ¶æ€</p><p>systemctl | grep apache2</p><p>â€“æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æœåŠ¡</p><p>pstree</p><p>â€“æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„çŠ¶æ€</p><p>chkservice â€“æ˜¯ä¸€ä¸ªç®¡ç†ç³»ç»Ÿå•å…ƒçš„ç»ˆç«¯å·¥å…·åŠ¡</p><h3 id="rpmä¸yum"><a href="#rpmä¸yum" class="headerlink" title="rpmä¸yum"></a>rpmä¸yum</h3><h4 id="rpm"><a href="#rpm" class="headerlink" title="rpm"></a>rpm</h4><p>rpmç”¨äºäº’è”ç½‘ä¸‹è½½åŒ…çš„æ‰“åŒ…ä»¥åŠå®‰è£…å·¥å…·</p><p><strong>ç®¡ç†æŒ‡ä»¤</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730103301.png"></p><p>æŸ¥è¯¢ä¸€ä¸ªæŒ‡å®šè½¯ä»¶åŒ…æ˜¯å¦å®‰è£…ï¼šrpm -q è½¯ä»¶åŒ…å</p><p>æŸ¥è¯¢è½¯ä»¶åŒ…ä¿¡æ¯ï¼šrpm -qi è½¯ä»¶åŒ…åcl</p><p>æŸ¥è¯¢å®‰è£…åçš„æ–‡ä»¶å®‰è£…ä½ç½®ï¼šrpm -ql è½¯ä»¶åŒ…</p><p>æŸ¥è¯¢æ–‡ä»¶æ‰€å±è½¯ä»¶åŒ…ï¼šrpm -qf æ–‡ä»¶å</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730103751.png"></p><p><strong>å¸è½½è½¯ä»¶åŒ…</strong></p><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>rpm -e åŒ…åç§°</p><p>for exampleï¼šrpm -e firefox</p><p>æ·»åŠ å‚æ•° â€“nodeps å¼ºåˆ¶åˆ é™¤ï¼Œä¸å»ºè®®</p><p><strong>å®‰è£…è½¯ä»¶åŒ…</strong></p><p>rpm -ivh rpmåŒ…å…¨è·¯å¾„</p><p>å‚æ•°è¯´æ˜ï¼š</p><p>-i : å®‰è£…            -v ï¼šæç¤º            -hï¼šè¿›åº¦æ¡</p><p><em>example</em></p><p>åˆ é™¤å¹¶é‡æ–°å®‰è£…firefox</p><p>åˆ é™¤ï¼šç›´æ¥rpm -e firefoxå³å¯</p><p>é‡è£…ï¼šæˆ‘ä»¬éœ€è¦firefox çš„ rpmåŒ…å…¨è·¯å¾„ï¼Œå“ªé‡Œæœ‰ï¼Ÿ</p><p>åœ¨æ¡Œé¢iosæ–‡ä»¶çš„packgesæ–‡ä»¶å¤¹ä¸‹æœç´¢firesoxçš„rpmåŒ…ï¼Œå¤åˆ¶ç²˜è´´åˆ°ä½ æƒ³å»çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå®‰è£…å³å¯</p><h4 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h4><blockquote><p>å°±åƒåç«¯mavenå‰ç«¯npm,yarnä¸€æ ·ï¼Ÿ</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730110000.png"></p><h3 id="å®‰è£…å¼€å‘ç¯å¢ƒç³»åˆ—"><a href="#å®‰è£…å¼€å‘ç¯å¢ƒç³»åˆ—" class="headerlink" title="å®‰è£…å¼€å‘ç¯å¢ƒç³»åˆ—"></a>å®‰è£…å¼€å‘ç¯å¢ƒç³»åˆ—</h3><h4 id="å®‰è£…Javaç¯å¢ƒ"><a href="#å®‰è£…Javaç¯å¢ƒ" class="headerlink" title="å®‰è£…Javaç¯å¢ƒ"></a>å®‰è£…Javaç¯å¢ƒ</h4><ol><li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨jdkï¼Œå­˜åœ¨åˆ™å¸è½½</li></ol><img src="https://gitee.com/rain-sky/images/raw/master/20210730170100.png" style="zoom:67%;"><ol start="2"><li><p>ä½¿ç”¨rpmæ–¹å¼å®‰è£…ï¼Œå…ˆä¸‹è½½jdk1.8çš„rpmåŒ…åˆ°æœ¬åœ°ä¸€ä¸ªç›®å½•</p></li><li><p>ä½¿ç”¨å‘½ä»¤è¡Œå®‰è£…ï¼Œé»˜è®¤å®‰è£…åˆ°user/java/ç›®å½•ä¸‹</p></li><li><p>é…ç½®ç¯å¢ƒå˜é‡</p><p>vim /etc/profile æ‰“å¼€</p><p>æœ«å°¾é…ç½®å››è¡Œå¦‚ä¸‹</p></li></ol><img src="https://gitee.com/rain-sky/images/raw/master/20210730130642.png" style="zoom:67%;"><p><span class="github-emoji"><span>ğŸŒ—</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f317.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> æœ€åä½¿ç”¨source /etc/profileä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p><blockquote><p>å¦‚æœä½¿spring booté¡¹ç›®ç›´æ¥æ‰“ä¸ªjaræ”¾åœ¨æœåŠ¡å™¨ä¸Šå°±å¯ä»¥è¿è¡Œå•¦ï¼Œä½†æ˜¯åˆ«å¿˜è®°å¼€å¯ç«¯å£å·</p><p>å¦‚æœæ˜¯ssmé¡¹ç›®æ‰“waråŒ…æ”¾åœ¨tomcatä¸‹è¿è¡Œå°±å¥½äº†</p></blockquote><p><span class="github-emoji"><span>ğŸ±</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f431.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> è¿è¡Œtomcatï¼Œè¿›å…¥binç›®å½•</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ‰§è¡Œï¼šstartup.sh --&gt;å¯åŠ¨tomcat</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰§è¡Œï¼šshutdown.sh --&gt;å…³é—­tomcat</span></span><br><span class="line">./startup.sh</span><br><span class="line">./shutdown.sh</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ”¥</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f525.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> é˜²ç«å¢™ç›¸å…³æŒ‡ä»¤</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹firewallæœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¼€å¯ã€é‡å¯ã€å…³é—­ã€firewalld.serviceæœåŠ¡</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¼€å¯</span></span><br><span class="line">service firewalld start</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯</span></span><br><span class="line">service firewalld restart</span><br><span class="line"><span class="meta">#</span><span class="bash"> å…³é—­</span></span><br><span class="line">service firewalld stop</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™</span></span><br><span class="line">firewall-cmd --list-all    # æŸ¥çœ‹å…¨éƒ¨ä¿¡æ¯</span><br><span class="line">firewall-cmd --list-ports  # åªçœ‹ç«¯å£ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¼€å¯ç«¯å£</span></span><br><span class="line">å¼€ç«¯å£å‘½ä»¤ï¼šfirewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line">é‡å¯é˜²ç«å¢™ï¼šsystemctl restart firewalld.service</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å«ä¹‰ï¼š</span><br><span class="line">--zone #ä½œç”¨åŸŸ</span><br><span class="line">--add-port=80/tcp  #æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®®</span><br><span class="line">--permanent   #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ</span><br></pre></td></tr></tbody></table></figure><h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><blockquote><p><span class="github-emoji"><span>ğŸ‘‹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f44b.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <a href="https://downloads.mysql.com/archives/community/">å®‰è£…æ¥è¿™é‡Œ</a></p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730200910.png"></p><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>centOS7.6è‡ªå¸¦ç›ä¸½äºšæ•°æ®åº“ï¼Œä¼šé€ æˆä¸mysqlå†²çªï¼Œå…ˆå¸è½½</p><img src="https://gitee.com/rain-sky/images/raw/master/20210730193822.png" style="zoom:67%;"><p><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å·²ç»æŠŠbundle.tar è§£å‹åˆ°myrpmç›®å½•ä¸‹ï¼Œä¸€æ¬¡å®‰è£…ä¸‹åˆ—rpmåŒ…</p><p>rpm -ivh mysql-community-common-5.7.29-1.el7.x86_64.rpm</p><p>rpm -ivh mysql-community-libs-5.7.29-1.el7.x86_64.rpm</p><p>rpm -ivh mysql-community-client-5.7.29-1.el7.x86_64.rpm</p><p>rpm -ivh mysql-community-server-5.7.29-1.el7.x86_64.rpm </p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730202017.png"></p><p><span class="github-emoji"><span>ğŸ“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4c1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> systemctl start mysqld.serviceï¼Œå¯åŠ¨mysqlï¼ŒMySQLè‡ªåŠ¨ç»™rootç”¨æˆ·è®¾ç½®éšæœºå¯†ç ï¼Œè¿è¡Œ grep â€œpasswordâ€ /var/log/mysqld.log å¯ä»¥çœ‹åˆ°å½“å‰å¯†ç </p><p><span class="github-emoji"><span>ğŸ’â™‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f481-2642.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> è¯•ä¸€è¯•æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æœåŠ¡</p><p>systemctl | grep running</p><p><span class="github-emoji"><span>ğŸ˜¹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f639.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è®¾ç½®æˆ‘ä»¬è‡ªå·±çš„å¯†ç ï¼Œå¼€å¯å¯†ç æç¤ºç­–ç•¥ï¼Œset global validate_password_policy=0(é»˜è®¤å€¼ä¸º1)</p><p>set password for â€œrootâ€@â€localhostâ€ =password(â€˜å¯†ç â€™)</p><blockquote><p>å¯åŠ¨MySQLå¹¶é‡ç½®rootå¯†ç </p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210730203540.png"></p><p><span class="github-emoji"><span>ğŸ™ˆ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f648.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>åŸºæœ¬æ­¥éª¤åˆ°æ­¤å°±å®Œæˆäº†  <del>(â‰§â–½â‰¦)/</del></p><p><span class="github-emoji"><span>ğŸ…¾</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f17e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸€äº›è¡¥å……</p><p>è®¾ç½®MySQLå¼€æœºè‡ªå¯åŠ¨</p><ul><li>å…ˆæ£€æŸ¥MySQLæ˜¯å¦å­˜åœ¨å¼€æœºè‡ªå¯åŠ¨åˆ—è¡¨</li></ul><img src="https://gitee.com/rain-sky/images/raw/master/20210730205308.png" style="zoom:67%;"><p>ç”±äºæˆ‘ä»¬æ˜¯centOS7ï¼Œä¹‹å‰çš„chkconfigä¸å†æ”¯æŒï¼Œæ•…ä½¿ç”¨æ¨èçš„systemctlï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„MySQLæœåŠ¡æ˜¯å·²ç»è‡ªå¯åŠ¨çš„ï¼Œå¦‚æœæœªè‡ªå¯åŠ¨å¯ä»¥ä½¿ç”¨systemctl enable mysqlæ¥è®¾ç½® mysqlå¼€æœºå¯åŠ¨è‡ªåŠ¨ï¼Œç”±äºæˆ‘ä»¬ä¸éœ€è¦å¯¹å¤–å¼€æ”¾æˆ‘ä»¬çš„æ•°æ®åº“ï¼Œæ•…3306ç«¯å£ä¸é…ç½®å¼€å¯ã€‚</p><h3 id="è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜"><a href="#è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜" class="headerlink" title="è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜"></a>è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜</h3><h4 id="ç™»é™†ç•Œé¢å¾ªç¯ç™»å½•é—®é¢˜"><a href="#ç™»é™†ç•Œé¢å¾ªç¯ç™»å½•é—®é¢˜" class="headerlink" title="ç™»é™†ç•Œé¢å¾ªç¯ç™»å½•é—®é¢˜"></a>ç™»é™†ç•Œé¢å¾ªç¯ç™»å½•é—®é¢˜</h4><p>å¤§æ¦‚æ˜¯å› ä¸ºä¿®æ”¹/etc/profileæ–‡ä»¶ï¼Œå¢åŠ Javaç¯å¢ƒå˜é‡çš„æ—¶å€™é…ç½®å‡ºé”™ï¼Œå¯¼è‡´ç™»å½•ç•Œé¢æ­»å¾ªç¯ç™»å½•ä¸”å‘½ä»¤è¡Œä¸èƒ½ç”¨äº†</p><p><strong>è§£å†³</strong></p><p>1ã€è¿›å…¥å•ç”¨æˆ·æ¨¡å¼ã€‚åœ¨rhgb quiet ååŠ ä¸Š single åæŒ‰ctrl+xè¿è¡Œ</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTc0MDA2Ni8yMDE5MTAvMTc0MDA2Ni0yMDE5MTAwMjIwMjQxNzkzNS0xMzM2MjU1NjM2LnBuZw?x-oss-process=image/format,png"></p><p>ä¹‹åä½¿ç”¨rootç”¨æˆ·å¯†ç ç™»å½•rootè´¦æˆ·ï¼Œæƒé™èƒ½ä¿®æ”¹/etc/profile</p><p>ä¿®æ”¹/etc/profile</p><p>reboot</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;linuxç›®å½•ç»“æ„&quot;&gt;&lt;a href=&quot;#linuxç›®å½•ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;linuxç›®å½•ç»“æ„&quot;&gt;&lt;/a&gt;linuxç›®å½•ç»“æ„&lt;/h2&gt;&lt;h3 id=&quot;ç›®å½•ç»“æ„ä»‹ç»&quot;&gt;&lt;a href=&quot;#ç›®å½•ç»“æ„ä»‹ç»&quot; class=&quot;head</summary>
      
    
    
    
    
    <category term="linxu" scheme="https://rain-sky.github.io/tags/linxu/"/>
    
  </entry>
  
  <entry>
    <title>Swagger</title>
    <link href="https://rain-sky.github.io/2021/07/25/Swagger/"/>
    <id>https://rain-sky.github.io/2021/07/25/Swagger/</id>
    <published>2021-07-25T08:17:14.000Z</published>
    <updated>2021-07-26T02:09:44.199Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Swaggerç®€ä»‹"><a href="#Swaggerç®€ä»‹" class="headerlink" title="Swaggerç®€ä»‹"></a>Swaggerç®€ä»‹</h2><p><strong>å‰è¨€</strong></p><p>å‰ç«¯ç»å¸¸æŠ±æ€¨åç«¯ç»™çš„æ¥å£æ–‡æ¡£ä¸å®é™…æƒ…å†µä¸ä¸€è‡´ã€‚åç«¯åˆè§‰å¾—ç¼–å†™åŠç»´æŠ¤æ¥å£æ–‡æ¡£ä¼šè€—è´¹ä¸å°‘ç²¾åŠ›ï¼Œç»å¸¸æ¥ä¸åŠæ›´æ–°ã€‚å…¶å®æ— è®ºæ˜¯å‰ç«¯è°ƒç”¨åç«¯ï¼Œè¿˜æ˜¯åç«¯è°ƒç”¨åç«¯ï¼Œéƒ½æœŸæœ›æœ‰ä¸€ä¸ªå¥½çš„æ¥å£æ–‡æ¡£ã€‚ä½†æ˜¯è¿™ä¸ªæ¥å£æ–‡æ¡£å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œå°±è·Ÿæ³¨é‡Šä¸€æ ·ï¼Œç»å¸¸ä¼šæŠ±æ€¨åˆ«äººå†™çš„ä»£ç æ²¡æœ‰å†™æ³¨é‡Šï¼Œç„¶è€Œè‡ªå·±å†™èµ·ä»£ç èµ·æ¥ï¼Œæœ€è®¨åŒçš„ï¼Œä¹Ÿæ˜¯å†™æ³¨é‡Šã€‚æ‰€ä»¥ä»…ä»…åªé€šè¿‡å¼ºåˆ¶æ¥è§„èŒƒå¤§å®¶æ˜¯ä¸å¤Ÿçš„ï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œç‰ˆæœ¬è¿­ä»£ï¼Œæ¥å£æ–‡æ¡£å¾€å¾€å¾ˆå®¹æ˜“å°±è·Ÿä¸ä¸Šä»£ç äº†ã€‚</p><p><strong>swaggeræ˜¯ä»€ä¹ˆ</strong></p><p>Swagger æ˜¯ä¸€ä¸ªè§„èŒƒä¸”å®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ– RESTful é£æ ¼çš„ Web æœåŠ¡ã€‚</p><hr><p>é€šè¿‡Swaggerè¡ç”Ÿå‡ºæ¥çš„ä¸€ç³»åˆ—é¡¹ç›®å’Œå·¥å…·ï¼Œå°±å¯ä»¥åšåˆ°ç”Ÿæˆå„ç§æ ¼å¼çš„æ¥å£æ–‡æ¡£ï¼Œç”Ÿæˆå¤šç§è¯­è¨€çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä»£ç ï¼Œä»¥åŠåœ¨çº¿æ¥å£è°ƒè¯•é¡µé¢ç­‰ç­‰ã€‚è¿™æ ·ï¼Œå¦‚æœæŒ‰ç…§æ–°çš„å¼€å‘æ¨¡å¼ï¼Œåœ¨å¼€å‘æ–°ç‰ˆæœ¬æˆ–è€…è¿­ä»£ç‰ˆæœ¬çš„æ—¶å€™ï¼Œåªéœ€è¦æ›´æ–°Swaggeræè¿°æ–‡ä»¶ï¼Œå°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£å’Œå®¢æˆ·ç«¯æœåŠ¡ç«¯ä»£ç ï¼Œåšåˆ°è°ƒç”¨ç«¯ä»£ç ã€æœåŠ¡ç«¯ä»£ç ä»¥åŠæ¥å£æ–‡æ¡£çš„ä¸€è‡´æ€§ã€‚</p><p><code>å‹æƒ…é“¾æ¥:</code><a href="https://swagger.io/">å®˜ç½‘åœ°å€</a></p><h2 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h2><h3 id="springbootç¯å¢ƒé›†æˆswagger"><a href="#springbootç¯å¢ƒé›†æˆswagger" class="headerlink" title="springbootç¯å¢ƒé›†æˆswagger"></a>springbootç¯å¢ƒé›†æˆswagger</h3><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>ä¾èµ–è¯´æ˜ï¼š</strong></p><p><strong>ï¼ˆ1ï¼‰springfox-swagger2</strong></p><p>æ£€æµ‹springçš„webè¯·æ±‚ä¿¡æ¯ï¼Œç”Ÿæˆæ£€æµ‹ç»“æœï¼ˆ<code>jsonæ ¼å¼</code>ï¼‰ã€‚</p><p><strong>ï¼ˆ2ï¼‰springfox-swagger-ui</strong></p><p>æ ¹æ®springfox-swagger2ç”Ÿæˆçš„æ•°æ®ï¼Œç”Ÿæˆ<code>å¯è§†åŒ–</code>çš„å‹å¥½é¡µé¢ã€‚</p><p><strong>å¯ç”¨swagger</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span><span class="comment">//å¼€å¯swagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>å†™ä¸€ä¸ªcontrolleræµ‹è¯•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController("/user")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UrlController</span> </span>{</span><br><span class="line">    <span class="meta">@RequestMapping(value = "/hello",method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHello</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è®¿é—®<a href="http://localhost:8080/swagger-ui.html%E7%9C%8B%E7%9C%8B%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA">http://localhost:8080/swagger-ui.htmlçœ‹çœ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</a></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210725164756.png"></p><p><strong>é…ç½®swagger</strong></p><p>Docket,swaggerå”¯ä¸€å®ä¾‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Docket</span><span class="params">(DocumentationType documentationType)</span> </span>{</span><br><span class="line">    <span class="keyword">this</span>.apiInfo = ApiInfo.DEFAULT;</span><br><span class="line">    <span class="keyword">this</span>.groupName = <span class="string">"default"</span>;</span><br><span class="line">    <span class="keyword">this</span>.enabled = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">this</span>.genericsNamingStrategy = <span class="keyword">new</span> DefaultGenericTypeNamingStrategy();</span><br><span class="line">    <span class="keyword">this</span>.applyDefaultResponseMessages = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">this</span>.host = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">this</span>.pathMapping = Optional.absent();</span><br><span class="line">    <span class="keyword">this</span>.apiSelector = ApiSelector.DEFAULT;</span><br><span class="line">    <span class="keyword">this</span>.enableUrlTemplating = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.vendorExtensions = Lists.newArrayList();</span><br><span class="line">    <span class="keyword">this</span>.documentationType = documentationType;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç”±æºç å¯çŸ¥é…ç½®Docketéœ€è¦ä¼ å…¥ä¸€ä¸ªDocumentationType</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DocumentationType</span> <span class="keyword">extends</span> <span class="title">SimplePluginMetadata</span> </span>{</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> DocumentationType SWAGGER_12 = <span class="keyword">new</span> DocumentationType(<span class="string">"swagger"</span>, <span class="string">"1.2"</span>);</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> DocumentationType SWAGGER_2 = <span class="keyword">new</span> DocumentationType(<span class="string">"swagger"</span>, <span class="string">"2.0"</span>);</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> DocumentationType SPRING_WEB = <span class="keyword">new</span> DocumentationType(<span class="string">"spring-web"</span>, <span class="string">"1.0"</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> MediaType mediaType;</span><br><span class="line">  ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è‡ªå®šä¹‰é…ç½®swagger</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = true)</span><span class="comment">//å¼€å¯fullæ¨¡å¼</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span><span class="comment">//å¼€å¯swagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Docket,swaggerå”¯ä¸€å®ä¾‹</span></span><br><span class="line">    <span class="comment">//æ³¨å…¥</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//Docketè¿˜æœ‰å¾ˆå¤šç”¨äºé…ç½®çš„æ–¹æ³•ï¼Œè¯¦æƒ…è§åæ–‡</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">            .apiInfo(apiInfo());</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span></span>{</span><br><span class="line">        Contact contact = <span class="keyword">new</span> Contact(<span class="string">"rain-sky"</span>, <span class="string">"https://rain-sky.github.io/"</span>, <span class="string">"1816046297@qq.com"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfo(<span class="string">"æµ‹è¯•ç”¨SwaggerApiæ–‡æ¡£"</span>,</span><br><span class="line">                <span class="string">"åˆæ­¥å­¦ä¹ ,ä¸æ±‚ç”šè§£"</span>,</span><br><span class="line">                <span class="string">"1.0"</span>,</span><br><span class="line">                <span class="string">"https://rain-sky.github.io/"</span>,</span><br><span class="line">                contact,</span><br><span class="line">                <span class="string">"Apache 2.0"</span>,</span><br><span class="line">                <span class="string">"http://www.apache.org/licenses/LICENSE-2.0"</span>,</span><br><span class="line">                <span class="keyword">new</span> ArrayList());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å†æ¬¡è®¿é—®<a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210725172406.png"></p><p><strong>æ˜¯å¦å¼€å¯swagger</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">            .apiInfo(<span class="keyword">this</span>.apiInfo())</span><br><span class="line">        <span class="comment">//trueå¼€å¯swagger,falseåä¹‹</span></span><br><span class="line">            .enable(<span class="keyword">true</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="åªåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨swagger"><a href="#åªåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨swagger" class="headerlink" title="åªåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨swagger"></a>åªåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨swagger</h4><p><strong>ä¸‰å¥—ç¯å¢ƒå‡†å¤‡</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210725183315.png"></p><p><strong>é»˜è®¤ç¯å¢ƒé…ç½®(application.properties)</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></tbody></table></figure><p><strong>swaggeré…ç½®</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">(Environment environment)</span></span>{</span><br><span class="line"><span class="comment">//é…ç½®å¼€å¯swaggerçš„ç¯å¢ƒ</span></span><br><span class="line">    Profiles profiles = Profiles.of(<span class="string">"dev"</span>, <span class="string">"test"</span>);</span><br><span class="line">    <span class="comment">//å½“å‰ç¯å¢ƒå»åŒ¹é…è®¾ç½®å¼€å¯swaggerçš„ç¯å¢ƒ</span></span><br><span class="line">    <span class="keyword">boolean</span> b = environment.acceptsProfiles(profiles);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">            .apiInfo(<span class="keyword">this</span>.apiInfo())</span><br><span class="line">            .enable(b)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç”±äºæ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒï¼Œæ•…è®¿é—®<a href="http://localhost:8080/swagger-ui.html%E8%83%BD%E5%A4%9F%E6%88%90%E5%8A%9F">http://localhost:8080/swagger-ui.htmlèƒ½å¤ŸæˆåŠŸ</a></p><p>è‹¥æ­¤æ—¶ä¿®æ”¹application.propertiesä¸º</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">pro</span></span><br></pre></td></tr></tbody></table></figure><p>å†æ¬¡è®¿é—®ï¼ŒOMG(âŠ™oâŠ™)<del>ï¼ŒæˆåŠŸè®¿é—®å¤±è´¥äº†</del></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210725195156.png"></p><h2 id="é…ç½®æ‰«ææ¥å£"><a href="#é…ç½®æ‰«ææ¥å£" class="headerlink" title="é…ç½®æ‰«ææ¥å£"></a>é…ç½®æ‰«ææ¥å£</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">            .apiInfo(<span class="keyword">this</span>.apiInfo())</span><br><span class="line">            .select()</span><br><span class="line">        <span class="comment">//æŒ‡å®šæ‰«æ</span></span><br><span class="line">            .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.chen.Swagger.controller"</span>))</span><br><span class="line">        <span class="comment">//åªæ‰«æ/user/**ä¸‹çš„æ¥å£</span></span><br><span class="line">            <span class="comment">//.paths(PathSelectors.ant("/user/**"))</span></span><br><span class="line">            .build();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>RequestHandlerSelectorså¯é€‰é¡¹â€˜</p><ul><li>anyæ‰«æå…¨éƒ¨</li><li>basePackageé…ç½®æ‰«æåŒ…</li><li>noneä¸æ‰«æ</li><li>æ‰«æç±»ä¸Šæœ‰æŒ‡å®šæ³¨è§£çš„ç±»ï¼Œå‚æ•° annotation.Class</li><li>æ‰«ææ–¹æ³•ä¸Šæœ‰æŒ‡å®šæ³¨è§£çš„æ–¹æ³•</li></ul><img src="https://gitee.com/rain-sky/images/raw/master/20210725181443.png" style="zoom: 75%;"><p>PathSelectorså¯é€‰é¡¹</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210725181906.png"></p><h2 id="åˆ†ç»„ä¸æ¥å£æ‰«æ"><a href="#åˆ†ç»„ä¸æ¥å£æ‰«æ" class="headerlink" title="åˆ†ç»„ä¸æ¥å£æ‰«æ"></a>åˆ†ç»„ä¸æ¥å£æ‰«æ</h2><p><strong>é…ç½®ç»„åä¸å¤šä¸ªç»„</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Docket <span class="title">otherDocket</span><span class="params">()</span></span>{</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">              .groupName(<span class="string">"ç¬¬äºŒç»„"</span>);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Docket <span class="title">docket</span><span class="params">(Environment environment)</span></span>{</span><br><span class="line"></span><br><span class="line">      Profiles profiles = Profiles.of(<span class="string">"dev"</span>, <span class="string">"test"</span>);</span><br><span class="line">      <span class="keyword">boolean</span> b = environment.acceptsProfiles(profiles);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">              .apiInfo(<span class="keyword">this</span>.apiInfo())</span><br><span class="line">              .enable(b)</span><br><span class="line">              .groupName(<span class="string">"ç¬¬ä¸€ç»„"</span>)</span><br><span class="line">              .select()</span><br><span class="line">              .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.chen.Swagger.controller"</span>))</span><br><span class="line">              .paths(PathSelectors.any())</span><br><span class="line">              .build();</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><p><strong>è®¿é—®UIçœ‹çœ‹</strong></p><p>ç¬¬ä¸€ç»„</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726090851.png"></p><p>ç¬¬äºŒç»„</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726091027.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç¬¬äºŒç»„å°±æ˜¯é»˜è®¤é…ç½®ä¸‹çš„æ˜¾ç¤ºï¼Œå¦‚æœéœ€è¦æ›´å¤šåˆ†ç»„ï¼Œåªéœ€æ³¨å…¥å¤šä¸ªDocketå®ä¾‹å³å¯ï¼Œå®ŒæˆååŒå¼€å‘ã€‚</p><p><strong>å†æ¥çœ‹çœ‹UIä¸­çš„Models</strong></p><p>Modelsè¡¨ç¤ºå®ä½“ç±»ï¼Œåªè¦è¯·æ±‚æ–¹æ³•ä¸­æœ‰è¿”å›å®ä½“ç±»ï¼Œå°±ä¼šè¢«æ‰«æåˆ°Modelsä¸­ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController("/user")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UrlController</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping("/getUser")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨ä¸€äº›æ³¨è§£ç»™æ–‡æ¡£å¢åŠ æ³¨é‡Š</p><p>å®ä½“ç±»ä¸Š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModel("ç”¨æˆ·å®ä½“ç±»")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="meta">@ApiModelProperty("ç”¨æˆ·å")</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ApiModelProperty("ç”¨æˆ·Id")</span></span><br><span class="line">    <span class="keyword">private</span> String userId;</span><br><span class="line">    <span class="meta">@ApiModelProperty("ç”¨æˆ·å¯†ç ")</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ¥å£ä¸Š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping("/getId")</span></span><br><span class="line"><span class="meta">@ApiOperation("è·å–ç”¨æˆ·Id")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">(<span class="meta">@ApiParam("ç”¨æˆ·å")</span> String name)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> User().getUserId();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è®¿é—®UIçœ‹çœ‹</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726093631.png"></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726093744.png"></p><h2 id="ä½¿ç”¨swaggeræ¥å£æµ‹è¯•"><a href="#ä½¿ç”¨swaggeræ¥å£æµ‹è¯•" class="headerlink" title="ä½¿ç”¨swaggeræ¥å£æµ‹è¯•"></a>ä½¿ç”¨swaggeræ¥å£æµ‹è¯•</h2><p>controller</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/user")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UrlController</span> </span>{</span><br><span class="line">    <span class="meta">@RequestMapping(value = "/hello",method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHello</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation("è·å–ç”¨æˆ·")</span></span><br><span class="line">    <span class="meta">@GetMapping("/getUser")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"é›¨æ°´"</span>,<span class="string">"1001"</span>,<span class="string">"123456"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("/getId/{name}")</span></span><br><span class="line">    <span class="meta">@ApiOperation("è·å–ç”¨æˆ·Id")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">(<span class="meta">@ApiParam("ç”¨æˆ·å")</span><span class="meta">@PathVariable</span> String name)</span></span>{</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"110012"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>UIè§†å›¾</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726100059.png"></p><p>æ¥å£æµ‹è¯•</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726100018.png"></p><p>ä¼ å…¥è·¯å¾„å˜é‡nameåï¼ŒæˆåŠŸè¿”å›110012</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Swaggerç®€ä»‹&quot;&gt;&lt;a href=&quot;#Swaggerç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;Swaggerç®€ä»‹&quot;&gt;&lt;/a&gt;Swaggerç®€ä»‹&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;å‰è¨€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‰ç«¯ç»å¸¸æŠ±æ€¨åç«¯ç»™çš„æ¥å£æ–‡æ¡£ä¸</summary>
      
    
    
    
    
    <category term="swagger" scheme="https://rain-sky.github.io/tags/swagger/"/>
    
  </entry>
  
  <entry>
    <title>shiro</title>
    <link href="https://rain-sky.github.io/2021/07/25/shiro/"/>
    <id>https://rain-sky.github.io/2021/07/25/shiro/</id>
    <published>2021-07-25T07:20:50.000Z</published>
    <updated>2021-07-25T08:10:17.503Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><a href="https://shiro.apache.org/">shiroå®˜ç½‘</a></p><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><blockquote><p><strong>Apache Shiroâ„¢</strong> is a powerful and easy-to-use Java security framework that performs authentication, authorization, cryptography, and session management. With Shiroâ€™s easy-to-understand API, you can quickly and easily secure any application â€“ from the smallest mobile applications to the largest web and enterprise applications.</p></blockquote><p>ç®€è€Œè¨€ä¹‹ï¼ŒApache Shiro æ˜¯ä¸€ä¸ªå¼ºå¤§çµæ´»çš„å¼€æºå®‰å…¨æ¡†æ¶ï¼Œå¯ä»¥å®Œå…¨å¤„ç†èº«ä»½éªŒè¯ã€æˆæƒã€åŠ å¯†å’Œä¼šè¯ç®¡ç†ã€‚</p><p><strong><em>shiroèƒ½åšä»€ä¹ˆ</em></strong></p><ul><li>éªŒè¯ç”¨æˆ·èº«ä»½</li><li>ç”¨æˆ·è®¿é—®æƒé™æ§åˆ¶ï¼Œæ¯”å¦‚ï¼š1ã€åˆ¤æ–­ç”¨æˆ·æ˜¯å¦åˆ†é…äº†ä¸€å®šçš„å®‰å…¨è§’è‰²ã€‚2ã€åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¢«æˆäºˆå®ŒæˆæŸä¸ªæ“ä½œçš„æƒé™</li><li>åœ¨é Web æˆ– EJB å®¹å™¨çš„ç¯å¢ƒä¸‹å¯ä»¥ä»»æ„ä½¿ç”¨Session API</li><li>å¯ä»¥å“åº”è®¤è¯ã€è®¿é—®æ§åˆ¶ï¼Œæˆ–è€… Session ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹ä»¶</li><li>å¯å°†ä¸€ä¸ªæˆ–ä»¥ä¸Šç”¨æˆ·å®‰å…¨æ•°æ®æºæ•°æ®ç»„åˆæˆä¸€ä¸ªå¤åˆçš„ç”¨æˆ· â€œviewâ€(è§†å›¾)</li><li>æ”¯æŒå•ç‚¹ç™»å½•(SSO)åŠŸèƒ½</li><li>æ”¯æŒæä¾›â€œRemember Meâ€æœåŠ¡ï¼Œè·å–ç”¨æˆ·å…³è”ä¿¡æ¯è€Œæ— éœ€ç™»å½•<br>Â·Â·Â·</li></ul><p><img src="https://gitee.com/rain-sky/images/raw/master/20210725152615.png"></p><ul><li><strong>Authenticationï¼ˆè®¤è¯ï¼‰ï¼š</strong>ç”¨æˆ·èº«ä»½è¯†åˆ«ï¼Œé€šå¸¸è¢«ç§°ä¸ºç”¨æˆ·â€œç™»å½•â€</li><li><strong>Authorizationï¼ˆæˆæƒï¼‰ï¼š</strong>è®¿é—®æ§åˆ¶ã€‚æ¯”å¦‚æŸä¸ªç”¨æˆ·æ˜¯å¦å…·æœ‰æŸä¸ªæ“ä½œçš„ä½¿ç”¨æƒé™ã€‚</li><li><strong>Session Managementï¼ˆä¼šè¯ç®¡ç†ï¼‰ï¼š</strong>ç‰¹å®šäºç”¨æˆ·çš„ä¼šè¯ç®¡ç†,ç”šè‡³åœ¨éweb æˆ– EJB åº”ç”¨ç¨‹åºã€‚</li><li><strong>Cryptographyï¼ˆåŠ å¯†ï¼‰ï¼š</strong>åœ¨å¯¹æ•°æ®æºä½¿ç”¨åŠ å¯†ç®—æ³•åŠ å¯†çš„åŒæ—¶ï¼Œä¿è¯æ˜“äºä½¿ç”¨ã€‚</li></ul><p><strong><em>é«˜çº§æ¦‚è¿°</em></strong></p><p>åœ¨é«˜çº§æ¦‚å¿µå±‚é¢ï¼ŒShiro çš„æ¶æ„æœ‰ 3 ä¸ªä¸»è¦æ¦‚å¿µï¼šSubjectã€SecurityManager å’Œ Realmsã€‚ä¸‹å›¾æ˜¯è¿™äº›ç»„ä»¶å¦‚ä½•äº¤äº’çš„é«˜çº§æ¦‚è¿°ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼š</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210725152743.png"></p><ul><li><strong>Subjectï¼š</strong>å½“å‰ç”¨æˆ·ï¼ŒSubject å¯ä»¥æ˜¯ä¸€ä¸ªäººï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹æœåŠ¡ã€å®ˆæŠ¤è¿›ç¨‹å¸æˆ·ã€æ—¶é’Ÿå®ˆæŠ¤ä»»åŠ¡æˆ–è€…å…¶å®ƒâ€“å½“å‰å’Œè½¯ä»¶äº¤äº’çš„ä»»ä½•äº‹ä»¶ã€‚</li><li><strong>SecurityManagerï¼š</strong>ç®¡ç†æ‰€æœ‰Subjectï¼ŒSecurityManager æ˜¯ Shiro æ¶æ„çš„æ ¸å¿ƒï¼Œé…åˆå†…éƒ¨å®‰å…¨ç»„ä»¶å…±åŒç»„æˆå®‰å…¨ä¼ã€‚</li><li><strong>Realmsï¼š</strong>ç”¨äºè¿›è¡Œæƒé™ä¿¡æ¯çš„éªŒè¯ï¼Œæˆ‘ä»¬è‡ªå·±å®ç°ã€‚Realm æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‰¹å®šçš„å®‰å…¨ DAOï¼šå®ƒå°è£…ä¸æ•°æ®æºè¿æ¥çš„ç»†èŠ‚ï¼Œå¾—åˆ°Shiro æ‰€éœ€çš„ç›¸å…³çš„æ•°æ®ã€‚åœ¨é…ç½® Shiro çš„æ—¶å€™ï¼Œä½ å¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ªRealm æ¥å®ç°è®¤è¯ï¼ˆauthenticationï¼‰å’Œ/æˆ–æˆæƒï¼ˆauthorizationï¼‰ã€‚</li></ul><h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><p>ç¬¬ä¸€ä¸ªç¨‹åº<a href="https://shiro.apache.org/tutorial.html">å®˜æ–¹æ¡ˆä¾‹</a></p><p>ä¾èµ–å¼•å…¥</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiro uses SLF4J for logging.  We'll use the 'simple' binding</span></span><br><span class="line"><span class="comment">         in this example app.  See http://www.slf4j.org for more info. --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-simple<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>shiro.ini</p><figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"><span class="comment"># Tutorial INI configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Usernames/passwords are based on the classic Mel Brooks' film "Spaceballs" :)</span></span><br><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Users and their (optional) assigned roles</span></span><br><span class="line"><span class="comment"># username = password, role1, role2, ..., roleN</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="attr">root</span> = secret, admin</span><br><span class="line"><span class="attr">guest</span> = guest, guest</span><br><span class="line"><span class="attr">presidentskroob</span> = <span class="number">12345</span>, president</span><br><span class="line"><span class="attr">darkhelmet</span> = ludicrousspeed, darklord, schwartz</span><br><span class="line"><span class="attr">lonestarr</span> = vespa, goodguy, schwartz</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Roles with assigned permissions</span></span><br><span class="line"><span class="comment"># roleName = perm1, perm2, ..., permN</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="section">[roles]</span></span><br><span class="line"><span class="attr">admin</span> = *</span><br><span class="line"><span class="attr">schwartz</span> = lightsaber:*</span><br><span class="line"><span class="attr">goodguy</span> = winnebago:drive:eagle5</span><br></pre></td></tr></tbody></table></figure><p>QuickStart.java</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tutorial</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">transient</span> Logger log = LoggerFactory.getLogger(Tutorial.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        log.info(<span class="string">"My First Apache Shiro Application"</span>);</span><br><span class="line"></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:shiro.ini"</span>);</span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the currently executing user:</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do some stuff with a Session (no need for a web or EJB container!!!)</span></span><br><span class="line">        <span class="comment">//åœ¨å‡ ä¹æ‰€æœ‰ç¯å¢ƒä¸­ï¼Œæ‚¨éƒ½å¯ä»¥é€šè¿‡ä»¥ä¸‹è°ƒç”¨è·å–å½“å‰æ­£åœ¨æ‰§è¡Œçš„ç”¨æˆ·ï¼š</span></span><br><span class="line">        Session session = currentUser.getSession();</span><br><span class="line">        </span><br><span class="line">        session.setAttribute(<span class="string">"someKey"</span>, <span class="string">"aValue"</span>);</span><br><span class="line">        String value = (String) session.getAttribute(<span class="string">"someKey"</span>);</span><br><span class="line">        <span class="keyword">if</span> (value.equals(<span class="string">"aValue"</span>)) {</span><br><span class="line">            log.info(<span class="string">"Retrieved the correct value! ["</span> + value + <span class="string">"]"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// let's login the current user so we can check against roles and permissions:</span></span><br><span class="line">        <span class="keyword">if</span> (!currentUser.isAuthenticated()) {</span><br><span class="line">            UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"lonestarr"</span>, <span class="string">"vespa"</span>);</span><br><span class="line">            token.setRememberMe(<span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                currentUser.login(token);</span><br><span class="line">            } <span class="keyword">catch</span> (UnknownAccountException uae) {</span><br><span class="line">                log.info(<span class="string">"There is no user with username of "</span> + token.getPrincipal());</span><br><span class="line">            } <span class="keyword">catch</span> (IncorrectCredentialsException ice) {</span><br><span class="line">                log.info(<span class="string">"Password for account "</span> + token.getPrincipal() + <span class="string">" was incorrect!"</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (LockedAccountException lae) {</span><br><span class="line">                log.info(<span class="string">"The account for username "</span> + token.getPrincipal() + <span class="string">" is locked.  "</span> +</span><br><span class="line">                        <span class="string">"Please contact your administrator to unlock it."</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// ... catch more exceptions here (maybe custom ones specific to your application?</span></span><br><span class="line">            <span class="keyword">catch</span> (AuthenticationException ae) {</span><br><span class="line">                <span class="comment">//unexpected condition?  error?</span></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//say who they are:</span></span><br><span class="line">        <span class="comment">//print their identifying principal (in this case, a username):</span></span><br><span class="line">        log.info(<span class="string">"User ["</span> + currentUser.getPrincipal() + <span class="string">"] logged in successfully."</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a role:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.hasRole(<span class="string">"schwartz"</span>)) {</span><br><span class="line">            log.info(<span class="string">"May the Schwartz be with you!"</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            log.info(<span class="string">"Hello, mere mortal."</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a typed permission (not instance-level)</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">"lightsaber:wield"</span>)) {</span><br><span class="line">            log.info(<span class="string">"You may use a lightsaber ring.  Use it wisely."</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            log.info(<span class="string">"Sorry, lightsaber rings are for schwartz masters only."</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//a (very powerful) Instance Level permission:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">"winnebago:drive:eagle5"</span>)) {</span><br><span class="line">            log.info(<span class="string">"You are permitted to 'drive' the winnebago with license plate (id) 'eagle5'.  "</span> +</span><br><span class="line">                    <span class="string">"Here are the keys - have fun!"</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            log.info(<span class="string">"Sorry, you aren't allowed to drive the 'eagle5' winnebago!"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//all done - log out!</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line"></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://shiro.apache.org/&quot;&gt;shiroå®˜ç½‘&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä»‹ç»&quot;&gt;&lt;a hre</summary>
      
    
    
    
    
    <category term="å®‰å…¨" scheme="https://rain-sky.github.io/tags/%E5%AE%89%E5%85%A8/"/>
    
    <category term="shiro" scheme="https://rain-sky.github.io/tags/shiro/"/>
    
  </entry>
  
  <entry>
    <title>springSecurity</title>
    <link href="https://rain-sky.github.io/2021/07/24/springSecurity/"/>
    <id>https://rain-sky.github.io/2021/07/24/springSecurity/</id>
    <published>2021-07-24T08:40:22.000Z</published>
    <updated>2021-08-05T09:45:19.969Z</updated>
    
    <content type="html"><![CDATA[<h2 id="spring-security"><a href="#spring-security" class="headerlink" title="spring security"></a>spring security</h2><h3 id="springsSecurityç®€ä»‹"><a href="#springsSecurityç®€ä»‹" class="headerlink" title="springsSecurityç®€ä»‹"></a>springsSecurityç®€ä»‹</h3><p><strong>springSecurityæ˜¯ä»€ä¹ˆ</strong></p><p><a href="https://docs.spring.io/spring-security/site/docs/5.2.11.RELEASE/reference/html/">5.2.11ç‰ˆæœ¬æ–‡æ¡£åœ°å€</a></p><blockquote><p>Spring Security is a powerful and highly customizable authentication and access-control framework. It is the de-facto standard for securing Spring-based applications.</p><p>Spring Security is a framework that focuses on providing both authentication and authorization to Java applications. Like all Spring projects, the real power of Spring Security is found in how easily it can be extended to meet custom requirements</p></blockquote><p><strong>springSecurityèƒ½åšä»€ä¹ˆï¼Ÿ</strong></p><ul><li>èº«ä»½éªŒè¯</li><li>è®¿é—®æ§åˆ¶</li></ul><p>å…¶æ ¸å¿ƒå°±æ˜¯ä¸€ç»„è¿‡æ»¤å™¨é“¾ï¼Œé¡¹ç›®å¯åŠ¨åå°†ä¼šè‡ªåŠ¨é…ç½®ã€‚æœ€æ ¸å¿ƒçš„å°±æ˜¯ Basic Authentication Filter ç”¨æ¥è®¤è¯ç”¨æˆ·çš„èº«ä»½ï¼Œä¸€ä¸ªåœ¨spring securityä¸­ä¸€ç§è¿‡æ»¤å™¨å¤„ç†ä¸€ç§è®¤è¯æ–¹å¼ã€‚</p><p><strong>ç‰¹æ€§</strong></p><blockquote><p>Spring Security provides comprehensive support for authentication, authorization, and protection against <a href="https://docs.spring.io/spring-security/site/docs/5.2.11.RELEASE/reference/html/features.html#exploits">common exploits</a>. It also provides integration with other libraries to simplify its usage.</p></blockquote><p>Spring Security ä¸ºèº«ä»½éªŒè¯ã€æˆæƒå’Œå¸¸è§æ¼æ´åˆ©ç”¨æä¾›å…¨é¢æ”¯æŒã€‚å®ƒè¿˜æä¾›ä¸å…¶ä»–åº“çš„é›†æˆä»¥ç®€åŒ–å…¶ä½¿ç”¨ã€‚</p><p><strong><em>æ¼æ´ä¿æŠ¤</em></strong></p><p>æ¼æ´ä¸¾ä¾‹ï¼š</p><ul><li>Cross Site Request Forgery (CSRF) è·¨ç«™è¯·æ±‚ä¼ªé€ </li><li>Security HTTP Response Headers</li><li>â€¦</li></ul><h3 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h3><p>spring bootç¯å¢ƒï¼Œmavenä½¿ç”¨</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>Since Spring Boot provides a Maven BOM to manage dependency versions, you do not need to specify a version. If you wish to override the Spring Security version, you may do so by providing a Maven property, as the following example shows:</p></blockquote><p>ç”±äºspring bootç‰ˆæœ¬ä»²è£ï¼Œå¦‚éœ€æŒ‡å®šç‰ˆæœ¬ï¼Œå¦‚ä¸‹</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring-security.version</span>&gt;</span>5.2.11.RELEASE<span class="tag">&lt;/<span class="name">spring-security.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>ç”±äº Spring Security ä»…åœ¨ä¸»è¦ç‰ˆæœ¬ä¸­è¿›è¡Œé‡å¤§æ›´æ”¹ï¼Œå› æ­¤åœ¨ Spring Boot ä¸­ä½¿ç”¨è¾ƒæ–°ç‰ˆæœ¬çš„ Spring Security æ˜¯å®‰å…¨çš„ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶æ‚¨å¯èƒ½è¿˜éœ€è¦æ›´æ–° Spring Framework çš„ç‰ˆæœ¬ã€‚æ‚¨å¯ä»¥é€šè¿‡æ·»åŠ  Maven å±æ€§æ¥å®ç°ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p></blockquote><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.2.15.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹</strong></p><p>å‡å®šæˆ‘ä»¬æœ‰ä¸åŒç­‰çº§ç”¨æˆ·ï¼Œå¹¶ä¸”å·²ç»ç¼–å†™å¥½å¯¹åº”controller</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.chen.boot.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="comment">//åªæœ‰ç›¸åº”ç­‰çº§çš„ç”¨æˆ·æ‰èƒ½è®¿é—®å¯¹åº”ç­‰çº§æ‰èƒ½è®¿é—®çš„é¡µé¢ï¼Œ/è¯·æ±‚æ‰€æœ‰ç”¨æˆ·å¯è®¿é—®</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">"/"</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">"/level1/**"</span>).hasRole(<span class="string">"level1"</span>)</span><br><span class="line">                .antMatchers(<span class="string">"/level2/**"</span>).hasRole(<span class="string">"level2"</span>)</span><br><span class="line">                .antMatchers(<span class="string">"/level3/**"</span>).hasRole(<span class="string">"level3"</span>);</span><br><span class="line">        <span class="comment">//æœªç™»å½•è¿”å›åˆ°ç™»é™†é¡µé¢ï¼Œè‡ªå®šä¹‰æˆ‘ä»¬è‡ªå·±å†™çš„/toLoginè¯·æ±‚åˆ°å‰ç«¯é¡µé¢,å¤„ç†ç™»å½•è¯·æ±‚çš„urlé…ç½®ä¸ºè‡ªå·±å†™çš„/login</span></span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰å‰ç«¯ä¼ é€’çš„ç”¨æˆ·åå¯†ç å‚æ•°åç§°ä¸ºuserå’Œpwdï¼Œé»˜è®¤ä¸ºusernameä¸password</span></span><br><span class="line">        http.formLogin().loginPage(<span class="string">"/toLogin"</span>).passwordParameter(<span class="string">"pwd"</span>)</span><br><span class="line">            .usernameParameter(<span class="string">"user"</span>).loginProcessingUrl(<span class="string">"/login"</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯æ³¨é”€åŠŸèƒ½,æ³¨é”€æˆåŠŸè¿”å›é¦–é¡µ,å‰ç«¯æ³¨é”€æŒ‰é’®é…ç½®/logoutè¯·æ±‚å³å¯</span></span><br><span class="line">        http.logout().logoutSuccessUrl(<span class="string">"/"</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯è®°ä½æˆ‘åŠŸèƒ½,å¹¶ä¸”åœ¨è‡ªå·±çš„ç™»å½•é¡µä¼ é€’rememberå‚æ•°ï¼Œæ§åˆ¶å°èƒ½æŸ¥åˆ°ç›¸åº”cookie</span></span><br><span class="line">        http.rememberMe().rememberMeParameter(<span class="string">"remember"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="comment">//ç”¨æˆ·æœ¬åº”å½“ä»æ•°æ®åº“ä¸­è·å–ï¼Œæ­¤å¤„ç›´æ¥ä»å†…å­˜ä¸­ï¼Œä¾¿äºæµ‹è¯•</span></span><br><span class="line">        <span class="comment">//ç»™rootç”¨æˆ·èµ‹äºˆå…¨éƒ¨è§’è‰²æƒé™ï¼Œæ™®é€šç”¨æˆ·æˆäºˆlevel1è§’è‰²æƒé™</span></span><br><span class="line">        auth.inMemoryAuthentication().passwordEncoder(<span class="keyword">new</span> BCryptPasswordEncoder())</span><br><span class="line">                .withUser(<span class="string">"root"</span>).password(<span class="keyword">new</span>  BCryptPasswordEncoder().encode(<span class="string">"123123"</span>)).roles(<span class="string">"level1"</span>,<span class="string">"level2"</span>,<span class="string">"level3"</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">"commonUser"</span>).password(<span class="keyword">new</span>  BCryptPasswordEncoder().encode(<span class="string">"123456"</span>)).roles(<span class="string">"level1"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å‰ç«¯ç™»å½•è¡¨å•ç¤ºä¾‹</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210725111116.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;spring-security&quot;&gt;&lt;a href=&quot;#spring-security&quot; class=&quot;headerlink&quot; title=&quot;spring security&quot;&gt;&lt;/a&gt;spring security&lt;/h2&gt;&lt;h3 id=&quot;springsSecuri</summary>
      
    
    
    
    
    <category term="springSecurity" scheme="https://rain-sky.github.io/tags/springSecurity/"/>
    
  </entry>
  
  <entry>
    <title>redisåŸºç¡€</title>
    <link href="https://rain-sky.github.io/2021/07/24/redis%E5%9F%BA%E7%A1%80/"/>
    <id>https://rain-sky.github.io/2021/07/24/redis%E5%9F%BA%E7%A1%80/</id>
    <published>2021-07-24T07:41:03.000Z</published>
    <updated>2021-08-04T08:56:20.226Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨noSql"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨noSql" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨noSql"></a>ä¸ºä»€ä¹ˆä½¿ç”¨noSql</h2><blockquote><p>noSqlï¼Œä¸ä»…ä»…æ˜¯sql</p></blockquote><h3 id="å•æœºmysqlæ—¶ä»£"><a href="#å•æœºmysqlæ—¶ä»£" class="headerlink" title="å•æœºmysqlæ—¶ä»£"></a>å•æœºmysqlæ—¶ä»£</h3><p>åœ¨90å¹´ä»£ï¼Œä¸€ä¸ªç½‘ç«™çš„è®¿é—®é‡ä¸€èˆ¬éƒ½ä¸å¤§ï¼Œç”¨å•ä¸ªæ•°æ®åº“å®Œå…¨å¯ä»¥è½»æ¾åº”ä»˜ã€‚<br>åœ¨é‚£ä¸ªæ—¶å€™ï¼Œæ›´å¤šçš„éƒ½æ˜¯é™æ€ç½‘é¡µï¼ŒåŠ¨æ€äº¤äº’ç±»å‹çš„ç½‘ç«™ä¸å¤šï¼Œæ— è®ºè¯»å†™éƒ½åœ¨åŒä¸€ä¸ªå®ä¾‹ä¸­å®Œæˆã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726114217.png"></p><ul><li>APP åº”ç”¨ç«¯</li><li>DAL æ•°æ®è®¿é—®å±‚ï¼ˆjdbcï¼Œæˆ–è€…ormæ¡†æ¶å¦‚mybatiesï¼ŒHibernateç­‰ï¼‰</li><li>mysql instance æ•°æ®åº“å®ä¾‹</li></ul><h3 id="Memcached-MySQL-å‚ç›´æ‹†åˆ†"><a href="#Memcached-MySQL-å‚ç›´æ‹†åˆ†" class="headerlink" title="Memcached+MySQL+å‚ç›´æ‹†åˆ†"></a>Memcached+MySQL+å‚ç›´æ‹†åˆ†</h3><p>â€ƒåæ¥ï¼Œéšç€è®¿é—®é‡çš„ä¸Šå‡ï¼Œå‡ ä¹å¤§éƒ¨åˆ†ä½¿ç”¨MySQLæ¶æ„çš„ç½‘ç«™åœ¨æ•°æ®åº“ä¸Šéƒ½å¼€å§‹å‡ºç°äº†æ€§èƒ½é—®é¢˜ï¼Œwebç¨‹åºä¸å†ä»…ä»…ä¸“æ³¨åœ¨åŠŸèƒ½ä¸Šï¼ŒåŒæ—¶ä¹Ÿåœ¨è¿½æ±‚æ€§èƒ½ã€‚ç¨‹åºå‘˜ä»¬å¼€å§‹å¤§é‡çš„ä½¿ç”¨ç¼“å­˜æŠ€æœ¯æ¥ç¼“è§£æ•°æ®åº“çš„å‹åŠ›ï¼Œä¼˜åŒ–æ•°æ®åº“çš„ç»“æ„å’Œç´¢å¼•ã€‚å¼€å§‹æ¯”è¾ƒæµè¡Œçš„æ˜¯é€šè¿‡æ–‡ä»¶ç¼“å­˜æ¥ç¼“è§£æ•°æ®åº“å‹åŠ›ï¼Œä½†æ˜¯å½“è®¿é—®é‡ç»§ç»­å¢å¤§çš„æ—¶å€™ï¼Œå¤šå°webæœºå™¨é€šè¿‡æ–‡ä»¶ç¼“å­˜ä¸èƒ½å…±äº«ï¼Œå¤§é‡çš„å°æ–‡ä»¶ç¼“å­˜ä¹Ÿå¸¦äº†äº†æ¯”è¾ƒé«˜çš„IOå‹åŠ›ã€‚åœ¨è¿™ä¸ªæ—¶å€™ï¼ŒMemcachedå°±è‡ªç„¶çš„æˆä¸ºä¸€ä¸ªéå¸¸æ—¶å°šçš„æŠ€æœ¯äº§å“ã€‚</p><p>â€ƒMemcachedä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åˆ†å¸ƒå¼çš„ç¼“å­˜æœåŠ¡å™¨ï¼Œä¸ºå¤šä¸ªwebæœåŠ¡å™¨æä¾›äº†ä¸€ä¸ªå…±äº«çš„é«˜æ€§èƒ½ç¼“å­˜æœåŠ¡ï¼Œåœ¨MemcachedæœåŠ¡å™¨ä¸Šï¼Œåˆå‘å±•äº†æ ¹æ®hashç®—æ³•æ¥è¿›è¡Œå¤šå°Memcachedç¼“å­˜æœåŠ¡çš„æ‰©å±•ï¼Œç„¶ååˆå‡ºç°äº†ä¸€è‡´æ€§hashæ¥è§£å†³å¢åŠ æˆ–å‡å°‘ç¼“å­˜æœåŠ¡å™¨å¯¼è‡´é‡æ–°hashå¸¦æ¥çš„å¤§é‡ç¼“å­˜å¤±æ•ˆçš„å¼Šç«¯ã€‚</p><img src="https://gitee.com/rain-sky/images/raw/master/20210726114531.png" style="zoom:80%;"><h3 id="Mysqlä¸»ä»è¯»å†™åˆ†ç¦»"><a href="#Mysqlä¸»ä»è¯»å†™åˆ†ç¦»" class="headerlink" title="Mysqlä¸»ä»è¯»å†™åˆ†ç¦»"></a>Mysqlä¸»ä»è¯»å†™åˆ†ç¦»</h3><p>ç”±äºæ•°æ®åº“çš„å†™å…¥å‹åŠ›å¢åŠ ï¼ŒMemcachedåªèƒ½ç¼“è§£æ•°æ®åº“çš„è¯»å–å‹åŠ›ã€‚è¯»å†™é›†ä¸­åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸Šè®©æ•°æ®åº“ä¸å ªé‡è´Ÿï¼Œå¤§éƒ¨åˆ†ç½‘ç«™å¼€å§‹ä½¿ç”¨ä¸»ä»å¤åˆ¶æŠ€æœ¯æ¥è¾¾åˆ°è¯»å†™åˆ†ç¦»ï¼Œä»¥æé«˜è¯»å†™æ€§èƒ½å’Œè¯»åº“çš„å¯æ‰©å±•æ€§ã€‚</p><img src="https://gitee.com/rain-sky/images/raw/master/20210726121707.png" style="zoom:80%;"><ul><li>M ä¸»æœåŠ¡å™¨ï¼Œè´Ÿè´£å†™ä¸šåŠ¡</li><li>S ä»æœåŠ¡å™¨ï¼ŒåŒæ­¥Mæ•°æ®</li></ul><h3 id="åˆ†åº“åˆ†è¡¨-æ°´å¹³æ‹†åˆ†-mysqlé›†ç¾¤"><a href="#åˆ†åº“åˆ†è¡¨-æ°´å¹³æ‹†åˆ†-mysqlé›†ç¾¤" class="headerlink" title="åˆ†åº“åˆ†è¡¨+æ°´å¹³æ‹†åˆ†+mysqlé›†ç¾¤"></a>åˆ†åº“åˆ†è¡¨+æ°´å¹³æ‹†åˆ†+mysqlé›†ç¾¤</h3><p>åœ¨Memcachedçš„é«˜é€Ÿç¼“å­˜ï¼ŒMySQLçš„ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»çš„åŸºç¡€ä¹‹ä¸Šï¼Œè¿™æ—¶MySQLä¸»åº“çš„å†™å‹åŠ›å¼€å§‹å‡ºç°ç“¶é¢ˆï¼Œè€Œæ•°æ®é‡çš„æŒç»­çŒ›å¢ï¼Œç”±äºMyISAMåœ¨å†™æ•°æ®çš„æ—¶å€™ä¼šä½¿ç”¨è¡¨é”ï¼Œåœ¨é«˜å¹¶å‘å†™æ•°æ®çš„æƒ…å†µä¸‹ä¼šå‡ºç°ä¸¥é‡çš„é”é—®é¢˜ï¼Œå¤§é‡çš„é«˜å¹¶å‘MySQLåº”ç”¨å¼€å§‹ä½¿ç”¨InnoDBå¼•æ“ä»£æ›¿MyISAMã€‚</p><ul><li>MyISAM è¡¨é”</li><li>InnoDB è¡Œé”</li></ul><p><img src="https://gitee.com/rain-sky/images/raw/master/20210726122057.png"></p><p><strong>ä¸€ä¸ªç°ä»£äº’è”ç½‘æœåŠ¡æ¶æ„æ¨¡å‹</strong></p><img src="https://gitee.com/rain-sky/images/raw/master/20210726123128.png" style="zoom: 67%;"><p>æœ€å‰é¢çš„æ˜¯ä¼ä¸šçº§é˜²ç«å¢™ï¼Œåé¢é€šè¿‡è´Ÿè½½å‡è¡¡ä¸»æœºï¼ˆè½¯è´Ÿè½½ï¼šNginxï¼Œç¡¬è´Ÿè½½ï¼šF5ï¼‰åœ¨ web æœåŠ¡å™¨é›†ç¾¤ä¹‹é—´è¿›è¡Œè°ƒåº¦ï¼Œå†ç”±å…·ä½“çš„ web æœåŠ¡å™¨ï¼ˆTomcatï¼‰å»è®¿é—®ç¼“å­˜ï¼Œè®¿é—®æ•°æ®åº“ã€‚</p><h3 id="noSqlçš„ä¼˜åŠ¿"><a href="#noSqlçš„ä¼˜åŠ¿" class="headerlink" title="noSqlçš„ä¼˜åŠ¿"></a>noSqlçš„ä¼˜åŠ¿</h3><ul><li><p>æ˜“æ‰©å±•<br> NoSQLæ•°æ®åº“ç§ç±»ç¹å¤šï¼Œä½†æ˜¯ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹éƒ½æ˜¯å»æ‰å…³ç³»æ•°æ®åº“çš„å…³ç³»å‹ç‰¹æ€§ã€‚æ•°æ®ä¹‹é—´æ— å…³ç³»ï¼Œè¿™æ ·å°±éå¸¸å®¹æ˜“æ‰©å±•ã€‚ä¹Ÿæ— å½¢ä¹‹é—´ï¼Œåœ¨æ¶æ„çš„å±‚é¢ä¸Šå¸¦æ¥äº†å¯æ‰©å±•çš„èƒ½åŠ›ã€‚</p></li><li><p>å¤§æ•°æ®é‡ï¼Œé«˜æ€§èƒ½<br> NoSQLæ•°æ®åº“éƒ½å…·æœ‰éå¸¸é«˜çš„è¯»å†™æ€§èƒ½ï¼Œå°¤å…¶åœ¨å¤§æ•°æ®é‡ä¸‹ï¼ŒåŒæ ·è¡¨ç°ä¼˜ç§€ã€‚è¿™å¾—ç›Šäºå®ƒçš„æ— å…³ç³»æ€§ï¼Œæ•°æ®åº“çš„ç»“æ„ç®€å•ã€‚ä¸€èˆ¬MySQLä½¿ç”¨Query Cacheï¼Œæ¯æ¬¡è¡¨çš„æ›´æ–°Cacheå°±å¤±æ•ˆï¼Œæ˜¯ä¸€ç§å¤§ç²’åº¦çš„Cacheï¼Œåœ¨é’ˆå¯¹web2.0çš„äº¤äº’é¢‘ç¹çš„åº”ç”¨ï¼ŒCacheæ€§èƒ½ä¸é«˜ã€‚è€ŒNoSQLçš„Cacheæ˜¯è®°å½•çº§çš„ï¼Œæ˜¯ä¸€ç§ç»†ç²’åº¦çš„Cacheï¼Œæ‰€ä»¥NoSQLåœ¨è¿™ä¸ªå±‚é¢ä¸Šæ¥è¯´å°±è¦æ€§èƒ½é«˜å¾ˆå¤šäº†ã€‚</p></li><li><p>çµæ´»çš„æ•°æ®æ¨¡å‹<br> NoSQLæ— éœ€äº‹å…ˆä¸ºè¦å­˜å‚¨çš„æ•°æ®å»ºç«‹å­—æ®µï¼Œéšæ—¶å¯ä»¥å­˜å‚¨è‡ªå®šä¹‰çš„æ•°æ®æ ¼å¼ã€‚è€Œåœ¨å…³ç³»æ•°æ®åº“é‡Œï¼Œå¢åˆ å­—æ®µæ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚å¦‚æœæ˜¯éå¸¸å¤§æ•°æ®é‡çš„è¡¨ï¼Œå¢åŠ å­—æ®µç®€ç›´å°±æ˜¯ä¸€ä¸ªå™©æ¢¦ã€‚è¿™ç‚¹åœ¨å¤§æ•°æ®é‡çš„web2.0æ—¶ä»£å°¤å…¶æ˜æ˜¾ã€‚</p></li><li><p>é«˜å¯ç”¨<br> NoSQLåœ¨ä¸å¤ªå½±å“æ€§èƒ½çš„æƒ…å†µï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„å®ç°é«˜å¯ç”¨çš„æ¶æ„ã€‚æ¯”å¦‚Cassandraï¼ŒHBaseæ¨¡å‹ï¼Œé€šè¿‡å¤åˆ¶æ¨¡å‹ä¹Ÿèƒ½å®ç°é«˜å¯ç”¨ã€‚</p></li></ul><p><strong>ä¸€äº›å¸¸ç”¨çš„nosqlä¸¾ä¾‹</strong></p><ul><li>CouchDB ï¼šCouchDBæ˜¯ä¸€ç§<strong>é¢å‘æ–‡æ¡£</strong>(document-oriented)çš„nosqlæ•°æ®åº“ï¼Œæ–‡æ¡£çš„å­˜å‚¨æ ¼å¼é€šè¿‡JSONè¿›è¡Œæè¿°ï¼Œåœ¨ç»“æ„éƒ¨ç½²ä¸Šé‡‡ç”¨çš„æ˜¯peer-basedæ–¹å¼ï¼Œå³æ¯å°æœºå™¨åœ¨åŠŸèƒ½ä¸Šæ¥è®²æ˜¯åŒç­‰é‡è¦çš„ï¼Œæ²¡æœ‰masterå’Œslaveçš„åŒºåˆ†ï¼Œæ‰€å­˜å‚¨çš„æ•°æ®ä¹Ÿéƒ½æ˜¯ç›¸åŒçš„(æ²¡æœ‰åšåˆ°æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨)ï¼Œç±»ä¼¼äºSubversionä¸­ç‰ˆæœ¬åº“å’Œå·¥ä½œæ‹·è´çš„æ¦‚å¿µã€‚</li><li>Redisï¼šRedisæ˜¯ä¸€ç§åŸºäº<strong>key-valueå­˜å‚¨æ ¼å¼</strong>çš„nosqlæ•°æ®åº“ï¼Œåœ¨ç»“æ„éƒ¨ç½²ä¸Šé‡‡ç”¨äº†master/slaveçš„æ–¹å¼ï¼Œå…¶ä¸­slaveèŠ‚ç‚¹èµ·åˆ°å¤‡ä»½çš„ä½œç”¨ï¼Œå½“masterèŠ‚ç‚¹å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼ŒslaveèŠ‚ç‚¹å¯æ›¿æ¢æˆmasterï¼Œä»è€Œç¡®ä¿äº†ç³»ç»Ÿå®‰å…¨ç¨³å®šçš„ç‰¹æ€§ã€‚</li><li>MongoDBï¼šåŒCouchDBä¸€æ ·ï¼ŒMongoDBä¹Ÿæ˜¯ä¸€ç§<strong>é¢å‘æ–‡æ¡£</strong>çš„nosqlæ•°æ®åº“ï¼Œæ‰€ä¸åŒçš„æ˜¯åœ¨å­˜å‚¨æ–¹å¼ä¸Šé‡‡ç”¨çš„æ˜¯åˆ†å¸ƒå¼å­˜å‚¨ï¼Œå…¶éƒ¨ç½²ç»“æ„ä¸Redisç›¸ä¼¼(åŸºäºmaster/slaveæ–¹å¼)ï¼Œåªä¸è¿‡åŠŸèƒ½ç»„ä»¶è¾ƒRedisåˆ’åˆ†çš„æ›´åŠ è¯¦ç»†ã€‚</li></ul><p><strong>å››ç§nosqlå¯¹æ¯”</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210727145920.png"></p><h2 id="redis-ä»‹ç»"><a href="#redis-ä»‹ç»" class="headerlink" title="redis ä»‹ç»"></a>redis ä»‹ç»</h2><blockquote><p>åŸºäºredis6.xç‰ˆ</p></blockquote><p>Redisæ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰ï¼Œå†…å­˜å­˜å‚¨çš„æ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œå¯ç”¨ä½œæ•°æ®åº“ï¼Œé«˜é€Ÿç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—ä»£ç†ã€‚å®ƒæ”¯æŒå­—ç¬¦ä¸²ã€å“ˆå¸Œè¡¨ã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆï¼Œä½å›¾ï¼Œhyperloglogsç­‰æ•°æ®ç±»å‹ã€‚å†…ç½®å¤åˆ¶ã€Luaè„šæœ¬ã€LRUæ”¶å›ã€äº‹åŠ¡ä»¥åŠä¸åŒçº§åˆ«ç£ç›˜æŒä¹…åŒ–åŠŸèƒ½ï¼ŒåŒæ—¶é€šè¿‡Redis Sentinelæä¾›é«˜å¯ç”¨ï¼Œé€šè¿‡Redis Clusteræä¾›è‡ªåŠ¨åˆ†åŒºã€‚</p><p><strong>Redisä¸å…¶ä»–key-valueå­˜å‚¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</strong></p><ul><li>Redisæœ‰ç€æ›´ä¸ºå¤æ‚çš„æ•°æ®ç»“æ„å¹¶ä¸”æä¾›å¯¹ä»–ä»¬çš„åŸå­æ€§æ“ä½œï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åŒäºå…¶ä»–æ•°æ®åº“çš„è¿›åŒ–è·¯å¾„ã€‚Redisçš„æ•°æ®ç±»å‹éƒ½æ˜¯åŸºäºåŸºæœ¬æ•°æ®ç»“æ„çš„åŒæ—¶å¯¹ç¨‹åºå‘˜é€æ˜ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„æŠ½è±¡ã€‚</li><li>Redisè¿è¡Œåœ¨å†…å­˜ä¸­ä½†æ˜¯å¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ‰€ä»¥åœ¨å¯¹ä¸åŒæ•°æ®é›†è¿›è¡Œé«˜é€Ÿè¯»å†™æ—¶éœ€è¦æƒè¡¡å†…å­˜ï¼Œåº”ä¸ºæ•°æ®é‡ä¸èƒ½å¤§äºç¡¬ä»¶å†…å­˜ã€‚åœ¨å†…å­˜æ•°æ®åº“æ–¹é¢çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œ ç›¸æ¯”åœ¨ç£ç›˜ä¸Šç›¸åŒçš„å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œåœ¨å†…å­˜ä¸­æ“ä½œèµ·æ¥éå¸¸ç®€å•ï¼Œè¿™æ ·Rediså¯ä»¥åšå¾ˆå¤šå†…éƒ¨å¤æ‚æ€§å¾ˆå¼ºçš„äº‹æƒ…ã€‚ åŒæ—¶ï¼Œåœ¨ç£ç›˜æ ¼å¼æ–¹é¢ä»–ä»¬æ˜¯ç´§å‡‘çš„ä»¥è¿½åŠ çš„æ–¹å¼äº§ç”Ÿçš„ï¼Œå› ä¸ºä»–ä»¬å¹¶ä¸éœ€è¦è¿›è¡Œéšæœºè®¿é—®ã€‚</li></ul><h3 id="linuxä¸‹å®‰è£…redis"><a href="#linuxä¸‹å®‰è£…redis" class="headerlink" title="linuxä¸‹å®‰è£…redis"></a>linuxä¸‹å®‰è£…redis</h3><p>å‡†å¤‡å¥½å‹ç¼©åŒ…ä¼ è¾“åˆ°Linuxç›®å½•</p><p><strong>è§£å‹åå¾—åˆ°redis</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210731174107.png"></p><p>è¿›å…¥è§£å‹åçš„æ–‡ä»¶</p><p>yum install gcc-c++</p><img src="https://gitee.com/rain-sky/images/raw/master/20210731175718.png" style="zoom: 50%;"><p>å®‰è£…redis6.Xä»¥ä¸Šç‰ˆæœ¬å®‰è£…6.0ä»¥ä¸Šç‰ˆæœ¬éœ€è¦å‡çº§gccåˆ°5.3åŠä»¥ä¸Š,å¦‚ä¸‹ï¼š</p><p>è¿è¡Œä¸‹é¢å‘½ä»¤å‡çº§gcc<br>#ç¬¬ä¸€æ­¥<br>sudo yum install centos-release-scl<br>#ç¬¬äºŒæ­¥<br>sudo yum install devtoolset-7-gcc*<br>#ç¬¬ä¸‰æ­¥<br>scl enable devtoolset-7 bash</p><p>æ›´æ–°å®Œæˆgccåæˆ‘ä»¬è¿›å…¥redisç›®å½•ä¸‹ï¼Œæ‰§è¡Œmake</p><img src="https://gitee.com/rain-sky/images/raw/master/20210731180138.png" style="zoom:50%;"><p>è‡³æ­¤redisåŸºæœ¬å®‰è£…å®Œæˆï¼Œé»˜è®¤å®‰è£…åˆ°/usr/local/binç›®å½•ä¸‹</p><p>å¤åˆ¶ä¸€ä»½redisé…ç½®æ–‡ä»¶åˆ°æ­¤ç›®å½•ä¸‹ï¼Œä¿®æ”¹æ­¤é…ç½®æ–‡ä»¶ï¼Œdaemonizeä¿®æ”¹ä¸ºyes,è®©redisåå°å¯åŠ¨</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210731183404.png"></p><p>æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210731183637.png"></p><p>è¿æ¥redisæœåŠ¡</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210731183754.png"></p><p>æŸ¥çœ‹redisæœåŠ¡æ˜¯å¦å¼€å¯</p><img src="https://gitee.com/rain-sky/images/raw/master/20210731183950.png" style="zoom:67%;"><p>æ–­å¼€redisæœåŠ¡</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210731184120.png"></p><p>å†æ¬¡æŸ¥çœ‹æœåŠ¡æ˜¯å¦å­˜åœ¨</p><img src="https://gitee.com/rain-sky/images/raw/master/20210731184222.png" style="zoom:67%;"><blockquote><p>redisçš„å®‰è£…ç›¸å…³å°±åˆ°æ­¤æä¸€æ®µè½~ğŸ’ª</p></blockquote><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><h3 id="redisæ•°æ®åº“"><a href="#redisæ•°æ®åº“" class="headerlink" title="redisæ•°æ®åº“"></a>redisæ•°æ®åº“</h3><p>redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œé…ç½®æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤ä½¿ç”¨ç¬¬0ä¸ªï¼Œå¯ä»¥ä½¿ç”¨selectå‘½ä»¤åˆ‡æ¢æ•°æ®åº“ã€‚</p><p>åˆ‡æ¢æ•°æ®åº“ï¼šselect  7</p><p>æ•°æ®åº“å¤§å°ï¼šdbsize</p><p>è¾“å…¥ä¸€ä¸ªé”®å€¼å¯¹ï¼šset keyname value</p><p>å¾—åˆ°ä¸€ä¸ªvalueï¼šget  keyname</p><p>ä¿®æ”¹keyåç§°ï¼šrename key newkey</p><p>æŸ¥è¯¢æ‰€æœ‰çš„keyï¼škey *</p><p>æŸ¥è¯¢æŸä¸ªkeyæ˜¯å¦å­˜åœ¨ï¼šexists keynane</p><p>ç§»é™¤æŸä¸€ä¸ªkeyï¼šmove keyname  2ï¼ˆ2ä»£è¡¨ä»ç¬¬äºŒä¸ªæ•°æ®åº“ä¸­ç§»é™¤ï¼‰</p><p>æŸ¥è¯¢æŸä¸ªkeyè¿˜å‰©å¤šå°‘æ—¶é—´è¿‡æœŸï¼šttl keyname</p><p>è®¾ç½®æŸä¸ªé”®çš„è¿‡æœŸæ—¶é—´ï¼šexpire keyname 10(10såè¿‡æœŸ)</p><p>æŸ¥çœ‹å½“å‰keyçš„ç±»å‹ï¼štype keyname</p><p>æ¸…ç©ºå½“å‰æ•°æ®åº“ï¼šflushdb</p><p>æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“ï¼šflushall</p><p><strong>redisæ˜¯å•çº¿ç¨‹çš„</strong></p><blockquote><p>redisæ˜¯åŸºäºå†…å­˜æ“ä½œï¼Œcpuå¹¶ä¸æ˜¯redisçš„æ€§èƒ½ç“¶é¢ˆï¼Œredisçš„ç“¶é¢ˆæ˜¯æœºå™¨çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆrediså•çº¿ç¨‹è¿™ä¹ˆå¿«ï¼Ÿ</p><p>è¯¯åŒº1ï¼šé«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸€å®šæ˜¯å¤šçº¿ç¨‹çš„ï¼Ÿ</p><p>è¯¯åŒº2ï¼šå¤šçº¿ç¨‹ä¸€å®šæ¯”å•çº¿ç¨‹æ•ˆç‡é«˜ï¼Ÿ</p><p>æ ¸å¿ƒï¼šredisæ˜¯å°†æ‰€æœ‰æ•°æ®å­˜æ”¾äºå†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥è¯´redisä½¿ç”¨å•çº¿ç¨‹æ˜¯æœ€å¿«çš„ï¼Œå› ä¸ºæ²¡æœ‰CPUä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿæ¥è¯´ï¼Œå¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ªCPUä¸Šçš„ã€‚</p><h3 id="äº”å¤§æ•°æ®ç±»å‹"><a href="#äº”å¤§æ•°æ®ç±»å‹" class="headerlink" title="äº”å¤§æ•°æ®ç±»å‹"></a>äº”å¤§æ•°æ®ç±»å‹</h3><h4 id="Stringå­—ç¬¦ä¸²ç±»å‹"><a href="#Stringå­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="Stringå­—ç¬¦ä¸²ç±»å‹"></a>Stringå­—ç¬¦ä¸²ç±»å‹</h4><hr><p>åŸºæœ¬å‘½ä»¤æ“ä½œï¼š</p><p>set  name  rain è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ä¸º rain</p><p>append name sky ç»™åä¸ºnameçš„keyè¿½åŠ å­—ç¬¦skyï¼Œæ‰€ä»¥è¿½åŠ åä¸ºrainskyï¼ˆè‹¥æŒ‡å®škeynameä¸å­˜åœ¨ï¼Œåˆ™ç›¸å½“äºset keyï¼‰</p><p>strlen name è·å–nameçš„é•¿åº¦ï¼Œrainskyå³ä¸º7</p><p>set num 1 è®¾ç½®numåˆå§‹å€¼ä¸º1</p><p>incr numä½¿numè‡ªå¢1.å³ä¸º2</p><p>decr numä½¿numè‡ªå‡1ï¼Œå³ä¸º1</p><p>incrby num 10 ä½¿numè‡ªå¢10</p><p>decrby num 10ä½¿numè‡ªå‡10</p><hr><p>set str â€œhello,world!â€</p><p>getrange str 0 4è·å–str0-4åŒºé—´å†…å®¹ï¼ˆé—­åŒºé—´ï¼‰ï¼Œå³ä¸ºhello</p><p>setrange str 1 xxxxä»æŒ‡å®šä½ç½®å¼€å§‹ç”¨æŒ‡å®šå­—ç¬¦ä¸²ä½œæ›¿æ¢ï¼Œå³ä¸ºhxxxx,world!</p><hr><blockquote><p>setexä¸setnx</p></blockquote><p>SETEX key seconds value</p><p>å«ä¹‰ï¼š</p><p>â€‹     å°†å€¼ value å…³è”åˆ° key ï¼Œå¹¶å°† key çš„ç”Ÿå­˜æ—¶é—´è®¾ä¸º seconds (ä»¥ç§’ä¸ºå•ä½)ã€‚</p><p>â€‹     å¦‚æœ key å·²ç»å­˜åœ¨ï¼Œ SETEX å‘½ä»¤å°†è¦†å†™æ—§å€¼ã€‚</p><p>è¿”å›å€¼ï¼š</p><p>â€‹     è®¾ç½®æˆåŠŸæ—¶è¿”å› OK ã€‚</p><p>â€‹     å½“ seconds å‚æ•°ä¸åˆæ³•æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>SETNX key valueï¼ˆåˆ†å¸ƒå¼é”å¸¸ç”¨ï¼‰</p><p>å«ä¹‰ï¼š</p><p>â€‹     å°† key çš„å€¼è®¾ä¸º value ï¼Œå½“ä¸”ä»…å½“ key ä¸å­˜åœ¨ã€‚</p><p>â€‹     è‹¥ç»™å®šçš„ key å·²ç»å­˜åœ¨ï¼Œåˆ™ SETNX ä¸åšä»»ä½•åŠ¨ä½œã€‚</p><p>â€‹     SETNX æ˜¯ã€SET if Not eXistsã€(å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ SET)çš„ç®€å†™ã€‚</p><p>è¿”å›å€¼ï¼š</p><p>â€‹     è®¾ç½®æˆåŠŸï¼Œè¿”å› 1 ã€‚</p><p>â€‹     è®¾ç½®å¤±è´¥ï¼Œè¿”å› 0 ã€‚</p><blockquote><p>msetä¸mgetï¼Œmsetnx</p></blockquote><p>mset k1 v1 k2 v2 k3 v3â€¦ä¸€æ¬¡æ€§è¾“å…¥å¤šä¸ªå€¼</p><p>mget k1 k2 k3 ä¸€æ¬¡æ€§è·å–å¤šä¸ªå€¼</p><p>msetnx k1 v1 k2 v2 â€¦ä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªå€¼ï¼Œå¦‚æœæœ‰ä¸€ä¸ªkeyå·²ç»å­˜åœ¨ï¼Œåˆ™æ•´ä¸ªå¥å­æ‰§è¡Œå¤±è´¥ï¼ˆåŸå­æ€§ï¼‰</p><blockquote><p>è®¾ç½®ä¸€ä¸ªå¯¹è±¡</p></blockquote><p>å¦‚ï¼šset user:1 {name:rain,age:14}</p><p>å¦ä¸€ç§è®¾è®¡ï¼š</p><p>mset user:1:name rain user:1:age 14</p><blockquote><p>getsetç»„åˆå‘½ä»¤</p></blockquote><p>getset name rainsky å…ˆè·å–å€¼å†é‡æ–°è®¾ç½®å€¼ï¼Œä¸å­˜åœ¨åˆ™è¿”å›nil</p><h4 id="Liståˆ—è¡¨"><a href="#Liståˆ—è¡¨" class="headerlink" title="Liståˆ—è¡¨"></a>Liståˆ—è¡¨</h4><p>Redisåˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼Œå¯å­˜åœ¨é‡å¤å€¼ã€‚</p><p><strong>åŸºæœ¬ç”¨æ³•</strong></p><p>æ­¤å¤„liståˆ—è¡¨åå³ä¸ºkey</p><p>lpush list cat å¾€åä¸ºlistçš„åˆ—è¡¨å·¦ä¾§æ·»åŠ ä¸€ä¸ªcat</p><p>è‹¥å†ä¸€æ¬¡æ·»åŠ dogï¼Œpigï¼Œåˆ™æ­¤åˆ—è¡¨ä¸­å°±æœ‰ä¸‰ä¸ªå…ƒç´ </p><p>lrange list 0 -1 è¾“å‡ºåˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œå¦‚ä¸Šçš„è¯åˆ™ä¸ºpig dog cat</p><p>rpush list duck å¾€åˆ—è¡¨å³ä¾§æ·»åŠ ä¸€ä¸ªå…ƒç´ </p><p>lpop listç§»é™¤listé˜Ÿåˆ—å·¦ä¾§ç¬¬ä¸€ä¸ªå…ƒç´ </p><p>rpop listç§»é™¤listå³ä¾§ç¬¬ä¸€ä¸ªå…ƒç´ </p><p>lindex list 1 è·å–listä¸­ä¸‹æ ‡ä¸º1çš„å…ƒç´ </p><p>llen list è·å–åˆ—è¡¨é•¿åº¦</p><p>lrem list 1 cat ç§»é™¤listä¸­ä¸€ä¸ªcat ï¼Œ1ä¸ºç§»é™¤çš„ä¸ªæ•°</p><p>ltrim list n1 n2 é˜¶æ®µlistä¸ºn1,n2ä¸­é—´çš„å…ƒç´ ï¼Œé—­åŒºé—´</p><p>rpoplpush list1  list2 æŠŠlist1ä¸­çš„æœ€å³è¾¹ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°list2æœ€å·¦è¾¹</p><p>lset list 0 item å°†liståˆ—è¡¨ä¸­æŒ‡å®šä¸‹æ ‡å¤„çš„å€¼æ›´æ–°ä¸ºæŒ‡å®šå€¼ï¼Œå¦‚æœä¸å­˜åœ¨åˆ—è¡¨æˆ–ä¸‹æ ‡è¶Šç•Œå°†ä¼šæŠ¥é”™</p><p>linsert list before v2 nv å¾€v2çš„å·¦ä¾§æ’å…¥ä¸€ä¸ªnvï¼ŒåŒæ ·ä¹Ÿæœ‰afteræ’å…¥</p><p><strong>ä¸€äº›åº”ç”¨</strong></p><p>æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”Ÿäº§è€…æ¶ˆè´¹è€…ç­‰</p><h4 id="seté›†åˆ"><a href="#seté›†åˆ" class="headerlink" title="seté›†åˆ"></a>seté›†åˆ</h4><p>Redis çš„ Set æ˜¯ String ç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œè¿™å°±æ„å‘³ç€é›†åˆä¸­ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®ã€‚é›†åˆå¯¹è±¡çš„ç¼–ç å¯ä»¥æ˜¯ intset æˆ–è€… hashtableã€‚Redis ä¸­é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p><p><strong>åŸºæœ¬ç”¨æ³•</strong></p><p>æ­¤å¤„seté›†åˆåå³ä¸ºkeyå€¼</p><p>sadd myset hello å¾€mysetä¸­å­˜å…¥hello</p><p>smembers myset åˆ—å‡ºmysetä¸­æ‰€æœ‰å€¼</p><p>sismember myset hello æŸ¥è¯¢mysetä¸­æ˜¯å¦å«æœ‰helloè¿™ä¸ªå€¼ï¼Œæœ‰è¿”å›1ï¼Œæ— 0</p><p>scard myset è·å–å…ƒç´ ä¸ªæ•°</p><p>srem myset hello åˆ é™¤hello</p><p>spop myset éšæœºåˆ é™¤ä¸€ä¸ªå…ƒç´ </p><p>srandmember  mysetä»æŒ‡å®šé›†åˆä¸­éšæœºæŠ½å–ä¸€ä¸ªå…ƒç´ </p><p>smove myset myset2  â€œhelloâ€ å°†mysetä¸­helloå…ƒç´ ç§»åŠ¨åˆ°myset2ä¸­</p><p>sdiff set1 set2 æŸ¥è¯¢set1ä¸set2çš„å·®é›†</p><p>sinter set1 set2 äº¤é›†(å…±åŒå…³æ³¨<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> )</p><p>sunion set1 set2 å¹¶é›†</p><h4 id="Hashå“ˆå¸Œ"><a href="#Hashå“ˆå¸Œ" class="headerlink" title="Hashå“ˆå¸Œ"></a>Hashå“ˆå¸Œ</h4><p>Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ fieldï¼ˆå­—æ®µï¼‰ å’Œ valueï¼ˆå€¼ï¼‰ çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ï¼Œå°±åƒmapã€‚</p><p><strong>åŸºæœ¬ç”¨æ³•</strong></p><p>hset myhash name rainskyå°†name-&gt;rainskyé”®å€¼å¯¹ï¼ˆå“ˆå¸Œå€¼ï¼‰å­˜å…¥myhashè¿™ä¸ªå“ˆå¸Œè¡¨</p><p>hget myhash name ä»myhashä¸­è·å–keyä¸ºnameçš„value</p><p>hmset myhash name rainsky age 18 å­˜å…¥å¤šä¸ªå“ˆå¸Œå€¼</p><p>hmget myhash name age è·å–å“ˆå¸Œè¡¨ä¸­å¤šä¸ªkeyå¯¹åº”çš„valueå€¼</p><p>hgetall myhash è·å–æ‰€æœ‰å“ˆå¸Œå€¼ï¼Œç»“æœä»¥keyæ¢è¡Œvalueæ¢è¡Œkeyæ¢è¡Œvalueæ¢è¡Œâ€¦æ˜¾ç¤º</p><p>hdel myhash name åˆ é™¤myhashå“ˆå¸Œè¡¨ä¸­nameå¯¹åº”çš„å“ˆå¸Œå€¼</p><p>hlen myhash è·å–å“ˆå¸Œè¡¨å“ˆå¸Œå€¼ä¸ªæ•°</p><p>exists myhash nameåˆ¤æ–­nameä¸ºkeyçš„å“ˆå¸Œå€¼æ˜¯å¦å­˜åœ¨äºmyhashä¸­</p><p>hkeys myhashè·å–æ‰€æœ‰key</p><p>hvals myhashè·å–æ‰€æœ‰value</p><p>hincrby myhash age  1 è®©ageå¯¹åº”valueè‡ªå¢1</p><p>hsetnx myhash name rain å½“æ­¤å“ˆå¸Œå€¼ä¸å­˜åœ¨æ—¶æ’å…¥æŒ‡å®šå“ˆå¸Œå€¼</p><h4 id="zsetæœ‰åºé›†åˆ"><a href="#zsetæœ‰åºé›†åˆ" class="headerlink" title="zsetæœ‰åºé›†åˆ"></a>zsetæœ‰åºé›†åˆ</h4><p>Redis æœ‰åºé›†åˆå’Œé›†åˆä¸€æ ·ä¹Ÿæ˜¯ string ç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚</p><p>ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ª double ç±»å‹çš„åˆ†æ•°ã€‚redis æ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚ é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚</p><p><strong>åŸºæœ¬ç”¨æ³•</strong></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 1 redis åˆ†æ•°ä¸º1å¤„å…ƒç´ ä¸ºredis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 2 mongodb</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 3 mysql</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 3 mysql</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 4 mysql</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; ZRANGE runoobkey 0 10 WITHSCORES è¾“å‡ºzsetä¸­scoreå†0-10åŒºé—´çš„å†…å®¹å¹¶æŠŠscoreè¿å¸¦å‡åºè¾“å‡º</span><br><span class="line"></span><br><span class="line">1) "redis"</span><br><span class="line">2) "1"</span><br><span class="line">3) "mongodb"</span><br><span class="line">4) "2"</span><br><span class="line">5) "mysql"</span><br><span class="line">6) "4"</span><br><span class="line"></span><br><span class="line">zrem runoobkey redis ç§»é™¤ä¸€ä¸ªæŒ‡å®šå…ƒç´ </span><br><span class="line">zcard runoobkey æŸ¥çœ‹å…ƒç´ ä¸ªæ•°</span><br><span class="line">zrevrange myzset é™åºæ’åºï¼Œé»˜è®¤æ˜¯å‡åº</span><br><span class="line">zcount myset n1 n2è·å–n1 n2åŒºé—´çš„å…ƒç´ ä¸ªæ•°</span><br><span class="line">zrangebyscore myzset -inf +inf å°†zsetä¸­å…ƒç´ æŒ‰scoreæ’åºï¼ŒscoreèŒƒå›´ä¸º-infåˆ°+inf</span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥æœ‰ä»€ä¹ˆåº”ç”¨å‘¢ï¼Ÿ</p><p>å­˜å‚¨å¸¦æƒé‡ï¼ˆscoreï¼‰çš„æ•°æ®ï¼Œç„¶åæ’åºï¼Œå¦‚å„ç§æ’è¡Œæ¦œã€‚</p><h3 id="ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"><a href="#ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹" class="headerlink" title="ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"></a>ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹</h3><h4 id="geospatialåœ°ç†ä½ç½®"><a href="#geospatialåœ°ç†ä½ç½®" class="headerlink" title="geospatialåœ°ç†ä½ç½®"></a>geospatialåœ°ç†ä½ç½®</h4><p>å°†æŒ‡å®šçš„åœ°ç†ç©ºé—´ä½ç½®ï¼ˆçº¬åº¦ã€ç»åº¦ã€åç§°ï¼‰æ·»åŠ åˆ°æŒ‡å®šçš„keyä¸­ã€‚è¿™äº›æ•°æ®å°†ä¼šå­˜å‚¨åˆ°sorted setè¿™æ ·çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨GEORADIUSæˆ–è€…GEORADIUSBYMEMBERå‘½ä»¤å¯¹æ•°æ®è¿›è¡ŒåŠå¾„æŸ¥è¯¢ç­‰æ“ä½œã€‚</p><ul><li>æœ‰æ•ˆçš„ç»åº¦ä»-180åº¦åˆ°180åº¦ã€‚</li><li>æœ‰æ•ˆçš„çº¬åº¦ä»-85.05112878åº¦åˆ°85.05112878åº¦ã€‚</li></ul><p>å½“åæ ‡ä½ç½®è¶…å‡ºä¸Šè¿°æŒ‡å®šèŒƒå›´æ—¶ï¼Œè¯¥å‘½ä»¤å°†ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p><strong>ç›¸å…³æŒ‡ä»¤</strong></p><p>groaddï¼šå°†æŒ‡å®šçš„åœ°ç†ç©ºé—´ä½ç½®ï¼ˆçº¬åº¦ã€ç»åº¦ã€åç§°ï¼‰æ·»åŠ åˆ°æŒ‡å®šçš„keyä¸­ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å°†åŸå¸‚ä¿¡æ¯æ·»åŠ è¿›cityä¸­ï¼Œä¸¤ä¸ªæ•°å­—åˆ†åˆ«å¯¹åº”ç»´åº¦ï¼Œç»åº¦ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä»£è¡¨åç§°</span></span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEOADD city 13.361389 38.115556 <span class="string">"Palermo"</span> 15.087269 37.502669 <span class="string">"Catania"</span></span></span><br><span class="line">(integer) 2</span><br></pre></td></tr></tbody></table></figure><p>gropopsï¼šä»keyé‡Œè¿”å›æ‰€æœ‰ç»™å®šä½ç½®å…ƒç´ çš„ä½ç½®ï¼ˆç»åº¦å’Œçº¬åº¦ï¼‰ã€‚GEOPOS å‘½ä»¤è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ æ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹éƒ½ç”±ä¸¤ä¸ªå…ƒç´ ç»„æˆï¼š ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºç»™å®šä½ç½®å…ƒç´ çš„ç»åº¦ï¼Œ è€Œç¬¬äºŒä¸ªå…ƒç´ åˆ™ä¸ºç»™å®šä½ç½®å…ƒç´ çš„çº¬åº¦ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEOPOS city Palermo Catania NonExisting</span></span><br><span class="line">1) 1) "13.361389338970184"</span><br><span class="line">   2) "38.115556395496299"</span><br><span class="line">2) 1) "15.087267458438873"</span><br><span class="line">   2) "37.50266842333162"</span><br><span class="line">3) (nil)</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> </span></span><br></pre></td></tr></tbody></table></figure><p>GEODISTï¼šå‘½ä»¤ - è¿”å›ä¸¤ä¸ªç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»</p><p>æŒ‡å®šå•ä½çš„å‚æ•° unit å¿…é¡»æ˜¯ä»¥ä¸‹å•ä½çš„å…¶ä¸­ä¸€ä¸ªï¼š</p><ul><li><strong>m</strong> è¡¨ç¤ºå•ä½ä¸ºç±³ã€‚</li><li><strong>km</strong> è¡¨ç¤ºå•ä½ä¸ºåƒç±³ã€‚</li><li><strong>mi</strong> è¡¨ç¤ºå•ä½ä¸ºè‹±é‡Œã€‚</li><li><strong>ft</strong> è¡¨ç¤ºå•ä½ä¸ºè‹±å°ºã€‚</li></ul><p>å¦‚æœç”¨æˆ·æ²¡æœ‰æ˜¾å¼åœ°æŒ‡å®šå•ä½å‚æ•°ï¼Œ é‚£ä¹ˆ <code>GEODIST</code> é»˜è®¤ä½¿ç”¨ç±³ä½œä¸ºå•ä½ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEOADD Sicily 13.361389 38.115556 <span class="string">"Palermo"</span> 15.087269 37.502669 <span class="string">"Catania"</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEODIST Sicily Palermo Catania</span></span><br><span class="line">"166274.15156960039"</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEODIST Sicily Palermo Catania km</span></span><br><span class="line">"166.27415156960038"</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEODIST Sicily Palermo Catania mi</span></span><br><span class="line">"103.31822459492736"</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEODIST Sicily Foo Bar</span></span><br><span class="line">(nil)</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> </span></span><br></pre></td></tr></tbody></table></figure><p>GEORADIUS: å‘½ä»¤ - ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œ æ‰¾å‡ºæŸä¸€åŠå¾„å†…çš„å…ƒç´ </p><ul><li><code>WITHDIST</code>: åœ¨è¿”å›ä½ç½®å…ƒç´ çš„åŒæ—¶ï¼Œ å°†ä½ç½®å…ƒç´ ä¸ä¸­å¿ƒä¹‹é—´çš„è·ç¦»ä¹Ÿä¸€å¹¶è¿”å›ã€‚ è·ç¦»çš„å•ä½å’Œç”¨æˆ·ç»™å®šçš„èŒƒå›´å•ä½ä¿æŒä¸€è‡´ã€‚</li><li><code>WITHCOORD</code>: å°†ä½ç½®å…ƒç´ çš„ç»åº¦å’Œç»´åº¦ä¹Ÿä¸€å¹¶è¿”å›ã€‚</li></ul><p>å‘½ä»¤é»˜è®¤è¿”å›æœªæ’åºçš„ä½ç½®å…ƒç´ ã€‚ é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°ï¼Œ ç”¨æˆ·å¯ä»¥æŒ‡å®šè¢«è¿”å›ä½ç½®å…ƒç´ çš„æ’åºæ–¹å¼ï¼š</p><ul><li><code>ASC</code>: æ ¹æ®ä¸­å¿ƒçš„ä½ç½®ï¼Œ æŒ‰ç…§ä»è¿‘åˆ°è¿œçš„æ–¹å¼è¿”å›ä½ç½®å…ƒç´ ã€‚</li><li><code>DESC</code>: æ ¹æ®ä¸­å¿ƒçš„ä½ç½®ï¼Œ æŒ‰ç…§ä»è¿œåˆ°è¿‘çš„æ–¹å¼è¿”å›ä½ç½®å…ƒç´ ã€‚</li></ul><p>è¿”å›å€¼<br>åœ¨æ²¡æœ‰ç»™å®šä»»ä½• WITH é€‰é¡¹çš„æƒ…å†µä¸‹ï¼Œ å‘½ä»¤åªä¼šè¿”å›ä¸€ä¸ªåƒ [â€œNew Yorkâ€,â€Milanâ€,â€Parisâ€] è¿™æ ·çš„çº¿æ€§ï¼ˆlinearï¼‰åˆ—è¡¨ã€‚<br>åœ¨æŒ‡å®šäº† WITHCOORD ã€ WITHDIST ã€ WITHHASH ç­‰é€‰é¡¹çš„æƒ…å†µä¸‹ï¼Œ å‘½ä»¤è¿”å›ä¸€ä¸ªäºŒå±‚åµŒå¥—æ•°ç»„ï¼Œ å†…å±‚çš„æ¯ä¸ªå­æ•°ç»„å°±è¡¨ç¤ºä¸€ä¸ªå…ƒç´ ã€‚<br>åœ¨è¿”å›åµŒå¥—æ•°ç»„æ—¶ï¼Œ å­æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ€»æ˜¯ä½ç½®å…ƒç´ çš„åå­—ã€‚ è‡³äºé¢å¤–çš„ä¿¡æ¯ï¼Œ åˆ™ä¼šä½œä¸ºå­æ•°ç»„çš„åç»­å…ƒç´ ï¼Œ æŒ‰ç…§ä»¥ä¸‹é¡ºåºè¢«è¿”å›ï¼š</p><p>ä»¥æµ®ç‚¹æ•°æ ¼å¼è¿”å›çš„ä¸­å¿ƒä¸ä½ç½®å…ƒç´ ä¹‹é—´çš„è·ç¦»ï¼Œ å•ä½ä¸ç”¨æˆ·æŒ‡å®šèŒƒå›´æ—¶çš„å•ä½ä¸€è‡´ã€‚<br>geohash æ•´æ•°ã€‚<br>ç”±ä¸¤ä¸ªå…ƒç´ ç»„æˆçš„åæ ‡ï¼Œåˆ†åˆ«ä¸ºç»åº¦å’Œçº¬åº¦ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼Œ GEORADIUS Sicily 15 37 200 km WITHCOORD WITHDIST è¿™æ ·çš„å‘½ä»¤è¿”å›çš„æ¯ä¸ªå­æ•°ç»„éƒ½æ˜¯ç±»ä¼¼ä»¥ä¸‹æ ¼å¼çš„ï¼š</p><p>[â€œPalermoâ€,â€190.4424â€,[â€œ13.361389338970184â€,â€38.115556395496299â€]]</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEOADD Sicily 13.361389 38.115556 <span class="string">"Palermo"</span> 15.087269 37.502669 <span class="string">"Catania"</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEORADIUS Sicily 15 37 200 km WITHDIST</span></span><br><span class="line">1) 1) "Palermo"</span><br><span class="line">   2) "190.4424"</span><br><span class="line">2) 1) "Catania"</span><br><span class="line">   2) "56.4413"</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEORADIUS Sicily 15 37 200 km WITHCOORD</span></span><br><span class="line">1) 1) "Palermo"</span><br><span class="line">   2) 1) "13.361389338970184"</span><br><span class="line">      2) "38.115556395496299"</span><br><span class="line">2) 1) "Catania"</span><br><span class="line">   2) 1) "15.087267458438873"</span><br><span class="line">      2) "37.50266842333162"</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEORADIUS Sicily 15 37 200 km WITHDIST WITHCOORD</span></span><br><span class="line">1) 1) "Palermo"</span><br><span class="line">   2) "190.4424"</span><br><span class="line">   3) 1) "13.361389338970184"</span><br><span class="line">      2) "38.115556395496299"</span><br><span class="line">2) 1) "Catania"</span><br><span class="line">   2) "56.4413"</span><br><span class="line">   3) 1) "15.087267458438873"</span><br><span class="line">      2) "37.50266842333162"</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> </span></span><br></pre></td></tr></tbody></table></figure><p> GEOHASH å‘½ä»¤ - è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„ Geohash è¡¨ç¤º</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEOADD Sicily 13.361389 38.115556 <span class="string">"Palermo"</span> 15.087269 37.502669 <span class="string">"Catania"</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEOHASH Sicily Palermo Catania</span></span><br><span class="line">1) "sqc8b49rny0"</span><br><span class="line">2) "sqdtr74hyu0"</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> </span></span><br></pre></td></tr></tbody></table></figure><p>GEORADIUSBYMEMBER å‘½ä»¤ - æ‰¾å‡ºä½äºæŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ï¼Œä¸­å¿ƒç‚¹æ˜¯ç”±ç»™å®šçš„ä½ç½®å…ƒç´ å†³å®š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEOADD Sicily 13.583333 37.316667 <span class="string">"Agrigento"</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEOADD Sicily 13.361389 38.115556 <span class="string">"Palermo"</span> 15.087269 37.502669 <span class="string">"Catania"</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> GEORADIUSBYMEMBER Sicily Agrigento 100 km</span></span><br><span class="line">1) "Agrigento"</span><br><span class="line">2) "Palermo"</span><br><span class="line"><span class="meta">redis&gt;</span><span class="bash"> </span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>geoåº•å±‚å°±æ˜¯zset</p></blockquote><p>å¯ä»¥çœ‹å‡ºgeoæœªç»™å‡ºç§»é™¤å…ƒç´ apiï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨zremæ¥æ“ä½œ</p><p>å¦‚ï¼šzrange Sicily -inf +inf åˆ—å‡ºæ‰€æœ‰åŸå¸‚åç§°ï¼Œzrem Sicily Palermo åˆ é™¤ä¸€ä¸ªåŸå¸‚</p><h4 id="Hyperloglog"><a href="#Hyperloglog" class="headerlink" title="Hyperloglog"></a>Hyperloglog</h4><p>Redis åœ¨ 2.8.9 ç‰ˆæœ¬æ·»åŠ äº† HyperLogLog ç»“æ„ã€‚</p><p>Redis HyperLogLog æ˜¯ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ï¼ŒHyperLogLog çš„ä¼˜ç‚¹æ˜¯ï¼Œåœ¨è¾“å…¥å…ƒç´ çš„æ•°é‡æˆ–è€…ä½“ç§¯éå¸¸éå¸¸å¤§æ—¶ï¼Œè®¡ç®—åŸºæ•°æ‰€éœ€çš„ç©ºé—´æ€»æ˜¯å›ºå®š çš„ã€å¹¶ä¸”æ˜¯å¾ˆå°çš„ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯åŸºæ•°ï¼Ÿ</p></blockquote><p>æ¯”å¦‚æ•°æ®é›† {1, 3, 5, 7, 5, 7, 8}ï¼Œ é‚£ä¹ˆè¿™ä¸ªæ•°æ®é›†çš„åŸºæ•°é›†ä¸º {1, 3, 5 ,7, 8}, åŸºæ•°(ä¸é‡å¤å…ƒç´ )ä¸º5ã€‚ åŸºæ•°ä¼°è®¡å°±æ˜¯åœ¨è¯¯å·®å¯æ¥å—çš„èŒƒå›´å†…ï¼Œå¿«é€Ÿè®¡ç®—åŸºæ•°ã€‚</p><p><strong>åŸºæœ¬ç”¨æ³•</strong><br>pfadd mypf  1 2 3 4 5 6 7åŠ å…¥æ•°æ®é›†</p><p>pfadd yourpf 1 2 4 8 9</p><p>pcount mypf è®¡ç®—åŸºæ•°</p><p>pfmerge  all mypf yourpf å°†mypfï¼Œyourpfåˆå¹¶ä¸ºall</p><h4 id="Bitmaps"><a href="#Bitmaps" class="headerlink" title="Bitmaps"></a>Bitmaps</h4><p>Redisæä¾›çš„Bitmapsè¿™ä¸ªâ€œæ•°æ®ç»“æ„â€å¯ä»¥å®ç°å¯¹ä½çš„æ“ä½œã€‚Bitmapsæœ¬èº«ä¸æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®é™…ä¸Šå°±æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å®ƒå¯ä»¥å¯¹å­—ç¬¦ä¸²çš„ä½è¿›è¡Œæ“ä½œã€‚</p><p>å¯ä»¥æŠŠBitmapsæƒ³è±¡æˆä¸€ä¸ªä»¥ä½ä¸ºå•ä½æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå•å…ƒåªèƒ½å­˜0æˆ–è€…1ï¼Œæ•°ç»„çš„ä¸‹æ ‡åœ¨bitmapsä¸­å«åšåç§»é‡ã€‚å•ä¸ªbitmapsçš„æœ€å¤§é•¿åº¦æ˜¯512MBï¼Œå³2^32ä¸ªæ¯”ç‰¹ä½ã€‚<br><strong>åŸºæœ¬æ“ä½œ</strong></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> setbit key 10 1</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> getbit key 10</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> getbit key 11</span></span><br><span class="line">(integer) 0</span><br><span class="line">-----------------------------</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> setbit key 0 1</span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> setbit key 100 1</span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> bitcount key</span></span><br><span class="line">(integer) 2</span><br></pre></td></tr></tbody></table></figure><h3 id="redisäº‹åŠ¡"><a href="#redisäº‹åŠ¡" class="headerlink" title="redisäº‹åŠ¡"></a>redisäº‹åŠ¡</h3><p><strong>å¼•è¨€</strong></p><blockquote><p>åœ¨æ•°æ®åº“ç›¸å…³ç†è®ºä¸­ï¼Œä¸€ä¸ªé€»è¾‘å·¥ä½œå•å…ƒæƒ³è¦æˆä¸ºäº‹åŠ¡ï¼Œå°±å¿…é¡»æ»¡è¶³<strong>ACID</strong>ï¼Œå³åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ã€‚</p><ul><li>(1)åŸå­æ€§ï¼šåŸå­æ€§è¿™ä¸ªæ¦‚å¿µå…¶å®å°±æ˜¯æŒ‡ï¼Œä¸€ä¸ªäº‹åŠ¡å†…çš„æ‰€æœ‰SQLæ“ä½œéƒ½æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå› æ­¤åªæœ‰æ‰€æœ‰çš„SQLæ“ä½œéƒ½å®Œå…¨æ‰§è¡ŒæˆåŠŸï¼Œè¯¥äº‹åŠ¡æ–¹å¯ä»¥è®¤ä¸ºæäº¤æˆåŠŸã€‚å¦‚æœåœ¨æäº¤äº‹åŠ¡è¿‡ç¨‹ä¸­æŸä¸€æ¡SQLè¯­å¥æ‰§è¡Œå¤±è´¥ï¼Œåˆ™æ•´ä¸ªäº‹åŠ¡å¿…é¡»å›æ»šåˆ°äº‹åŠ¡æäº¤å‰çš„çŠ¶æ€ã€‚</li><li>(2)ä¸€è‡´æ€§ï¼šè€Œä¸€è‡´æ€§è¿™ä¸ªæ¦‚å¿µåˆ™æ˜¯æŒ‡ï¼Œäº‹åŠ¡åœ¨å®Œæˆçš„æ—¶å€™ï¼Œå¿…é¡»è¦ä¿è¯æ‰€æœ‰çš„æ•°æ®éƒ½ä¿æŒä¸€è‡´çš„çŠ¶æ€ï¼Œè€Œè½å®åˆ°æ•°æ®åº“çš„å„ä¸ªç»„æˆéƒ¨åˆ†ä¸Šï¼Œåˆ™è¦æ±‚å¼€å‘äººå‘˜èƒ½å¤Ÿä¿è¯æ•°æ®ã€ç´¢å¼•ã€çº¦æŸã€æ—¥å¿—ç­‰åœ¨äº‹åŠ¡å‰åå…·å¤‡ä¸€è‡´æ€§ã€‚</li><li>(3)éš”ç¦»æ€§ï¼šéš”ç¦»æ€§è¿™ä¸ªæ¦‚å¿µä¸»è¦é’ˆå¯¹å¹¶å‘ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä¸åŒçš„å¹¶å‘äº‹åŠ¡å¯¹æ•°æ®äº§ç”Ÿçš„ä¿®æ”¹å¿…é¡»æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªä¸åŒçš„äº‹åŠ¡Aå’ŒBå¹¶å‘æ‰§è¡Œï¼Œé‚£ä¹ˆå¯¹Aæ¥è®²ï¼Œå®ƒåœ¨æ‰§è¡Œå‰çš„çŠ¶æ€åªæœ‰ä¸¤ç§ï¼Œå³Bæ‰§è¡Œå‰å’ŒBæ‰§è¡Œåã€‚åŒç†ï¼Œå¯¹Bæ¥è®²åŒæ ·æ˜¯å¦‚æ­¤ï¼Œè¿™æ ·çš„ç‰¹æ€§æˆ‘ä»¬å°±ç§°ä¸ºéš”ç¦»æ€§ã€‚</li><li>(4)æŒä¹…æ€§ï¼šæŒä¹…æ€§ç›¸å¯¹ç®€å•ï¼Œæ˜¯æŒ‡äº‹åŠ¡å®Œæˆä»¥åå®ƒå¯¹æ•°æ®çš„å½±å“æ˜¯æ°¸ä¹…æ€§çš„ã€‚</li></ul></blockquote><h4 id="redisäº‹åŠ¡å¤„ç†"><a href="#redisäº‹åŠ¡å¤„ç†" class="headerlink" title="redisäº‹åŠ¡å¤„ç†"></a>redisäº‹åŠ¡å¤„ç†</h4><p><strong>redisäº‹åŠ¡ä»‹ç»</strong></p><ol><li>Redis çš„äº‹åŠ¡æ˜¯é€šè¿‡ <strong>MULTIï¼ŒEXECï¼ŒDISCARD å’Œ WATCH</strong> è¿™å››ä¸ªå‘½ä»¤æ¥å®Œæˆçš„ã€‚</li><li>Redis çš„å•ä¸ªå‘½ä»¤éƒ½æ˜¯<strong>åŸå­æ€§</strong>çš„ï¼Œæ‰€ä»¥è¿™é‡Œç¡®ä¿äº‹åŠ¡æ€§çš„å¯¹è±¡æ˜¯<strong>å‘½ä»¤é›†åˆ</strong>ã€‚</li><li>Redis å°†å‘½ä»¤é›†åˆåºåˆ—åŒ–å¹¶ç¡®ä¿å¤„äºåŒä¸€äº‹åŠ¡çš„<strong>å‘½ä»¤é›†åˆè¿ç»­ä¸”ä¸è¢«æ‰“æ–­</strong>çš„æ‰§è¡Œ</li><li>Redisä¸æ”¯æŒå›æ»šæ“ä½œ</li></ol><p>æ€è€ƒï¼šä¸ºä»€ä¹ˆ Redis ä¸æ”¯æŒäº‹åŠ¡å›æ»šï¼Ÿ</p><ul><li>å¤§å¤šæ•°äº‹åŠ¡å¤±è´¥æ˜¯å› ä¸º<strong>è¯­æ³•é”™è¯¯æˆ–è€…ç±»å‹é”™è¯¯</strong>ï¼Œè¿™ä¸¤ç§é”™è¯¯ï¼Œåœ¨å¼€å‘é˜¶æ®µéƒ½æ˜¯å¯ä»¥é¢„è§çš„ã€‚</li><li>Redis ä¸ºäº†<strong>æ€§èƒ½æ–¹é¢</strong>å°±å¿½ç•¥äº†äº‹åŠ¡å›æ»šã€‚</li></ul><blockquote><p>å•ä¸ª Redis å‘½ä»¤çš„æ‰§è¡Œæ˜¯åŸå­æ€§çš„ï¼Œä½† Redis æ²¡æœ‰åœ¨äº‹åŠ¡ä¸Šå¢åŠ ä»»ä½•ç»´æŒåŸå­æ€§çš„æœºåˆ¶ï¼Œæ‰€ä»¥ Redis äº‹åŠ¡çš„æ‰§è¡Œå¹¶ä¸æ˜¯åŸå­æ€§çš„ã€‚</p></blockquote><p><strong>äº‹åŠ¡å¤„ç†å‘½ä»¤</strong></p><p>äº‹åŠ¡å¤„ç†å‘½ä»¤ä¼šåƒéäº‹åŠ¡çŠ¶æ€ä¸‹ä¸€æ ·è¢«ç«‹åˆ»æ‰§è¡Œ</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210802120751.jpeg"></p><p><strong>äº‹åŠ¡å¤„ç†æµç¨‹</strong></p><p>ä¸€ä¸ªäº‹åŠ¡ä»å¼€å§‹åˆ°æ‰§è¡Œä¼šç»å†ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li>1ï¼‰å¼€å§‹äº‹åŠ¡ã€‚ï¼ˆéäº‹åŠ¡çŠ¶æ€-&gt;äº‹åŠ¡çŠ¶æ€ï¼‰</li><li>2ï¼‰å‘½ä»¤å…¥é˜Ÿã€‚ï¼ˆå¹¶ä¸æ‰§è¡Œï¼‰</li><li>3ï¼‰æ‰§è¡Œäº‹åŠ¡ã€‚</li></ul><p>ä¸€ä¸ªç®€å•äº‹åŠ¡ç¤ºä¾‹</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MULTI </span><br><span class="line">OK </span><br><span class="line">127.0.0.1:6379&gt; SET Book_Name "GIt Pro" </span><br><span class="line">QUEUED </span><br><span class="line">127.0.0.1:6379&gt; SADD Program_Language "C++" "C#" "Jave" "Python"  </span><br><span class="line">QUEUED </span><br><span class="line">127.0.0.1:6379&gt; GET Book_Name </span><br><span class="line">QUEUED </span><br><span class="line">127.0.0.1:6379&gt; EXEC</span><br><span class="line">1) OK</span><br><span class="line">2) (integer) 4 </span><br><span class="line">3) "GIt Pro" </span><br></pre></td></tr></tbody></table></figure><h4 id="äº‹åŠ¡å¤„ç†æƒ…å†µç¤ºä¾‹"><a href="#äº‹åŠ¡å¤„ç†æƒ…å†µç¤ºä¾‹" class="headerlink" title="äº‹åŠ¡å¤„ç†æƒ…å†µç¤ºä¾‹"></a>äº‹åŠ¡å¤„ç†æƒ…å†µç¤ºä¾‹</h4><p>æ”¾å¼ƒäº‹åŠ¡</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210802145006.jpeg"></p><p>å‘½ä»¤æ€§é”™è¯¯ï¼Œæ‰€æœ‰å‘½ä»¤å‡ä¸ä¼šæ‰§è¡Œ</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210802145320.png"></p><p>è¿è¡Œæ—¶é”™è¯¯ï¼Œå…¶ä»–å‘½ä»¤ä¾ç„¶æ‰§è¡Œ</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210802145525.png"></p><h4 id="rediså®ç°ä¹è§‚é”"><a href="#rediså®ç°ä¹è§‚é”" class="headerlink" title="rediså®ç°ä¹è§‚é”"></a>rediså®ç°ä¹è§‚é”</h4><p><strong>æ‚²è§‚é”</strong></p><p>æ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šé˜»å¡ç›´åˆ°å®ƒæ‹¿åˆ°é”ï¼ˆ<strong>å…±äº«èµ„æºæ¯æ¬¡åªç»™ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œå…¶å®ƒçº¿ç¨‹é˜»å¡ï¼Œç”¨å®Œåå†æŠŠèµ„æºè½¬è®©ç»™å…¶å®ƒçº¿ç¨‹</strong>ï¼‰ã€‚ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚Javaä¸­synchronizedå’ŒReentrantLockç­‰ç‹¬å é”å°±æ˜¯æ‚²è§‚é”æ€æƒ³çš„å®ç°ã€‚</p><p><strong>ä¹è§‚é”</strong></p><p>æ€»æ˜¯å‡è®¾æœ€å¥½çš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶å’ŒCASç®—æ³•å®ç°ã€‚<strong>ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡</strong>ï¼Œåƒæ•°æ®åº“æä¾›çš„ç±»ä¼¼äº<strong>write_conditionæœºåˆ¶</strong>ï¼Œå…¶å®éƒ½æ˜¯æä¾›çš„ä¹è§‚é”ã€‚åœ¨Javaä¸­java.util.concurrent.atomicåŒ…ä¸‹é¢çš„åŸå­å˜é‡ç±»å°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼<strong>CAS</strong>å®ç°çš„ã€‚</p><p><strong>rediså®ç°ä¹è§‚é”</strong></p><p>ä½¿ç”¨watchå¯¹æ•°æ®åŠ é”ï¼Œå½“æ‰§è¡Œäº‹åŠ¡æœŸé—´ï¼Œè¢«åŠ é”æ•°æ®æœªèƒŒä¿®æ”¹åˆ™äº‹åŠ¡å¯æˆåŠŸæ‰§è¡Œï¼Œå¦åˆ™æ‰§è¡Œå¤±è´¥</p><p>å…ˆåœ¨ä¸€ä¸ªè¿æ¥ï¼ˆå‡è®¾ä¸ºçº¿ç¨‹1ï¼‰é‡Œç¼–å†™ä¸€ä¸ªäº‹åŠ¡ï¼Œ</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set money 100</span><br><span class="line">set out 0</span><br><span class="line">multi</span><br><span class="line">decrby money 10</span><br><span class="line">incrby out 10</span><br></pre></td></tr></tbody></table></figure><p>è¿˜æœªexecæˆ‘ä»¬å¼€å¯å¦å¤–ä¸€ä¸ªè¿æ¥ï¼ˆå‡è®¾ä¸ºçº¿ç¨‹2ï¼‰ï¼Œç›¸å½“äºå¦å¤–ä¸€ä¸ªç”¨æˆ·ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œ</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">incrby money 100</span><br></pre></td></tr></tbody></table></figure><p>æ‰§è¡Œå®Œæ¯•åæˆ‘ä»¬å›åˆ°çº¿ç¨‹1</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">set money 100</span><br><span class="line">set out 0</span><br><span class="line">multi</span><br><span class="line">decrby money 10</span><br><span class="line">incrby out 10</span><br><span class="line">exec</span><br></pre></td></tr></tbody></table></figure><p>å½“æˆ‘ä»¬æ‰§è¡Œexecåä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬æ‰§è¡Œäº‹åŠ¡æœŸé—´ç›‘è§†å€¼moneyå·²ç»è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unwatch æ”¾å¼ƒç›‘è§†</span><br><span class="line">watch money ç›‘è§†moneyæ­¤æ—¶å·²ç»æ˜¯æœ€æ–°å€¼</span><br></pre></td></tr></tbody></table></figure><blockquote><p>ä¹è§‚é”çš„ä¸€äº›åº”ç”¨ï¼šç§’æ€ç³»ç»Ÿ</p></blockquote><h2 id="jedis"><a href="#jedis" class="headerlink" title="jedis"></a>jedis</h2><p>Rediså®˜æ–¹æ¨èçš„Javaè¿æ¥å¼€å‘å·¥å…·</p><p><a href="https://www.runoob.com/redis/redis-java.html">å‚è€ƒå­¦ä¹ </a></p><p>mavené¡¹ç›®ä½¿ç”¨</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>è¿æ¥åˆ°redis</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisJava</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡</span></span><br><span class="line">        Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"localhost"</span>);</span><br><span class="line">        <span class="comment">// å¦‚æœ Redis æœåŠ¡è®¾ç½®äº†å¯†ç ï¼Œéœ€è¦ä¸‹é¢è¿™è¡Œï¼Œæ²¡æœ‰å°±ä¸éœ€è¦</span></span><br><span class="line">        <span class="comment">// jedis.auth("123456"); </span></span><br><span class="line">        System.out.println(<span class="string">"è¿æ¥æˆåŠŸ"</span>);</span><br><span class="line">        <span class="comment">//æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ</span></span><br><span class="line">        System.out.println(<span class="string">"æœåŠ¡æ­£åœ¨è¿è¡Œ: "</span>+jedis.ping());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Stringæ“ä½œ</span></span><br><span class="line">        <span class="comment">//è®¾ç½® redis å­—ç¬¦ä¸²æ•°æ®</span></span><br><span class="line">        jedis.set(<span class="string">"runoobkey"</span>, <span class="string">"www.runoob.com"</span>);</span><br><span class="line">        <span class="comment">// è·å–å­˜å‚¨çš„æ•°æ®å¹¶è¾“å‡º</span></span><br><span class="line">        System.out.println(<span class="string">"redis å­˜å‚¨çš„å­—ç¬¦ä¸²ä¸º: "</span>+ jedis.get(<span class="string">"runoobkey"</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Listæ“ä½œ</span></span><br><span class="line">        jedis.lpush(<span class="string">"site-list"</span>, <span class="string">"Runoob"</span>);</span><br><span class="line">        jedis.lpush(<span class="string">"site-list"</span>, <span class="string">"Google"</span>);</span><br><span class="line">        jedis.lpush(<span class="string">"site-list"</span>, <span class="string">"Taobao"</span>);</span><br><span class="line">        <span class="comment">// è·å–å­˜å‚¨çš„æ•°æ®å¹¶è¾“å‡º</span></span><br><span class="line">        List&lt;String&gt; list = jedis.lrange(<span class="string">"site-list"</span>, <span class="number">0</span> ,<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;list.size(); i++) {</span><br><span class="line">            System.out.println(<span class="string">"åˆ—è¡¨é¡¹ä¸º: "</span>+list.get(i));</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        ......</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸å†èµ˜è¿°ï¼Œæ‰€æœ‰æ“ä½œä¸å‘½ä»¤å‡ç›¸ä¼¼</p><blockquote><p>ä¸€ä¸ªäº‹åŠ¡çš„æ —å­<span class="github-emoji"><span>ğŸ“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4dd.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210802155721.png"></p><h2 id="springbootæ•´åˆredis"><a href="#springbootæ•´åˆredis" class="headerlink" title="springbootæ•´åˆredis"></a>springbootæ•´åˆredis</h2><p>springç³»åˆ—ä¸æ•°æ®æ“ä½œç›¸å…³çš„é¡¹ç›®ä¸ºspring-dataï¼Œ<a href="https://spring.io/projects/spring-data-redis">å®˜ç½‘</a></p><img src="https://gitee.com/rain-sky/images/raw/master/20210802160745.png" style="zoom:50%;"><p>åœ¨springboot2.xåï¼Œæ“ä½œredisçš„jedisæ›´æ¢ä¸ºlettuceã€‚</p><p>jedisï¼šé‡‡ç”¨ç›´è¿ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œçš„è¯ä¸å®‰å…¨ï¼Œéœ€è¦ä½¿ç”¨Jedis  pool ï¼Œç±»ä¼¼BIOæ¨¡å¼ã€‚</p><p>lettuceï¼šé‡‡ç”¨nettyï¼Œå®ä¾‹å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨æƒ…å†µï¼Œç±»ä¼¼NIOæ¨¡å¼ã€‚</p><blockquote><p>ä½¿ç”¨</p></blockquote><p><strong>å¯¼å…¥starter</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>é…ç½®è§£æ</strong></p><p>æ‰¾åˆ°è‡ªåŠ¨é…ç½®ç±»ï¼Œå¯ä»¥çœ‹åˆ°ä¸ºæˆ‘ä»¬æ³¨å…¥äº†ä¸¤ä¸ªå¸¸ç”¨ç±»ï¼Œæ–¹æ³•å‚æ•°ä¸ºä¸€ä¸ªredisè¿æ¥å·¥å‚å¯¹è±¡ï¼Œç‚¹è¿›å»å‘ç°æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œæ­¤æ¥å£çš„å®ç°ç±»æœ‰ä¸¤ä¸ªã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210802161509.png"></p><p>å®ç°ç±»</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210802164132.png"></p><p>çœ‹çœ‹ç»‘å®šçš„é…ç½®ç±»ï¼Œæ‰¾åˆ°é…ç½®ç±»ï¼Œå¯ä»¥çœ‹åˆ°ä¸€äº›é»˜è®¤é…ç½®</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210802161554.png"></p><p><strong>é…ç½®è¿æ¥ç¤ºä¾‹</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Redisæ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ä¸º0ï¼‰  </span></span><br><span class="line"><span class="string">spring.redis.database=0</span>  </span><br><span class="line"><span class="comment"># RedisæœåŠ¡å™¨åœ°å€  </span></span><br><span class="line"><span class="string">spring.redis.host=192.168.0.24</span>  </span><br><span class="line"><span class="comment"># RedisæœåŠ¡å™¨è¿æ¥ç«¯å£  </span></span><br><span class="line"><span class="string">spring.redis.port=6379</span>  </span><br><span class="line"><span class="comment"># RedisæœåŠ¡å™¨è¿æ¥å¯†ç ï¼ˆé»˜è®¤ä¸ºç©ºï¼‰  </span></span><br><span class="line"><span class="string">spring.redis.password=</span>  </span><br><span class="line"><span class="comment"># è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰  </span></span><br><span class="line"><span class="string">spring.redis.pool.max-active=200</span>  </span><br><span class="line"><span class="comment"># è¿æ¥æ± æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰  </span></span><br><span class="line"><span class="string">spring.redis.pool.max-wait=-1</span>  </span><br><span class="line"><span class="comment"># è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥  </span></span><br><span class="line"><span class="string">spring.redis.pool.max-idle=10</span> </span><br><span class="line"><span class="comment"># è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥  </span></span><br><span class="line"><span class="string">spring.redis.pool.min-idle=0</span>  </span><br><span class="line"><span class="comment"># è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰  </span></span><br><span class="line"><span class="string">spring.redis.timeout=1000</span> </span><br></pre></td></tr></tbody></table></figure><p><strong>ç®€å•æµ‹è¯•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringbootRedisApplicationTests</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String,String&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">//å¯¹Stringç±»å‹çš„æ“ä½œ</span></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">"myKey"</span>,<span class="string">"myValue"</span>);</span><br><span class="line">        System.out.println(redisTemplate.opsForValue().get(<span class="string">"myKey"</span>));</span><br><span class="line">        <span class="comment">//å¯¹listçš„æ“ä½œ</span></span><br><span class="line">        redisTemplate.opsForList().leftPush(<span class="string">"hello"</span>,<span class="string">"world!"</span>);</span><br><span class="line">        redisTemplate.opsForList().leftPop(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¿æ¥å¯¹è±¡</span></span><br><span class="line">        RedisConnection connection = redisTemplate.getConnectionFactory().getConnection();</span><br><span class="line">        connection.flushAll();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>è‡ªå®šä¹‰RedisTemplate</strong></p><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ç½‘ç»œä¼ è¾“çš„å¯¹è±¡å¿…é¡»åºåˆ—åŒ–</p><p>è‡ªå®šä¹‰åºåˆ—åŒ–æ–¹å¼</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803085557.png"></p><p>å¾€å¾€ç»“åˆè‡ªå·±æ³¨å…¥çš„RedisTempalteå†è‡ªå®šä¹‰ä¸€ä¸ªrediså·¥å…·ç±»</p><h2 id="redis-conf"><a href="#redis-conf" class="headerlink" title="redis.conf"></a>redis.conf</h2><p>rediså¯åŠ¨çš„æ—¶å€™å°±æ˜¯é€šè¿‡æŒ‡å®šé…ç½®æ–‡ä»¶æ¥å¯åŠ¨çš„</p><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å­˜å‚¨å•ä½å¯é€‰ï¼Œå¤§å°å†™ä¸æ•æ„Ÿ</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803100112.png"></p><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803100219.png"></p><p><span class="github-emoji"><span>3âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0033-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç½‘ç»œé…ç½®ï¼Œå‚è§networkéƒ¨åˆ†</p><ul><li>bind 127.0.0.1 ç»‘å®šçš„ä¸»æœºåœ°å€</li></ul><p>å…³äºbindï¼Œè¿™ä¸ªé—®é¢˜æ˜¯ç”±äºå¾ˆå¤šæ–‡æ¡£è§£é‡Šbindè€Œå¯¼è‡´çš„è¯¯ä¼šã€‚å¾ˆå¤šåœ°æ–¹ç¿»è¯‘å¦‚ä¸‹ï¼š</p><blockquote><p>æŒ‡å®šredisåªæ¥æ”¶æ¥è‡ªäºè¯¥IPåœ°å€çš„è¯·æ±‚ï¼Œå¦‚æœä¸è¿›è¡Œè®¾ç½®ï¼Œé‚£ä¹ˆå°†å¤„ç†æ‰€æœ‰è¯·æ±‚ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æœ€å¥½è®¾ç½®è¯¥é¡¹</p></blockquote><p>ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œåº”è¯¥bindçš„æ˜¯redisæ‰€åœ¨æœåŠ¡å™¨ç½‘å¡çš„ipã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ çš„redisæœåŠ¡å™¨æœ‰ä¸¤å¼ ç½‘å¡ï¼Œä¸€å¼ æ˜¯ip-1,å¦ä¸€å¼ æ˜¯ip-2ï¼Œå¦‚æœä½ bind ip-1.é‚£ä¹ˆåªæœ‰è¯·æ±‚ip-1çš„è¯·æ±‚ä¼šè¢«å—ç†ã€‚</p><ul><li>port 6379 æŒ‡å®š Redis ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º 6379ã€‚</li></ul><p><span class="github-emoji"><span>4âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0034-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>é€šå¸¸é…ç½®</p><p>daemonize noï¼šRedis é»˜è®¤ä¸æ˜¯ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œå¯ä»¥é€šè¿‡è¯¥é…ç½®é¡¹ä¿®æ”¹ï¼Œä½¿ç”¨ yes å¯ç”¨å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>pidfile /var/run/redis_6379.pidï¼šä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œç»‘å®šçš„pidæ–‡ä»¶</p><p>loglevel notic ï¼šæŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«ï¼ŒRedis æ€»å…±æ”¯æŒå››ä¸ªçº§åˆ«ï¼šdebugã€verboseã€noticeã€warningï¼Œé»˜è®¤ä¸º notice</p><p>logfile â€œâ€ ï¼šæ—¥å¿—è®°å½•æ–¹å¼ï¼Œé»˜è®¤ä¸ºæ ‡å‡†è¾“å‡ºï¼Œå¦‚æœé…ç½® Redis ä¸ºå®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œï¼Œè€Œè¿™é‡Œåˆé…ç½®ä¸ºæ—¥å¿—è®°å½•æ–¹å¼ä¸ºæ ‡å‡†è¾“å‡ºï¼Œåˆ™æ—¥å¿—å°†ä¼šå‘é€ç»™ /dev/null</p><p>databases 16 ï¼šæ•°æ®åº“ä¸ªæ•°</p><p>always-show-logo noï¼šæ˜¯å¦æ˜¾ç¤ºredisçš„logo</p><p><span class="github-emoji"><span>5âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0035-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¿«ç…§SNAPSHOTTING</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803103030.png"></p><p>Redis é»˜è®¤é…ç½®æ–‡ä»¶ä¸­æä¾›äº†ä¸‰ä¸ªæ¡ä»¶ï¼š</p><p><strong>save 900 1</strong></p><p><strong>save 300 10</strong></p><p><strong>save 60 10000</strong></p><p>åˆ†åˆ«è¡¨ç¤º 900 ç§’ï¼ˆ15 åˆ†é’Ÿï¼‰å†…æœ‰ 1 ä¸ªæ›´æ”¹ï¼Œ300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰å†…æœ‰ 10 ä¸ªæ›´æ”¹ä»¥åŠ 60 ç§’å†…æœ‰ 10000 ä¸ªæ›´æ”¹ã€‚</p><p>æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…ï¼Œæœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œï¼Œå°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆ</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rdbcompression yes <span class="comment">#æ˜¯å¦å‹ç¼©rdbæ–‡ä»¶</span></span><br><span class="line">stop-writes-on-bgsave-error yes  <span class="comment">#åœ¨ä¿å­˜æ•°æ®åº“æ–‡ä»¶æ—¶å‡ºé”™æ˜¯å¦åœæ­¢å†™å…¥</span></span><br><span class="line">rdbcherksum yes <span class="comment">#rdbæ–‡ä»¶ä¿å­˜æ—¶æ˜¯å¦é”™è¯¯æ£€æŸ¥</span></span><br><span class="line">rdbfilename dump.rdb <span class="comment">#æŒ‡å®šrdbæŒä¹…åŒ–æ–‡ä»¶å</span></span><br><span class="line">dir ./ <span class="comment">#rdbæŒä¹…åŒ–æ–‡ä»¶ä¿å­˜çš„ç›®å½•</span></span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>6âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0036-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸»ä»å¤åˆ¶REPLICATION</p><p><span class="github-emoji"><span>ğŸš¶</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f6b6.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><span class="github-emoji"><span>7âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0037-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å®‰å…¨SECURITY</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config <span class="built_in">set</span> requirepass <span class="string">"ä½ çš„å¯†ç "</span></span><br><span class="line">config get requirepass è·å–å¯†ç </span><br><span class="line">auth <span class="string">"ä½ çš„å¯†ç "</span> å¯†ç éªŒè¯</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803110057.png"></p><p><span class="github-emoji"><span>8âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0038-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>APPEND ONLY MODE(AOF)</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤ä¸å¼€å¯AOF</span></span><br><span class="line">appendonly no</span><br><span class="line"><span class="comment"># The name of the append only file (default: "appendonly.aof")</span></span><br><span class="line">appendfilename <span class="string">"appendonly.aof"</span></span><br><span class="line"><span class="comment">#æ¯ç§’æ‰§è¡Œä¸€æ¬¡sync</span></span><br><span class="line">appendfsync everysec</span><br><span class="line"><span class="comment">#ä¸æ‰§è¡Œsyncï¼Œæ“ä½œç³»ç»Ÿè‡ªä¸»åŒæ­¥æ•°æ®</span></span><br><span class="line">appendfsync no</span><br><span class="line"><span class="comment">#æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šsyncï¼Œæ¶ˆè€—æ€§èƒ½</span></span><br><span class="line">appendfsync always</span><br></pre></td></tr></tbody></table></figure><h2 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" class="headerlink" title="æŒä¹…åŒ–"></a>æŒä¹…åŒ–</h2><h3 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h3><p>äº§ç”Ÿä¸€ä¸ªæ•°æ®å¿«ç…§æ–‡ä»¶</p><p>RDBæ˜¯Redisç”¨æ¥è¿›è¡ŒæŒä¹…åŒ–çš„ä¸€ç§æ–¹å¼ï¼Œåœ¨æŒ‡å®šæ—¶é—´é—´éš”æŠŠå½“å‰å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯ Snapshot å¿«ç…§ï¼ˆæ•°æ®åº“ä¸­æ‰€æœ‰é”®å€¼å¯¹æ•°æ®ï¼‰ã€‚æ¢å¤æ—¶æ˜¯å°†å¿«ç…§æ–‡ä»¶ç›´æ¥è¯»åˆ°å†…å­˜é‡Œã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803152638.png"></p><p>åœ¨rdbæ–¹å¼ä¸­ï¼Œredisä¼šforkä¸€ä¸ªå­è¿›ç¨‹æ¥å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥ä¸€ä¸ªä¸´æ—¶rdbæ–‡ä»¶ä¸­ï¼Œå†™å…¥å®Œæˆåä¼šæ›¿æ¢åŸæœ‰rdbæ–‡ä»¶ï¼Œçˆ¶è¿›ç¨‹ä»ç„¶å¯ä»¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p><p><strong>è§¦å‘è§„åˆ™</strong></p><ul><li>saveè§„åˆ™æ»¡è¶³æ—¶</li><li>flushallæ—¶</li><li>é€€å‡ºredisæ—¶</li></ul><p><strong>æ¢å¤rdbæ–‡ä»¶</strong></p><p>åœ¨config get dirç»“æœç›®å½•ä¸‹å­˜åœ¨rdbæ–‡ä»¶å¯åŠ¨æ—¶ä¾¿ä¼šè‡ªåŠ¨åŠ è½½</p><p><strong>åˆ©å¼Š</strong></p><p>ä¼˜ç‚¹ï¼š</p><ul><li>ç´§å‡‘å‹å¤‡ä»½æ–‡ä»¶ï¼Œå ç”¨å†…å­˜å°</li><li>åœ¨å­è¿›ç¨‹ä¸­å®Œæˆå¤‡ä»½</li><li>æ¢å¤å¤§é‡æ•°æ®é›†æ—¶é€Ÿåº¦å¿«</li><li>å•æ–‡ä»¶æ˜“äºä¼ è¾“</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å¦‚æœæœåŠ¡å™¨å®•æœºä¼šå‡ºç°æ•°æ®ä¸¢å¤±</li><li>æ•°æ®åºå¤§æ—¶ï¼Œforkæ“ä½œè€—æ—¶</li></ul><h3 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h3><p>Redisçš„å¦å¤–ä¸€ç§æŒä¹…åŒ–æ–¹æ¡ˆå°±æ˜¯AOFï¼ŒAppend Only Fileã€‚AOFç›¸å½“äºä¸€ä¸ªæ“ä½œçš„æ—¥å¿—è®°å½•ï¼Œæ¯æ¬¡å¯¹äºæ•°æ®çš„å˜æ›´ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰éƒ½ä¼šè®°å½•è¿½åŠ åˆ°AOFæ—¥å¿—ã€‚å½“æœåŠ¡å¯åŠ¨çš„æ—¶å€™å°±ä¼šè¯»è¿™äº›æ“ä½œæ—¥å¿—ï¼Œé‡æ–°æ‰§è¡Œä¸€æ¬¡æ“ä½œï¼Œä»è€Œæ¢å¤åŸå§‹æ•°æ®ã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803154830.png"></p><p>åœ¨reids.confä¸­å¯ä»¥çœ‹åˆ°ï¼Œaofæ˜¯é»˜è®¤ä¸å¼€å¯çš„</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤ä¸å¼€å¯AOF</span></span><br><span class="line">appendonly no</span><br><span class="line"><span class="comment"># The name of the append only file (default: "appendonly.aof")</span></span><br><span class="line">appendfilename <span class="string">"appendonly.aof"</span> <span class="comment">#é»˜è®¤äº§ç”Ÿè®°å½•æ–‡ä»¶ï¼Œè‹¥è¯¥æ–‡ä»¶æŸåï¼Œredisæ— æ³•å¯åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨redis-cherk-aofæ¥ä¿®å¤è¯¥æ–‡ä»¶ï¼Œä½†ä¸èƒ½ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œredis-check-aof --fix appendonly.aof å³å¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¯ç§’æ‰§è¡Œä¸€æ¬¡sync</span></span><br><span class="line">appendfsync everysec</span><br><span class="line"><span class="comment">#ä¸æ‰§è¡Œsyncï¼Œæ“ä½œç³»ç»Ÿè‡ªä¸»åŒæ­¥æ•°æ®</span></span><br><span class="line">appendfsync no</span><br><span class="line"><span class="comment">#æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šsyncï¼Œæ¶ˆè€—æ€§èƒ½</span></span><br><span class="line">appendfsync always</span><br><span class="line"></span><br><span class="line">- auto-aof-rewrite-percentage 100 <span class="comment">#å½“æ–‡ä»¶å¢é•¿100%ï¼ˆä¸€å€ï¼‰æ—¶å€™ï¼Œè‡ªåŠ¨é‡å†™ã€‚</span></span><br><span class="line">- auto-aof-rewrite-min-size 64mb <span class="comment">#æ—¥å¿—é‡å†™æœ€å°æ–‡ä»¶å¤§å°ï¼Œå¦‚æœå°äºè¯¥å¤§å°ï¼Œä¸ä¼šè‡ªåŠ¨é‡å†™ã€‚</span></span><br></pre></td></tr></tbody></table></figure><p><strong>ä¼˜ç¼ºç‚¹</strong></p><p>ä¼˜ç‚¹</p><ul><li>é»˜è®¤æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œæ–‡ä»¶å®Œæ•´æ€§æ›´å¥½</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>aofæ–‡ä»¶ä½“ç§¯å¤§ï¼Œä¿®å¤é€Ÿåº¦æ…¢</li><li>å¤§é‡å†™å…¥çš„æ—¶å€™aofæ•ˆç‡ä½</li></ul><blockquote><p>å¦‚ä½•é€‰æ‹©</p></blockquote><p>ä»¥ä¸Šå·²ç»åŸºæœ¬äº†è§£è¿‡RDBå’ŒAOFçš„ä½¿ç”¨ã€åŸºæœ¬åŸç†ä»¥åŠå¯¹åº”çš„ä¼˜ç¼ºç‚¹ã€‚é‚£ä¹ˆåœ¨å®é™…å½“ä¸­ï¼Œæˆ‘ä»¬åˆ°åº•æ€ä¹ˆå»é€‰æ‹©ç”¨å“ªç§æŒä¹…åŒ–æ–¹å¼å‘¢ï¼Ÿ</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸è€ƒè™‘ç¡¬ç›˜å¤§å°ï¼Œæœ€å®‰å…¨çš„åšæ³•æ˜¯RDBä¸AOFåŒæ—¶ä½¿ç”¨ï¼Œå³ä½¿AOFæŸåæ— æ³•ä¿®å¤ï¼Œè¿˜å¯ä»¥ç”¨RDBæ¥æ¢å¤æ•°æ®ã€‚</p><p>å¦‚æœRedisçš„æ•°æ®åœ¨ä½ çš„æœåŠ¡ä¸­å¹¶ä¸æ˜¯å¿…è¦çš„æ•°æ®ï¼Œä¾‹å¦‚åªæ˜¯å½“ç®€å•çš„ç¼“å­˜ï¼Œæ²¡æœ‰ç¼“å­˜ä¹Ÿä¸ä¼šé€ æˆç¼“å­˜é›ªå´©ã€‚è¯´æ˜æ•°æ®çš„å®‰å…¨å¯é æ€§å¹¶ä¸æ˜¯é¦–è¦è€ƒè™‘èŒƒå›´å†…ï¼Œé‚£ä¹ˆå•ç‹¬åªä½¿ç”¨RDBå°±å¯ä»¥äº†ã€‚</p><p>ä¸æ¨èå•ç‹¬ä½¿ç”¨AOFï¼Œå› ä¸ºAOFå¯¹äºæ•°æ®çš„æ¢å¤è½½å…¥æ¥è¯´ï¼Œæ¯”RDBæ…¢ã€‚å¹¶ä¸”Rediså®˜æ–¹ä¹Ÿè¯´æ˜äº†ï¼ŒAOFæœ‰ä¸€ä¸ªç½•è§çš„bugã€‚å‡ºäº†é—®é¢˜æ— æ³•å¾ˆå¥½çš„è§£å†³ã€‚æ‰€ä»¥ä½¿ç”¨AOFçš„æ—¶å€™ï¼Œæœ€å¥½è¿˜æ˜¯æœ‰RDBä½œä¸ºæ•°æ®å¤‡ä»½ã€‚</p><h2 id="rediså‘å¸ƒè®¢é˜…"><a href="#rediså‘å¸ƒè®¢é˜…" class="headerlink" title="rediså‘å¸ƒè®¢é˜…"></a>rediså‘å¸ƒè®¢é˜…</h2><p>Pub/Sub ä»å­—é¢ä¸Šç†è§£å°±æ˜¯å‘å¸ƒï¼ˆPublishï¼‰ä¸è®¢é˜…ï¼ˆSubscribeï¼‰ï¼Œåœ¨Redisä¸­ï¼Œä½ å¯ä»¥è®¾å®šå¯¹æŸä¸€ä¸ªkeyå€¼è¿›è¡Œæ¶ˆæ¯å‘å¸ƒåŠæ¶ˆæ¯è®¢é˜…ï¼Œå½“ä¸€ä¸ªkeyå€¼ä¸Šè¿›è¡Œäº†æ¶ˆæ¯å‘å¸ƒåï¼Œæ‰€æœ‰è®¢é˜…å®ƒçš„å®¢æˆ·ç«¯éƒ½ä¼šæ”¶åˆ°ç›¸åº”çš„æ¶ˆæ¯ã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803162718.png"></p><p><strong>ç›¸å…³å‘½ä»¤</strong></p><p>PSUBSCRIBE pattern [pattern1 â€¦.]</p><ul><li>è¯´æ˜ï¼šè®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ï¼Œæ¯ä¸ªæ¨¡å¼ä»¥*ä½œä¸ºåŒ¹é…ç¬¦</li><li>å‚æ•°ï¼špattern(ç»™å®šçš„æ¨¡å¼)</li><li>è¿”å›ï¼šæ¥å—åˆ°çš„ä¿¡æ¯</li></ul><p>PUNSUBSCRIBE pattern [pattern1 â€¦.]</p><ul><li>è¯´æ˜ï¼šç”¨äºé€€è®¢æ‰€æœ‰ç»™å®šæ¨¡å¼çš„é¢‘é“</li><li>å‚æ•°ï¼špattern(ç»™å®šçš„æ¨¡å¼)</li><li>è¿”å›ï¼šè¿™ä¸ªå‘½ä»¤åœ¨ä¸åŒçš„å®¢æˆ·ç«¯ä¸­æœ‰ä¸åŒçš„è¡¨ç°ã€‚</li></ul><p>SUBSCRIBE channel [channel1 â€¦]</p><ul><li>è¯´æ˜ï¼šç”¨äºè®¢é˜…ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“çš„ä¿¡æ¯</li><li>å‚æ•°ï¼šchannel(ç»™å®šçš„é¢‘é“å)</li><li>è¿”å›ï¼šæ¥æ”¶åˆ°çš„ä¿¡æ¯</li></ul><p>UNSUBSCRIBE channel [channel1 â€¦]</p><ul><li>è¯´æ˜ï¼šç”¨äºé€€è®¢ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“çš„ä¿¡æ¯</li><li>å‚æ•°ï¼šchannel(ç»™å®šçš„é¢‘é“å)</li><li>è¿”å›ï¼šè¿™ä¸ªå‘½ä»¤åœ¨ä¸åŒçš„å®¢æˆ·ç«¯ä¸­æœ‰ä¸åŒçš„è¡¨ç°</li></ul><p>PUBLISH channel message</p><ul><li>è¯´æ˜ï¼šç”¨äºå°†ä¿¡æ¯å‘é€åˆ°æŒ‡å®šçš„é¢‘é“</li><li>å‚æ•°ï¼šchannel(é¢‘é“åç§°)ï¼Œmessage(å°†è¦å‘é€çš„ä¿¡æ¯)</li><li>è¿”å›ï¼šæ¥æ”¶åˆ°æ­¤æ¶ˆæ¯çš„è®¢é˜…è€…æ•°é‡</li></ul><p>PUBSUB  &lt; subcommand &gt; argument [argument1 â€¦.]</p><ul><li>è¯´æ˜ï¼šç”¨äºæŸ¥çœ‹è®¢é˜…ä¸å‘å¸ƒç³»ç»ŸçŠ¶æ€ï¼Œå®ƒç”±æ•°ä¸ªä¸åŒæ ¼å¼çš„å­å‘½ä»¤ç»„æˆ</li><li>å‚æ•°ï¼šsubcommand(å­å‘½ä»¤)ï¼Œargument(å­å‘½ä»¤å‚æ•°)</li><li>è¿”å›ï¼šç”±æ´»è·ƒé¢‘é“ç»„æˆçš„åˆ—è¡¨</li><li>å­å‘½ä»¤å¦‚ä¸‹</li></ul><table><thead><tr><th>subcommand</th><th>argument</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>CHANNELS</td><td>[pattern]</td><td>è¿”å›æŒ‡å®šæ¨¡å¼patternçš„æ´»è·ƒçš„é¢‘é“,æŒ‡å®šè¿”å›ç”±SUBSCRIBEè®¢é˜…çš„é¢‘é“</td></tr><tr><td>NUMSUB</td><td>channel channel2 â€¦</td><td>è¿”å›æŒ‡å®šé¢‘é“çš„è®¢é˜…æ•°é‡</td></tr><tr><td>NUMPAT</td><td></td><td>è¿”å›è®¢é˜…æ¨¡å¼çš„æ•°é‡ï¼Œæ³¨æ„ï¼šè¿™ä¸ªå‘½ä»¤è¿”å›çš„ä¸æ˜¯è®¢é˜…æ¨¡å¼çš„å®¢æˆ·ç«¯çš„æ•°é‡ï¼Œ è€Œæ˜¯å®¢æˆ·ç«¯è®¢é˜…çš„æ‰€æœ‰æ¨¡å¼çš„æ•°é‡æ€»å’Œ</td></tr></tbody></table><blockquote><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>ğŸ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f34e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p></blockquote><p>åœ¨è¿æ¥2ä¸­æˆ‘ä»¬å‘å¸ƒæ¶ˆæ¯</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803165009.png"></p><p>åœ¨è¿æ¥1ä¸­æ¥å—è®¢é˜…</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803165057.png"></p><blockquote><p>åº”ç”¨</p></blockquote><p>å¦‚å¾®ä¿¡å…¬ä¼—å·ï¼Œå¥½å‹åŠ¨æ€ï¼Œæ—¶äº‹æ¶ˆæ¯ç³»ç»Ÿï¼Œå®æ—¶èŠå¤©å®¤ï¼Œè®¢é˜…å…³æ³¨â€¦</p><h2 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h2><p>ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–redisæœåŠ¡å™¨ä¸Šï¼Œå‰è€…ä¸ºmasterä¸»èŠ‚ç‚¹ï¼Œåè€…ä¸ºfollowerä»èŠ‚ç‚¹ï¼Œæ•°æ®å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ä»ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ï¼Œmasterä»¥å†™æ“ä½œä¸ºä¸»ï¼Œä»èŠ‚ç‚¹ä»¥è¯»ä¸ºä¸»ã€‚</p><p><strong>ä¸»ä»å¤åˆ¶çš„ä½œç”¨</strong></p><ol><li><p>æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚</p></li><li><p>æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤ï¼›å®é™…ä¸Šæ˜¯ä¸€ç§æœåŠ¡çš„å†—ä½™ã€‚</p></li><li><p>è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ï¼ˆå³å†™Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä¸»èŠ‚ç‚¹ï¼Œè¯»Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä»èŠ‚ç‚¹ï¼‰ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜RedisæœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚</p></li><li><p>è¯»å†™åˆ†ç¦»ï¼šå¯ä»¥ç”¨äºå®ç°è¯»å†™åˆ†ç¦»ï¼Œä¸»åº“å†™ã€ä»åº“è¯»ï¼Œè¯»å†™åˆ†ç¦»ä¸ä»…å¯ä»¥æé«˜æœåŠ¡å™¨çš„è´Ÿè½½èƒ½åŠ›ï¼ŒåŒæ—¶å¯æ ¹æ®éœ€æ±‚çš„å˜åŒ–ï¼Œæ”¹å˜ä»åº“çš„æ•°é‡ï¼›</p></li><li><p>é«˜å¯ç”¨åŸºçŸ³ï¼šé™¤äº†ä¸Šè¿°ä½œç”¨ä»¥å¤–ï¼Œä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯Redisé«˜å¯ç”¨çš„åŸºç¡€ã€‚</p></li></ol><p><strong>ä»èŠ‚ç‚¹å¼€å¯ä¸»ä»å¤åˆ¶ï¼Œæœ‰3ç§æ–¹å¼ï¼š</strong></p><ol><li><p>é…ç½®æ–‡ä»¶ï¼š åœ¨ä»æœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ï¼šslaveof <masterip> <masterport></masterport></masterip></p></li><li><p>å¯åŠ¨å‘½ä»¤ï¼š redis-serverå¯åŠ¨å‘½ä»¤ååŠ å…¥ â€“slaveof <masterip> <masterport></masterport></masterip></p></li><li><p>å®¢æˆ·ç«¯å‘½ä»¤ï¼š RedisæœåŠ¡å™¨å¯åŠ¨åï¼Œç›´æ¥é€šè¿‡å®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤ï¼šslaveof <masterip>  <masterport>ï¼Œåˆ™è¯¥Rediså®ä¾‹æˆä¸ºä»èŠ‚ç‚¹ã€‚</masterport></masterip></p></li></ol><p><img src="https://gitee.com/rain-sky/images/raw/master/20210803213647.jpeg"></p><p>æ¯å°redisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œä½†æ¯ä¸€ä¸ªä»èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹</p><blockquote><p>ä»…ä»…ä½¿ç”¨å•å°redisæœåŠ¡å™¨ä¼šé€ æˆçš„é—®é¢˜</p><p>1ï¼Œä»ç»“æ„ä¸Šæ¥è¯´ï¼Œå®¹æ˜“é€ æˆå•ç‚¹æ•…éšœå¹¶ä¸”è¯·æ±‚å‹åŠ›å¤§</p><p>2ï¼Œä»å®¹é‡ä¸Šæ¥è¯´ï¼Œå•ä¸ªredisæœåŠ¡å™¨å†…å­˜å®¹é‡æœ‰é™ï¼Œé€šå¸¸æ¥è¯´ï¼Œå•å°redisæœ€å¤§ä½¿ç”¨å†…å­˜ä¸åº”è¯¥è¶…è¿‡20G</p></blockquote><p><strong>ç›¸å…³æŒ‡ä»¤</strong></p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info repication <span class="comment">#æŸ¥çœ‹å½“å‰åº“çš„ä¿¡æ¯</span></span><br></pre></td></tr></tbody></table></figure><p><strong>é…ç½®ä¸»ä»å¤åˆ¶ç¯å¢ƒ</strong></p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šå°ç‰©ç†æœºæ¥å½“ä½œä»æœåŠ¡å™¨ï¼Œå½“ç„¶æˆ‘ä»¬å­¦ä¹ é˜¶æ®µå¯ä»¥ä½¿ç”¨è™šæ‹Ÿæœºè½¯ä»¶å®‰è£…å¤šä¸ªç³»ç»Ÿå½“ä½œä»èŠ‚ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ªåŠæ³•å°±æ˜¯åœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œé…ç½®å¤šä»½é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ä¸åŒçš„é…ç½®æ–‡ä»¶å¯åŠ¨ä¸åŒçš„å‡ ä¸ªredisæ•°æ®åº“ï¼Œåœ¨åŒä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸‹æ­å»ºé›†ç¾¤ç¯å¢ƒã€‚</p><p>ä¾‹å¦‚ä¸»èŠ‚ç‚¹é€šè¿‡é…ç½®æ–‡ä»¶master.confå¯åŠ¨</p><p>å¤åˆ¶é…ç½®æ–‡ä»¶ï¼Œå¤åˆ¶ä¸‰åˆ†ï¼Œä¸¤ä»½ä¸ºä»èŠ‚ç‚¹ï¼Œä¸€åˆ†ä¸ºä¸»èŠ‚ç‚¹ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶åç§°åˆ†åˆ«ä¸ºï¼š</p><p>redis6380.conf     redis6381.conf    master.conf è¡¨ç¤ºåœ¨å¦å¤–ä¸‰ä¸ªç«¯å£ç›‘å¬è¯·æ±‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804092337.png"></p><p><em>åŒæ—¶æˆ‘ä»¬éœ€è¦ä¿®æ”¹è¿™ä¸‰ä»½é…ç½®æ–‡ä»¶å†…éƒ¨çš„rdbæ–‡ä»¶åé¿å…é‡å¤ï¼Œè¿˜æœ‰pidæ–‡ä»¶ï¼Œlogfileæ–‡ä»¶ï¼Œæœ€é‡è¦çš„è¿™ä¸‰ä»½é…ç½®æ–‡ä»¶çš„ç›‘å¬ç«¯å£åˆ†åˆ«ä¿®æ”¹ä¸º6380ï¼Œ6381ï¼Œ6379</em></p><p><span class="github-emoji"><span>ğŸ¥</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f425.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æœ€åå¯ä»¥æŸ¥çœ‹ä»¥ä¸‹redisæœåŠ¡ï¼Œå¯ä»¥çœ‹åˆ°å¼€å¯äº†ä¸‰ä¸ªï¼Œåˆ†åˆ«åœ¨ä¸åŒçš„ç«¯å£</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804094454.png"></p><p> é‡‡ç”¨å‘½ä»¤æš‚æ—¶é…ç½®ä¸»ä»å…³ç³»ï¼š</p><p>ä¾‹å¦‚æˆ‘ä»¬åœ¨6380ä¸6381ç«¯å£å¤„redisæœåŠ¡ä¸‹æ‰§è¡Œ <strong>slaveof 127.0.0.1 6379</strong> åˆ™ç­‰åŒäºä¸ºè¿™ä¸¤ä¸ªredisæœåŠ¡é…ç½®ä¸»æœºï¼Œå†å»6379å¤„æŸ¥çœ‹ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤å°ä»æœº</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804104008.png"></p><p>ä¿®æ”¹é…ç½®æ°¸ä¹…é…ç½®ä¸»ä»å…³ç³»ï¼š</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804094851.png"></p><p><span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>åˆ°æ­¤ä¸»ä»å¤åˆ¶åŸºæœ¬ç¯å¢ƒé…ç½®å®Œæˆ</p><blockquote><p>ä¸»ä»å¤åˆ¶ç»†èŠ‚</p></blockquote><p>ä¸»æœºèƒ½è¯»èƒ½å†™ï¼Œä»æœºå°†ä¸èƒ½å†™ï¼Œå¦‚åœ¨ä»æœºä¸Šæ‰§è¡Œset name rainä¼šå¤±è´¥</p><p>ä¸»æœºå†™å®Œåä»æœºå°†ä¼šè‡ªåŠ¨åŒæ­¥ä¸»æœºå†…å®¹ï¼Œå¦‚ä¸»æœº6379 è®¾ç½®äº†ä¸€ä¸ªå€¼ set name rain é‚£ä¹ˆä»æœº6380ï¼Œ6381å¯ä»¥get name å¾—åˆ°nameçš„å€¼ã€‚</p><p>ä¸»æœºæ–­å¼€äº†è¿æ¥ä»æœºä¾ç„¶èƒ½å¤Ÿç‹¬ç«‹å®Œæˆè¯»æ“ä½œè¯·æ±‚ã€‚</p><p>å¦‚æœæ˜¯é…ç½®æš‚æ—¶æ€§ä¸»ä»å…³ç³»ï¼Œä»æœºé‡å¯åä¼šå¤±å»ä¸»ä»å…³ç³»ï¼Œæ— æ³•åŒæ­¥ä¸»æœºæ•°æ®ï¼Œéœ€è¦é‡æ–°é…ç½®ï¼Œä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒä¸­éƒ½é…ç½®æ°¸ä¹…æ€§ä¸»ä»å…³ç³»ã€‚</p><blockquote><p>å¤åˆ¶åŸç†</p></blockquote><p>ä¸»ä»å¤åˆ¶è¿‡ç¨‹å¤§ä½“å¯ä»¥åˆ†ä¸º3ä¸ªé˜¶æ®µï¼šè¿æ¥å»ºç«‹é˜¶æ®µï¼ˆå³å‡†å¤‡é˜¶æ®µï¼‰ã€æ•°æ®åŒæ­¥é˜¶æ®µã€å‘½ä»¤ä¼ æ’­é˜¶æ®µã€‚</p><p><strong>å…¨é‡åŒæ­¥</strong><br>Rediså…¨é‡å¤åˆ¶ä¸€èˆ¬å‘ç”Ÿåœ¨Slaveåˆå§‹åŒ–é˜¶æ®µï¼Œè¿™æ—¶Slaveéœ€è¦å°†Masterä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½å¤åˆ¶ä¸€ä»½ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š<br>- ä»æœåŠ¡å™¨è¿æ¥ä¸»æœåŠ¡å™¨ï¼Œå‘é€SYNCå‘½ä»¤ï¼›<br>- ä¸»æœåŠ¡å™¨æ¥æ”¶åˆ°SYNCå‘½ååï¼Œå¼€å§‹æ‰§è¡ŒBGSAVEå‘½ä»¤ç”ŸæˆRDBæ–‡ä»¶å¹¶ä½¿ç”¨ç¼“å†²åŒºè®°å½•æ­¤åæ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ï¼›<br>- ä¸»æœåŠ¡å™¨BGSAVEæ‰§è¡Œå®Œåï¼Œå‘æ‰€æœ‰ä»æœåŠ¡å™¨å‘é€å¿«ç…§æ–‡ä»¶ï¼Œå¹¶åœ¨å‘é€æœŸé—´ç»§ç»­è®°å½•è¢«æ‰§è¡Œçš„å†™å‘½ä»¤ï¼›<br>- ä»æœåŠ¡å™¨æ”¶åˆ°å¿«ç…§æ–‡ä»¶åä¸¢å¼ƒæ‰€æœ‰æ—§æ•°æ®ï¼Œè½½å…¥æ”¶åˆ°çš„å¿«ç…§ï¼›<br>- ä¸»æœåŠ¡å™¨å¿«ç…§å‘é€å®Œæ¯•åå¼€å§‹å‘ä»æœåŠ¡å™¨å‘é€ç¼“å†²åŒºä¸­çš„å†™å‘½ä»¤ï¼›<br>- ä»æœåŠ¡å™¨å®Œæˆå¯¹å¿«ç…§çš„è½½å…¥ï¼Œå¼€å§‹æ¥æ”¶å‘½ä»¤è¯·æ±‚ï¼Œå¹¶æ‰§è¡Œæ¥è‡ªä¸»æœåŠ¡å™¨ç¼“å†²åŒºçš„å†™å‘½ä»¤ï¼›</p><p><strong>å¢é‡åŒæ­¥</strong><br>Rediså¢é‡å¤åˆ¶æ˜¯æŒ‡Slaveåˆå§‹åŒ–åå¼€å§‹æ­£å¸¸å·¥ä½œæ—¶ä¸»æœåŠ¡å™¨å‘ç”Ÿçš„å†™æ“ä½œåŒæ­¥åˆ°ä»æœåŠ¡å™¨çš„è¿‡ç¨‹ã€‚<br>å¢é‡å¤åˆ¶çš„è¿‡ç¨‹ä¸»è¦æ˜¯ä¸»æœåŠ¡å™¨æ¯æ‰§è¡Œä¸€ä¸ªå†™å‘½ä»¤å°±ä¼šå‘ä»æœåŠ¡å™¨å‘é€ç›¸åŒçš„å†™å‘½ä»¤ï¼Œä»æœåŠ¡å™¨æ¥æ”¶å¹¶æ‰§è¡Œæ”¶åˆ°çš„å†™å‘½ä»¤ã€‚</p><p><strong>Redisä¸»ä»åŒæ­¥ç­–ç•¥</strong><br>ä¸»ä»åˆšåˆšè¿æ¥çš„æ—¶å€™ï¼Œè¿›è¡Œå…¨é‡åŒæ­¥ï¼›å…¨åŒæ­¥ç»“æŸåï¼Œè¿›è¡Œå¢é‡åŒæ­¥ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œslave åœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥å‘èµ·å…¨é‡åŒæ­¥ã€‚redis ç­–ç•¥æ˜¯ï¼Œæ— è®ºå¦‚ä½•ï¼Œé¦–å…ˆä¼šå°è¯•è¿›è¡Œå¢é‡åŒæ­¥ï¼Œå¦‚ä¸æˆåŠŸï¼Œè¦æ±‚ä»æœºè¿›è¡Œå…¨é‡åŒæ­¥ã€‚</p><blockquote><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å®•æœºåä¸»åŠ¨é…ç½®ä¸»æœºï¼Œéå“¨å…µæ¨¡å¼</p></blockquote><p> <img src="https://gitee.com/rain-sky/images/raw/master/20210804111419.png"></p><p>å‡è®¾æ­¤å¤„ä¸»èŠ‚ç‚¹å®•æœºäº†ï¼Œé‚£ä¹ˆä»èŠ‚ç‚¹1ä»ç„¶æ˜¯ä»èŠ‚ç‚¹ç‚¹ï¼Œæ— æ³•å®Œæˆå†™æ“ä½œï¼Œé‚£ä¹ˆæ€ä¹ˆé‡æ–°é€‰ä¸¾ä»–ä¸ºä¸»èŠ‚ç‚¹ï¼Œåœ¨ä»èŠ‚ç‚¹1ä½¿ç”¨å‘½ä»¤slaveof no oneå°†è‡ªå·±é…ç½®ä¸ºä¸»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹1å¯ä»¥å†™æ“ä½œï¼Œä»èŠ‚ç‚¹1çš„ä»èŠ‚ç‚¹ä¾ç„¶ä»ä»–å¤„åŒæ­¥æ•°æ®ä½†åªèƒ½è¯»ï¼Œé‡å¯ä¸»èŠ‚ç‚¹åï¼Œä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹å°±åªæœ‰ä»èŠ‚ç‚¹2äº†ã€‚</p><h2 id="å“¨å…µæ¨¡å¼"><a href="#å“¨å…µæ¨¡å¼" class="headerlink" title="å“¨å…µæ¨¡å¼"></a>å“¨å…µæ¨¡å¼</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><span class="github-emoji"><span>âš”</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2694.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è‡ªåŠ¨è°‹æƒç¯¡ä½</p><p>Redis çš„ Sentinel ï¼ˆredis-sentinelç¨‹åºï¼‰ç³»ç»Ÿç”¨äºç®¡ç†å¤šä¸ª Redis æœåŠ¡å™¨ï¼ˆinstanceï¼‰ï¼Œ è¯¥ç³»ç»Ÿæ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªä»»åŠ¡ï¼š</p><ul><li><strong>ç›‘æ§ï¼ˆMonitoring</strong>ï¼‰ï¼š Sentinel ä¼šä¸æ–­åœ°æ£€æŸ¥ä½ çš„ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦è¿ä½œæ­£å¸¸ã€‚</li><li><strong>æé†’ï¼ˆNotificationï¼‰</strong>ï¼š å½“è¢«ç›‘æ§çš„æŸä¸ª Redis æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼Œ Sentinel å¯ä»¥é€šè¿‡ API å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥ã€‚</li><li><strong>è‡ªåŠ¨æ•…éšœè¿ç§»ï¼ˆAutomatic failoverï¼‰</strong>ï¼š å½“ä¸€ä¸ªä¸»æœåŠ¡å™¨ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼Œ Sentinel ä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨æ•…éšœè¿ç§»æ“ä½œï¼Œ å®ƒä¼šå°†å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä¸­ä¸€ä¸ªä»æœåŠ¡å™¨å‡çº§ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œ å¹¶è®©å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä»–ä»æœåŠ¡å™¨æ”¹ä¸ºå¤åˆ¶æ–°çš„ä¸»æœåŠ¡å™¨ï¼› å½“å®¢æˆ·ç«¯è¯•å›¾è¿æ¥å¤±æ•ˆçš„ä¸»æœåŠ¡å™¨æ—¶ï¼Œ é›†ç¾¤ä¹Ÿä¼šå‘å®¢æˆ·ç«¯è¿”å›æ–°ä¸»æœåŠ¡å™¨çš„åœ°å€ï¼Œ ä½¿å¾—é›†ç¾¤å¯ä»¥ä½¿ç”¨æ–°ä¸»æœåŠ¡å™¨ä»£æ›¿å¤±æ•ˆæœåŠ¡å™¨ã€‚</li></ul><p>å“¨å…µæ¨¡å¼ä¸­å“¨å…µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå…¶åŸç†æ˜¯é€šè¿‡å“¨å…µå‘èŠ‚ç‚¹å‘é€å‘½ä»¤ç­‰å¾…redisæœåŠ¡å™¨å“åº”æ¥ç›‘æ§èŠ‚ç‚¹çŠ¶æ€ã€‚</p><p>å“¨å…µçš„ä½œç”¨ï¼š</p><ul><li>å‘é€å‘½ä»¤ç›‘æµ‹èŠ‚ç‚¹å“åº”ä»è€Œç›‘æ§æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€</li><li>ç›‘æµ‹åˆ°masterå®•æœºï¼Œè‡ªåŠ¨å°†slaveåˆ‡æ¢æˆmasterï¼Œç„¶åé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼é€šçŸ¥å…¶ä½™æœåŠ¡å™¨ä¿®æ”¹é…ç½®æ–‡ä»¶åˆ‡æ¢ä¸»æœºã€‚</li></ul><blockquote><p>å•å“¨å…µ</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804114247.webp"></p><p>å¦‚æœå“¨å…µè¿›ç¨‹å‡ºç°äº†é—®é¢˜ï¼Œé‚£ä¹ˆå“¨å…µæ¨¡å¼å°†ä¼šå´©åï¼Œä¸ºæ­¤å•ä¸ªå“¨å…µæ˜¯ä¸åˆé€‚çš„ã€‚</p><blockquote><p>å¤šå“¨å…µ</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804114339.webp"></p><p>ç”¨æ–‡å­—æè¿°ä¸€ä¸‹<strong>æ•…éšœåˆ‡æ¢ï¼ˆfailoverï¼‰</strong>çš„è¿‡ç¨‹ã€‚å‡è®¾ä¸»æœåŠ¡å™¨å®•æœºï¼Œå“¨å…µ1å…ˆæ£€æµ‹åˆ°è¿™ä¸ªç»“æœï¼Œç³»ç»Ÿå¹¶ä¸ä¼šé©¬ä¸Šè¿›è¡Œfailoverè¿‡ç¨‹ï¼Œä»…ä»…æ˜¯å“¨å…µ1ä¸»è§‚çš„è®¤ä¸ºä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œè¿™ä¸ªç°è±¡æˆä¸º<strong>ä¸»è§‚ä¸‹çº¿</strong>ã€‚å½“åé¢çš„å“¨å…µä¹Ÿæ£€æµ‹åˆ°ä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œå¹¶ä¸”æ•°é‡è¾¾åˆ°ä¸€å®šå€¼æ—¶ï¼Œé‚£ä¹ˆå“¨å…µä¹‹é—´å°±ä¼šè¿›è¡Œä¸€æ¬¡æŠ•ç¥¨ï¼ŒæŠ•ç¥¨çš„ç»“æœç”±ä¸€ä¸ªå“¨å…µå‘èµ·ï¼Œè¿›è¡Œfailoveræ“ä½œã€‚åˆ‡æ¢æˆåŠŸåï¼Œå°±ä¼šé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè®©å„ä¸ªå“¨å…µæŠŠè‡ªå·±ç›‘æ§çš„ä»æœåŠ¡å™¨å®ç°åˆ‡æ¢ä¸»æœºï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>å®¢è§‚ä¸‹çº¿</strong>ã€‚è¿™æ ·å¯¹äºå®¢æˆ·ç«¯è€Œè¨€ï¼Œä¸€åˆ‡éƒ½æ˜¯é€æ˜çš„ã€‚</p><h3 id="redisé…ç½®å“¨å…µæ¨¡å¼"><a href="#redisé…ç½®å“¨å…µæ¨¡å¼" class="headerlink" title="redisé…ç½®å“¨å…µæ¨¡å¼"></a>redisé…ç½®å“¨å…µæ¨¡å¼</h3><p>å…ˆæ­å»ºä¸€ä¸ªé“¾å¼ä¸»ä»é…ç½®</p><p>6379(master)-&gt;6380(slave)-&gt;6381(slave)</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804115619.png"></p><p><strong>å“¨å…µæ¨¡å¼é…ç½®æ–‡ä»¶</strong></p><p>ä¾‹å¦‚åœ¨usr/local/bin/myconfig/ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªsentinel.cofæ–‡ä»¶</p><p>æ ¸å¿ƒé…ç½®ï¼Œé…ç½®è¿œä¸æ­¢æ­¤</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sentinel monitor master 127.0.0.1 6379 1</span><br></pre></td></tr></tbody></table></figure><p>monitor: ç›‘æ§    master: è¢«ç›‘æ§çš„èŠ‚ç‚¹åç§°   host  port  1ä»£è¡¨ä¸»æœºæŒ‚äº†åä»æœºæŠ•ç¥¨é€‰ä¸¾æ–°ä¸»æœº</p><p>å¯åŠ¨å“¨å…µ</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-sentinel usr/<span class="built_in">local</span>/bin/myconfig/sentinel.conf</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804122903.png"></p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„masterä¸ä»–çš„slaveä¿¡æ¯ï¼Œç°åœ¨æˆ‘ä»¬å°è¯•å…³é—­masterï¼Œå¯ä»¥çœ‹åˆ°å“¨å…µæ§åˆ¶å°è¾“å‡º</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804124954.png"></p><p>æŸ¥çœ‹6380å¤„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°6380é€šè¿‡ä¸€ä¸ªæŠ•ç¥¨ç®—æ³•è¢«é€‰ä¸¾ä¸ºæ–°çš„master</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210804125048.png"></p><p>å½“ä¸»æœºæ¢å¤åå°†ä½œä¸º6380çš„ä»æœº</p><blockquote><p>å°ç»“</p></blockquote><p>æœ‰ç‚¹ï¼š</p><p>1ï¼Œå“¨å…µé›†ç¾¤ï¼ŒåŸºäºä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œæ‹¥æœ‰æ‰€æœ‰ä¸»ä»é…ç½®æœ‰ç‚¹</p><p>2ï¼Œä¸»ä»å¯ä»¥åˆ‡æ¢ï¼Œæ•…éšœè½¬ç§»ç³»ç»Ÿå¯ç”¨æ€§æ›´å¥½</p><p>3ï¼Œä¸»åŠ¨å®Œæˆ</p><p>ç¼ºç‚¹ï¼š</p><p>1ï¼Œredisä¸é€‚åˆåœ¨çº¿æ‰©å®¹ï¼Œé›†ç¾¤å®¹é‡ä¸€æ—¦è¾¾åˆ°ä¸Šçº¿ï¼Œåœ¨çº¿æ‰©å®¹å°±æ˜¯é—®é¢˜</p><p>2ï¼Œå®ç°å“¨å…µæ¨¡å¼é…ç½®éº»çƒ¦</p><p>é…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">port 26379 <span class="comment">#é…ç½®ç«¯å£ï¼Œå¦‚æœæœ‰å“¨å…µé›†ç¾¤</span></span><br><span class="line">dir /tmp <span class="comment">#å·¥ä½œç›®å½•</span></span><br><span class="line">sentinel down-after-milliseconfs mater <span class="comment">#æŒ‡å®šå¤šå°‘æ—¶é—´ä¸»èŠ‚ç‚¹æœªåº”ç­”å“¨å…µè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸‹çº¿</span></span><br></pre></td></tr></tbody></table></figure><h2 id="ç¼“å­˜ç©¿é€ä¸é›ªå´©"><a href="#ç¼“å­˜ç©¿é€ä¸é›ªå´©" class="headerlink" title="ç¼“å­˜ç©¿é€ä¸é›ªå´©"></a>ç¼“å­˜ç©¿é€ä¸é›ªå´©</h2><blockquote><p>ç¼“å­˜ç©¿é€</p></blockquote><p>æè¿°ï¼šè®¿é—®ä¸€ä¸ªç¼“å­˜å’Œæ•°æ®åº“éƒ½ä¸å­˜åœ¨çš„ keyï¼Œæ­¤æ—¶ä¼šç›´æ¥æ‰“åˆ°æ•°æ®åº“ä¸Šï¼Œå¹¶ä¸”æŸ¥ä¸åˆ°æ•°æ®ï¼Œæ²¡æ³•å†™ç¼“å­˜ï¼Œæ‰€ä»¥ä¸‹ä¸€æ¬¡åŒæ ·ä¼šæ‰“åˆ°æ•°æ®åº“ä¸Šã€‚</p><p>æ­¤æ—¶ï¼Œç¼“å­˜èµ·ä¸åˆ°ä½œç”¨ï¼Œè¯·æ±‚æ¯æ¬¡éƒ½ä¼šèµ°åˆ°æ•°æ®åº“ï¼Œæµé‡å¤§æ—¶æ•°æ®åº“å¯èƒ½ä¼šè¢«æ‰“æŒ‚ã€‚æ­¤æ—¶ç¼“å­˜å°±å¥½åƒè¢«â€œç©¿é€â€äº†ä¸€æ ·ï¼Œèµ·ä¸åˆ°ä»»ä½•ä½œç”¨ã€‚</p><p>1ã€<strong>æ¥å£æ ¡éªŒã€‚</strong>åœ¨æ­£å¸¸ä¸šåŠ¡æµç¨‹ä¸­å¯èƒ½ä¼šå­˜åœ¨å°‘é‡è®¿é—®ä¸å­˜åœ¨ key çš„æƒ…å†µï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ä¼šå‡ºç°å¤§é‡çš„æƒ…å†µï¼Œæ‰€ä»¥è¿™ç§åœºæ™¯æœ€å¤§çš„å¯èƒ½æ€§æ˜¯é­å—äº†éæ³•æ”»å‡»ã€‚å¯ä»¥åœ¨æœ€å¤–å±‚å…ˆåšä¸€å±‚æ ¡éªŒï¼šç”¨æˆ·é‰´æƒã€æ•°æ®åˆæ³•æ€§æ ¡éªŒç­‰ï¼Œä¾‹å¦‚å•†å“æŸ¥è¯¢ä¸­ï¼Œå•†å“çš„IDæ˜¯æ­£æ•´æ•°ï¼Œåˆ™å¯ä»¥ç›´æ¥å¯¹éæ­£æ•´æ•°ç›´æ¥è¿‡æ»¤ç­‰ç­‰ã€‚</p><p>2ã€<strong>ç¼“å­˜ç©ºå€¼</strong>ã€‚å½“è®¿é—®ç¼“å­˜å’ŒDBéƒ½æ²¡æœ‰æŸ¥è¯¢åˆ°å€¼æ—¶ï¼Œå¯ä»¥å°†ç©ºå€¼å†™è¿›ç¼“å­˜ï¼Œä½†æ˜¯è®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Œè¯¥æ—¶é—´éœ€è¦æ ¹æ®äº§å“ä¸šåŠ¡ç‰¹æ€§æ¥è®¾ç½®ã€‚</p><p>3ã€<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ã€‚ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å­˜å‚¨æ‰€æœ‰å¯èƒ½è®¿é—®çš„ keyï¼Œä¸å­˜åœ¨çš„ key ç›´æ¥è¢«è¿‡æ»¤ï¼Œå­˜åœ¨çš„ key åˆ™å†è¿›ä¸€æ­¥æŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“ã€‚</p><blockquote><p>ç¼“å­˜å‡»ç©¿</p></blockquote><p>æè¿°ï¼šæŸä¸€ä¸ªçƒ­ç‚¹ keyï¼Œåœ¨ç¼“å­˜è¿‡æœŸçš„ä¸€ç¬é—´ï¼ŒåŒæ—¶æœ‰å¤§é‡çš„è¯·æ±‚æ‰“è¿›æ¥ï¼Œç”±äºæ­¤æ—¶ç¼“å­˜è¿‡æœŸäº†ï¼Œæ‰€ä»¥è¯·æ±‚æœ€ç»ˆéƒ½ä¼šèµ°åˆ°æ•°æ®åº“ï¼Œé€ æˆç¬æ—¶æ•°æ®åº“è¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ï¼Œç”šè‡³å¯èƒ½æ‰“å®æ•°æ®åº“ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1ã€<strong>åŠ äº’æ–¥é”</strong>ã€‚åœ¨å¹¶å‘çš„å¤šä¸ªè¯·æ±‚ä¸­ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªè¯·æ±‚çº¿ç¨‹èƒ½æ‹¿åˆ°é”å¹¶æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢æ“ä½œï¼Œå…¶ä»–çš„çº¿ç¨‹æ‹¿ä¸åˆ°é”å°±é˜»å¡ç­‰ç€ï¼Œç­‰åˆ°ç¬¬ä¸€ä¸ªçº¿ç¨‹å°†æ•°æ®å†™å…¥ç¼“å­˜åï¼Œç›´æ¥èµ°ç¼“å­˜ã€‚</p><p>å…³äºäº’æ–¥é”çš„é€‰æ‹©ï¼Œç½‘ä¸Šçœ‹åˆ°çš„å¤§éƒ¨åˆ†æ–‡ç« éƒ½æ˜¯é€‰æ‹© Redis åˆ†å¸ƒå¼é”ï¼Œå› ä¸ºè¿™ä¸ªå¯ä»¥ä¿è¯åªæœ‰ä¸€ä¸ªè¯·æ±‚ä¼šèµ°åˆ°æ•°æ®åº“ï¼Œè¿™æ˜¯ä¸€ç§æ€è·¯ã€‚</p><p>ä½†æ˜¯å…¶å®ä»”ç»†æƒ³æƒ³çš„è¯ï¼Œè¿™è¾¹å…¶å®æ²¡æœ‰å¿…è¦ä¿è¯åªæœ‰ä¸€ä¸ªè¯·æ±‚èµ°åˆ°æ•°æ®åº“ï¼Œåªè¦ä¿è¯èµ°åˆ°æ•°æ®åº“çš„è¯·æ±‚èƒ½å¤§å¤§é™ä½å³å¯ï¼Œæ‰€ä»¥è¿˜æœ‰å¦ä¸€ä¸ªæ€è·¯æ˜¯ JVM é”ã€‚</p><p>JVM é”ä¿è¯äº†åœ¨å•å°æœåŠ¡å™¨ä¸Šåªæœ‰ä¸€ä¸ªè¯·æ±‚èµ°åˆ°æ•°æ®åº“ï¼Œé€šå¸¸æ¥è¯´å·²ç»è¶³å¤Ÿä¿è¯æ•°æ®åº“çš„å‹åŠ›å¤§å¤§é™ä½ï¼ŒåŒæ—¶åœ¨æ€§èƒ½ä¸Šæ¯”åˆ†å¸ƒå¼é”æ›´å¥½ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ— è®ºæ˜¯ä½¿ç”¨â€œåˆ†å¸ƒå¼é”â€ï¼Œè¿˜æ˜¯â€œJVM é”â€ï¼ŒåŠ é”æ—¶è¦æŒ‰ key ç»´åº¦å»åŠ é”ã€‚</p><p>æˆ‘çœ‹ç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æ˜¯ä½¿ç”¨ä¸€ä¸ªâ€œå›ºå®šçš„ keyâ€åŠ é”ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä¸åŒçš„ key ä¹‹é—´ä¹Ÿä¼šäº’ç›¸é˜»å¡ï¼Œé€ æˆæ€§èƒ½ä¸¥é‡æŸè€—ã€‚</p><p>ä½¿ç”¨ redis åˆ†å¸ƒå¼é”çš„ä¼ªä»£ç ï¼Œä»…ä¾›å‚è€ƒï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getData</span><span class="params">(String key)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">    Object value = redis.get(key);</span><br><span class="line">    <span class="comment">// ç¼“å­˜å€¼è¿‡æœŸ</span></span><br><span class="line">    <span class="keyword">if</span> (value == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="comment">// lockRedisï¼šä¸“é—¨ç”¨äºåŠ é”çš„redisï¼›</span></span><br><span class="line">        <span class="comment">// "empty"ï¼šåŠ é”çš„å€¼éšä¾¿è®¾ç½®éƒ½å¯ä»¥</span></span><br><span class="line">        <span class="keyword">if</span> (lockRedis.set(key, <span class="string">"empty"</span>, <span class="string">"PX"</span>, lockExpire, <span class="string">"NX"</span>)) {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="comment">// æŸ¥è¯¢æ•°æ®åº“ï¼Œå¹¶å†™åˆ°ç¼“å­˜ï¼Œè®©å…¶ä»–çº¿ç¨‹å¯ä»¥ç›´æ¥èµ°ç¼“å­˜</span></span><br><span class="line">                value = getDataFromDb(key);</span><br><span class="line">                redis.set(key, value, <span class="string">"PX"</span>, expire);</span><br><span class="line">            } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">                <span class="comment">// å¼‚å¸¸å¤„ç†</span></span><br><span class="line">            } <span class="keyword">finally</span> {</span><br><span class="line">                <span class="comment">// é‡Šæ”¾é”</span></span><br><span class="line">                lockRedis.delete(key);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// sleep50msåï¼Œè¿›è¡Œé‡è¯•</span></span><br><span class="line">            Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            <span class="keyword">return</span> getData(key);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>2ã€<strong>çƒ­ç‚¹æ•°æ®ä¸è¿‡æœŸ</strong>ã€‚ç›´æ¥å°†ç¼“å­˜è®¾ç½®ä¸ºä¸è¿‡æœŸï¼Œç„¶åç”±å®šæ—¶ä»»åŠ¡å»å¼‚æ­¥åŠ è½½æ•°æ®ï¼Œæ›´æ–°ç¼“å­˜ã€‚</p><p>è¿™ç§æ–¹å¼é€‚ç”¨äºæ¯”è¾ƒæç«¯çš„åœºæ™¯ï¼Œä¾‹å¦‚æµé‡ç‰¹åˆ«ç‰¹åˆ«å¤§çš„åœºæ™¯ï¼Œä½¿ç”¨æ—¶éœ€è¦è€ƒè™‘ä¸šåŠ¡èƒ½æ¥å—æ•°æ®ä¸ä¸€è‡´çš„æ—¶é—´ï¼Œè¿˜æœ‰å°±æ˜¯å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼Œä¸è¦åˆ°æ—¶å€™ç¼“å­˜åˆ·æ–°ä¸ä¸Šï¼Œä¸€ç›´æ˜¯è„æ•°æ®ï¼Œé‚£å°±å‡‰äº†ã€‚</p><blockquote><p>ç¼“å­˜é›ªå´©</p></blockquote><p>æè¿°ï¼šå¤§é‡çš„çƒ­ç‚¹ key è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼åœ¨ç¼“å­˜åœ¨åŒä¸€æ—¶åˆ»å…¨éƒ¨å¤±æ•ˆï¼Œé€ æˆç¬æ—¶æ•°æ®åº“è¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ï¼Œå¼•èµ·é›ªå´©ï¼Œç”šè‡³å¯¼è‡´æ•°æ®åº“è¢«æ‰“æŒ‚ã€‚</p><p>ç¼“å­˜é›ªå´©å…¶å®æœ‰ç‚¹åƒâ€œå‡çº§ç‰ˆçš„ç¼“å­˜å‡»ç©¿â€ï¼Œç¼“å­˜å‡»ç©¿æ˜¯ä¸€ä¸ªçƒ­ç‚¹ keyï¼Œç¼“å­˜é›ªå´©æ˜¯ä¸€ç»„çƒ­ç‚¹ keyã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1ã€<strong>è¿‡æœŸæ—¶é—´æ‰“æ•£</strong>ã€‚æ—¢ç„¶æ˜¯å¤§é‡ç¼“å­˜é›†ä¸­å¤±æ•ˆï¼Œé‚£æœ€å®¹æ˜“æƒ³åˆ°å°±æ˜¯è®©ä»–ä»¬ä¸é›†ä¸­ç”Ÿæ•ˆã€‚å¯ä»¥ç»™ç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ—¶åŠ ä¸Šä¸€ä¸ªéšæœºå€¼æ—¶é—´ï¼Œä½¿å¾—æ¯ä¸ª key çš„è¿‡æœŸæ—¶é—´åˆ†å¸ƒå¼€æ¥ï¼Œä¸ä¼šé›†ä¸­åœ¨åŒä¸€æ—¶åˆ»å¤±æ•ˆã€‚</p><p>2ã€<strong>çƒ­ç‚¹æ•°æ®ä¸è¿‡æœŸ</strong>ã€‚è¯¥æ–¹å¼å’Œç¼“å­˜å‡»ç©¿ä¸€æ ·ï¼Œä¹Ÿæ˜¯è¦ç€é‡è€ƒè™‘åˆ·æ–°çš„æ—¶é—´é—´éš”å’Œæ•°æ®å¼‚å¸¸å¦‚ä½•å¤„ç†çš„æƒ…å†µã€‚</p><p>3ã€<strong>åŠ äº’æ–¥é”</strong>ã€‚è¯¥æ–¹å¼å’Œç¼“å­˜å‡»ç©¿ä¸€æ ·ï¼ŒæŒ‰ key ç»´åº¦åŠ é”ï¼Œå¯¹äºåŒä¸€ä¸ª keyï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹å»è®¡ç®—ï¼Œå…¶ä»–çº¿ç¨‹åŸåœ°é˜»å¡ç­‰å¾…ç¬¬ä¸€ä¸ªçº¿ç¨‹çš„è®¡ç®—ç»“æœï¼Œç„¶åç›´æ¥èµ°ç¼“å­˜å³å¯ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>redisåŸºç¡€</p></blockquote><ol><li><p>redisæ˜¯ä»€ä¹ˆ</p><ul><li>ä¸€ç§key-valueå‹nosqlå†…å­˜æ•°æ®åº“</li></ul></li><li><p>redisåŸºæœ¬æ•°æ®ç±»å‹</p><ul><li>String</li><li>List</li><li>Set</li><li>Hash</li><li>Zset</li></ul></li><li><p>redisä¸‰ç§ç‰¹æ®Šç±»å‹</p><ul><li>geospatial</li><li>Hyperlog</li><li>Bitmaps</li></ul></li><li><p>redisäº‹åŠ¡</p><ul><li><p>redisäº‹åŠ¡å¼€å¯ï¼Œç»ˆæ­¢å„ç§æƒ…å†µ</p></li><li><p>redisäº‹åŠ¡ä¸ä¿è¯åŸå­æ€§</p></li><li><p>ä¸æ”¯æŒå›æ»šï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p></li></ul></li><li><p>redisæŒä¹…åŒ–</p><ul><li>RDBæ–¹å¼</li><li>AOFæ–¹å¼</li><li>ä¸¤ç§æŒä¹…åŒ–çš„åŸç†ï¼Œè¿‡ç¨‹</li><li>ä¸¤ç§æ–¹å¼çš„ä¼˜ç¼ºç‚¹</li></ul></li><li><p>rediså‘å¸ƒè®¢é˜…</p></li><li><p>redisä¸»ä»å¤åˆ¶</p><ul><li>ä¸»ä»å¤åˆ¶ç¯å¢ƒæ­å»º</li><li>é…ç½®ä¸»ä»å…³ç³»</li><li>ä¸»ä»å¤åˆ¶åŸç†</li></ul></li><li><p>rediså“¨å…µæ¨¡å¼</p><ul><li>é€‰ä¸¾æµç¨‹</li></ul></li><li><p>redisç¼“å­˜</p><ul><li>ç©¿é€</li><li>å‡»ç©¿</li><li>é›ªå´©</li><li>å„ç§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</li></ul></li><li><p>redisåˆ†å¸ƒå¼é”</p></li></ol><blockquote><p>é—®é¢˜</p></blockquote><p><strong>Redis</strong></p><ul><li>é¡¹ç›®ä¸­ä½¿ç”¨çš„ Redis ç‰ˆæœ¬</li><li>Redis åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨åœºæ™¯</li><li>Redis æ€ä¹ˆä¿è¯é«˜å¯ç”¨</li><li>Redis çš„é€‰ä¸¾æµç¨‹</li><li>Redis å’Œ Memcache çš„åŒºåˆ«</li><li>Redis çš„é›†ç¾¤æ¨¡å¼</li><li>Redis é›†ç¾¤è¦å¢åŠ åˆ†ç‰‡ï¼Œæ§½çš„è¿ç§»æ€ä¹ˆä¿è¯æ— æŸ</li><li>Redis åˆ†å¸ƒå¼é”çš„å®ç°</li><li>Redis åˆ é™¤è¿‡æœŸé”®çš„ç­–ç•¥</li><li>Redis çš„å†…å­˜æ·˜æ±°ç­–ç•¥</li><li>Redis çš„ Hash å¯¹è±¡åº•å±‚ç»“æ„</li><li>Redis ä¸­ Hash å¯¹è±¡çš„æ‰©å®¹æµç¨‹</li><li>Redis çš„ Hash å¯¹è±¡çš„æ‰©å®¹æµç¨‹åœ¨æ•°æ®é‡å¤§çš„æ—¶å€™ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—</li><li>Redis çš„æŒä¹…åŒ–æœºåˆ¶æœ‰å“ªå‡ ç§</li><li>RDB å’Œ AOF çš„å®ç°åŸç†ã€ä¼˜ç¼ºç‚¹</li><li>AOF é‡å†™çš„è¿‡ç¨‹</li><li>å“¨å…µæ¨¡å¼çš„åŸç†</li><li>ä½¿ç”¨ç¼“å­˜æ—¶ï¼Œå…ˆæ“ä½œæ•°æ®åº“è¿˜æ˜¯å…ˆæ“ä½œç¼“å­˜</li><li>ä¸ºä»€ä¹ˆæ˜¯è®©ç¼“å­˜å¤±æ•ˆï¼Œè€Œä¸æ˜¯æ›´æ–°ç¼“å­˜</li><li>ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©</li><li>æ›´æ–°ç¼“å­˜çš„å‡ ç§è®¾è®¡æ¨¡å¼</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸ºä»€ä¹ˆä½¿ç”¨noSql&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆä½¿ç”¨noSql&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆä½¿ç”¨noSql&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆä½¿ç”¨noSql&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;noSqlï¼Œä¸ä»…ä»…æ˜¯sql&lt;/p&gt;
&lt;/block</summary>
      
    
    
    
    
    <category term="æ•°æ®åº“" scheme="https://rain-sky.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="redis" scheme="https://rain-sky.github.io/tags/redis/"/>
    
    <category term="noSql" scheme="https://rain-sky.github.io/tags/noSql/"/>
    
  </entry>
  
  <entry>
    <title>springboot</title>
    <link href="https://rain-sky.github.io/2021/07/22/springboot/"/>
    <id>https://rain-sky.github.io/2021/07/22/springboot/</id>
    <published>2021-07-22T10:58:52.000Z</published>
    <updated>2021-08-07T07:44:15.818Z</updated>
    
    <content type="html"><![CDATA[<h2 id="springbootçš„ç‰¹æ€§"><a href="#springbootçš„ç‰¹æ€§" class="headerlink" title="springbootçš„ç‰¹æ€§"></a>springbootçš„ç‰¹æ€§</h2><h4 id="1-ä¾èµ–ç®¡ç†"><a href="#1-ä¾èµ–ç®¡ç†" class="headerlink" title="1 ä¾èµ–ç®¡ç†"></a>1 ä¾èµ–ç®¡ç†</h4><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">ä¸Šé¢é¡¹ç›®çš„çˆ¶é¡¹ç›®å¦‚ä¸‹ï¼š</span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>å¼€å‘å¯¼å…¥starteråœºæ™¯å¯åŠ¨å™¨</strong></p><blockquote><p>æ‰€è°“å¯åŠ¨å™¨å°±æ˜¯ä¸€ç»„åº”ç”¨ä¾èµ–é›†</p></blockquote><p>è§åˆ°å¾ˆå¤š spring-boot-starter-* ï¼š *å°±æŸç§åœºæ™¯<br>åªè¦å¼•å…¥starterï¼Œè¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰å¸¸è§„éœ€è¦çš„ä¾èµ–æˆ‘ä»¬éƒ½è‡ªåŠ¨å¼•å…¥<br>æ›´å¤šSpringBootæ‰€æœ‰æ”¯æŒçš„åœºæ™¯<br>è‡ªå®šä¹‰å¯åŠ¨å™¨ï¼Œè§åˆ°çš„ *-spring-boot-starterï¼š ç¬¬ä¸‰æ–¹ä¸ºæˆ‘ä»¬æä¾›çš„ç®€åŒ–å¼€å‘çš„åœºæ™¯å¯åŠ¨å™¨ã€‚<br>æ‰€æœ‰åœºæ™¯å¯åŠ¨å™¨æœ€åº•å±‚çš„ä¾èµ–</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>æ— éœ€å…³æ³¨ç‰ˆæœ¬å·ï¼Œè‡ªåŠ¨ç‰ˆæœ¬ä»²è£</strong></p><ol><li>å¼•å…¥ä¾èµ–é»˜è®¤éƒ½å¯ä»¥ä¸å†™ç‰ˆæœ¬</li><li>å¼•å…¥éç‰ˆæœ¬ä»²è£çš„jarï¼Œè¦å†™ç‰ˆæœ¬å·ã€‚</li></ol><p><strong>è‡ªå®šä¹‰ä¿®æ”¹ä¾èµ–ç‰ˆæœ¬å·</strong></p><p>1.æŸ¥çœ‹spring-boot-dependenciesé‡Œé¢è§„å®šå½“å‰ä¾èµ–çš„ç‰ˆæœ¬ ç”¨çš„ keyã€‚</p><p>2.åœ¨å½“å‰é¡¹ç›®é‡Œé¢é‡å†™é…ç½®ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.43<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>ctrl + shift + alt + Uï¼šä»¥å›¾çš„æ–¹å¼æ˜¾ç¤ºé¡¹ç›®ä¸­ä¾èµ–ä¹‹é—´çš„å…³ç³»</p></blockquote><h4 id="2-è‡ªåŠ¨é…ç½®"><a href="#2-è‡ªåŠ¨é…ç½®" class="headerlink" title="2 è‡ªåŠ¨é…ç½®"></a>2 è‡ªåŠ¨é…ç½®</h4><p><strong>è‡ªåŠ¨é…å¥½Tomcat</strong><br>å¼•å…¥Tomcatä¾èµ–ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>è‡ªåŠ¨é…å¥½SpringMVC</strong></p><ul><li>å¼•å…¥SpringMVCå…¨å¥—ç»„ä»¶</li><li>è‡ªåŠ¨é…å¥½SpringMVCå¸¸ç”¨ç»„ä»¶ï¼ˆåŠŸèƒ½ï¼‰</li><li>è‡ªåŠ¨é…å¥½Webå¸¸è§åŠŸèƒ½ï¼Œå¦‚ï¼šå­—ç¬¦ç¼–ç é—®é¢˜</li></ul><p><strong>é»˜è®¤çš„åŒ…ç»“æ„</strong><br>ä¸»ç¨‹åºæ‰€åœ¨åŒ…åŠå…¶ä¸‹é¢çš„æ‰€æœ‰å­åŒ…é‡Œé¢çš„ç»„ä»¶éƒ½ä¼šè¢«é»˜è®¤æ‰«æè¿›æ¥<br>æ— éœ€ä»¥å‰çš„åŒ…æ‰«æé…ç½®<br>æƒ³è¦æ”¹å˜æ‰«æè·¯å¾„ï¼š</p><ul><li>@SpringBootApplication(scanBasePackages=â€œcom.lunâ€)</li><li>@ComponentScan æŒ‡å®šæ‰«æè·¯å¾„</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(scanBasePackages=â€œcom.lunâ€)</span></span><br><span class="line"><span class="meta">@ComponentScan</span> æŒ‡å®šæ‰«æè·¯å¾„</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line">ç­‰åŒäº</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan("com.lun")</span></span><br></pre></td></tr></tbody></table></figure><p><strong>å„ç§é…ç½®æ‹¥æœ‰é»˜è®¤å€¼</strong></p><ul><li>é»˜è®¤é…ç½®æœ€ç»ˆéƒ½æ˜¯æ˜ å°„åˆ°æŸä¸ªç±»ä¸Šï¼Œå¦‚ï¼š<code>MultipartProperties</code></li><li>é…ç½®æ–‡ä»¶çš„å€¼æœ€ç»ˆä¼šç»‘å®šæ¯ä¸ªç±»ä¸Šï¼Œè¿™ä¸ªç±»ä¼šåœ¨å®¹å™¨ä¸­åˆ›å»ºå¯¹è±¡</li></ul><p><strong>æŒ‰éœ€åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®é¡¹</strong></p><ul><li>éå¸¸å¤šçš„starter</li><li>å¼•å…¥äº†å“ªäº›åœºæ™¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®æ‰ä¼šå¼€å¯</li><li>SpringBootæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½éƒ½åœ¨ spring-boot-autoconfigure åŒ…é‡Œé¢</li></ul><h2 id="æ³¨è§£åˆ†æ"><a href="#æ³¨è§£åˆ†æ" class="headerlink" title="æ³¨è§£åˆ†æ"></a>æ³¨è§£åˆ†æ</h2><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€é…ç½®ç±»é‡Œé¢ä½¿ç”¨<span class="doctag">@Bean</span>æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šç»™å®¹å™¨æ³¨å†Œç»„ä»¶ï¼Œé»˜è®¤ä¹Ÿæ˜¯å•å®ä¾‹çš„</span></span><br><span class="line"><span class="comment"> * 2ã€é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯ç»„ä»¶</span></span><br><span class="line"><span class="comment"> * 3ã€proxyBeanMethodsï¼šä»£ç†beançš„æ–¹æ³•ï¼ˆspringboot2ç›¸å¯¹äº1çš„æ–°å¢ï¼‰</span></span><br><span class="line"><span class="comment"> *      Fullæ¨¡å¼(proxyBeanMethods = true)ï¼ˆä¿è¯æ¯ä¸ª<span class="doctag">@Bean</span>æ–¹æ³•è¢«è°ƒç”¨å¤šå°‘æ¬¡è¿”å›çš„ç»„ä»¶éƒ½æ˜¯å•å®ä¾‹çš„ï¼‰ï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line"><span class="comment"> *      Liteæ¨¡å¼(proxyBeanMethods = false)ï¼ˆæ¯ä¸ª<span class="doctag">@Bean</span>æ–¹æ³•è¢«è°ƒç”¨å¤šå°‘æ¬¡è¿”å›çš„ç»„ä»¶éƒ½æ˜¯æ–°åˆ›å»ºçš„ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span> <span class="comment">//å‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» == é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Full:å¤–éƒ¨æ— è®ºå¯¹é…ç½®ç±»ä¸­çš„è¿™ä¸ªç»„ä»¶æ³¨å†Œæ–¹æ³•è°ƒç”¨å¤šå°‘æ¬¡è·å–çš„éƒ½æ˜¯ä¹‹å‰æ³¨å†Œå®¹å™¨ä¸­çš„å•å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ã€‚ä»¥æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idã€‚è¿”å›ç±»å‹å°±æ˜¯ç»„ä»¶ç±»å‹ã€‚è¿”å›çš„å€¼ï¼Œå°±æ˜¯ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user01</span><span class="params">()</span></span>{</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">"zhangsan"</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="comment">//userç»„ä»¶ä¾èµ–äº†Petç»„ä»¶</span></span><br><span class="line">        user.setPet(tomcatPet());</span><br><span class="line">        <span class="keyword">return</span> zhangsan;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è‡ªå®šä¹‰ç»„ä»¶åâ€œtomâ€</span></span><br><span class="line">    <span class="meta">@Bean("tom")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pet <span class="title">tomcatPet</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pet(<span class="string">"tomcat"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>æµ‹è¯•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan("com.atguigu.boot")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">    <span class="comment">//1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨</span></span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2ã€æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶</span></span><br><span class="line">        String[] names = run.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span> (String name : names) {</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3ã€ä»å®¹å™¨ä¸­è·å–ç»„ä»¶</span></span><br><span class="line">        Pet tom01 = run.getBean(<span class="string">"tom"</span>, Pet.class);</span><br><span class="line">        Pet tom02 = run.getBean(<span class="string">"tom"</span>, Pet.class);</span><br><span class="line">        System.out.println(<span class="string">"ç»„ä»¶ï¼š"</span>+(tom01 == tom02));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4ã€com.atguigu.boot.config.MyConfig$$EnhancerBySpringCGLIB$$51f1e1ca@1654a892</span></span><br><span class="line">        MyConfig bean = run.getBean(MyConfig.class);</span><br><span class="line">        System.out.println(bean);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¦‚æœ@Configuration(proxyBeanMethods = true)ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•ã€‚SpringBootæ€»ä¼šæ£€æŸ¥è¿™ä¸ªç»„ä»¶æ˜¯å¦åœ¨å®¹å™¨ä¸­æœ‰ã€‚</span></span><br><span class="line">        <span class="comment">//ä¿æŒç»„ä»¶å•å®ä¾‹</span></span><br><span class="line">        User user = bean.user01();</span><br><span class="line">        User user1 = bean.user01();</span><br><span class="line">        System.out.println(user == user1);</span><br><span class="line"></span><br><span class="line">        User user01 = run.getBean(<span class="string">"user01"</span>, User.class);</span><br><span class="line">        Pet tom = run.getBean(<span class="string">"tom"</span>, Pet.class);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·çš„å® ç‰©ï¼š"</span>+(user01.getPet() == tom));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><p>æœ€ä½³å®æˆ˜</p><ul><li>é…ç½® ç±»ç»„ä»¶ä¹‹é—´<strong>æ— ä¾èµ–å…³ç³»</strong>ç”¨Liteæ¨¡å¼åŠ é€Ÿå®¹å™¨å¯åŠ¨è¿‡ç¨‹ï¼Œå‡å°‘åˆ¤æ–­</li><li>é…ç½® ç±»ç»„ä»¶ä¹‹é—´<strong>æœ‰ä¾èµ–å…³ç³»</strong>ï¼Œæ–¹æ³•ä¼šè¢«è°ƒç”¨å¾—åˆ°ä¹‹å‰å•å®ä¾‹ç»„ä»¶ï¼Œç”¨Fullæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</li></ul><blockquote><p>å¦‚æœæ˜¯fullæ¨¡å¼ï¼Œæ¯æ¬¡å¯¹ä»£ç†å¯¹è±¡æ–¹æ³•çš„æ‰ç”¨éƒ½è¦å»æ£€æŸ¥æ–¹æ³•è¿”å›ç±»å‹æ˜¯å¦å·²ç»åœ¨å®¹å™¨ä¸­å­˜åœ¨</p></blockquote></li></ul><h4 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import({User.class, DBHelper.class})</span> <span class="comment">//ç»™å®¹å™¨ä¸­è‡ªåŠ¨åˆ›å»ºå‡ºè¿™ä¸¤ä¸ªç±»å‹çš„ç»„ä»¶ã€é»˜è®¤ç»„ä»¶çš„åå­—å°±æ˜¯å…¨ç±»å</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>{</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="Conditional"><a href="#Conditional" class="headerlink" title="@Conditional"></a>@Conditional</h4><blockquote><p>æ¡ä»¶è£…é…æ³¨è§£</p></blockquote><p><strong>å¯é€‰é¡¹</strong></p><p><a href="https://gitee.com/rain-sky/images/raw/master/20210715103437.png"><img src="https://gitee.com/rain-sky/images/raw/master/20210715103437.png" alt="img"></a></p><p><strong>ä¸¾ä¾‹</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnBean(name = "tom")</span><span class="comment">//åªæœ‰å½“å®¹å™¨ä¸­å­˜åœ¨åç§°ä¸ºtomçš„ç»„ä»¶æ—¶ï¼Œæ‰æ³¨å†Œuser01ç»„ä»¶</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user01</span><span class="params">()</span></span>{</span><br><span class="line">        User zhangsan = <span class="keyword">new</span> User(<span class="string">"zhangsan"</span>, <span class="number">18</span>);</span><br><span class="line">        zhangsan.setPet(tomcatPet());</span><br><span class="line">        <span class="keyword">return</span> zhangsan;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Bean("tom")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pet <span class="title">tomcatPet</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pet(<span class="string">"tomcat"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>@ImportResource</p><blockquote><p>é…ç½®èµ„æºå¯¼å…¥</p></blockquote><p><strong>ä½¿ç”¨æ–¹å¼</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource("classpath:beans.xml")</span><span class="comment">//åœ¨ä»»æ„é…ç½®ç±»ä¸Šä¸€æ¬¡ç¼–å†™å³å¯</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>{</span><br><span class="line">...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="ConfigurationProperties-é…ç½®ç»‘å®š"><a href="#ConfigurationProperties-é…ç½®ç»‘å®š" class="headerlink" title="@ConfigurationProperties é…ç½®ç»‘å®š"></a>@ConfigurationProperties é…ç½®ç»‘å®š</h4><p><strong>å°†é…ç½®æ–‡ä»¶ç»‘å®šåˆ°JavaBean</strong></p><p>ä¼ ç»Ÿæ–¹å¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">getProperties</span> </span>{</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException, IOException </span>{</span><br><span class="line">         Properties pps = <span class="keyword">new</span> Properties();</span><br><span class="line">         pps.load(<span class="keyword">new</span> FileInputStream(<span class="string">"a.properties"</span>));</span><br><span class="line">         Enumeration enum1 = pps.propertyNames();<span class="comment">//å¾—åˆ°é…ç½®æ–‡ä»¶çš„åå­—</span></span><br><span class="line">         <span class="keyword">while</span>(enum1.hasMoreElements()) {</span><br><span class="line">             String strKey = (String) enum1.nextElement();</span><br><span class="line">             String strValue = pps.getProperty(strKey);</span><br><span class="line">             System.out.println(strKey + <span class="string">"="</span> + strValue);</span><br><span class="line">             <span class="comment">//å°è£…åˆ°JavaBeanã€‚</span></span><br><span class="line">         }</span><br><span class="line">     }</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure><p>springBootçš„é…ç½®ç»‘å®šï¼š</p><p><strong>æ–¹æ³•ä¸€@ConfigurationProperties + @Component</strong></p><p><a href="https://www.jianshu.com/p/7f54da1cb2eb">å…³äºè¯¥æ³¨è§£çš„æ–‡ç« </a></p><blockquote><p>@EnableConfigurationPropertiesæ³¨è§£çš„ä½œç”¨æ˜¯ï¼šä½¿ä½¿ç”¨ @ConfigurationProperties æ³¨è§£çš„ç±»ç”Ÿæ•ˆã€‚</p><p>å¦‚æœä¸€ä¸ªé…ç½®ç±»åªé…ç½®@ConfigurationPropertiesæ³¨è§£ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨@Componentï¼Œé‚£ä¹ˆåœ¨IOCå®¹å™¨ä¸­æ˜¯è·å–ä¸åˆ°properties é…ç½®æ–‡ä»¶è½¬åŒ–çš„beanã€‚è¯´ç™½äº† @EnableConfigurationProperties ç›¸å½“äºæŠŠä½¿ç”¨  @ConfigurationProperties çš„ç±»è¿›è¡Œäº†ä¸€æ¬¡æ³¨å…¥ã€‚</p></blockquote><p>å‡è®¾æœ‰é…ç½®æ–‡ä»¶application.properties</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mycar.brand</span>=<span class="string">BYD</span></span><br><span class="line"><span class="meta">mycar.price</span>=<span class="string">100000</span></span><br></pre></td></tr></tbody></table></figure><p><strong>ä½¿ç”¨</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "mycar")</span><span class="comment">//prefixï¼Œé…ç½®æ–‡ä»¶åŒ¹é…çš„å‰ç¼€</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>{</span><br><span class="line">        <span class="keyword">private</span> String brand;</span><br><span class="line">        <span class="keyword">private</span> Integer price ;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getBrand</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line">        }</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBrand</span><span class="params">(String brand)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.brand = brand;</span><br><span class="line">        }</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">getPrice</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">        }</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>æ–¹æ³•äºŒ</strong></p><p>@EnableConfigurationProperties + @ConfigurationProperties</p><ul><li>å¼€å¯Caré…ç½®ç»‘å®šåŠŸèƒ½</li><li>æŠŠè¿™ä¸ªCarè¿™ä¸ªç»„ä»¶è‡ªåŠ¨æ³¨å†Œåˆ°å®¹å™¨ä¸­</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableConfigurationProperties(Car.class)</span> <span class="comment">//å‘å®¹å™¨æ³¨å…¥Carè¿™ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>{</span><br><span class="line">...</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "mycar")</span> <span class="comment">//å£°æ˜è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»å¹¶ç»‘å®šåˆ°å‰ç¼€ä¸ºmycarçš„å€¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>{</span><br><span class="line">...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="è‡ªåŠ¨é…ç½®åŸç†æ¢ç©¶"><a href="#è‡ªåŠ¨é…ç½®åŸç†æ¢ç©¶" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†æ¢ç©¶"></a>è‡ªåŠ¨é…ç½®åŸç†æ¢ç©¶</h2><h4 id="å¼•å¯¼åŠ è½½è‡ªåŠ¨é…ç½®ç±»"><a href="#å¼•å¯¼åŠ è½½è‡ªåŠ¨é…ç½®ç±»" class="headerlink" title="å¼•å¯¼åŠ è½½è‡ªåŠ¨é…ç½®ç±»"></a>å¼•å¯¼åŠ è½½è‡ªåŠ¨é…ç½®ç±»</h4><p><strong>ä¸»ç¨‹åºå…¥å£</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(MainApplication.class, args);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>@SpringBootApplication</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(</span></span><br><span class="line"><span class="meta">    excludeFilters = {@Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = {TypeExcludeFilter.class}</span></span><br><span class="line"><span class="meta">), @Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = {AutoConfigurationExcludeFilter.class}</span></span><br><span class="line"><span class="meta">)}</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>å¯çŸ¥@springBootApplication æ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ³¨è§£çš„åˆæˆæ³¨è§£</p><p>@SpringBootConfiguration ç”±æºç å¯çŸ¥æ­¤æ³¨è§£è¡¨æ˜è¯¥ç±»ä¸ºä¸€ä¸ªé…ç½®ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootConfiguration {</span><br><span class="line">    <span class="meta">@AliasFor(</span></span><br><span class="line"><span class="meta">        annotation = Configuration.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">proxyBeanMethods</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">true</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>@ComponentScan æ‰«æ</p><p>@EnableAutoConfiguration</p></blockquote><p><strong>@EnableAutoConfigurationæ¢ç©¶</strong></p><p><strong>æºç ï¼Œå¯çŸ¥è¯¥æ³¨è§£ä¹Ÿæ˜¯ä¸€ä¸ªåˆæˆæ³¨è§£</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target({ElementType.TYPE})</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import({AutoConfigurationImportSelector.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoConfiguration {</span><br><span class="line">    String ENABLED_OVERRIDE_PROPERTY = <span class="string">"spring.boot.enableautoconfiguration"</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] exclude() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">    String[] excludeName() <span class="keyword">default</span> {};</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>è®©æˆ‘ä»¬æ¥çœ‹çœ‹@AutoConfigurationPackageæ˜¯ä¸ªå•¥</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Import(AutoConfigurationPackages.Registrar.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoConfigurationPackage {</span><br><span class="line"></span><br><span class="line">String[] basePackages() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">Class&lt;?&gt;[] basePackageClasses() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç”±æºç å¯ä»¥çœ‹åˆ°ï¼Œè¯¥æ³¨è§£ä½¿ç”¨@Import(AutoConfigurationPackages.Registrar.class)å¯¼å…¥äº†ä¸€ä¸ªRegistrar.classç»„ä»¶,ç‚¹è¿›å»åº·åº·</p><p><strong>Registrarå®ƒå¹²äº†å•¥ï¼Ÿ</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Registrar</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span>, <span class="title">DeterminableImports</span> </span>{</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata metadata, BeanDefinitionRegistry registry)</span> </span>{</span><br><span class="line">register(registry, <span class="keyword">new</span> PackageImports(metadata).getPackageNames().toArray(<span class="keyword">new</span> String[<span class="number">0</span>]));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;Object&gt; <span class="title">determineImports</span><span class="params">(AnnotationMetadata metadata)</span> </span>{</span><br><span class="line"><span class="keyword">return</span> Collections.singleton(<span class="keyword">new</span> PackageImports(metadata));</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>æ‰“ä¸ªæ–­ç‚¹çœ‹ä¸€çœ‹</p></blockquote><p><a href="https://gitee.com/rain-sky/images/raw/master/20210715113622.png"><img src="https://gitee.com/rain-sky/images/raw/master/20210715113622.png" alt="img"></a></p><blockquote><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ³¨è§£ä¿¡æ¯ä¸­è¡¨ç¤ºè¯¥æ³¨è§£ä½ç½®ä¸ºä¸»å¯åŠ¨ç±»ï¼Œæ ¹æ®æ–¹æ³•å¤§æ¦‚çŒœæµ‹ï¼šæ‹¿åˆ°ä¸€ä¸ªåŒ…åï¼Œç„¶åå°†è¯¥åŒ…ä¸‹ç»„ä»¶æ‰¹é‡æ³¨å†Œï¼Œè®©æˆ‘ä»¬è®¡ç®—è¯•ä¸€è¯•ï¼Œçœ‹çœ‹ç»“æœ</p></blockquote><p><a href="https://gitee.com/rain-sky/images/raw/master/20210715113944.png"><img src="https://gitee.com/rain-sky/images/raw/master/20210715113944.png" alt="img"></a></p><p>å¯ä»¥çœ‹åˆ°è®¡ç®—ç»“æœå°±æ˜¯æˆ‘ä»¬ä¸»å¯åŠ¨ç±»æ‰€åœ¨åŒ…</p><ul><li>åˆ©ç”¨Registrarç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ç³»åˆ—ç»„ä»¶</li><li>å°†æŒ‡å®šçš„ä¸€ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶å¯¼å…¥è¿›MainApplicationæ‰€åœ¨åŒ…ä¸‹ã€‚</li></ul><p><strong>@Import(AutoConfigurationImportSelector.class)</strong></p><ul><li>åˆ©ç”¨getAutoConfigurationEntry(annotationMetadata);ç»™å®¹å™¨ä¸­æ‰¹é‡å¯¼å…¥ä¸€äº›ç»„ä»¶</li><li>è°ƒç”¨List<string> configurations = getCandidateConfigurations(annotationMetadata, attributes)è·å–åˆ°æ‰€æœ‰éœ€è¦å¯¼å…¥åˆ°å®¹å™¨ä¸­çš„é…ç½®ç±»</string></li><li>åˆ©ç”¨å·¥å‚åŠ è½½ Map&lt;String, List<string>&gt; loadSpringFactories(@Nullable ClassLoader classLoader);å¾—åˆ°æ‰€æœ‰çš„ç»„ä»¶</string></li><li>ä»META-INF/spring.factoriesä½ç½®æ¥åŠ è½½ä¸€ä¸ªæ–‡ä»¶ã€‚<ul><li>é»˜è®¤æ‰«ææˆ‘ä»¬å½“å‰ç³»ç»Ÿé‡Œé¢æ‰€æœ‰META-INF/spring.factoriesä½ç½®çš„æ–‡ä»¶</li><li>spring-boot-autoconfigure-2.3.4.RELEASE.jaråŒ…é‡Œé¢ä¹Ÿæœ‰META-INF/spring.factories</li></ul></li></ul><p><strong>ä¸€äº›å®è·µ</strong></p><p>ä½¿ç”¨dev-tools</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Webåœºæ™¯"><a href="#Webåœºæ™¯" class="headerlink" title="Webåœºæ™¯"></a>Webåœºæ™¯</h2><h4 id="YAMLè¯­æ³•"><a href="#YAMLè¯­æ³•" class="headerlink" title="YAMLè¯­æ³•"></a>YAMLè¯­æ³•</h4><p>åŸºæœ¬è¯­æ³•</p><ul><li>key: valueï¼›kvä¹‹é—´æœ‰ç©ºæ ¼</li><li>å¤§å°å†™æ•æ„Ÿ</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</li><li>ç¼©è¿›ä¸å…è®¸ä½¿ç”¨tabï¼Œåªå…è®¸ç©ºæ ¼</li><li>ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯</li><li>â€˜#â€™è¡¨ç¤ºæ³¨é‡Š</li><li>å­—ç¬¦ä¸²æ— éœ€åŠ å¼•å·ï¼Œå¦‚æœè¦åŠ ï¼Œå•å¼•å·â€™â€™ã€åŒå¼•å·â€â€è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ä¼šè¢« è½¬ä¹‰ã€ä¸è½¬ä¹‰</li></ul><p>æ•°æ®ç±»å‹</p><ul><li>å­—é¢é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ã€‚dateã€booleanã€stringã€numberã€null</li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¡Œå†…å†™æ³•ï¼š  </span></span><br><span class="line"><span class="attr">k:</span> {<span class="string">k1:v1</span>,<span class="string">k2:v2</span>,<span class="string">k3:v3</span>}</span><br><span class="line"><span class="comment">#æˆ–</span></span><br><span class="line"><span class="attr">k:</span> </span><br><span class="line">  <span class="attr">k1:</span> <span class="string">v1</span></span><br><span class="line">  <span class="attr">k2:</span> <span class="string">v2</span></span><br><span class="line">  <span class="attr">k3:</span> <span class="string">v3</span></span><br></pre></td></tr></tbody></table></figure><p><strong>å®ä¾‹</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Pet pet;</span><br><span class="line">    <span class="keyword">private</span> String[] interests;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; animal;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; score;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;Double&gt; salarys;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, List&lt;Pet&gt;&gt; allPets;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pet</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double weight;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">userName:</span> <span class="string">zhangsan</span></span><br><span class="line">  <span class="attr">boss:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2019</span><span class="string">/12/12</span> <span class="number">20</span><span class="string">:12:33</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">pet:</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">tomcat</span></span><br><span class="line">    <span class="attr">weight:</span> <span class="number">23.4</span></span><br><span class="line">  <span class="attr">interests:</span> [<span class="string">ç¯®çƒ</span>,<span class="string">æ¸¸æ³³</span>]</span><br><span class="line">  <span class="attr">animal:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">jerry</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mario</span></span><br><span class="line">  <span class="attr">score:</span></span><br><span class="line">    <span class="attr">english:</span> </span><br><span class="line">      <span class="attr">first:</span> <span class="number">30</span></span><br><span class="line">      <span class="attr">second:</span> <span class="number">40</span></span><br><span class="line">      <span class="attr">third:</span> <span class="number">50</span></span><br><span class="line">    <span class="attr">math:</span> [<span class="number">131</span>,<span class="number">140</span>,<span class="number">148</span>]</span><br><span class="line">    <span class="attr">chinese:</span> {<span class="attr">first:</span> <span class="number">128</span>,<span class="attr">second:</span> <span class="number">136</span>}</span><br><span class="line">  <span class="attr">salarys:</span> [<span class="number">3999</span>,<span class="number">4999.98</span>,<span class="number">5999.99</span>]</span><br><span class="line">  <span class="attr">allPets:</span></span><br><span class="line">    <span class="attr">sick:</span></span><br><span class="line">      <span class="bullet">-</span> {<span class="attr">name:</span> <span class="string">tom</span>}</span><br><span class="line">      <span class="bullet">-</span> {<span class="attr">name:</span> <span class="string">jerry</span>,<span class="attr">weight:</span> <span class="number">47</span>}</span><br><span class="line">    <span class="attr">health:</span> [{<span class="attr">name:</span> <span class="string">mario</span>,<span class="attr">weight:</span> <span class="number">47</span>}]</span><br></pre></td></tr></tbody></table></figure><h4 id="è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º"><a href="#è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º" class="headerlink" title="è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º"></a>è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º</h4><p>è‡ªå®šä¹‰çš„ç±»å’Œé…ç½®æ–‡ä»¶ç»‘å®šä¸€èˆ¬æ²¡æœ‰æç¤ºã€‚è‹¥è¦æç¤ºï¼Œæ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä¸‹é¢æ’ä»¶ä½œç”¨æ˜¯å·¥ç¨‹æ‰“åŒ…æ—¶ï¼Œä¸å°†spring-boot-configuration-processoræ‰“è¿›åŒ…å†…ï¼Œè®©å…¶åªåœ¨ç¼–ç çš„æ—¶å€™æœ‰ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="é™æ€èµ„æºè§„åˆ™ä¸å®šåˆ¶åŒ–"><a href="#é™æ€èµ„æºè§„åˆ™ä¸å®šåˆ¶åŒ–" class="headerlink" title="é™æ€èµ„æºè§„åˆ™ä¸å®šåˆ¶åŒ–"></a>é™æ€èµ„æºè§„åˆ™ä¸å®šåˆ¶åŒ–</h4><p>åªè¦é™æ€èµ„æºæ”¾åœ¨ç±»è·¯å¾„ä¸‹ï¼š /static (or /public or /resources or /META-INF/resources</p><p>è®¿é—® ï¼š å½“å‰é¡¹ç›®æ ¹è·¯å¾„/ + é™æ€èµ„æºå</p><p>åŸç†ï¼š é™æ€æ˜ å°„/**ã€‚</p><p>è¯·æ±‚è¿›æ¥ï¼Œå…ˆå»æ‰¾Controllerçœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢ã€‚<br><strong>æ”¹å˜é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resources:</span></span><br><span class="line">  <span class="attr">static-locations:</span> [<span class="string">classpath:/haha/</span>]</span><br></pre></td></tr></tbody></table></figure><p><strong>æ·»åŠ è®¿é—®å‰ç¼€</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/res/**</span></span><br></pre></td></tr></tbody></table></figure><h4 id="welcomeä¸faviconåŠŸèƒ½"><a href="#welcomeä¸faviconåŠŸèƒ½" class="headerlink" title="welcomeä¸faviconåŠŸèƒ½"></a>welcomeä¸faviconåŠŸèƒ½</h4><p><strong>æ¬¢è¿é¡µæ”¯æŒ</strong></p><ul><li>é™æ€èµ„æºè·¯å¾„ä¸‹ index.htmlã€‚<ul><li>å¯ä»¥é…ç½®é™æ€èµ„æºè·¯å¾„</li><li>ä½†æ˜¯ä¸å¯ä»¥é…ç½®é™æ€èµ„æºçš„è®¿é—®å‰ç¼€ã€‚å¦åˆ™å¯¼è‡´ index.htmlä¸èƒ½è¢«é»˜è®¤è®¿é—®</li></ul></li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment">#  mvc:</span></span><br><span class="line"><span class="comment">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´welcome pageåŠŸèƒ½å¤±æ•ˆ</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">static-locations:</span> [<span class="string">classpath:/haha/</span>]</span><br></pre></td></tr></tbody></table></figure><p><strong>è‡ªå®šä¹‰Favicon</strong></p><p>favicon.ico æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment">#  mvc:</span></span><br><span class="line"><span class="comment">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´ Favicon åŠŸèƒ½å¤±æ•ˆ</span></span><br></pre></td></tr></tbody></table></figure><h4 id="é™æ€èµ„æºè®¿é—®åŸç†"><a href="#é™æ€èµ„æºè®¿é—®åŸç†" class="headerlink" title="é™æ€èµ„æºè®¿é—®åŸç†"></a>é™æ€èµ„æºè®¿é—®åŸç†</h4><ul><li>SpringBootå¯åŠ¨é»˜è®¤åŠ è½½ xxxAutoConfiguration ç±»ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰</li><li>SpringMVCåŠŸèƒ½çš„è‡ªåŠ¨é…ç½®ç±»<code>WebMvcAutoConfiguration</code>ï¼Œç”Ÿæ•ˆ</li></ul><p><strong>WebMvcAutoConfiguration</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter({ DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">ValidationAutoConfiguration.class })</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>{</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ç»™å®¹å™¨ä¸­é…äº†ä»€ä¹ˆã€‚</li></ul><p><strong>WebMvcAutoConfigurationçš„é™æ€å†…éƒ¨ç±»WebMvcAutoConfigurationAdapter</strong></p><p>é…ç½®æ–‡ä»¶çš„ç›¸å…³å±æ€§çš„ç»‘å®šï¼šWebMvcProperties==<strong>spring.mvc</strong>ã€ResourceProperties==<strong>spring.resources</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@Import(EnableWebMvcConfiguration.class)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties({ WebMvcProperties.class, ResourceProperties.class })</span></span><br><span class="line"><span class="meta">@Order(0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>{</span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//æ„é€ å‡½æ•°ï¼Œå½“åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•°æ—¶ï¼Œæ‰€æœ‰å‚æ•°ä»IOCå®¹å™¨æ‰¾</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WebMvcAutoConfigurationAdapter</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">org.springframework.boot.autoconfigure.web.ResourceProperties resourceProperties,</span></span></span><br><span class="line"><span class="function"><span class="params">WebProperties webProperties, WebMvcProperties mvcProperties, ListableBeanFactory beanFactory,</span></span></span><br><span class="line"><span class="function"><span class="params">ObjectProvider&lt;HttpMessageConverters&gt; messageConvertersProvider,</span></span></span><br><span class="line"><span class="function"><span class="params">ObjectProvider&lt;ResourceHandlerRegistrationCustomizer&gt; resourceHandlerRegistrationCustomizerProvider,</span></span></span><br><span class="line"><span class="function"><span class="params">ObjectProvider&lt;DispatcherServletPath&gt; dispatcherServletPath,</span></span></span><br><span class="line"><span class="function"><span class="params">ObjectProvider&lt;ServletRegistrationBean&lt;?&gt;&gt; servletRegistrations)</span> </span>{</span><br><span class="line"><span class="keyword">this</span>.resourceProperties = resourceProperties.hasBeenCustomized() ? resourceProperties</span><br><span class="line">: webProperties.getResources();</span><br><span class="line"><span class="keyword">this</span>.mvcProperties = mvcProperties;</span><br><span class="line"><span class="keyword">this</span>.beanFactory = beanFactory;</span><br><span class="line"><span class="keyword">this</span>.messageConvertersProvider = messageConvertersProvider;</span><br><span class="line"><span class="keyword">this</span>.resourceHandlerRegistrationCustomizer = resourceHandlerRegistrationCustomizerProvider.getIfAvailable();</span><br><span class="line"><span class="keyword">this</span>.dispatcherServletPath = dispatcherServletPath;</span><br><span class="line"><span class="keyword">this</span>.servletRegistrations = servletRegistrations;</span><br><span class="line"><span class="keyword">this</span>.mvcProperties.checkConfiguration();</span><br><span class="line">}    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å‚æ•°è§£é‡Šï¼š</p><ul><li>ResourceProperties resourcePropertiesï¼›è·å–å’Œspring.resourcesç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</li><li>WebMvcProperties mvcProperties è·å–å’Œspring.mvcç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</li><li>ListableBeanFactory beanFactory Springçš„beanFactory</li><li>HttpMessageConverters æ‰¾åˆ°æ‰€æœ‰çš„HttpMessageConverters</li><li>ResourceHandlerRegistrationCustomizer æ‰¾åˆ° èµ„æºå¤„ç†å™¨çš„è‡ªå®šä¹‰å™¨ã€‚</li><li>DispatcherServletPath</li><li>ServletRegistrationBean ç»™åº”ç”¨æ³¨å†ŒServletã€Filterâ€¦</li></ul><h4 id="èµ„æºé»˜è®¤å¤„ç†è§„åˆ™"><a href="#èµ„æºé»˜è®¤å¤„ç†è§„åˆ™" class="headerlink" title="èµ„æºé»˜è®¤å¤„ç†è§„åˆ™"></a>èµ„æºé»˜è®¤å¤„ç†è§„åˆ™</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>{</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">implements</span> <span class="title">ResourceLoaderAware</span> </span>{</span><br><span class="line">        ...</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>{</span><br><span class="line"><span class="keyword">super</span>.addResourceHandlers(registry);</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) {</span><br><span class="line">logger.debug(<span class="string">"Default resource handling disabled"</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">ServletContext servletContext = getServletContext();</span><br><span class="line">addResourceHandler(registry, <span class="string">"/webjars/**"</span>, <span class="string">"classpath:/META-INF/resources/webjars/"</span>);</span><br><span class="line">addResourceHandler(registry, <span class="keyword">this</span>.mvcProperties.getStaticPathPattern(), (registration) -&gt; {</span><br><span class="line">registration.addResourceLocations(<span class="keyword">this</span>.resourceProperties.getStaticLocations());</span><br><span class="line"><span class="keyword">if</span> (servletContext != <span class="keyword">null</span>) {</span><br><span class="line">registration.addResourceLocations(<span class="keyword">new</span> ServletContextResource(servletContext, SERVLET_LOCATION));</span><br><span class="line">}</span><br><span class="line">});</span><br><span class="line">}</span><br><span class="line">        ...</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>é™æ€èµ„æºè§„åˆ™</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = "spring.resources", ignoreUnknownFields = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceProperties</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = { <span class="string">"classpath:/META-INF/resources/"</span>,</span><br><span class="line">            <span class="string">"classpath:/resources/"</span>, <span class="string">"classpath:/static/"</span>, <span class="string">"classpath:/public/"</span> };</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Locations of static resources. Defaults to classpath:[/META-INF/resources/,</span></span><br><span class="line"><span class="comment">     * /resources/, /static/, /public/].</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>é…ç½®å¤„ç†è§„åˆ™</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">add-mappings:</span> <span class="literal">false</span>   <span class="comment">#ç¦ç”¨æ‰€æœ‰é™æ€èµ„æºè§„åˆ™</span></span><br></pre></td></tr></tbody></table></figure><p><strong>æ¬¢è¿é¡µå¤„ç†è§„åˆ™</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>{</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">implements</span> <span class="title">ResourceLoaderAware</span> </span>{</span><br><span class="line">        ...</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title">welcomePageHandlerMapping</span><span class="params">(ApplicationContext applicationContext,</span></span></span><br><span class="line"><span class="function"><span class="params">FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider)</span> </span>{</span><br><span class="line">WelcomePageHandlerMapping welcomePageHandlerMapping = <span class="keyword">new</span> WelcomePageHandlerMapping(</span><br><span class="line"><span class="keyword">new</span> TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(),</span><br><span class="line"><span class="keyword">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));</span><br><span class="line">welcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations());</span><br><span class="line"><span class="keyword">return</span> welcomePageHandlerMapping;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>çœ‹çœ‹WelcomePageHandlerMapping</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">WelcomePageHandlerMapping(TemplateAvailabilityProviders templateAvailabilityProviders,</span><br><span class="line">                          ApplicationContext applicationContext, Resource welcomePage, String staticPathPattern) {</span><br><span class="line">    <span class="keyword">if</span> (welcomePage != <span class="keyword">null</span> &amp;&amp; <span class="string">"/**"</span>.equals(staticPathPattern)) {</span><br><span class="line">        <span class="comment">//è¦ç”¨æ¬¢è¿é¡µåŠŸèƒ½ï¼Œå¿…é¡»æ˜¯/**</span></span><br><span class="line">        logger.info(<span class="string">"Adding welcome page: "</span> + welcomePage);</span><br><span class="line">        setRootViewName(<span class="string">"forward:index.html"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (welcomeTemplateExists(templateAvailabilityProviders, applicationContext)) {</span><br><span class="line">        <span class="comment">//è°ƒç”¨Controller /index</span></span><br><span class="line">        logger.info(<span class="string">"Adding welcome page template: index"</span>);</span><br><span class="line">        setRootViewName(<span class="string">"index"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="è¯·æ±‚å¤„ç†"><a href="#è¯·æ±‚å¤„ç†" class="headerlink" title="è¯·æ±‚å¤„ç†"></a>è¯·æ±‚å¤„ç†</h4><p>@xxxMapping;</p><ul><li>@GetMapping</li><li>@PostMapping</li><li>@PutMapping</li><li>@DeleteMapping<br>Resté£æ ¼æ”¯æŒï¼ˆä½¿ç”¨HTTPè¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œï¼‰</li></ul><p>æ ¸å¿ƒFilterï¼šHiddenHttpMethodFilter</p><ul><li><strong>ç”¨æ³•</strong><ul><li>å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½</li><li>é¡µé¢ formçš„å±æ€§method=postï¼Œéšè—åŸŸ _method=putã€deleteç­‰ï¼ˆå¦‚æœç›´æ¥getæˆ–postï¼Œæ— éœ€éšè—åŸŸï¼‰</li><li>ç¼–å†™è¯·æ±‚æ˜ å°„</li></ul></li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">hiddenmethod:</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span>   <span class="comment">#å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½</span></span><br></pre></td></tr></tbody></table></figure><p><strong>å®ä¾‹</strong></p><p>é¡µé¢</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/user"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"REST-GETæäº¤"</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/user"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"REST-POSTæäº¤"</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/user"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"DELETE"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"REST-DELETE æäº¤"</span> <span class="attr">type</span>=<span class="string">"submit"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/user"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"PUT"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"REST-PUTæäº¤"</span><span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>åå°</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping("/user")</span></span><br><span class="line"><span class="comment">//@RequestMapping(value = "/user",method = RequestMethod.GET)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"GET-å¼ ä¸‰"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping("/user")</span></span><br><span class="line"><span class="comment">//@RequestMapping(value = "/user",method = RequestMethod.POST)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">saveUser</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"POST-å¼ ä¸‰"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@PutMapping("/user")</span></span><br><span class="line"><span class="comment">//@RequestMapping(value = "/user",method = RequestMethod.PUT)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">putUser</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"PUT-å¼ ä¸‰"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@DeleteMapping("/user")</span></span><br><span class="line"><span class="comment">//@RequestMapping(value = "/user",method = RequestMethod.DELETE)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"DELETE-å¼ ä¸‰"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>ReståŸç†ï¼ˆè¡¨å•æäº¤è¦ä½¿ç”¨RESTçš„æ—¶å€™)</strong><br>è¡¨å•æäº¤ä¼šå¸¦ä¸Š_method=PUT<br>è¯·æ±‚è¿‡æ¥è¢«HiddenHttpMethodFilteræ‹¦æˆª<br>è¯·æ±‚æ˜¯å¦æ­£å¸¸ï¼Œå¹¶ä¸”æ˜¯POST<br>è·å–åˆ°_methodçš„å€¼ã€‚<br>å…¼å®¹ä»¥ä¸‹è¯·æ±‚ï¼›PUT.DELETE.PATCH<br>åŸç”Ÿrequestï¼ˆpostï¼‰ï¼ŒåŒ…è£…æ¨¡å¼requesWrapperé‡å†™äº†getMethodæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¼ å…¥çš„å€¼ã€‚<br>è¿‡æ»¤å™¨é“¾æ”¾è¡Œçš„æ—¶å€™ç”¨wrapperã€‚ä»¥åçš„æ–¹æ³•è°ƒç”¨getMethodæ˜¯è°ƒç”¨requesWrapperçš„ã€‚<br><strong>HiddenHttpMethodFilter</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HiddenHttpMethodFilter</span> <span class="keyword">extends</span> <span class="title">OncePerRequestFilter</span> </span>{</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;String&gt; ALLOWED_METHODS =</span><br><span class="line">Collections.unmodifiableList(Arrays.asList(HttpMethod.PUT.name(),</span><br><span class="line">HttpMethod.DELETE.name(), HttpMethod.PATCH.name()));</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Default method parameter: {<span class="doctag">@code</span> _method}. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_METHOD_PARAM = <span class="string">"_method"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String methodParam = DEFAULT_METHOD_PARAM;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Set the parameter name to look for HTTP methods.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> #DEFAULT_METHOD_PARAM</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMethodParam</span><span class="params">(String methodParam)</span> </span>{</span><br><span class="line">Assert.hasText(methodParam, <span class="string">"'methodParam' must not be empty"</span>);</span><br><span class="line"><span class="keyword">this</span>.methodParam = methodParam;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line"></span><br><span class="line">HttpServletRequest requestToUse = request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="string">"POST"</span>.equals(request.getMethod()) &amp;&amp; request.getAttribute(WebUtils.ERROR_EXCEPTION_ATTRIBUTE) == <span class="keyword">null</span>) {</span><br><span class="line">String paramValue = request.getParameter(<span class="keyword">this</span>.methodParam);</span><br><span class="line"><span class="keyword">if</span> (StringUtils.hasLength(paramValue)) {</span><br><span class="line">String method = paramValue.toUpperCase(Locale.ENGLISH);</span><br><span class="line"><span class="keyword">if</span> (ALLOWED_METHODS.contains(method)) {</span><br><span class="line">requestToUse = <span class="keyword">new</span> HttpMethodRequestWrapper(request, method);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">filterChain.doFilter(requestToUse, response);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Simple {<span class="doctag">@link</span> HttpServletRequest} wrapper that returns the supplied method for</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> HttpServletRequest#getMethod()}.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpMethodRequestWrapper</span> <span class="keyword">extends</span> <span class="title">HttpServletRequestWrapper</span> </span>{</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String method;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HttpMethodRequestWrapper</span><span class="params">(HttpServletRequest request, String method)</span> </span>{</span><br><span class="line"><span class="keyword">super</span>(request);</span><br><span class="line"><span class="keyword">this</span>.method = method;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getMethod</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.method;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="è¯·æ±‚æ˜ å°„åŸç†"><a href="#è¯·æ±‚æ˜ å°„åŸç†" class="headerlink" title="è¯·æ±‚æ˜ å°„åŸç†"></a>è¯·æ±‚æ˜ å°„åŸç†</h4><p><img src="https://gitee.com/rain-sky/images/raw/master/20210716161538.png"></p><p>SpringMVCåŠŸèƒ½åˆ†æéƒ½ä» <code>org.springframework.web.servlet.DispatcherServlet</code> -&gt; <code>doDispatch()</code>å¼€å§‹</p><p><strong>doDispatch</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doDispatch</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    HttpServletRequest processedRequest = request;</span><br><span class="line">    HandlerExecutionChain mappedHandler = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">boolean</span> multipartRequestParsed = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        ModelAndView mv = <span class="keyword">null</span>;</span><br><span class="line">        Exception dispatchException = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            processedRequest = checkMultipart(request);</span><br><span class="line">            multipartRequestParsed = (processedRequest != request);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰¾åˆ°å½“å‰è¯·æ±‚ä½¿ç”¨å“ªä¸ªHandlerï¼ˆControllerçš„æ–¹æ³•ï¼‰å¤„ç†</span></span><br><span class="line">            mappedHandler = getHandler(processedRequest);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„ã€‚/xxx-&gt;&gt;xxxx</span></span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>getHandler(processedRequest)</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> HandlerExecutionChain <span class="title">getHandler</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.handlerMappings != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">for</span> (HandlerMapping mapping : <span class="keyword">this</span>.handlerMappings) {</span><br><span class="line">            HandlerExecutionChain handler = mapping.getHandler(request);</span><br><span class="line">            <span class="keyword">if</span> (handler != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">return</span> handler;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>this.handlerMappings</code>åœ¨Debugæ¨¡å¼ä¸‹å±•ç°çš„å†…å®¹ï¼š</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210717095547.png"></p><p><strong>RequestMappingHandlerMapping</strong>ï¼šä¿å­˜äº†æ‰€æœ‰@RequestMapping å’Œhandlerçš„æ˜ å°„è§„åˆ™ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1603181662070-9e526de8-fd78-4a02-9410-728f059d6aef.png?x-oss-process=image/watermark,type_d3F5LW1pY3JvaGVp,size_14,text_YXRndWlndS5jb20g5bCa56GF6LC3,color_FFFFFF,shadow_50,t_80,g_se,x_10,y_10"></p><p>æ‰€æœ‰çš„è¯·æ±‚æ˜ å°„éƒ½åœ¨HandlerMappingä¸­ï¼š</p><ul><li><p>SpringBootè‡ªåŠ¨é…ç½®æ¬¢è¿é¡µçš„ WelcomePageHandlerMapping ã€‚è®¿é—® /èƒ½è®¿é—®åˆ°index.htmlï¼›</p></li><li><p>SpringBootè‡ªåŠ¨é…ç½®äº†é»˜è®¤ çš„ RequestMappingHandlerMapping</p></li><li><p>è¯·æ±‚è¿›æ¥ï¼ŒæŒ¨ä¸ªå°è¯•æ‰€æœ‰çš„HandlerMappingçœ‹æ˜¯å¦æœ‰è¯·æ±‚ä¿¡æ¯ã€‚</p><ul><li>å¦‚æœæœ‰å°±æ‰¾åˆ°è¿™ä¸ªè¯·æ±‚å¯¹åº”çš„handler</li><li>å¦‚æœæ²¡æœ‰å°±æ˜¯ä¸‹ä¸€ä¸ª HandlerMapping</li></ul></li></ul><blockquote><p>IDEAå¿«æ·é”®ï¼š</p></blockquote><ul><li>Ctrl + Alt + U : ä»¥UMLçš„ç±»å›¾å±•ç°ç±»æœ‰å“ªäº›ç»§æ‰¿ç±»ï¼Œæ´¾ç”Ÿç±»ä»¥åŠå®ç°å“ªäº›æ¥å£ã€‚</li><li>Crtl + Alt + Shift + U : åŒä¸Šï¼ŒåŒºåˆ«åœ¨äºä¸Šæ¡å¿«æ·é”®ç»“æœåœ¨æ–°é¡µå±•ç°ï¼Œè€Œæœ¬æ¡å¿«æ·é”®ç»“æœåœ¨å¼¹çª—å±•ç°ã€‚</li><li>Ctrl + H : ä»¥æ ‘å½¢æ–¹å¼å±•ç°ç±»å±‚æ¬¡ç»“æ„å›¾ã€‚</li></ul><h4 id="æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"><a href="#æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£" class="headerlink" title="æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"></a>æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£</h4><p>@PathVariable è·¯å¾„å˜é‡<br>@RequestHeader è·å–è¯·æ±‚å¤´<br>@RequestParam è·å–è¯·æ±‚å‚æ•°ï¼ˆæŒ‡é—®å·åçš„å‚æ•°ï¼Œurl?a=1&amp;b=2ï¼‰<br>@CookieValue è·å–Cookieå€¼<br>@RequestAttribute è·å–requeståŸŸå±æ€§<br>@RequestBody è·å–è¯·æ±‚ä½“[POST]<br>@MatrixVariable çŸ©é˜µå˜é‡<br>@ModelAttribute</p><hr><p><strong>å®ä¾‹</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParameterTestController</span> </span>{</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//  car/2/owner/zhangsan</span></span><br><span class="line">    <span class="meta">@GetMapping("/car/{id}/owner/{username}")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">getCar</span><span class="params">(<span class="meta">@PathVariable("id")</span> Integer id,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     //è·å–è·¯å¾„å˜é‡</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@PathVariable("username")</span> String name,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     //å°†è·¯å¾„å˜é‡å°è£…ä¸ºMap</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@PathVariable</span> Map&lt;String,String&gt; pv,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     //è·å–è¯·æ±‚å¤´</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@RequestHeader("User-Agent")</span> String userAgent,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@RequestHeader</span> Map&lt;String,String&gt; header,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     //è·å–è¯·æ±‚åŸŸå‚æ•°</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@RequestParam("age")</span> Integer age,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@RequestParam("inters")</span> List&lt;String&gt; inters,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     //å°è£…è¯·æ±‚åŸŸå‚æ•°ä¸ºä¸€ä¸ªMap</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@RequestParam</span> Map&lt;String,String&gt; params,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     //è·å–cookie</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@CookieValue("_ga")</span> String _ga,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     <span class="meta">@CookieValue("_ga")</span> Cookie cookie)</span></span>{</span><br><span class="line"></span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"><span class="comment">//        map.put("id",id);</span></span><br><span class="line"><span class="comment">//        map.put("name",name);</span></span><br><span class="line"><span class="comment">//        map.put("pv",pv);</span></span><br><span class="line"><span class="comment">//        map.put("userAgent",userAgent);</span></span><br><span class="line"><span class="comment">//        map.put("headers",header);</span></span><br><span class="line">        map.put(<span class="string">"age"</span>,age);</span><br><span class="line">        map.put(<span class="string">"inters"</span>,inters);</span><br><span class="line">        map.put(<span class="string">"params"</span>,params);</span><br><span class="line">        map.put(<span class="string">"_ga"</span>,_ga);</span><br><span class="line">        System.out.println(cookie.getName()+<span class="string">"===&gt;"</span>+cookie.getValue());</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping("/save")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map <span class="title">postMethod</span><span class="params">(<span class="meta">@RequestBody</span> String content)</span></span>{</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"content"</span>,content);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>@RequestAttribute</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("/goto")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">goToPage</span><span class="params">(HttpServletRequest request)</span></span>{</span><br><span class="line"></span><br><span class="line">        request.setAttribute(<span class="string">"msg"</span>,<span class="string">"æˆåŠŸäº†..."</span>);</span><br><span class="line">        request.setAttribute(<span class="string">"code"</span>,<span class="number">200</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"forward:/success"</span>;  <span class="comment">//è½¬å‘åˆ°  /successè¯·æ±‚</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">///&lt;-----------------ä¸»è§’@RequestAttributeåœ¨è¿™ä¸ªæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping("/success")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map <span class="title">success</span><span class="params">(<span class="meta">@RequestAttribute(value = "msg",required = false)</span> String msg,</span></span></span><br><span class="line"><span class="function"><span class="params">                       <span class="meta">@RequestAttribute(value = "code",required = false)</span>Integer code,</span></span></span><br><span class="line"><span class="function"><span class="params">                       HttpServletRequest request)</span></span>{</span><br><span class="line"></span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"reqMethod_msg"</span>,msg);</span><br><span class="line">        map.put(<span class="string">"annotation_msg"</span>,code);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="å¤æ‚å‚æ•°"><a href="#å¤æ‚å‚æ•°" class="headerlink" title="å¤æ‚å‚æ•°"></a>å¤æ‚å‚æ•°</h4><p>å¤æ‚å‚æ•°ï¼š</p><p>Map</p><p>Modelï¼ˆmapã€modelé‡Œé¢çš„æ•°æ®ä¼šè¢«æ”¾åœ¨requestçš„è¯·æ±‚åŸŸ request.setAttributeï¼‰</p><p>Errors/BindingResult</p><p>RedirectAttributesï¼ˆ é‡å®šå‘æºå¸¦æ•°æ®ï¼‰</p><p>ServletResponseï¼ˆresponseï¼‰</p><p>SessionStatus</p><p>UriComponentsBuilder</p><p>ServletUriComponentsBuilder</p><p><strong>å®ä¾‹</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping("/params")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testParam</span><span class="params">(Map&lt;String,Object&gt; map,</span></span></span><br><span class="line"><span class="function"><span class="params">                        Model model,</span></span></span><br><span class="line"><span class="function"><span class="params">                        HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                        HttpServletResponse response)</span></span>{</span><br><span class="line">    <span class="comment">//ä¸‹é¢ä¸‰ä½éƒ½æ˜¯å¯ä»¥ç»™requeståŸŸä¸­æ”¾æ•°æ®</span></span><br><span class="line">    map.put(<span class="string">"hello"</span>,<span class="string">"world666"</span>);</span><br><span class="line">    model.addAttribute(<span class="string">"world"</span>,<span class="string">"hello666"</span>);</span><br><span class="line">    request.setAttribute(<span class="string">"message"</span>,<span class="string">"HelloWorld"</span>);</span><br><span class="line"></span><br><span class="line">    Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"c1"</span>,<span class="string">"v1"</span>);</span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"forward:/success"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@GetMapping("/success")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map <span class="title">success</span><span class="params">(<span class="meta">@RequestAttribute(value = "msg",required = false)</span> String msg,</span></span></span><br><span class="line"><span class="function"><span class="params">                   <span class="meta">@RequestAttribute(value = "code",required = false)</span>Integer code,</span></span></span><br><span class="line"><span class="function"><span class="params">                   HttpServletRequest request)</span></span>{</span><br><span class="line">    Object msg1 = request.getAttribute(<span class="string">"msg"</span>);</span><br><span class="line"></span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    Object hello = request.getAttribute(<span class="string">"hello"</span>);<span class="comment">//å¾—å‡ºtestParamæ–¹æ³•èµ‹äºˆçš„å€¼ world666</span></span><br><span class="line">    Object world = request.getAttribute(<span class="string">"world"</span>);<span class="comment">//å¾—å‡ºtestParamæ–¹æ³•èµ‹äºˆçš„å€¼ hello666</span></span><br><span class="line">    Object message = request.getAttribute(<span class="string">"message"</span>);<span class="comment">//å¾—å‡ºtestParamæ–¹æ³•èµ‹äºˆçš„å€¼ HelloWorld</span></span><br><span class="line"></span><br><span class="line">    map.put(<span class="string">"reqMethod_msg"</span>,msg1);</span><br><span class="line">    map.put(<span class="string">"annotation_msg"</span>,msg);</span><br><span class="line">    map.put(<span class="string">"hello"</span>,hello);</span><br><span class="line">    map.put(<span class="string">"world"</span>,world);</span><br><span class="line">    map.put(<span class="string">"message"</span>,message);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><code>Map&lt;String,Object&gt; map</code></li><li><code>Model model</code></li><li><code>HttpServletRequest request</code></li></ul><p>åœ¨conrolleræ–¹æ³•è¿”å›ç»“æœä¹‹å‰ï¼Œå¤„ç†è¿”å›ç»“æœä¸­ä¼šå°†modelï¼Œmapä¸­çš„æ•°æ®å¹¶å…¥è¯·æ±‚åŸŸ</p><p>ä¸Šé¢ä¸‰ä½éƒ½æ˜¯å¯ä»¥ç»™requeståŸŸä¸­æ”¾æ•°æ®ï¼Œç”¨<code>request.getAttribute()</code>è·å–</p><h4 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="headerlink" title="å†…å®¹åå•†"></a>å†…å®¹åå•†</h4><p><strong>å¼€å¯æµè§ˆå™¨è¯·æ±‚å†…å®¹åå•†</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">contentnegotiation:</span></span><br><span class="line">      <span class="attr">favor-parameter:</span> <span class="literal">true</span>  <span class="comment">#å¼€å¯è¯·æ±‚å‚æ•°å†…å®¹åå•†æ¨¡å¼</span></span><br></pre></td></tr></tbody></table></figure><p>â€¦â€¦</p><h4 id="thymeleaf"><a href="#thymeleaf" class="headerlink" title="thymeleaf"></a>thymeleaf</h4><p><a href="https://www.thymeleaf.org/documentation.html">å®˜æ–¹æ–‡æ¡£</a></p><p>å¼•å…¥</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>è‡ªåŠ¨é…ç½®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(ThymeleafProperties.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass({ TemplateMode.class, SpringTemplateEngine.class })</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter({ WebMvcAutoConfiguration.class, WebFluxAutoConfiguration.class })</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeleafAutoConfiguration</span> </span>{</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">public</span> <span class="string">static final String DEFAULT_PREFIX = "classpath:/templates/";//æ¨¡æ¿æ”¾ç½®å¤„</span></span><br><span class="line"><span class="attr">public</span> <span class="string">static final String DEFAULT_SUFFIX = ".html";//æ–‡ä»¶çš„åç¼€å</span></span><br></pre></td></tr></tbody></table></figure><p><strong>è¡¨è¾¾å¼è¯­æ³•</strong></p><table><thead><tr><th>è¡¨è¾¾å¼åå­—</th><th>è¯­æ³•</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>å˜é‡å–å€¼</td><td>${â€¦}</td><td>è·å–è¯·æ±‚åŸŸã€sessionåŸŸã€å¯¹è±¡ç­‰å€¼</td></tr><tr><td>é€‰æ‹©å˜é‡</td><td>*{â€¦}</td><td>è·å–ä¸Šä¸‹æ–‡å¯¹è±¡å€¼</td></tr><tr><td>æ¶ˆæ¯</td><td>#{â€¦}</td><td>è·å–å›½é™…åŒ–ç­‰å€¼</td></tr><tr><td>é“¾æ¥</td><td>@{â€¦}</td><td>ç”Ÿæˆé“¾æ¥</td></tr><tr><td>ç‰‡æ®µè¡¨è¾¾å¼</td><td>~{â€¦}</td><td>jsp:include ä½œç”¨ï¼Œå¼•å…¥å…¬å…±é¡µé¢ç‰‡æ®µ</td></tr></tbody></table><p><strong>å­—é¢é‡</strong></p><ul><li>æ–‡æœ¬å€¼: <strong>â€˜one textâ€™</strong> <strong>,</strong> <strong>â€˜Another one!â€™</strong> <strong>,â€¦</strong></li><li>æ•°å­—: <strong>0</strong> <strong>,</strong> <strong>34</strong> <strong>,</strong> <strong>3.0</strong> <strong>,</strong> <strong>12.3</strong> <strong>,â€¦</strong></li><li>å¸ƒå°”å€¼: <strong>true</strong> <strong>,</strong> <strong>false</strong></li><li>ç©ºå€¼: <strong>null</strong></li><li>å˜é‡ï¼š oneï¼Œtwoï¼Œâ€¦ å˜é‡ä¸èƒ½æœ‰ç©ºæ ¼</li></ul><p><strong>æ–‡æœ¬æ“ä½œ</strong></p><ul><li>å­—ç¬¦ä¸²æ‹¼æ¥: +</li><li>å˜é‡æ›¿æ¢: |The name is ${name}|</li></ul><p><strong>æ•°å­¦è¿ç®—</strong></p><ul><li>è¿ç®—ç¬¦: + , - , * , / , %</li></ul><p><strong>å¸ƒå°”è¿ç®—</strong></p><ul><li>è¿ç®—ç¬¦: and , or</li><li>ä¸€å…ƒè¿ç®—: ! , not</li></ul><p><strong>æ¯”è¾ƒè¿ç®—</strong></p><ul><li>æ¯”è¾ƒ: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</li><li>ç­‰å¼: == , != ( eq , ne )</li></ul><p><strong>æ¡ä»¶è¿ç®—</strong></p><ul><li>If-then: (if) ? (then)</li><li>If-then-else: (if) ? (then) : (else)</li></ul><p><strong>è®¾ç½®å±æ€§å€¼-th:attr</strong></p><p>å•ä¸ªå€¼</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"subscribe.html"</span> <span class="attr">th:attr</span>=<span class="string">"action=@{/subscribe}"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Subscribe!"</span> <span class="attr">th:attr</span>=<span class="string">"value=#{subscribe.submit}"</span>/&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- æ›¿ä»£å†™æ³• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Subscribe!"</span> <span class="attr">th:value</span>=<span class="string">"${subscribe.submit}"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å¤šä¸ªå€¼</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../../images/gtvglogo.png"</span>  </span></span><br><span class="line"><span class="tag">     <span class="attr">th:attr</span>=<span class="string">"src=@{/images/gtvglogo.png},title=#{logo},alt=#{logo}"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>è¿­ä»£</strong></p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"prod : ${prods}"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${prod.name}"</span>&gt;</span>Onions<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${prod.price}"</span>&gt;</span>2.41<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${prod.inStock}? #{true} : #{false}"</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"prod,iterStat : ${prods}"</span> <span class="attr">th:class</span>=<span class="string">"${iterStat.odd}? 'odd'"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${prod.name}"</span>&gt;</span>Onions<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${prod.price}"</span>&gt;</span>2.41<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${prod.inStock}? #{true} : #{false}"</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>æ¡ä»¶è¿ç®—</strong></p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"comments.html"</span></span></span><br><span class="line"><span class="tag"><span class="attr">th:href</span>=<span class="string">"@{/product/comments(prodId=${prod.id})}"</span></span></span><br><span class="line"><span class="tag"><span class="attr">th:if</span>=<span class="string">"${not #lists.isEmpty(prod.comments)}"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:switch</span>=<span class="string">"${user.role}"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"'admin'"</span>&gt;</span>User is an administrator<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"#{roles.manager}"</span>&gt;</span>User is a manager<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"*"</span>&gt;</span>User is some other thing<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="è§†å›¾è§£æ"><a href="#è§†å›¾è§£æ" class="headerlink" title="è§†å›¾è§£æ"></a>è§†å›¾è§£æ</h4><p>è§†å›¾è§£æåŸç†æµç¨‹ï¼š</p><ul><li>ç›®æ ‡æ–¹æ³•å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼ˆé˜…è¯»DispatcherServletæºç ï¼‰ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šè¢«æ”¾åœ¨ ModelAndViewContainer é‡Œé¢ï¼Œå…¶ä¸­åŒ…æ‹¬æ•°æ®å’Œè§†å›¾åœ°å€ã€‚</li><li>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡ï¼ˆä»è¯·æ±‚å‚æ•°ä¸­ç¡®å®šçš„ï¼‰ï¼ŒæŠŠä»–é‡æ–°æ”¾åœ¨ ModelAndViewContainer ã€‚<br>ä»»ä½•ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆä»¥åéƒ½ä¼šè¿”å›ModelAndViewï¼ˆæ•°æ®å’Œè§†å›¾åœ°å€ï¼‰ã€‚</li><li>processDispatchResult()å¤„ç†æ´¾å‘ç»“æœï¼ˆé¡µé¢æ”¹å¦‚ä½•å“åº”ï¼‰<ul><li>render(mv, request, response); è¿›è¡Œé¡µé¢æ¸²æŸ“é€»è¾‘<ul><li>æ ¹æ®æ–¹æ³•çš„Stringè¿”å›å€¼å¾—åˆ° View å¯¹è±¡ã€å®šä¹‰äº†é¡µé¢çš„æ¸²æŸ“é€»è¾‘ã€‘<ul><li>æ‰€æœ‰çš„è§†å›¾è§£æå™¨å°è¯•æ˜¯å¦èƒ½æ ¹æ®å½“å‰è¿”å›å€¼å¾—åˆ°Viewå¯¹è±¡</li><li>å¾—åˆ°äº† redirect:/main.html â€“&gt; Thymeleaf new RedirectView()ã€‚</li><li>ContentNegotiationViewResolver é‡Œé¢åŒ…å«äº†ä¸‹é¢æ‰€æœ‰çš„è§†å›¾è§£æå™¨ï¼Œå†…éƒ¨è¿˜æ˜¯åˆ©ç”¨ä¸‹é¢æ‰€æœ‰è§†å›¾è§£æå™¨å¾—åˆ°è§†å›¾å¯¹è±¡ã€‚</li><li>view.render(mv.getModelInternal(), request, response); è§†å›¾å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰çš„renderè¿›è¡Œé¡µé¢æ¸²æŸ“å·¥ä½œã€‚<ul><li>RedirectView å¦‚ä½•æ¸²æŸ“ã€é‡å®šå‘åˆ°ä¸€ä¸ªé¡µé¢ã€‘</li><li>è·å–ç›®æ ‡urlåœ°å€</li><li>response.sendRedirect(encodedURL);</li></ul></li></ul></li></ul></li></ul></li></ul><p><strong>è§†å›¾è§£æï¼š</strong></p><ul><li><p><strong>è¿”å›å€¼ä»¥ forward: å¼€å§‹ï¼š new InternalResourceView(forwardUrl); â€“&gt;  è½¬å‘**</strong>request.getRequestDispatcher(path).forward(request, response);** </p></li><li><p><strong>è¿”å›å€¼ä»¥</strong> <strong>redirect: å¼€å§‹ï¼š</strong> <strong>new RedirectView() â€“ã€‹ renderå°±æ˜¯é‡å®šå‘</strong> </p></li><li><p><strong>è¿”å›å€¼æ˜¯æ™®é€šå­—ç¬¦ä¸²ï¼š new ThymeleafViewï¼ˆï¼‰â€”&gt;</strong> </p></li></ul><h4 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h4><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong>å®ç°HandlerInterceptoræ¥å£</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»é™†æ£€æŸ¥æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        System.out.println(<span class="string">"=====å‰ç½®ç™»å½•æ‹¦æˆªå¼€å§‹====="</span>);</span><br><span class="line">        Object loginUser = request.getSession().getAttribute(<span class="string">"loginUser"</span>);</span><br><span class="line">        <span class="keyword">if</span>(loginUser!=<span class="keyword">null</span>)<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        request.setAttribute(<span class="string">"msg"</span>,<span class="string">"è¯·å…ˆç™»å½•"</span>);</span><br><span class="line">        request.getRequestDispatcher(<span class="string">"/"</span>).forward(request,response);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        System.out.println(<span class="string">"=====å¤„ç†ç™»å½•æ‹¦æˆªå¼€å§‹====="</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        System.out.println(<span class="string">"=====åç½®ç™»å½•æ‹¦æˆªå¼€å§‹====="</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>  <strong>æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­ &amp;&amp; æŒ‡å®šæ‹¦æˆªè§„åˆ™</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminWebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span></span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>{</span><br><span class="line">        <span class="comment">//æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> LoginInterceptor())</span><br><span class="line">                .addPathPatterns(<span class="string">"/**"</span>)  <span class="comment">//æ‰€æœ‰è¯·æ±‚éƒ½è¢«æ‹¦æˆªåŒ…æ‹¬é™æ€èµ„æº</span></span><br><span class="line">                .excludePathPatterns(<span class="string">"/"</span>,<span class="string">"/login"</span>,<span class="string">"/css/**"</span>,<span class="string">"/fonts/**"</span>,<span class="string">"/images/**"</span>,</span><br><span class="line">                        <span class="string">"/js/**"</span>,<span class="string">"/aa/**"</span>); <span class="comment">//æ”¾è¡Œçš„è¯·æ±‚</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h4><p>é¡µé¢</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">role</span>=<span class="string">"form"</span> <span class="attr">th:action</span>=<span class="string">"@{/upload}"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exampleInputFile"</span>&gt;</span>å¤´åƒ<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"headerImg"</span> <span class="attr">id</span>=<span class="string">"exampleInputFile"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exampleInputFile"</span>&gt;</span>ç”Ÿæ´»ç…§<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- multipleè¡¨æ˜å¤šæ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"photos"</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkbox"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>&gt;</span> Check me out</span><br><span class="line">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>åå°</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¡¨å•æ§åˆ¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FormController</span> </span>{</span><br><span class="line">    <span class="comment">//æ–‡ä»¶ä¸Šä¼ æµ‹è¯•</span></span><br><span class="line">    <span class="meta">@PostMapping("/upload")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">fileUpload</span><span class="params">(String email, String password, <span class="meta">@RequestPart</span> MultipartFile headImage,</span></span></span><br><span class="line"><span class="function"><span class="params">                             <span class="meta">@RequestPart</span> MultipartFile[] photos)</span> <span class="keyword">throws</span> IOException </span>{</span><br><span class="line">        <span class="comment">//å¦‚æœæŒ‰é»˜è®¤æ–‡ä»¶ä¸Šä¼ é…ç½®ï¼Œæ–‡ä»¶è¿‡å¤§ä¼šä¸Šä¼ å¤±è´¥ï¼Œä¸ºæ­¤æˆ‘ä»¬ä¿®æ”¹é…ç½®</span></span><br><span class="line">        <span class="keyword">if</span>(!headImage.isEmpty()){</span><br><span class="line">            String originalFilename = headImage.getOriginalFilename();</span><br><span class="line">            headImage.transferTo(<span class="keyword">new</span> File(<span class="string">"D:\\images\\"</span>+originalFilename));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (photos.length&gt;<span class="number">0</span>){</span><br><span class="line">            <span class="keyword">for</span> (MultipartFile photo : photos) {</span><br><span class="line">                photo.transferTo(<span class="keyword">new</span> File(<span class="string">"D:\\images\\"</span>+photo.getOriginalFilename()));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/main.html"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>é…ç½®æ–‡ä»¶ä¸Šä¼ é¢„è®¾å‚æ•°</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.servlet.multipart.max-file-size</span>=<span class="string">10MB</span></span><br><span class="line"><span class="meta">spring.servlet.multipart.max-request-size</span>=<span class="string">100MB</span></span><br></pre></td></tr></tbody></table></figure><h4 id="é”™è¯¯å¤„ç†æœºåˆ¶"><a href="#é”™è¯¯å¤„ç†æœºåˆ¶" class="headerlink" title="é”™è¯¯å¤„ç†æœºåˆ¶"></a>é”™è¯¯å¤„ç†æœºåˆ¶</h4><h4 id="åŸç”Ÿç»„ä»¶æ³¨å…¥"><a href="#åŸç”Ÿç»„ä»¶æ³¨å…¥" class="headerlink" title="åŸç”Ÿç»„ä»¶æ³¨å…¥"></a>åŸç”Ÿç»„ä»¶æ³¨å…¥</h4><h4 id="åµŒå…¥å¼Servletå®¹å™¨-åˆ‡æ¢webæœåŠ¡å™¨ä¸å®šåˆ¶åŒ–"><a href="#åµŒå…¥å¼Servletå®¹å™¨-åˆ‡æ¢webæœåŠ¡å™¨ä¸å®šåˆ¶åŒ–" class="headerlink" title="åµŒå…¥å¼Servletå®¹å™¨-åˆ‡æ¢webæœåŠ¡å™¨ä¸å®šåˆ¶åŒ–"></a>åµŒå…¥å¼Servletå®¹å™¨-åˆ‡æ¢webæœåŠ¡å™¨ä¸å®šåˆ¶åŒ–</h4><h2 id="æ•´åˆ"><a href="#æ•´åˆ" class="headerlink" title="æ•´åˆ"></a>æ•´åˆ</h2><h4 id="æ•°æ®è®¿é—®"><a href="#æ•°æ®è®¿é—®" class="headerlink" title="æ•°æ®è®¿é—®"></a>æ•°æ®è®¿é—®</h4><p><strong>å¯¼å…¥jdbcåœºæ™¯</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä»–ä¼šç»™æˆ‘ä»¬å¯¼å…¥æ•°æ®åº“è¿æ¥æ± ï¼Œäº‹åŠ¡ç®¡ç†ç­‰ç»„ä»¶ï¼Œä½†ä¸å¯¼å…¥æ•°æ®åº“é©±åŠ¨ï¼Œå› ä¸ºspringbootæ— æ³•çŸ¥é“ä½ ç”¨ä½•ç§æ•°æ®åº“ï¼Œmysql? or Oracleï¼Ÿ</p><p><strong>å¯¼å…¥æ•°æ®åº“é©±åŠ¨</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é»˜è®¤ç‰ˆæœ¬ï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>8.0.22<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;version&gt;5.1.49&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">æƒ³è¦ä¿®æ”¹ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">1ã€ç›´æ¥ä¾èµ–å¼•å…¥å…·ä½“ç‰ˆæœ¬ï¼ˆmavençš„å°±è¿‘ä¾èµ–åŸåˆ™ï¼‰</span></span><br><span class="line"><span class="comment">2ã€é‡æ–°å£°æ˜ç‰ˆæœ¬ï¼ˆmavençš„å±æ€§çš„å°±è¿‘ä¼˜å…ˆåŸåˆ™ï¼‰</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.49<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>ç›¸å…³æ•°æ®æºé…ç½®ç±»</strong></p><ul><li><p>DataSourceAutoConfiguration ï¼š æ•°æ®æºçš„è‡ªåŠ¨é…ç½®ã€‚</p><p>ä¿®æ”¹æ•°æ®æºç›¸å…³çš„é…ç½®ï¼šspring.datasourceã€‚<br>æ•°æ®åº“è¿æ¥æ± çš„é…ç½®ï¼Œæ˜¯è‡ªå·±å®¹å™¨ä¸­æ²¡æœ‰DataSourceæ‰è‡ªåŠ¨é…ç½®çš„ã€‚<br>åº•å±‚é…ç½®å¥½çš„è¿æ¥æ± æ˜¯ï¼šHikariDataSourceã€‚</p></li><li><p>DataSourceTransactionManagerAutoConfigurationï¼š äº‹åŠ¡ç®¡ç†å™¨çš„è‡ªåŠ¨é…ç½®ã€‚</p></li><li><p>JdbcTemplateAutoConfigurationï¼š JdbcTemplateçš„è‡ªåŠ¨é…ç½®ï¼Œå¯ä»¥æ¥å¯¹æ•°æ®åº“è¿›è¡ŒCRUDã€‚</p><p>å¯ä»¥ä¿®æ”¹å‰ç¼€ä¸ºspring.jdbcçš„é…ç½®é¡¹æ¥ä¿®æ”¹JdbcTemplateã€‚<br>@Bean @Primary JdbcTemplateï¼šSpringå®¹å™¨ä¸­æœ‰è¿™ä¸ªJdbcTemplateç»„ä»¶ï¼Œä½¿ç”¨@Autowiredã€‚</p></li><li><p>JndiDataSourceAutoConfigurationï¼š JNDIçš„è‡ªåŠ¨é…ç½®ã€‚</p></li><li><p>XADataSourceAutoConfigurationï¼š åˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³çš„ã€‚</p></li></ul><p><strong>ä¿®æ”¹é…ç½®é¡¹</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db_account</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></tbody></table></figure><h4 id="Druidæ•´åˆ"><a href="#Druidæ•´åˆ" class="headerlink" title="Druidæ•´åˆ"></a>Druidæ•´åˆ</h4><p><a href="https://github.com/alibaba/druid">Druidå®˜æ–¹GitHubåœ°å€</a></p><p><a href="https://github.com/alibaba/druid/wiki/Druid%E8%BF%9E%E6%8E%A5%E6%B1%A0%E4%BB%8B%E7%BB%8D">ä»‹ç»</a></p><p><strong>è‡ªå®šä¹‰æ–¹å¼æ•´åˆ</strong></p><p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>é…ç½®æ•°æ®æº</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties("spring.datasource")</span><span class="comment">//å¤ç”¨é…ç½®æ–‡ä»¶çš„æ•°æ®æºé…ç½®,å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        DruidDataSource druidDataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line"><span class="comment">//        druidDataSource.setUrl();</span></span><br><span class="line"><span class="comment">//        druidDataSource.setUsername();</span></span><br><span class="line"><span class="comment">//        druidDataSource.setPassword();</span></span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p><a href="https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE">æ›´å¤šé…ç½®å‚ç…§</a></p></blockquote><ul><li><p>Druidçš„ç›‘æ§é¡µåŠŸèƒ½ï¼š</p><p>Druidå†…ç½®æä¾›äº†ä¸€ä¸ªStatViewServletç”¨äºå±•ç¤ºDruidçš„ç»Ÿè®¡ä¿¡æ¯ã€‚å®˜æ–¹æ–‡æ¡£ - é…ç½®_StatViewServleté…ç½®ã€‚è¿™ä¸ªStatViewServletçš„ç”¨é€”åŒ…æ‹¬ï¼š</p><p>æä¾›ç›‘æ§ä¿¡æ¯å±•ç¤ºçš„htmlé¡µé¢<br>æä¾›ç›‘æ§ä¿¡æ¯çš„JSON API</p><p>uidå†…ç½®æä¾›ä¸€ä¸ªStatFilterï¼Œç”¨äºç»Ÿè®¡ç›‘æ§ä¿¡æ¯ã€‚å®˜æ–¹æ–‡æ¡£ - é…ç½®_StatFilter</p></li><li><p>bStatFilterç”¨äºé‡‡é›†web-jdbcå…³è”ç›‘æ§çš„æ•°æ®ï¼Œå¦‚SQLç›‘æ§ã€URIç›‘æ§ã€‚å®˜æ–¹æ–‡æ¡£ - é…ç½®_é…ç½®WebStatFilter</p></li><li><p>uidæä¾›äº†WallFilterï¼Œå®ƒæ˜¯åŸºäºSQLè¯­ä¹‰åˆ†ææ¥å®ç°é˜²å¾¡SQLæ³¨å…¥æ”»å‡»çš„ã€‚å®˜æ–¹æ–‡æ¡£ - é…ç½® wallfilter</p></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties("spring.datasource")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        DruidDataSource druidDataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        <span class="comment">//åŠ å…¥ç›‘æ§å’Œé˜²ç«å¢™åŠŸèƒ½åŠŸèƒ½</span></span><br><span class="line">        druidDataSource.setFilters(<span class="string">"stat,wall"</span>);</span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½® druidçš„ç›‘æ§é¡µåŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">statViewServlet</span><span class="params">()</span></span>{</span><br><span class="line">        StatViewServlet statViewServlet = <span class="keyword">new</span> StatViewServlet();</span><br><span class="line">        ServletRegistrationBean&lt;StatViewServlet&gt; registrationBean = </span><br><span class="line">            <span class="keyword">new</span> ServletRegistrationBean&lt;&gt;(statViewServlet, <span class="string">"/druid/*"</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç›‘æ§é¡µè´¦å·å¯†ç ï¼š</span></span><br><span class="line">        registrationBean.addInitParameter(<span class="string">"loginUsername"</span>,<span class="string">"admin"</span>);</span><br><span class="line">        registrationBean.addInitParameter(<span class="string">"loginPassword"</span>,<span class="string">"123456"</span>);</span><br><span class="line">        <span class="keyword">return</span> registrationBean;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * WebStatFilter ç”¨äºé‡‡é›†web-jdbcå…³è”ç›‘æ§çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">webStatFilter</span><span class="params">()</span></span>{</span><br><span class="line">        WebStatFilter webStatFilter = <span class="keyword">new</span> WebStatFilter();</span><br><span class="line"></span><br><span class="line">        FilterRegistrationBean&lt;WebStatFilter&gt; filterRegistrationBean = <span class="keyword">new</span> FilterRegistrationBean&lt;&gt;(webStatFilter);</span><br><span class="line">        filterRegistrationBean.setUrlPatterns(Arrays.asList(<span class="string">"/*"</span>));</span><br><span class="line">        filterRegistrationBean.addInitParameter(<span class="string">"exclusions"</span>,<span class="string">"*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> filterRegistrationBean;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>starteræ•´åˆæ–¹å¼</strong></p><p><a href="https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter">å®˜æ–¹æ–‡æ¡£</a></p><p>ä¾èµ–å¼•å…¥</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>è‡ªåŠ¨é…ç½®</p><ul><li>é…ç½®é¡¹ spring.datasource.druid</li><li>è‡ªåŠ¨é…ç½®ç±»DruidDataSourceAutoConfigure</li><li>DruidSpringAopConfiguration.class, ç›‘æ§SpringBeançš„ï¼›é…ç½®é¡¹ï¼šspring.datasource.druid.aop-patterns</li><li>DruidStatViewServletConfiguration.class, ç›‘æ§é¡µçš„é…ç½®ã€‚spring.datasource.druid.stat-view-servleté»˜è®¤å¼€å¯ã€‚</li><li>DruidWebStatFilterConfiguration.classï¼Œwebç›‘æ§é…ç½®ã€‚spring.datasource.druid.web-stat-filteré»˜è®¤å¼€å¯ã€‚</li><li>DruidFilterConfiguration.classæ‰€æœ‰Druidçš„filterçš„é…ç½®</li></ul><p>ä¸€ä¸ªå®ä¾‹</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db_account</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">aop-patterns:</span> <span class="string">com.atguigu.admin.*</span>  <span class="comment">#ç›‘æ§SpringBean</span></span><br><span class="line">      <span class="attr">filters:</span> <span class="string">stat,wall</span>     <span class="comment"># åº•å±‚å¼€å¯åŠŸèƒ½ï¼Œstatï¼ˆsqlç›‘æ§ï¼‰ï¼Œwallï¼ˆé˜²ç«å¢™ï¼‰</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">stat-view-servlet:</span>   <span class="comment"># é…ç½®ç›‘æ§é¡µåŠŸèƒ½</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">resetEnable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">web-stat-filter:</span>  <span class="comment"># ç›‘æ§web</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">urlPattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">'*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span>    <span class="comment"># å¯¹ä¸Šé¢filtersé‡Œé¢çš„statçš„è¯¦ç»†é…ç½®</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">1000</span></span><br><span class="line">          <span class="attr">logSlowSql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">wall:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">config:</span></span><br><span class="line">            <span class="attr">drop-table-allow:</span> <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure><h4 id="mybatisæ•´åˆ"><a href="#mybatisæ•´åˆ" class="headerlink" title="mybatisæ•´åˆ"></a>mybatisæ•´åˆ</h4><p><a href="https://github.com/mybatis">å®˜æ–¹ä»“åº“</a></p><p>ä¾èµ–å¼•å…¥</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>é…ç½®æ¨¡å¼:</p><ul><li>é…ç½®æ–‡ä»¶</li><li>SqlSessionFactoryï¼šè‡ªåŠ¨é…ç½®å¥½äº†</li><li>SqlSessionï¼šè‡ªåŠ¨é…ç½®äº†SqlSessionTemplate ç»„åˆäº†SqlSession</li><li>@Import(AutoConfiguredMapperScannerRegistrar.class)</li><li>Mapperï¼š åªè¦æˆ‘ä»¬å†™çš„æ“ä½œMyBatisçš„æ¥å£æ ‡å‡†äº†@Mapperå°±ä¼šè¢«è‡ªåŠ¨æ‰«æè¿›æ¥</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableConfigurationProperties(MybatisProperties.class)</span> <span class="comment">// MyBatisé…ç½®é¡¹ç»‘å®šç±»ã€‚</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter({ DataSourceAutoConfiguration.class, MybatisLanguageDriverAutoConfiguration.class })</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisAutoConfiguration</span></span>{</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "mybatis")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisProperties</span></span>{</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è‡ªå®šä¹‰é…ç½®</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">1234</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/my</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®mybatisè§„åˆ™</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis/mybatis-config.xml</span>  <span class="comment">#å…¨å±€é…ç½®æ–‡ä»¶ä½ç½®</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mybatis/*.xml</span>  <span class="comment">#sqlæ˜ å°„æ–‡ä»¶ä½ç½®</span></span><br></pre></td></tr></tbody></table></figure><p>å…¨å±€é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>mapperæ¥å£</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.lun.boot.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getUser"</span> <span class="attr">resultType</span>=<span class="string">"com.lun.boot.bean.User"</span>&gt;</span></span><br><span class="line">        select * from user where id=#{id}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.lun.boot.bean.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸éœ€è¦å…¨å±€é…ç½®æ–‡ä»¶çš„æ–¹å¼</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®mybatisè§„åˆ™</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mybatis/mapper/*.xml</span></span><br><span class="line">  <span class="comment"># å¯ä»¥ä¸å†™å…¨å±€é…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰å…¨å±€é…ç½®æ–‡ä»¶çš„é…ç½®éƒ½æ”¾åœ¨configurationé…ç½®é¡¹ä¸­äº†ã€‚</span></span><br><span class="line">  <span class="comment"># config-location: classpath:mybatis/mybatis-config.xml</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><h4 id="mybatis-plusæ•´åˆ"><a href="#mybatis-plusæ•´åˆ" class="headerlink" title="mybatis-plusæ•´åˆ"></a>mybatis-plusæ•´åˆ</h4><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><h3 id="å¼‚æ­¥ä»»åŠ¡"><a href="#å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡"></a>å¼‚æ­¥ä»»åŠ¡</h3><p><span class="github-emoji"><span>ğŸ’‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f487.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ä¸¾ä¸ªæ —å­</p><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªæœåŠ¡ï¼Œservice</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OurService</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span><span class="comment">//å£°æ˜è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå¹¶åœ¨å¯åŠ¨ç±»ä¸Šä½¿ç”¨@EnableAsync</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">async</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        <span class="comment">//å‡è®¾è¿™æ˜¯ä¸€ä¸ªä¸šåŠ¡ï¼Œéœ€è¦å¼€å¯ä¸€ä¸ªçº¿ç¨‹å¤„ç†ï¼Œå¤„ç†å®Œæˆä»–éœ€è¦ä¸€å®šçš„æ—¶é—´</span></span><br><span class="line">        System.out.println(<span class="string">"ä»»åŠ¡å¤„ç†ä¸­"</span>);</span><br><span class="line">        Thread.sleep(<span class="number">5000</span>);<span class="comment">//æ¨¡æ‹Ÿä»»åŠ¡å¤„ç†è€—æ—¶</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸€ä¸ªcontroller</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OurService service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping("/hello")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String  <span class="title">asyncTest</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">         <span class="comment">//æ¨¡æ‹Ÿå¼€å¯ä¸€ä¸ªè€—æ—¶äº”ç§’çš„ä¸šåŠ¡ã€‚å½“å¼€å¯å¼‚æ­¥ä»»åŠ¡åï¼Œä¼šåœ¨åå°æ‰§è¡Œæ­¤æ–¹æ³•async()ï¼Œ</span></span><br><span class="line">        <span class="comment">//ç›´æ¥è¿”å›æ–¹æ³•ç»“æœï¼Œç”¨æˆ·ä¸å¿…ç­‰å¾…</span></span><br><span class="line">        service.async();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"OK"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœä¸å£°æ˜anyncä¸ºä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œé‚£ä¹ˆå½“ç”¨æˆ·è®¿é—®/helloæ—¶ï¼Œéœ€è¦ç­‰å¾…(è½¬åœˆåœˆ)äº”ç§’æ‰èƒ½å¾—åˆ°ç»“æœï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„</p><h3 id="é‚®ä»¶ä»»åŠ¡"><a href="#é‚®ä»¶ä»»åŠ¡" class="headerlink" title="é‚®ä»¶ä»»åŠ¡"></a>é‚®ä»¶ä»»åŠ¡</h3><p>åœ¨springbootä¸­ä½¿ç”¨é‚®ä»¶ä»»åŠ¡</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥çœ‹ä¸€ä¸‹æ­¤ä¾èµ–ä¸‹çš„ä¾èµ–é¡¹</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹è‡ªåŠ¨é…ç½®ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(</span></span><br><span class="line"><span class="meta">    proxyBeanMethods = false</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass({MimeMessage.class, MimeType.class, MailSender.class})</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean({MailSender.class})</span></span><br><span class="line"><span class="meta">@Conditional({MailSenderAutoConfiguration.MailSenderCondition.class})</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties({MailProperties.class})</span><span class="comment">//é…ç½®ç»‘å®šç±»</span></span><br><span class="line"><span class="meta">@Import({MailSenderJndiConfiguration.class, MailSenderPropertiesConfiguration.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MailSenderAutoConfiguration</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MailSenderAutoConfiguration</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MailSenderCondition</span> <span class="keyword">extends</span> <span class="title">AnyNestedCondition</span> </span>{</span><br><span class="line">        MailSenderCondition() {</span><br><span class="line">            <span class="keyword">super</span>(ConfigurationPhase.PARSE_CONFIGURATION);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@ConditionalOnProperty(</span></span><br><span class="line"><span class="meta">            prefix = "spring.mail",</span></span><br><span class="line"><span class="meta">            name = {"jndi-name"}</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line">        <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">JndiNameProperty</span> </span>{</span><br><span class="line">            JndiNameProperty() {</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@ConditionalOnProperty(</span></span><br><span class="line"><span class="meta">            prefix = "spring.mail",</span></span><br><span class="line"><span class="meta">            name = {"host"}</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line">        <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">HostProperty</span> </span>{</span><br><span class="line">            HostProperty() {</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹é…ç½®é¡¹MailProperties</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(</span></span><br><span class="line"><span class="meta">    prefix = "spring.mail"</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MailProperties</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_CHARSET;</span><br><span class="line">    <span class="keyword">private</span> String host;</span><br><span class="line">    <span class="keyword">private</span> Integer port;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String protocol = <span class="string">"smtp"</span>;</span><br><span class="line">    <span class="keyword">private</span> Charset defaultEncoding;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; properties;</span><br><span class="line">    <span class="keyword">private</span> String jndiName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MailProperties</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.defaultEncoding = DEFAULT_CHARSET;</span><br><span class="line">        <span class="keyword">this</span>.properties = <span class="keyword">new</span> HashMap();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHost</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.host;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHost</span><span class="params">(String host)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.host = host;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        DEFAULT_CHARSET = StandardCharsets.UTF_8;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>ä»é…ç½®ç»‘å®šé¡¹ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºé»˜è®¤ä½¿ç”¨çš„æ˜¯SMTPåè®®</p><p><strong>é…ç½®QQé‚®ç®±</strong></p><p>è·å–ç¬¬ä¸‰æ–¹ç™»å½•æˆæƒç </p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210806121418.png"></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.mail.username</span>=<span class="string">1816046297@qq.com</span></span><br><span class="line"><span class="meta">spring.mail.password</span>=<span class="string">ä¿å¯†å“Ÿ</span></span><br><span class="line"><span class="meta">spring.mail.host</span>=<span class="string">smtp.qq.com</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨QQé‚®ç®±éœ€è¦å¼€å¯å®‰å…¨éªŒè¯</span></span><br><span class="line"><span class="meta">spring.mail.properties.mail.smtp.ssl.enable</span>=<span class="string">true</span></span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f410.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>OKï¼Œç®€å•é…ç½®ä¸€ä¸‹ï¼Œè®©æˆ‘ä»¬è‡ªå·±è¯•ç€ç»™è‡ªå·±å‘é€ä¸€å°å¤æ‚é‚®ä»¶å§~</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendMail</span><span class="params">()</span> <span class="keyword">throws</span> MessagingException, IOException </span>{</span><br><span class="line">    MimeMessage mimeMessage = mailSender.createMimeMessage();</span><br><span class="line">    MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(mimeMessage, <span class="keyword">true</span>);</span><br><span class="line">    helper.setSubject(<span class="string">"rainï¼Œä½ å¥½"</span>);</span><br><span class="line">    helper.setText(<span class="string">"äºåŒ—äº¬æ—¶é—´ï¼š"</span>+ <span class="keyword">new</span> SimpleDateFormat(<span class="string">"YYYY-mm-dd hh-mm-ss"</span>).format(<span class="keyword">new</span> Date())+<span class="string">"å‘é€"</span>);</span><br><span class="line">    helper.addAttachment(<span class="string">"song.mp3"</span>,<span class="keyword">new</span> File(<span class="string">"E:\\CloudMusic\\ã‚¢ãƒãƒ¢ãƒãƒªã‚¢ - å·£ç«‹ã¡ã®æ­Œ.mp3"</span>));</span><br><span class="line">    helper.setFrom(<span class="string">"1816046297@qq.com"</span>);</span><br><span class="line">    helper.setTo(<span class="string">"1816046297@qq.com"</span>);</span><br><span class="line">    mailSender.send(mimeMessage);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>emmmmï¼ŒOKäº†(ã¥ï¿£ 3ï¿£)ã¥</p></blockquote><img src="https://gitee.com/rain-sky/images/raw/master/20210806162702.png" style="zoom: 67%;"><blockquote><p>æ¥ä¸ªå°å°çš„å®ç°å§(â—â€™â—¡â€™â—)~</p></blockquote><p>é¦–å…ˆç”¨ä¸€ä¸ªç®€å•çš„è¡¨å•æ¨¡æ‹Ÿå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¦‚æ˜¯å†™é“</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-6"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"panel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span></span><br><span class="line">            å¤æ‚é‚®ä»¶å‘é€æµ‹è¯•ç”¨</span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">role</span>=<span class="string">"form"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">th:action</span>=<span class="string">"@{/mailsend}"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exampleInputEmail1"</span>&gt;</span>ä¸»é¢˜<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"theme"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"exampleInputEmail1"</span> <span class="attr">placeholder</span>=<span class="string">"Enter theme"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"mytext"</span>&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"mytext"</span> <span class="attr">cols</span>=<span class="string">"30"</span> <span class="attr">rows</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--                            å¤šæ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"InputFile"</span> &gt;</span>æˆ‘çš„ç›¸å†Œ<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"InputFile"</span> <span class="attr">name</span>=<span class="string">"photos"</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkbox"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>&gt;</span> ç‚¹å‡»ç¡®è®¤</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å†™ä¸ªè¯·æ±‚å¤„ç†ï¼Œä¾ç„¶è‡ªå·±å‘ç»™è‡ªå·±<span class="github-emoji"><span>âœ‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2709.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping("/mailsend")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sendMail</span><span class="params">(String theme,String text,<span class="meta">@RequestPart</span> MultipartFile[] photos)</span> <span class="keyword">throws</span> MessagingException, FileNotFoundException </span>{</span><br><span class="line">    MimeMessage mimeMessage = mailSender.createMimeMessage();</span><br><span class="line">    MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(mimeMessage, <span class="keyword">true</span>);</span><br><span class="line">    helper.setSubject(theme);</span><br><span class="line">    helper.setText(<span class="string">"äºåŒ—äº¬æ—¶é—´ï¼š"</span>+ <span class="keyword">new</span> SimpleDateFormat(<span class="string">"YYYY-mm-dd hh-mm-ss"</span>).format(<span class="keyword">new</span> Date())+<span class="string">"å‘é€"</span>+text);</span><br><span class="line">    <span class="keyword">if</span> (photos.length&gt;<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">for</span> (MultipartFile photo : photos) {</span><br><span class="line">            <span class="comment">//MultipartFileç»§æ‰¿äº†InputStreamResource</span></span><br><span class="line">            helper.addAttachment(photo.getOriginalFilename(),photo,photo.getContentType());</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    helper.setFrom(<span class="string">"1816046297@qq.com"</span>);</span><br><span class="line">    helper.setTo(<span class="string">"1816046297@qq.com"</span>);</span><br><span class="line">    mailSender.send(mimeMessage);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"redirect:/main.html"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å‘é€ä¸€ä¸ªé‚®ä»¶ç»™è‡ªå·±ç©ä¸€ç©ï¼Œâˆ‘( å£ || OMGï¼Œå½“æˆ‘ç‚¹å‡»æäº¤ä»¥åæ²¡æœ‰ç«‹åˆ»è·³è½¬åˆ°main.htmlï¼Œè€Œæ˜¯ä¸€ç›´åœ¨è½¬åœˆåœˆæ€ä¹ˆè‚¥å››</p><img src="https://gitee.com/rain-sky/images/raw/master/20210806174404.png" style="zoom: 67%;"><p>(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»*)ï¼Œå¤„ç†é‚®ä»¶å‘é€éœ€è¦çš„æ—¶é—´ä¸çŸ­ï¼Œè¿™æ ·ç»™ç”¨æˆ·é€ æˆçš„ä½“éªŒä¼šéå¸¸å·®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†é‚®ä»¶å‘é€å°è£…æˆä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡æ–¹æ³•ï¼Œå†æ¬¡æ”¹é€ ä»£ç </p><p>å¤„ç†å¼‚æ­¥è¯·æ±‚çš„service</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MailService</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JavaMailSenderImpl mailSender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mailSend</span><span class="params">(String theme, String text, MultipartFile[] files)</span> <span class="keyword">throws</span> MessagingException </span>{</span><br><span class="line">        MimeMessage mimeMessage = mailSender.createMimeMessage();</span><br><span class="line">        MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(mimeMessage, <span class="keyword">true</span>);</span><br><span class="line">        helper.setSubject(theme);</span><br><span class="line">        helper.setText(text+<span class="string">"\näºåŒ—äº¬æ—¶é—´ï¼š"</span>+ <span class="keyword">new</span> SimpleDateFormat(<span class="string">"YYYY-mm-dd hh-mm-ss"</span>).format(<span class="keyword">new</span> Date())+<span class="string">"å‘é€"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (files.length&gt;<span class="number">0</span>){</span><br><span class="line">            <span class="keyword">for</span> (MultipartFile file : files) {</span><br><span class="line">                helper.addAttachment(file.getOriginalFilename(),file,file.getContentType());</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        helper.setFrom(<span class="string">"1816046297@qq.com"</span>);</span><br><span class="line">        helper.setTo(<span class="string">"1816046297@qq.com"</span>);</span><br><span class="line">        mailSender.send(mimeMessage);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æˆ‘ä»¬çš„controller</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FormController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MailService mailService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping("/mailsend")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendMail</span><span class="params">(String theme,String text,<span class="meta">@RequestPart</span> MultipartFile[] photos)</span> <span class="keyword">throws</span> MessagingException, FileNotFoundException </span>{</span><br><span class="line">        mailService.mailSend(theme, text, photos);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/main.html"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å†æ¬¡æµ‹è¯•ï¼Œè¿™æ¬¡å°±æ²¡æœ‰è½¬åœˆåœˆäº†ï¼Œä½†æ˜¯åå¤ªæŠ¥é”™ï¼Œåœ¨æ‰§è¡Œæ­¤æ–¹æ³•æ—¶mailSender.send(mimeMessage);ãƒ½(âœ¿ï¾Ÿâ–½ï¾Ÿ)ãƒ</p><p>æ¢ä¸€ä¸ªæ–¹å¼ï¼Œæ–°å¼€ä¸€ä¸ªå†…éƒ¨ç±»å®ç°Runableæ¥å£ï¼Œé€šè¿‡æ„é€ å‡½æ•°ä¼ å‚ï¼Œç„¶åæ–°å¼€çº¿ç¨‹æ‰§è¡Œä¸Šè¿°ä¸šåŠ¡ï¼Œä¾ç„¶æŠ¥é”™ï¼Œé”™è¯¯ä¾ç„¶å‡ºåœ¨mailSender.send(mimeMessage);ä¸Š</p><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¦‚æœä¸ä¼ è¾“é™„ä»¶åˆ™ä¸ä¼šå‡ºç°æ­¤é—®é¢˜ï¼Œè¯´æ˜æ˜¯IOçš„é—®é¢˜~</p><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> æ­¤é—®é¢˜æœªè§£å†³ï¼Œå¾…ç»­~</p><h3 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h3><p>springbootå®šæ—¶ä»»åŠ¡æ ¸å¿ƒï¼š</p><p>TaskSchedulerï¼šä»»åŠ¡è°ƒåº¦å™¨</p><p>TaskExecutorï¼šä»»åŠ¡æ‰§è¡Œå™¨</p><p>@EnableSchedulingï¼šå¼€å¯å®šæ—¶ä»»åŠ¡</p><p>@Scheduledï¼šå£°æ˜å®šæ—¶ä»»åŠ¡</p><blockquote><p>ä¸»å¯åŠ¨ç±»å¼€å¯å®šæ—¶ä»»åŠ¡</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OurService</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Scheduled(cron = "0 0 6 * * 5")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduledTask</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"æ¯ä¸ªæœˆçš„å‘¨äº”ä¸Šåˆå…­ç‚¹æ‰§è¡Œè¯¥ä»»åŠ¡~"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>Cronè¡¨è¾¾å¼</strong></p><p><a href="https://www.cnblogs.com/junrong624/p/4239517.html">æ–‡ç« æ¨è</a></p><h2 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h2><h3 id="åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º"><a href="#åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º" class="headerlink" title="åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º"></a>åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º</h3><p>åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸€ç»„ç‹¬ç«‹çš„è®¡ç®—æœºå±•ç°ç»™ç”¨æˆ·çš„æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ•´ä½“ï¼Œå°±å¥½åƒæ˜¯ä¸€ä¸ªç³»ç»Ÿä¼¼çš„ã€‚</p><p><span class="github-emoji"><span>ğŸ’‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f487.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ä¸¾ä¸ªæ —å­</p><p>åœ¨ORMå•ä½“åº”ç”¨æ—¶ä»£ï¼Œå½“ä¸€ä¸ªç½‘ç«™çš„æµé‡è¶³å¤Ÿå¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½œå‚ç›´å¤„ç†ï¼Œå‚ç›´æ‰©å±•å¤šå°æœåŠ¡å™¨ï¼Œä¹Ÿè®¸ç”¨nginxå»ä½œè´Ÿè½½å‡è¡¡ï¼Œä½†æ˜¯å½“ä¸šåŠ¡è¶³ã€‚åºå¤§ä¸”å¤æ‚æ—¶ï¼Œåœ¨å•ä½“ä¸­å¤„ç†æ‰€æœ‰ä¸šåŠ¡æ˜¯æ•ˆç‡ä½ä¸‹çš„ï¼Œä¹Ÿè®¸æˆ‘ä»¬èŠ±å¤§èµ„é‡‘å»å‡çº§è®¾å¤‡ç¡¬ä»¶ï¼Œä½†è¿™ä»£ä»·å¤ªå¤§ï¼Œåœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œæ¯ä¸ªæœåŠ¡å¯¹ç¡¬ä»¶çš„è¦æ±‚ä¸ä¸€æ ·ï¼Œä¸ºæ­¤æˆ‘ä»¬ä¼šå°†ä¸šåŠ¡æ‹†åˆ†ç‹¬ç«‹å‡ºæ¥ï¼Œç®€å•çš„ä¸šåŠ¡åˆ†é…æ›´å°‘çš„æœåŠ¡å™¨èµ„æºï¼Œå¤æ‚æœåŠ¡ç»™äºˆæ›´å¤šèµ„æºã€‚</p><p><strong>RPC</strong></p><p><a href="https://www.zhihu.com/search?type=content&amp;q=RPC">å‚è€ƒæ–‡ç« </a></p><p>RPC(Remote Procedure Call)ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå®ƒæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œä»è¿œç¨‹è®¡ç®—æœºç¨‹åºä¸Šè¯·æ±‚æœåŠ¡ï¼ŒRPC æ˜¯ä¸€ç§æŠ€æœ¯æ€æƒ³è€Œéä¸€ç§è§„èŒƒæˆ–åè®®ã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210807144742.jpeg"></p><p>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href="https://link.zhihu.com/?target=https://www.cs.rutgers.edu/~pxk/417/notes/03-rpc.html">https://www.cs.rutgers.edu/~pxk/417/notes/03-rpc.html</a>ï¼‰</p><p>ä¸ºä»€ä¹ˆRPCå‘¢ï¼Ÿå°±æ˜¯æ— æ³•åœ¨ä¸€ä¸ªè¿›ç¨‹å†…ï¼Œç”šè‡³ä¸€ä¸ªè®¡ç®—æœºå†…é€šè¿‡æœ¬åœ°è°ƒç”¨çš„æ–¹å¼å®Œæˆçš„éœ€æ±‚ï¼Œæ¯”å¦‚æ¯”å¦‚ä¸åŒçš„ç³»ç»Ÿé—´çš„é€šè®¯ï¼Œç”šè‡³ä¸åŒçš„ç»„ç»‡é—´çš„é€šè®¯ã€‚ç”±äºè®¡ç®—èƒ½åŠ›éœ€è¦æ¨ªå‘æ‰©å±•ï¼Œéœ€è¦åœ¨å¤šå°æœºå™¨ç»„æˆçš„é›†ç¾¤ä¸Šéƒ¨ç½²åº”ç”¨ï¼Œ</p><p>RPCçš„åè®®æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚æœ€æ—©çš„CORBAï¼ŒJava RMIï¼ŒWeb Serviceçš„RPCé£æ ¼ï¼ŒHessianï¼ŒThriftï¼Œç”šè‡³Rest APIã€‚</p><p><strong>åºåˆ—åŒ–å’Œååºåˆ—åŒ–</strong><br>å®¢æˆ·ç«¯æ€ä¹ˆæŠŠå‚æ•°å€¼ä¼ ç»™è¿œç¨‹çš„å‡½æ•°å‘¢?åœ¨æœ¬åœ°è°ƒç”¨ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå‚æ•°å‹åˆ°æ ˆé‡Œï¼Œç„¶åè®©å‡½æ•°è‡ªå·±å»æ ˆé‡Œè¯»å°±è¡Œã€‚<br>ä½†æ˜¯åœ¨è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ—¶ï¼Œå®¢æˆ·ç«¯è·ŸæœåŠ¡ç«¯æ˜¯ä¸åŒçš„è¿›ç¨‹ï¼Œä¸èƒ½é€šè¿‡å†…å­˜æ¥ä¼ é€’å‚æ•°ã€‚<br>è¿™æ—¶å€™å°±éœ€è¦å®¢æˆ·ç«¯æŠŠå‚æ•°å…ˆè½¬æˆä¸€ä¸ªå­—èŠ‚æµï¼Œä¼ ç»™æœåŠ¡ç«¯åï¼Œå†æŠŠå­—èŠ‚æµè½¬æˆè‡ªå·±èƒ½è¯»å–çš„æ ¼å¼ã€‚<br>åªæœ‰äºŒè¿›åˆ¶æ•°æ®æ‰èƒ½åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å®šä¹‰æ˜¯ï¼š</p><ul><li>å°†å¯¹è±¡è½¬æ¢æˆäºŒè¿›åˆ¶æµçš„è¿‡ç¨‹å«åšåºåˆ—åŒ–</li><li>å°†äºŒè¿›åˆ¶æµè½¬æ¢æˆå¯¹è±¡çš„è¿‡ç¨‹å«åšååºåˆ—åŒ–</li></ul><h3 id="dubbo"><a href="#dubbo" class="headerlink" title="dubbo"></a>dubbo</h3><p><strong>ç®€ä»‹ï¼ŒåŸºäºdubbo3</strong></p><p><a href="https://dubbo.apache.org/zh/docs/introduction/">dubbo3å®˜æ–¹æ–‡æ¡£</a></p><p>å¦‚éœ€äº†è§£å‘å±•èƒŒæ™¯ï¼Œäº’è”ç½‘åº”ç”¨æ¶æ„å‘å±•è¯·å‚è€ƒ<a href="https://dubbo.apache.org/zh/docsv2.7/user/preface/background/">dubbo2å®˜æ–¹æ–‡æ¡£</a></p><p>Apache Dubbo æ˜¯ä¸€æ¬¾å¾®æœåŠ¡å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›äº† RPCé€šä¿¡ ä¸ å¾®æœåŠ¡æ²»ç† ä¸¤å¤§å…³é”®èƒ½åŠ›ã€‚è¿™æ„å‘³ç€ï¼Œä½¿ç”¨ Dubbo å¼€å‘çš„å¾®æœåŠ¡ï¼Œå°†å…·å¤‡ç›¸äº’ä¹‹é—´çš„è¿œç¨‹å‘ç°ä¸é€šä¿¡èƒ½åŠ›ï¼Œ åŒæ—¶åˆ©ç”¨ Dubbo æä¾›çš„ä¸°å¯ŒæœåŠ¡æ²»ç†èƒ½åŠ›ï¼Œå¯ä»¥å®ç°è¯¸å¦‚æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€æµé‡è°ƒåº¦ç­‰æœåŠ¡æ²»ç†è¯‰æ±‚ã€‚åŒæ—¶ Dubbo æ˜¯é«˜åº¦å¯æ‰©å±•çš„ï¼Œç”¨æˆ·å‡ ä¹å¯ä»¥åœ¨ä»»æ„åŠŸèƒ½ç‚¹å»å®šåˆ¶è‡ªå·±çš„å®ç°ï¼Œä»¥æ”¹å˜æ¡†æ¶çš„é»˜è®¤è¡Œä¸ºæ¥æ»¡è¶³è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p><p>Dubbo3 åŸºäº Dubbo2 æ¼”è¿›è€Œæ¥ï¼Œåœ¨ä¿æŒåŸæœ‰æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§çš„åŒæ—¶ï¼Œ Dubbo3 åœ¨æ˜“ç”¨æ€§ã€è¶…å¤§è§„æ¨¡å¾®æœåŠ¡å®è·µã€äº‘åŸç”ŸåŸºç¡€è®¾æ–½é€‚é…ç­‰å‡ å¤§æ–¹å‘ä¸Šè¿›è¡Œäº†å…¨é¢å‡çº§ã€‚</p><p>Apache Dubboæä¾›äº†å…­å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šé¢å‘æ¥å£ä»£ç†çš„é«˜æ€§èƒ½RPCè°ƒç”¨ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼ŒæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ï¼Œé«˜åº¦å¯æ‰©å±•èƒ½åŠ›ï¼Œè¿è¡ŒæœŸæµé‡è°ƒåº¦ï¼Œå¯è§†åŒ–çš„æœåŠ¡æ²»ç†ä¸è¿ç»´ã€‚</p><p><strong>èƒŒæ™¯</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210807113250.jpeg"></p><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å•ä¸€åº”ç”¨æ¶æ„</p><p>å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚æ­¤æ—¶ï¼Œç”¨äºç®€åŒ–å¢åˆ æ”¹æŸ¥å·¥ä½œé‡çš„æ•°æ®è®¿é—®æ¡†æ¶(ORM)æ˜¯å…³é”®ã€‚</p><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å‚ç›´åº”ç”¨æ¶æ„</p><p>å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨å¢åŠ æœºå™¨å¸¦æ¥çš„åŠ é€Ÿåº¦è¶Šæ¥è¶Šå°ï¼Œæå‡æ•ˆç‡çš„æ–¹æ³•ä¹‹ä¸€æ˜¯å°†åº”ç”¨æ‹†æˆäº’ä¸ç›¸å¹²çš„å‡ ä¸ªåº”ç”¨ï¼Œä»¥æå‡æ•ˆç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºåŠ é€Ÿå‰ç«¯é¡µé¢å¼€å‘çš„Webæ¡†æ¶(MVC)æ˜¯å…³é”®ã€‚</p><p><span class="github-emoji"><span>3âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0033-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> åˆ†å¸ƒå¼æœåŠ¡æ¶æ„</p><p>å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜ä¸šåŠ¡å¤ç”¨åŠæ•´åˆçš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶(RPC)æ˜¯å…³é”®ã€‚</p><p><span class="github-emoji"><span>4âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0034-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> æµåŠ¨è®¡ç®—æ¶æ„</p><p>å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸æ˜¾ç°ï¼Œæ­¤æ—¶éœ€å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ(SOA)æ˜¯å…³é”®ã€‚</p><h3 id="zookeeper"><a href="#zookeeper" class="headerlink" title="zookeeper"></a>zookeeper</h3><p><a href="http://archive.apache.org/dist/zookeeper/">ä¸‹è½½åœ°å€</a></p><p>ä¸‹è½½å¹¶è§£å‹</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;springbootçš„ç‰¹æ€§&quot;&gt;&lt;a href=&quot;#springbootçš„ç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;springbootçš„ç‰¹æ€§&quot;&gt;&lt;/a&gt;springbootçš„ç‰¹æ€§&lt;/h2&gt;&lt;h4 id=&quot;1-ä¾èµ–ç®¡ç†&quot;&gt;&lt;a href=&quot;#1-ä¾</summary>
      
    
    
    
    
    <category term="springboot" scheme="https://rain-sky.github.io/tags/springboot/"/>
    
  </entry>
  
  <entry>
    <title>é“¾è¡¨</title>
    <link href="https://rain-sky.github.io/2021/07/11/%E9%93%BE%E8%A1%A8/"/>
    <id>https://rain-sky.github.io/2021/07/11/%E9%93%BE%E8%A1%A8/</id>
    <published>2021-07-11T08:33:56.000Z</published>
    <updated>2021-07-12T07:30:12.450Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å•å¾ªç¯é“¾è¡¨"><a href="#å•å¾ªç¯é“¾è¡¨" class="headerlink" title="å•å¾ªç¯é“¾è¡¨"></a>å•å¾ªç¯é“¾è¡¨</h4><p>è¦å®ç°å•å¾ªç¯é“¾è¡¨å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å•é“¾è¡¨çš„åŸºç¡€ä¸Šå°†å°¾éƒ¨èŠ‚ç‚¹æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œå•å¾ªç¯é“¾è¡¨ç›¸å¯¹äºå•é“¾è¡¨æ¥è¯´ä»ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å‡ºå‘éƒ½èƒ½å¤Ÿéå†å®Œæ•´ä¸ªé“¾è¡¨ã€‚</p><p><strong>ç»“æ„ç¤ºæ„</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210711170521.png"></p><p><strong>æ·»åŠ æ“ä½œ</strong></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210711170917.png"></p><p><strong>Javaå®ç°</strong></p><p>é“¾è¡¨ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCircleLinkedList</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> Node head;<span class="comment">//å¤´ç»“ç‚¹, ä¸å­˜æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> Node tail;<span class="comment">//å°¾ç»“ç‚¹, æŒ‡å‘é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyCircleLinkedList</span><span class="params">()</span> </span>{</span><br><span class="line">        head = <span class="keyword">new</span> Node(Integer.MIN_VALUE, <span class="keyword">null</span>);</span><br><span class="line">        head.next = head;</span><br><span class="line">        tail = head;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ åˆ°é“¾è¡¨å°¾éƒ¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> item)</span> </span>{</span><br><span class="line">        Node no = <span class="keyword">new</span> Node(item,<span class="keyword">this</span>.head);</span><br><span class="line">        tail.next = no;</span><br><span class="line">        tail = no;</span><br><span class="line">        size++;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éå†é“¾è¡¨å¹¶è¾“å‡ºå…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">output</span><span class="params">()</span> </span>{</span><br><span class="line">        Node now = head.next;</span><br><span class="line">        <span class="keyword">while</span>(now!=head){</span><br><span class="line">            System.out.println(now.item);</span><br><span class="line">            now = now.next;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> head.next == head;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»“ç‚¹å†…éƒ¨ç±»</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> item;</span><br><span class="line">        Node next;</span><br><span class="line">        Node(<span class="keyword">int</span> item, Node next) {</span><br><span class="line">            <span class="keyword">this</span>.item = item;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCircleLinkedListTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        MyCircleLinkedList list = <span class="keyword">new</span> MyCircleLinkedList();</span><br><span class="line">        Scanner in = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span> (in.hasNext()) {</span><br><span class="line">            <span class="keyword">int</span> item = in.nextInt();</span><br><span class="line">            list.add(item);</span><br><span class="line">        }</span><br><span class="line">        list.output();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;å•å¾ªç¯é“¾è¡¨&quot;&gt;&lt;a href=&quot;#å•å¾ªç¯é“¾è¡¨&quot; class=&quot;headerlink&quot; title=&quot;å•å¾ªç¯é“¾è¡¨&quot;&gt;&lt;/a&gt;å•å¾ªç¯é“¾è¡¨&lt;/h4&gt;&lt;p&gt;è¦å®ç°å•å¾ªç¯é“¾è¡¨å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å•é“¾è¡¨çš„åŸºç¡€ä¸Šå°†å°¾éƒ¨èŠ‚ç‚¹æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œå•å¾ªç¯é“¾è¡¨ç›¸å¯¹äºå•é“¾è¡¨æ¥è¯´ä»ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å‡ºå‘éƒ½èƒ½</summary>
      
    
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="https://rain-sky.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    <category term="é“¾è¡¨" scheme="https://rain-sky.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>linuxå¸¸ç”¨å‘½ä»¤</title>
    <link href="https://rain-sky.github.io/2021/07/11/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://rain-sky.github.io/2021/07/11/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2021-07-11T08:03:54.000Z</published>
    <updated>2021-07-12T07:25:50.320Z</updated>
    
    <content type="html"><![CDATA[<h5 id="Linuxç›®å½•ç»“æ„ä»‹ç»"><a href="#Linuxç›®å½•ç»“æ„ä»‹ç»" class="headerlink" title="Linuxç›®å½•ç»“æ„ä»‹ç»"></a>Linuxç›®å½•ç»“æ„ä»‹ç»</h5><p>å¯¹<code>Linux</code>æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„çš„äº†è§£æ˜¯å­¦ä¹ å’ŒæŒæ¡<code>Linux</code>ç³»ç»Ÿçš„åŸºç¡€ã€‚<code>Linux</code> æ–‡ä»¶ç³»ç»Ÿæ˜¯æ ‘å½¢å±‚æ¬¡ç»“æ„ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210711160900.png"></p><h6 id="pwdå‘½ä»¤"><a href="#pwdå‘½ä»¤" class="headerlink" title="pwdå‘½ä»¤"></a>pwdå‘½ä»¤</h6><p><code>pwd(Print Working Directory )</code>ï¼šæ˜¾ç¤ºå½“å‰æ‰€åœ¨ç›®å½•ã€‚</p><h6 id="cdå‘½ä»¤"><a href="#cdå‘½ä»¤" class="headerlink" title="cdå‘½ä»¤"></a>cdå‘½ä»¤</h6><p><code>cd(Change Directory)</code>: åˆ‡æ¢å½“å‰ç›®å½•ã€‚</p><p>å¸¸ç”¨ç‰¹æ®Šç›®å½•è¡¨ç¤ºï¼š</p><ul><li>cd è¿›å…¥ç”¨æˆ·ä¸»ç›®å½•ï¼›</li><li>cd ~ è¿›å…¥ç”¨æˆ·ä¸»ç›®å½•ï¼›</li><li>cd - è¿”å›è¿›å…¥æ­¤ç›®å½•ä¹‹å‰æ‰€åœ¨çš„ç›®å½•ï¼›</li><li>cd .. è¿”å›ä¸Šçº§ç›®å½•(è‹¥å½“å‰ç›®å½•ä¸ºâ€/â€œï¼Œåˆ™æ‰§è¡Œå®Œåè¿˜åœ¨â€/â€œï¼›â€..â€ä¸ºä¸Šçº§ç›®å½•çš„æ„æ€)ï¼›</li><li>cd ../.. è¿”å›ä¸Šä¸¤çº§ç›®å½•ï¼›</li><li>cd !$ æŠŠä¸Šä¸ªå‘½ä»¤çš„å‚æ•°ä½œä¸º<code>cd</code>å‚æ•°ä½¿ç”¨ã€‚</li></ul><h6 id="lså‘½ä»¤"><a href="#lså‘½ä»¤" class="headerlink" title="lså‘½ä»¤"></a>lså‘½ä»¤</h6><p><code>ls(list)</code>: åˆ—å‡ºæŒ‡å®šç›®å½•åˆ—è¡¨ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°é»˜è®¤åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹(éšè—æ–‡ä»¶å’Œæ–‡ä»¶å¤¹é™¤å¤–)ã€‚</p><p>å¸¸è§<code>ls</code>å‘½ä»¤é€‰é¡¹:</p><ul><li>-lï¼šä»¥é•¿æ ¼å¼æ˜¾ç¤ºç›®å½•ä¸‹çš„å†…å®¹åˆ—è¡¨ã€‚è¾“å‡ºçš„ä¿¡æ¯ä»å·¦åˆ°å³ä¾æ¬¡åŒ…æ‹¬æ–‡ä»¶åï¼Œæ–‡ä»¶ç±»å‹ã€æƒé™æ¨¡å¼ã€ç¡¬è¿æ¥æ•°ã€æ‰€æœ‰è€…ã€ç»„ã€æ–‡ä»¶å¤§å°å’Œæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ç­‰ï¼›</li><li>-aï¼šæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹(åŒ…æ‹¬éšè—æ–‡ä»¶/æ–‡ä»¶å¤¹)ã€‚</li></ul><p><img src="https://gitee.com/rain-sky/images/raw/master/20210711161208.png"></p><h6 id="åˆ›å»ºæ–‡ä»¶"><a href="#åˆ›å»ºæ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ–‡ä»¶"></a>åˆ›å»ºæ–‡ä»¶</h6><p>linuxä¸­åˆ›å»ºæ–‡ä»¶çš„å¸¸ç”¨å‘½ä»¤æ˜¯<code>touch</code>ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹:</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch filename</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæƒ³åŒæ—¶åˆ›å»ºå¤šä¸ªæ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨<code>touch</code>å‘½ä»¤å®Œæˆï¼Œå…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch file1 file2 ...</span><br></pre></td></tr></tbody></table></figure><p>åªéœ€å°†ä¸åŒçš„æ–‡ä»¶åç”¨ç©ºæ ¼åˆ†éš”å³å¯å®Œæˆåˆ›å»ºå¤šä¸ªæ–‡ä»¶ã€‚</p><h6 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h6><p><code>Linux</code>ä¸­å¸¸ç”¨çš„åˆ é™¤æ–‡ä»¶çš„å‘½ä»¤æ˜¯<code>rm</code>ï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm [å‘½ä»¤é€‰é¡¹] filename</span><br></pre></td></tr></tbody></table></figure><p>å¸¸ç”¨å‘½ä»¤é€‰é¡¹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-fï¼šå¼ºåˆ¶åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ï¼›</span><br><span class="line">-ræˆ–-Rï¼šé€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•ä¸€å¹¶å¤„ç†ï¼›</span><br><span class="line">-iï¼šåˆ é™¤å·²æœ‰æ–‡ä»¶æˆ–ç›®å½•ä¹‹å‰å…ˆè¯¢é—®ç”¨æˆ·ã€‚</span><br></pre></td></tr></tbody></table></figure><p>ä¾‹å¦‚ï¼Œåˆ é™¤æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„æ–‡ä»¶<code>testfile</code>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -f testfilesh</span><br></pre></td></tr></tbody></table></figure><h6 id="åˆ›å»ºæ–‡ä»¶å¤¹"><a href="#åˆ›å»ºæ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºæ–‡ä»¶å¤¹"></a>åˆ›å»ºæ–‡ä»¶å¤¹</h6><p><code>Linux</code>ä¸­åˆ›å»ºæ–‡ä»¶å¤¹å‘½ä»¤æ˜¯<code>mkdir</code>ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir [å‘½ä»¤é€‰é¡¹] dirname</span><br></pre></td></tr></tbody></table></figure><p>å¸¸ç”¨å‘½ä»¤é€‰é¡¹ï¼š <code>-pæˆ–--parents</code> è‹¥æ‰€è¦å»ºç«‹ç›®å½•çš„ä¸Šå±‚ç›®å½•ç›®å‰å°šæœªå»ºç«‹ï¼Œåˆ™ä¼šä¸€å¹¶å»ºç«‹ä¸Šå±‚ç›®å½•ï¼›</p><p>ä¾‹å¦‚ï¼šæˆ‘ä»¬æ–°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>testdir</code>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir testdir</span><br></pre></td></tr></tbody></table></figure><h6 id="åˆ é™¤æ–‡ä»¶å¤¹"><a href="#åˆ é™¤æ–‡ä»¶å¤¹" class="headerlink" title="åˆ é™¤æ–‡ä»¶å¤¹"></a>åˆ é™¤æ–‡ä»¶å¤¹</h6><p><code>Linux</code>ä¸­åˆ é™¤æ–‡ä»¶å¤¹çš„å‘½ä»¤æ˜¯<code>rmdir</code>æˆ–è€…<code>rm -r</code>ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir [å‘½ä»¤é€‰é¡¹] dirname</span><br></pre></td></tr></tbody></table></figure><p>å¸¸ç”¨å‘½ä»¤é€‰é¡¹ï¼š-pæˆ–â€“parentsï¼šåˆ é™¤æŒ‡å®šç›®å½•åï¼Œè‹¥è¯¥ç›®å½•çš„ä¸Šå±‚ç›®å½•å·²å˜æˆç©ºç›®å½•ï¼Œåˆ™å°†å…¶ä¸€å¹¶åˆ é™¤ï¼›</p><p>ä¾‹å¦‚ï¼šå°†åˆšåˆšæ–°åˆ›å»ºçš„æ–‡ä»¶å¤¹<code>testdir</code>åˆ é™¤å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir testdir</span><br></pre></td></tr></tbody></table></figure><h6 id="Linuxæ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‹·è´"><a href="#Linuxæ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‹·è´" class="headerlink" title="Linuxæ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‹·è´"></a>Linuxæ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‹·è´</h6><p><code>Linux</code>ä½¿ç”¨<code>cp</code>å‘½ä»¤ç”¨æ¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªæºæ–‡ä»¶æˆ–è€…ç›®å½•å¤åˆ¶åˆ°æŒ‡å®šçš„ç›®å½•ä¸­ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp [å‘½ä»¤é€‰é¡¹] æºæ–‡ä»¶ ç›®çš„æ–‡ä»¶</span><br></pre></td></tr></tbody></table></figure><p>å¸¸ç”¨å‘½ä»¤é€‰é¡¹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-fï¼šå¼ºè¡Œå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¸è®ºç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å·²å­˜åœ¨ï¼›-iï¼š</span><br><span class="line">è¦†ç›–æ—¢æœ‰æ–‡ä»¶ä¹‹å‰å…ˆè¯¢é—®ç”¨æˆ·ï¼›</span><br><span class="line">-pï¼šä¿ç•™æºæ–‡ä»¶æˆ–ç›®å½•çš„å±æ€§ï¼›</span><br><span class="line">-R/rï¼šé€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•ä¸€å¹¶å¤„ç†ã€‚</span><br></pre></td></tr></tbody></table></figure><p>ä¾‹å¦‚ï¼šæ–°å»ºä¸€ä¸ªæ–‡ä»¶<code>newfile</code>å’Œä¸€ä¸ªæ–‡ä»¶å¤¹<code>newdir</code>ï¼Œå°†<code>newfile</code>å¤åˆ¶åˆ°<code>newdir</code>ç›®å½•ä¸‹ã€‚å…·ä½“å‘½ä»¤å¦‚ä¸‹ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch newfile</span><br><span class="line">mkdir newdir</span><br><span class="line">cp newfile newdir</span><br></pre></td></tr></tbody></table></figure><h6 id="Linuxæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç§»åŠ¨-é‡å‘½å"><a href="#Linuxæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç§»åŠ¨-é‡å‘½å" class="headerlink" title="Linuxæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç§»åŠ¨/é‡å‘½å"></a>Linuxæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç§»åŠ¨/é‡å‘½å</h6><p>Linuxä½¿ç”¨<code>mv</code>å‘½ä»¤ç”¨æ¥å¯¹æ–‡ä»¶æˆ–ç›®å½•é‡æ–°å‘½åï¼Œæˆ–è€…å°†æ–‡ä»¶ä»ä¸€ä¸ªç›®å½•ç§»åˆ°å¦ä¸€ä¸ªç›®å½•ä¸­ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv [å‘½ä»¤é€‰é¡¹] æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶</span><br></pre></td></tr></tbody></table></figure><p>å¸¸ç”¨å‘½ä»¤é€‰é¡¹ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-fï¼šå¼ºè¡Œå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¸è®ºç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å·²å­˜åœ¨ï¼›</span><br><span class="line">-iï¼šè¦†ç›–æ—¢æœ‰æ–‡ä»¶ä¹‹å‰å…ˆè¯¢é—®ç”¨æˆ·ï¼›</span><br><span class="line">-pï¼šä¿ç•™æºæ–‡ä»¶æˆ–ç›®å½•çš„å±æ€§ï¼›</span><br><span class="line">-R/rï¼šé€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•ä¸€å¹¶å¤„ç†'ã€‚</span><br></pre></td></tr></tbody></table></figure><p>ä¾‹å¦‚ï¼šæ–°å»ºä¸€ä¸ªæ–‡ä»¶<code>newfile</code>å’Œä¸€ä¸ªæ–‡ä»¶å¤¹<code>newdir</code>ï¼Œå°†<code>newfile</code>å‰ªåˆ‡åˆ°<code>newdir</code>ç›®å½•ä¸‹ï¼Œå¹¶é‡æ–°å‘½åä¸º<code>newfileCpy</code>ã€‚å…·ä½“å‘½ä»¤å¦‚ä¸‹ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch newfile</span><br><span class="line">mkdir newdir</span><br><span class="line">mv newfile newdir/newfileCpy</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;Linuxç›®å½•ç»“æ„ä»‹ç»&quot;&gt;&lt;a href=&quot;#Linuxç›®å½•ç»“æ„ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;Linuxç›®å½•ç»“æ„ä»‹ç»&quot;&gt;&lt;/a&gt;Linuxç›®å½•ç»“æ„ä»‹ç»&lt;/h5&gt;&lt;p&gt;å¯¹&lt;code&gt;Linux&lt;/code&gt;æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„çš„äº†è§£æ˜¯å­¦ä¹ å’Œ</summary>
      
    
    
    
    
    <category term="linux" scheme="https://rain-sky.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>leetcodeåˆ·é¢˜ç¬”è®°</title>
    <link href="https://rain-sky.github.io/2021/07/03/leetcode%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/"/>
    <id>https://rain-sky.github.io/2021/07/03/leetcode%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/</id>
    <published>2021-07-03T08:33:05.000Z</published>
    <updated>2021-08-07T12:07:49.443Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1 ä¸¤æ•°ä¹‹å’Œ"></a>1 ä¸¤æ•°ä¹‹å’Œ</h3><p><strong>é¢˜ç›®å¤§æ„</strong></p><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target  çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚</p><p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums = [2,7,11,15], target = 9<br>è¾“å‡ºï¼š[0,1]<br>è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚</p><p><strong>æš´åŠ›æ³•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) {</span><br><span class="line">        <span class="keyword">int</span> i, j;</span><br><span class="line">        <span class="keyword">int</span> [] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; nums.length - <span class="number">1</span>; i++ ){</span><br><span class="line">            <span class="keyword">for</span>( j = i + <span class="number">1</span>; j &lt; nums.length ;j++){</span><br><span class="line">                <span class="keyword">if</span>(nums[i] + nums[j] == target ){</span><br><span class="line">                    a[<span class="number">0</span>] = i;</span><br><span class="line">                    a[<span class="number">1</span>] = j;</span><br><span class="line">                    <span class="keyword">return</span> a;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        } </span><br><span class="line">        <span class="keyword">return</span> a ;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>å“ˆå¸Œè¡¨æ³•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) {</span><br><span class="line">       HashMap&lt;Integer,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;Integer,Integer&gt;();</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;nums.length;i++){</span><br><span class="line">           <span class="keyword">if</span>(map.containsKey(target-nums[i])){</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]{map.get(target-nums[i]),i};</span><br><span class="line">           }</span><br><span class="line">           map.put(nums[i],i);</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>æ‰§è¡Œæ•ˆç‡å¯¹æ¯”</strong></p><table><thead><tr><th>å“ˆå¸Œè¡¨æ³•</th><th>3 ms</th><th>40.8 MB</th><th>Java</th><th>2020/02/29 14:58</th><th>æ·»åŠ å¤‡æ³¨</th></tr></thead><tbody><tr><td>æš´åŠ›æ³•</td><td>65 ms</td><td>38.2 MB</td><td>Java</td><td>2020/02/28 19:57</td><td>æ·»åŠ å¤‡æ³¨</td></tr></tbody></table><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><h3 id="1-é¢è¯•é¢˜-01-01-åˆ¤å®šå­—ç¬¦æ˜¯å¦å”¯ä¸€"><a href="#1-é¢è¯•é¢˜-01-01-åˆ¤å®šå­—ç¬¦æ˜¯å¦å”¯ä¸€" class="headerlink" title="1 é¢è¯•é¢˜ 01.01. åˆ¤å®šå­—ç¬¦æ˜¯å¦å”¯ä¸€"></a>1 é¢è¯•é¢˜ 01.01. åˆ¤å®šå­—ç¬¦æ˜¯å¦å”¯ä¸€</h3><p><strong>é—®é¢˜æè¿°</strong></p><p>å®ç°ä¸€ä¸ªç®—æ³•ï¼Œç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸² s çš„æ‰€æœ‰å­—ç¬¦æ˜¯å¦å…¨éƒ½ä¸åŒã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: s = "leetcode"</span><br><span class="line">è¾“å‡º: false </span><br></pre></td></tr></tbody></table></figure><p><strong>Java è§£æ³•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isUnique</span><span class="params">(String astr)</span> </span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;astr.length();i++){</span><br><span class="line">        <span class="keyword">if</span>(astr.lastIndexOf(astr.charAt(i))!=i){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-é¢è¯•é¢˜-01-02-åˆ¤å®šæ˜¯å¦äº’ä¸ºå­—ç¬¦é‡æ’"><a href="#2-é¢è¯•é¢˜-01-02-åˆ¤å®šæ˜¯å¦äº’ä¸ºå­—ç¬¦é‡æ’" class="headerlink" title="2 é¢è¯•é¢˜ 01.02. åˆ¤å®šæ˜¯å¦äº’ä¸ºå­—ç¬¦é‡æ’"></a>2 é¢è¯•é¢˜ 01.02. åˆ¤å®šæ˜¯å¦äº’ä¸ºå­—ç¬¦é‡æ’</h3><p><strong>é—®é¢˜æè¿°</strong></p><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s1 å’Œ s2ï¼Œè¯·ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œç¡®å®šå…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦é‡æ–°æ’åˆ—åï¼Œèƒ½å¦å˜æˆå¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥: s1 = â€œabcâ€, s2 = â€œbcaâ€<br>è¾“å‡º: true<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥: s1 = â€œabcâ€, s2 = â€œbadâ€<br>è¾“å‡º: false</p><p><strong>Javaè§£æ³•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">CheckPermutation</span><span class="params">(String s1, String s2)</span> </span>{</span><br><span class="line">        <span class="keyword">char</span>[] chs1 = s1.toCharArray();</span><br><span class="line">        Arrays.sort(chs1);</span><br><span class="line">        <span class="keyword">char</span>[] chs2 = s2.toCharArray();</span><br><span class="line">        Arrays.sort(chs2);</span><br><span class="line">        <span class="keyword">return</span> Arrays.toString(chs1).equals(Arrays.toString(chs2));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="3 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a>3 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h3><p><strong>å½’ç±»ï¼š</strong><code>æ»‘åŠ¨çª—å£</code></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥: s = â€œabcabcbbâ€<br>è¾“å‡º: 3<br>è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ â€œabcâ€ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: s = â€œbbbbbâ€<br>è¾“å‡º: 1<br>è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ â€œbâ€ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚<br>ç¤ºä¾‹ 3:</p><p>è¾“å…¥: s = â€œpwwkewâ€<br>è¾“å‡º: 3<br>è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ â€œwkeâ€ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚<br>è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œâ€pwkeâ€ æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚<br>ç¤ºä¾‹ 4:</p><p>è¾“å…¥: s = â€œâ€<br>è¾“å‡º: 0</p><p><strong>è‡ªå·±å†™çš„ç¬¨æ–¹æ³•,æš´åŠ›æ³•æ±‚è§£ï¼Œéå†æ³•æ±‚è§£å­ä¸²</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(s.equals(<span class="string">""</span>))<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;Character&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;s.length(); i++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j&lt;s.length(); j++){</span><br><span class="line">                <span class="keyword">if</span>(set.contains(s.charAt(j))){</span><br><span class="line">                    set.clear();</span><br><span class="line">                    <span class="keyword">if</span>(count&gt;max)max = count;</span><br><span class="line">                    count = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    set.add(s.charAt(j));</span><br><span class="line">                    count++;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(count&gt;max)max = count;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ‰§è¡Œç”¨æ—¶ï¼š73 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†14.95%çš„ç”¨æˆ·</p><p>å†…å­˜æ¶ˆè€—ï¼š39.1 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†12.41%çš„ç”¨æˆ·</p><p><strong>å®˜æ–¹é¢˜è§£ï¼Œæ”¹è¿›æ–¹æ³•ï¼Œæ»‘åŠ¨çª—å£</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>{</span><br><span class="line">        <span class="comment">// å“ˆå¸Œé›†åˆï¼Œè®°å½•æ¯ä¸ªå­—ç¬¦æ˜¯å¦å‡ºç°è¿‡</span></span><br><span class="line">        Set&lt;Character&gt; occ = <span class="keyword">new</span> HashSet&lt;Character&gt;();</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="comment">// å³æŒ‡é’ˆï¼Œåˆå§‹å€¼ä¸º -1ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨å­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œçš„å·¦ä¾§ï¼Œè¿˜æ²¡æœ‰å¼€å§‹ç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">int</span> rk = -<span class="number">1</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) {</span><br><span class="line">            <span class="keyword">if</span> (i != <span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨ä¸€æ ¼ï¼Œç§»é™¤ä¸€ä¸ªå­—ç¬¦,ç›®çš„æ˜¯ä¸ºäº†å°†ç¬¬ä¸€ä¸ªé‡å¤å­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®ä¹‹å‰çš„å­—ç¬¦å…¨éƒ¨åˆ é™¤</span></span><br><span class="line">                occ.remove(s.charAt(i - <span class="number">1</span>));</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">while</span> (rk + <span class="number">1</span> &lt; n &amp;&amp; !occ.contains(s.charAt(rk + <span class="number">1</span>))) {</span><br><span class="line">                <span class="comment">// ä¸æ–­åœ°ç§»åŠ¨å³æŒ‡é’ˆ</span></span><br><span class="line">                occ.add(s.charAt(rk + <span class="number">1</span>));</span><br><span class="line">                ++rk;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// ç¬¬ i åˆ° rk ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæé•¿çš„æ— é‡å¤å­—ç¬¦å­ä¸²</span></span><br><span class="line">            ans = Math.max(ans, rk - i + <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>ä¸€ç‚¹ç‚¹æ€»ç»“</strong></p><blockquote><p>çœ‹è§å‡ºç°æ¬¡æ•°ï¼šè”æƒ³åˆ°æ•£åˆ—è¡¨</p><p>æ¶‰åŠå­ä¸²ï¼šè”æƒ³åˆ°æ»‘åŠ¨çª—å£</p></blockquote><h3 id="4-å­—ç¬¦ä¸²ç›¸åŠ "><a href="#4-å­—ç¬¦ä¸²ç›¸åŠ " class="headerlink" title="4 å­—ç¬¦ä¸²ç›¸åŠ "></a>4 å­—ç¬¦ä¸²ç›¸åŠ </h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„éè´Ÿæ•´æ•° <code>num1</code> å’Œ<code>num2</code> ï¼Œè®¡ç®—å®ƒä»¬çš„å’Œã€‚</p><p><strong>è‡ªå·±å†™çš„ä½æ•ˆç‡ä»£ç ï¼ŒJavaå®ç°</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addStrings</span><span class="params">(String num1, String num2)</span> </span>{</span><br><span class="line">        StringBuffer s1 = <span class="keyword">new</span> StringBuffer(num1);</span><br><span class="line">        StringBuffer s2 = <span class="keyword">new</span> StringBuffer(num2);</span><br><span class="line">        StringBuffer ans = <span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">        <span class="keyword">int</span> len = s2.length()-s1.length()&gt;<span class="number">0</span>?s2.length()-s1.length():</span><br><span class="line">        s1.length()-s2.length();</span><br><span class="line">        <span class="comment">//å¤„ç†ä¸¤ä¸ªå­—ç¬¦ç©¿ä½æ•°ä¸åŒçš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) {</span><br><span class="line">             <span class="keyword">if</span> (s1.length()&gt;s2.length()){</span><br><span class="line">                 s2.insert(<span class="number">0</span>,<span class="string">'0'</span>);</span><br><span class="line">             }<span class="keyword">else</span>{</span><br><span class="line">                 s1.insert(<span class="number">0</span>,<span class="string">'0'</span>);</span><br><span class="line">             }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>,num;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = s1.length()-<span class="number">1</span>; i &gt;=<span class="number">0</span>; i--) {</span><br><span class="line">            num = s1.charAt(i)+s2.charAt(i)+carry-<span class="number">96</span>;</span><br><span class="line">            ans.insert(<span class="number">0</span>,(<span class="keyword">char</span>)(num%<span class="number">10</span>+<span class="number">48</span>));</span><br><span class="line">            carry = num/<span class="number">10</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(carry&gt;<span class="number">0</span>)ans.insert(<span class="number">0</span>,(<span class="keyword">char</span>)(carry+<span class="number">48</span>));</span><br><span class="line">        <span class="keyword">return</span> ans.toString();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>æ”¹è¿›å†™æ³•ï¼ŒåŒæŒ‡é’ˆ</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addStrings</span><span class="params">(String num1, String num2)</span> </span>{</span><br><span class="line">        StringBuffer ans = <span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">        <span class="comment">//å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å­—ç¬¦ç©¿æœ«å°¾</span></span><br><span class="line">        <span class="keyword">int</span> i = num1.length()-<span class="number">1</span>,j = num2.length()-<span class="number">1</span>,add = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//add!=0ï¼Œæœ€åä¸€æ¬¡è‹¥addè¿›ä½ä¸ä¸ºé›¶ï¼Œä¼šå¤šå¢åŠ ä¸€ä½</span></span><br><span class="line">        <span class="keyword">while</span>(i&gt;=<span class="number">0</span> || j&gt;=<span class="number">0</span> || add!=<span class="number">0</span>){</span><br><span class="line">            <span class="keyword">int</span> a = i &gt;= <span class="number">0</span>?num1.charAt(i) - <span class="string">'0'</span>:<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> b = j &gt;= <span class="number">0</span>?num2.charAt(j) - <span class="string">'0'</span>:<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> res = a + b + add;</span><br><span class="line">            ans.insert(<span class="number">0</span>,(<span class="keyword">char</span>)(res%<span class="number">10</span>+<span class="number">48</span>));</span><br><span class="line">            add = res/<span class="number">10</span>;</span><br><span class="line">            --i;</span><br><span class="line">            --j;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> ans.toString();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>å¯¹æ¯”é“¾è¡¨é¢˜ä¸­çš„ â€œä¸¤æ•°ç›¸åŠ â€</p></blockquote><h2 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h2><h3 id="1-ä¸¤æ•°ç›¸åŠ "><a href="#1-ä¸¤æ•°ç›¸åŠ " class="headerlink" title="1 ä¸¤æ•°ç›¸åŠ "></a>1 ä¸¤æ•°ç›¸åŠ </h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™ä½ ä¸¤ä¸ª éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚</p><p>è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚</p><p>ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚</p><p> <img src="https://gitee.com/rain-sky/images/raw/master/20210712174531.png"></p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šl1 = [2,4,3], l2 = [5,6,4]<br>è¾“å‡ºï¼š[7,0,8]<br>è§£é‡Šï¼š342 + 465 = 807.</p><p><strong>Javaè§£ç­”</strong></p><p>è‡ªå·±å†™çš„åˆ†æƒ…å†µè®¨è®ºæ³•ï¼Œå°šä¸ç¾è§‚çš„ä»£ç ï¼Œä»£ç é‡å¤åº¦è¿‡é«˜</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>{</span><br><span class="line">        ListNode head = <span class="keyword">null</span>, tail = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> vals = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="keyword">null</span> || l2 != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">if</span> ( head == <span class="keyword">null</span>){</span><br><span class="line">                vals = (l1.val+l2.val+carry)%<span class="number">10</span>;</span><br><span class="line">                carry = (l1.val+l2.val+carry)/<span class="number">10</span>;</span><br><span class="line">                head = tail = <span class="keyword">new</span> ListNode(vals);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(l1 != <span class="keyword">null</span> &amp;&amp; l2 != <span class="keyword">null</span>){</span><br><span class="line">                vals = (l1.val+l2.val + carry)%<span class="number">10</span>;</span><br><span class="line">                carry = (l1.val+l2.val + carry)/<span class="number">10</span>;</span><br><span class="line">                tail.next = <span class="keyword">new</span> ListNode(vals);</span><br><span class="line">                tail = tail.next;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(l1 != <span class="keyword">null</span> &amp;&amp; l2 == <span class="keyword">null</span>){</span><br><span class="line">                vals = (l1.val + carry)%<span class="number">10</span>;</span><br><span class="line">                carry = (l1.val+carry)/<span class="number">10</span>;</span><br><span class="line">                tail.next = <span class="keyword">new</span> ListNode(vals);</span><br><span class="line">                tail = tail.next;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(l1 == <span class="keyword">null</span> &amp;&amp; l2 != <span class="keyword">null</span>){</span><br><span class="line">                vals = (l2.val + carry)%<span class="number">10</span>;</span><br><span class="line">                carry = (l2.val+carry)/<span class="number">10</span>;</span><br><span class="line">                tail.next = <span class="keyword">new</span> ListNode(vals);</span><br><span class="line">                tail = tail.next;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span>(l1!=<span class="keyword">null</span>)l1 = l1.next;</span><br><span class="line">            <span class="keyword">if</span>(l2!=<span class="keyword">null</span>)l2 = l2.next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (carry &gt; <span class="number">0</span>) {</span><br><span class="line">            tail.next = <span class="keyword">new</span> ListNode(carry);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>æ‰§è¡Œæ•ˆç‡ï¼š</p></blockquote><p>æ‰§è¡Œç”¨æ—¶ï¼š2 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†99.77%çš„ç”¨æˆ·</p><p>å†…å­˜æ¶ˆè€—ï¼š38.6 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†76.85%çš„ç”¨æˆ·</p><p><strong>ä¼˜åŒ–ç‰ˆ</strong></p><p>ä»£ç é‡å¤åº¦é™ä½</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>{</span><br><span class="line">        ListNode head = <span class="keyword">null</span>, tail = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="keyword">null</span> || l2 != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">int</span> n1 = l1 != <span class="keyword">null</span> ? l1.val : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> n2 = l2 != <span class="keyword">null</span> ? l2.val : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> sum = n1 + n2 + carry;</span><br><span class="line">            <span class="keyword">if</span> (head == <span class="keyword">null</span>) {</span><br><span class="line">                head = tail = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                tail.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">                tail = tail.next;</span><br><span class="line">            }</span><br><span class="line">            carry = sum / <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span> (l1 != <span class="keyword">null</span>) l1 = l1.next;</span><br><span class="line">            <span class="keyword">if</span> (l2 != <span class="keyword">null</span>) l2 = l2.next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (carry &gt; <span class="number">0</span>) {</span><br><span class="line">            tail.next = <span class="keyword">new</span> ListNode(carry);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-åˆ¤æ–­å›æ–‡é“¾è¡¨"><a href="#2-åˆ¤æ–­å›æ–‡é“¾è¡¨" class="headerlink" title="2 åˆ¤æ–­å›æ–‡é“¾è¡¨"></a>2 åˆ¤æ–­å›æ–‡é“¾è¡¨</h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>è¯·åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: <span class="number">1</span>-&gt;<span class="number">2</span></span><br><span class="line">è¾“å‡º: <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2:</strong></p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: <span class="number">1</span>-&gt;<span class="number">2</span>-&gt;<span class="number">2</span>-&gt;<span class="number">1</span></span><br><span class="line">è¾“å‡º: <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><p><strong>Javaåˆ©ç”¨å †æ ˆè§£ç­”</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(ListNode head)</span> </span>{</span><br><span class="line">        LinkedList&lt;Integer&gt; stack = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        ListNode tmp = head;</span><br><span class="line">        <span class="keyword">while</span>(tmp!=<span class="keyword">null</span>){</span><br><span class="line">            stack.push(tmp.val);</span><br><span class="line">            tmp = tmp.next;</span><br><span class="line">        }</span><br><span class="line">        tmp = head;</span><br><span class="line">        <span class="keyword">while</span>(tmp!=<span class="keyword">null</span>){</span><br><span class="line">            <span class="keyword">if</span>(tmp.val!=stack.pop().intValue()){</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            }</span><br><span class="line">            tmp=tmp.next;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>Javaæ•°ç»„è§£ç­”</strong></p><h2 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®š <em>n</em> ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]<br>è¾“å‡ºï¼š6<br>è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚ </p><p><strong>Cè§£æ³•</strong></p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>* height, <span class="keyword">int</span> heightSize)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(heightSize==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> left[heightSize];</span><br><span class="line">    <span class="keyword">int</span> right[heightSize];</span><br><span class="line">    left[<span class="number">0</span>] = height[<span class="number">0</span>],right[heightSize<span class="number">-1</span>] = height[heightSize<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; heightSize;i++){</span><br><span class="line">        left[i] = fmax(left[i - <span class="number">1</span>], height[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = heightSize - <span class="number">2</span>; j&gt;=<span class="number">0</span>; j--){</span><br><span class="line">        right[j] = fmax(right[j + <span class="number">1</span>],height[j]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k&lt;heightSize; k++){</span><br><span class="line">        sum+=fmin(left[k], right[k]) - height[k];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="äºŒåˆ†æœç´¢"><a href="#äºŒåˆ†æœç´¢" class="headerlink" title="äºŒåˆ†æœç´¢"></a>äºŒåˆ†æœç´¢</h2><h3 id="704-äºŒåˆ†æŸ¥æ‰¾"><a href="#704-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="704. äºŒåˆ†æŸ¥æ‰¾"></a><a href="https://leetcode-cn.com/problems/binary-search/">704. äºŒåˆ†æŸ¥æ‰¾</a></h3><p>ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target  ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚</p><p>è¾“å…¥: nums = [-1,0,3,5,9,12], target = 9<br>è¾“å‡º: 4</p><p>è¾“å…¥: nums = [-1,0,3,5,9,12], target = 2<br>è¾“å‡º: -1<br>è§£é‡Š: 2 ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -1</p><p><strong>Javaè§£æ³•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> head = <span class="number">0</span>,p;</span><br><span class="line">        <span class="keyword">int</span> end = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(head&lt;=end){</span><br><span class="line">            p = (head+end)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(target&lt;nums[p]){</span><br><span class="line">                end = p-<span class="number">1</span>;</span><br><span class="line">            }<span class="keyword">if</span>(target&gt;nums[p]){</span><br><span class="line">                head = p+<span class="number">1</span>;</span><br><span class="line">            }<span class="keyword">if</span>(target==nums[p]){</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ•°ç»„&quot;&gt;&lt;a href=&quot;#æ•°ç»„&quot; class=&quot;headerlink&quot; title=&quot;æ•°ç»„&quot;&gt;&lt;/a&gt;æ•°ç»„&lt;/h2&gt;&lt;h3 id=&quot;1-ä¸¤æ•°ä¹‹å’Œ&quot;&gt;&lt;a href=&quot;#1-ä¸¤æ•°ä¹‹å’Œ&quot; class=&quot;headerlink&quot; title=&quot;1 ä¸¤æ•°ä¹‹å’Œ&quot;&gt;&lt;/a&gt;1</summary>
      
    
    
    
    
    <category term="ç®—æ³•" scheme="https://rain-sky.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="leetcode" scheme="https://rain-sky.github.io/tags/leetcode/"/>
    
  </entry>
  
  <entry>
    <title>å…¨å¹²å·¥ç¨‹å¸ˆè¿›é˜¶-Vue</title>
    <link href="https://rain-sky.github.io/2021/06/24/%E5%85%A8%E5%B9%B2%E5%B7%A5%E7%A8%8B%E5%B8%88%E8%BF%9B%E9%98%B6-Vue/"/>
    <id>https://rain-sky.github.io/2021/06/24/%E5%85%A8%E5%B9%B2%E5%B7%A5%E7%A8%8B%E5%B8%88%E8%BF%9B%E9%98%B6-Vue/</id>
    <published>2021-06-24T02:08:45.000Z</published>
    <updated>2021-07-11T09:16:26.370Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç›¸å…³é“¾æ¥</p><p>Vue: <a href="https://vuejs.org/">https://vuejs.org/</a></p><p>webpackï¼š<a href="https://webpack.docschina.org/">https://webpack.docschina.org/</a></p><p>Vueä¸­æ–‡ï¼š<a href="https://cn.vuejs.org/">https://cn.vuejs.org/</a></p><p>Axios: <a href="http://www.axios-js.com/">http://www.axios-js.com/</a></p><p>ElementUI : <a href="https://element-plus.gitee.io/#/zh-CN">https://element-plus.gitee.io/#/zh-CN</a> </p><p>vue-element-admin: <a href="https://panjiachen.github.io/vue-element-admin-site/zh/">https://panjiachen.github.io/vue-element-admin-site/zh/</a></p></blockquote><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a><a href="https://cn.vuejs.org/v2/guide/installation.html#CDN">CDN</a></h3><p>å¯¹äºåˆ¶ä½œåŸå‹æˆ–å­¦ä¹ ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a><a href="https://cn.vuejs.org/v2/guide/installation.html#NPM">NPM</a></h3><p>åœ¨ç”¨ Vue æ„å»ºå¤§å‹åº”ç”¨æ—¶æ¨èä½¿ç”¨ NPM å®‰è£…[<a href="https://cn.vuejs.org/v2/guide/installation.html#footnote-1">1]</a>ã€‚NPM èƒ½å¾ˆå¥½åœ°å’Œè¯¸å¦‚ <a href="https://webpack.js.org/">webpack</a> æˆ– <a href="http://browserify.org/">Browserify</a> æ¨¡å—æ‰“åŒ…å™¨é…åˆä½¿ç”¨ã€‚åŒæ—¶ Vue ä¹Ÿæä¾›é…å¥—å·¥å…·æ¥å¼€å‘<a href="https://cn.vuejs.org/v2/guide/single-file-components.html">å•æ–‡ä»¶ç»„ä»¶</a>ã€‚</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æœ€æ–°ç¨³å®šç‰ˆ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install vue</span></span><br></pre></td></tr></tbody></table></figure><h3 id="å¯¹ä¸åŒæ„å»ºç‰ˆæœ¬çš„è§£é‡Š"><a href="#å¯¹ä¸åŒæ„å»ºç‰ˆæœ¬çš„è§£é‡Š" class="headerlink" title="å¯¹ä¸åŒæ„å»ºç‰ˆæœ¬çš„è§£é‡Š"></a><a href="https://cn.vuejs.org/v2/guide/installation.html#%E5%AF%B9%E4%B8%8D%E5%90%8C%E6%9E%84%E5%BB%BA%E7%89%88%E6%9C%AC%E7%9A%84%E8%A7%A3%E9%87%8A">å¯¹ä¸åŒæ„å»ºç‰ˆæœ¬çš„è§£é‡Š</a></h3><p>åœ¨ <a href="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/">NPM åŒ…çš„ <code>dist/</code> ç›®å½•</a>ä½ å°†ä¼šæ‰¾åˆ°å¾ˆå¤šä¸åŒçš„ Vue.js æ„å»ºç‰ˆæœ¬ã€‚è¿™é‡Œåˆ—å‡ºäº†å®ƒä»¬ä¹‹é—´çš„å·®åˆ«ï¼š</p><table><thead><tr><th align="left"></th><th align="left">UMD</th><th align="left">CommonJS</th><th align="left">ES Module (åŸºäºæ„å»ºå·¥å…·ä½¿ç”¨)</th><th align="left">ES Module (ç›´æ¥ç”¨äºæµè§ˆå™¨)</th></tr></thead><tbody><tr><td align="left"><strong>å®Œæ•´ç‰ˆ</strong></td><td align="left">vue.js</td><td align="left">vue.common.js</td><td align="left">vue.esm.js</td><td align="left">vue.esm.browser.js</td></tr><tr><td align="left"><strong>åªåŒ…å«è¿è¡Œæ—¶ç‰ˆ</strong></td><td align="left">vue.runtime.js</td><td align="left">vue.runtime.common.js</td><td align="left">vue.runtime.esm.js</td><td align="left">-</td></tr><tr><td align="left"><strong>å®Œæ•´ç‰ˆ (ç”Ÿäº§ç¯å¢ƒ)</strong></td><td align="left">vue.min.js</td><td align="left">-</td><td align="left">-</td><td align="left">vue.esm.browser.min.js</td></tr><tr><td align="left"><strong>åªåŒ…å«è¿è¡Œæ—¶ç‰ˆ (ç”Ÿäº§ç¯å¢ƒ)</strong></td><td align="left">vue.runtime.min.js</td><td align="left">-</td><td align="left">-</td><td align="left">-</td></tr></tbody></table><h3 id="æœ¯è¯­"><a href="#æœ¯è¯­" class="headerlink" title="æœ¯è¯­"></a><a href="https://cn.vuejs.org/v2/guide/installation.html#%E6%9C%AF%E8%AF%AD">æœ¯è¯­</a></h3><ul><li><strong>å®Œæ•´ç‰ˆ</strong>ï¼šåŒæ—¶åŒ…å«ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶çš„ç‰ˆæœ¬ã€‚</li><li><strong>ç¼–è¯‘å™¨</strong>ï¼šç”¨æ¥å°†æ¨¡æ¿å­—ç¬¦ä¸²ç¼–è¯‘æˆä¸º JavaScript æ¸²æŸ“å‡½æ•°çš„ä»£ç ã€‚</li><li><strong>è¿è¡Œæ—¶</strong>ï¼šç”¨æ¥åˆ›å»º Vue å®ä¾‹ã€æ¸²æŸ“å¹¶å¤„ç†è™šæ‹Ÿ DOM ç­‰çš„ä»£ç ã€‚åŸºæœ¬ä¸Šå°±æ˜¯é™¤å»ç¼–è¯‘å™¨çš„å…¶å®ƒä¸€åˆ‡ã€‚</li></ul><blockquote><p>å­¦ä¹ å‚ç…§å®˜æ–¹æ–‡æ¡£:<a href="https://vuejs.org/">https://vuejs.org/</a></p></blockquote><h2 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h2><p><strong>v-if</strong></p><p>v-ifæŒ‡ä»¤ç”¨äºæ¡ä»¶æ€§åœ°æ¸²æŸ“ä¸€å—å†…å®¹ã€‚è¿™å—å†…å®¹åªä¼šåœ¨æŒ‡ä»¤çš„è¡¨è¾¾å¼è¿”å› truthy å€¼çš„æ—¶å€™è¢«æ¸²æŸ“ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">"awesome"</span>&gt;</span>Vue is awesome!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä»¥ç”¨ v-else æ·»åŠ ä¸€ä¸ªâ€œelse å—â€ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">"awesome"</span>&gt;</span>Vue is awesome!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span>Oh no ğŸ˜¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>v-eles å¿…é¡»è·Ÿåœ¨v-if ä¹‹åï¼Œå¦åˆ™ä¸è¢«è¯†åˆ«</p></blockquote><p>åœ¨ templateå…ƒç´ ä¸Šä½¿ç”¨ v-if æ¡ä»¶æ¸²æŸ“åˆ†ç»„</p><p>å› ä¸º <code>v-if</code> æ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œæ‰€ä»¥å¿…é¡»å°†å®ƒæ·»åŠ åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šã€‚ä½†æ˜¯å¦‚æœæƒ³åˆ‡æ¢å¤šä¸ªå…ƒç´ å‘¢ï¼Ÿæ­¤æ—¶å¯ä»¥æŠŠä¸€ä¸ª <code>&lt;template&gt;</code> å…ƒç´ å½“åšä¸å¯è§çš„åŒ…è£¹å…ƒç´ ï¼Œå¹¶åœ¨ä¸Šé¢ä½¿ç”¨ <code>v-if</code>ã€‚æœ€ç»ˆçš„æ¸²æŸ“ç»“æœå°†ä¸åŒ…å« <code>&lt;template&gt;</code> å…ƒç´ ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">"ok"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>v-show</strong></p><p>å¦ä¸€ä¸ªç”¨äºæ ¹æ®æ¡ä»¶å±•ç¤ºå…ƒç´ çš„é€‰é¡¹æ˜¯ v-showæŒ‡ä»¤ã€‚ç”¨æ³•å¤§è‡´ä¸€æ ·ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">"ok"</span>&gt;</span>Hello!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸åŒçš„æ˜¯å¸¦æœ‰ v-show çš„å…ƒç´ å§‹ç»ˆä¼šè¢«æ¸²æŸ“å¹¶ä¿ç•™åœ¨ DOM ä¸­ã€‚v-showåªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„ CSS property displayã€‚</p><p><strong>v-show vs v-if</strong></p><p><code>v-if</code> æ˜¯â€œçœŸæ­£â€çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºã€‚</p><p><code>v-if</code> ä¹Ÿæ˜¯<strong>æƒ°æ€§çš„</strong>ï¼šå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>v-show</code> å°±ç®€å•å¾—å¤šâ€”â€”ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäº CSS è¿›è¡Œåˆ‡æ¢ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>v-if</code> æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ <code>v-show</code> æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ <code>v-show</code> è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ä½¿ç”¨ <code>v-if</code> è¾ƒå¥½ã€‚</p><h2 id="åˆ—è¡¨æ¸²æŸ“"><a href="#åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="åˆ—è¡¨æ¸²æŸ“"></a>åˆ—è¡¨æ¸²æŸ“</h2><p><strong>ä½¿ç”¨v-for æŠŠæ•°ç»„å¯¹åº”ä¸ºä¸€ç»„å…ƒç´ è¿›è¡Œæ¸²æŸ“</strong></p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item, index) in items"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">              {{item.message}}</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue({</span></span><br><span class="line"><span class="javascript">            el:<span class="string">"#app"</span>,</span></span><br><span class="line">            data:{</span><br><span class="line">                items:[</span><br><span class="line"><span class="javascript">                    {<span class="attr">message</span>:<span class="string">"ä½ å¥½ä¸–ç•Œ"</span>},</span></span><br><span class="line"><span class="javascript">                    {<span class="attr">message</span>:<span class="string">"æ¨±èŠ±åº„çš„å® ç‰©å¥³å­©"</span>},</span></span><br><span class="line"><span class="javascript">                    {<span class="attr">message</span>:<span class="string">"é’å‡ºäºè“"</span>}</span></span><br><span class="line">                ]</span><br><span class="line">            }</span><br><span class="line">        })</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h2><h3 id="ç»„ä»¶åŸºç¡€"><a href="#ç»„ä»¶åŸºç¡€" class="headerlink" title="ç»„ä»¶åŸºç¡€"></a>ç»„ä»¶åŸºç¡€</h3><h4 id="ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹"><a href="#ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹" class="headerlink" title="ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹"></a>ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªåä¸º button-counter çš„æ–°ç»„ä»¶</span></span><br><span class="line">Vue.component(<span class="string">'button-counter'</span>, {</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  template: <span class="string">'&lt;button v-on:click="count++"&gt;You clicked me {{ count }} times.&lt;/button&gt;'</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><blockquote><p>ç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹ï¼Œä¸”å¸¦æœ‰ä¸€ä¸ªåå­—ï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ <button-counter>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªé€šè¿‡ new Vue`åˆ›å»ºçš„ Vue æ ¹å®ä¾‹ä¸­ï¼ŒæŠŠè¿™ä¸ªç»„ä»¶ä½œä¸ºè‡ªå®šä¹‰å…ƒç´ æ¥ä½¿ç”¨.</button-counter></p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"components-demo"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å› ä¸ºç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹ï¼Œæ‰€ä»¥å®ƒä»¬ä¸ new Vue æ¥æ”¶ç›¸åŒçš„é€‰é¡¹ï¼Œä¾‹å¦‚ <code>data</code>ã€<code>computed</code>ã€<code>watch</code>ã€<code>methods</code> ä»¥åŠç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚ä»…æœ‰çš„ä¾‹å¤–æ˜¯åƒ <code>el</code> è¿™æ ·æ ¹å®ä¾‹ç‰¹æœ‰çš„é€‰é¡¹ã€‚</p></blockquote><h4 id="dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°"><a href="#dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°" class="headerlink" title="dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°"></a>dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°</h4><p>å½“æˆ‘ä»¬å®šä¹‰è¿™ä¸ª <code>&lt;button-counter&gt;</code> ç»„ä»¶æ—¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°å®ƒçš„ <code>data</code> å¹¶ä¸æ˜¯åƒè¿™æ ·ç›´æ¥æä¾›ä¸€ä¸ªå¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data: {</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œ<strong>ä¸€ä¸ªç»„ä»¶çš„ <code>data</code> é€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°</strong>ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="é€šè¿‡propå‘å­ç»„ä»¶ä¼ é€’æ•°æ®"><a href="#é€šè¿‡propå‘å­ç»„ä»¶ä¼ é€’æ•°æ®" class="headerlink" title="é€šè¿‡propå‘å­ç»„ä»¶ä¼ é€’æ•°æ®"></a>é€šè¿‡propå‘å­ç»„ä»¶ä¼ é€’æ•°æ®</h4><p>å¦‚åˆ›å»ºä¸€ä¸ªåšæ–‡ç»„ä»¶ä¸ºä¾‹ï¼Œéœ€è¦å‘å­ç»„ä»¶ä¼ é€’åšæ–‡ä¿¡æ¯,propsä¸­å±æ€§æ— ä¸Šé™</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'blog-post'</span>, {</span><br><span class="line">  props: [<span class="string">'title'</span>],</span><br><span class="line">  template: <span class="string">'&lt;h3&gt;{{ title }}&lt;/h3&gt;'</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><p>ä¸€ä¸ª prop è¢«æ³¨å†Œä¹‹åï¼Œä½ å°±å¯ä»¥åƒè¿™æ ·æŠŠæ•°æ®ä½œä¸ºä¸€ä¸ªè‡ªå®šä¹‰ attribute ä¼ é€’è¿›æ¥ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-post title=<span class="string">"My journey with Vue"</span>&gt;&lt;/blog-post&gt;</span><br></pre></td></tr></tbody></table></figure><p>ç„¶è€Œåœ¨ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½åœ¨ <code>data</code> é‡Œæœ‰ä¸€ä¸ªåšæ–‡çš„æ•°ç»„ï¼š</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">  el: <span class="string">'#blog-post-demo'</span>,</span><br><span class="line">  data: {</span><br><span class="line">    posts: [</span><br><span class="line">      { <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">'My journey with Vue'</span> },</span><br><span class="line">      { <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">'Blogging with Vue'</span> },</span><br><span class="line">      { <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">'Why Vue is so fun'</span> }</span><br><span class="line">    ]</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><p>å¹¶æƒ³è¦ä¸ºæ¯ç¯‡åšæ–‡æ¸²æŸ“ä¸€ä¸ªç»„ä»¶ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-post</span><br><span class="line">  v-for="post in posts"</span><br><span class="line">  v-bind:key="post.id"</span><br><span class="line">  v-bind:title="post.title"</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">blog-post</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>v-bind</code> æ¥åŠ¨æ€ä¼ é€’ propã€‚è¿™åœ¨ä½ ä¸€å¼€å§‹ä¸æ¸…æ¥šè¦æ¸²æŸ“çš„å…·ä½“å†…å®¹ï¼Œæ¯”å¦‚<a href="https://codesandbox.io/s/github/vuejs/vuejs.org/tree/master/src/v2/examples/vue-20-component-blog-post-example">ä»ä¸€ä¸ª API è·å–åšæ–‡åˆ—è¡¨</a>çš„æ—¶å€™ï¼Œæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><h4 id="ç›‘å¬å­ç»„ä»¶äº‹ä»¶"><a href="#ç›‘å¬å­ç»„ä»¶äº‹ä»¶" class="headerlink" title="ç›‘å¬å­ç»„ä»¶äº‹ä»¶"></a>ç›‘å¬å­ç»„ä»¶äº‹ä»¶</h4><p>å¦‚ä¸‹ä¾‹å­:</p><p>åœ¨æˆ‘ä»¬å¼€å‘ <blog-post> ç»„ä»¶æ—¶ï¼Œå®ƒçš„ä¸€äº›åŠŸèƒ½å¯èƒ½è¦æ±‚æˆ‘ä»¬å’Œçˆ¶çº§ç»„ä»¶è¿›è¡Œæ²Ÿé€šã€‚ä¾‹å¦‚æˆ‘ä»¬å¯èƒ½ä¼šå¼•å…¥ä¸€ä¸ªè¾…åŠ©åŠŸèƒ½æ¥æ”¾å¤§åšæ–‡çš„å­—å·ï¼ŒåŒæ—¶è®©é¡µé¢çš„å…¶å®ƒéƒ¨åˆ†ä¿æŒé»˜è®¤çš„å­—å·ã€‚</blog-post></p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vueæ’æ§½,è‡ªå®šä¹‰äº‹ä»¶<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å‰ç«¯ï¼Œ --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ç”±äºç»„ä»¶æ— æ³•è®¿é—®åˆ°Vueå®ä¾‹ä¸­çš„æ–¹æ³•ï¼Œè§£å†³åŠæ³•ï¼Œè‡ªå®šä¹‰äº‹ä»¶ --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- åœ¨è§†å›¾ä¸­è‡ªå®šä¹‰äº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶ä¸­çš„æ–¹æ³•ï¼Œå¹¶æŠŠè‡ªå®šä¹‰äº‹ä»¶èµ‹å€¼ä¸ºVueå®ä¾‹ä¸­çš„æ–¹æ³• --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å­ç»„ä»¶å¯ä»¥é€šè¿‡è°ƒç”¨å†…å»ºçš„ $emit æ–¹æ³•å¹¶ä¼ å…¥äº‹ä»¶åç§°æ¥è§¦å‘ä¸€ä¸ªäº‹ä»¶ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"blog-posts-events-demo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">"{ fontSize: postFontSize + 'em' }"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- è®©æˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªenlarge-textäº‹ä»¶ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">blog-post</span> <span class="attr">v-for</span>=<span class="string">"post in posts"</span> <span class="attr">v-bind:key</span>=<span class="string">"post.id"</span> <span class="attr">v-bind:post</span>=<span class="string">"post"</span> <span class="attr">v-on:enlarge-text</span>=<span class="string">"postFontSize += 0.1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">blog-post</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    Vue.component(<span class="string">'blog-post'</span>, {</span></span><br><span class="line"><span class="javascript">      props: [<span class="string">'post'</span>],</span></span><br><span class="line">      template: `</span><br><span class="line"><span class="javascript">                &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"blog-post"</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><span class="template-variable">{{ <span class="name">post.title</span> }}</span><span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"$emit('enlarge-text')"</span>&gt;</span></span></span></span><br><span class="line">                    Enlarge text</span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">"post.content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">                `</span><br><span class="line">    })</span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue({</span></span><br><span class="line"><span class="javascript">      el: <span class="string">'#blog-posts-events-demo'</span>,</span></span><br><span class="line">      data: {</span><br><span class="line">        posts: [</span><br><span class="line"><span class="javascript">          { <span class="attr">id</span>: <span class="number">1001</span>, <span class="string">'title'</span>: <span class="string">"æœ‰æ‰‹ä½ å°±è¡Œ"</span>, <span class="attr">content</span>: <span class="string">"å¥½å§ï¼Œæœ‰æ‰‹ï¼Œä½†è¿˜æ˜¯ä¸å¤ªè¡Œå‘¢~"</span> }</span></span><br><span class="line">        ],</span><br><span class="line">        postFontSize: 1</span><br><span class="line">      },</span><br><span class="line">    })</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="ä½¿ç”¨äº‹ä»¶æŠ›å‡ºä¸€ä¸ªå€¼"><a href="#ä½¿ç”¨äº‹ä»¶æŠ›å‡ºä¸€ä¸ªå€¼" class="headerlink" title="ä½¿ç”¨äº‹ä»¶æŠ›å‡ºä¸€ä¸ªå€¼"></a>ä½¿ç”¨äº‹ä»¶æŠ›å‡ºä¸€ä¸ªå€¼</h4><p>æœ‰çš„æ—¶å€™ç”¨ä¸€ä¸ªäº‹ä»¶æ¥æŠ›å‡ºä¸€ä¸ªç‰¹å®šçš„å€¼æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯èƒ½æƒ³è®© <code>&lt;blog-post&gt;</code> ç»„ä»¶å†³å®šå®ƒçš„æ–‡æœ¬è¦æ”¾å¤§å¤šå°‘ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨ <code>$emit</code> çš„ç¬¬äºŒä¸ªå‚æ•°æ¥æä¾›è¿™ä¸ªå€¼ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-on:click="$emit('enlarge-text', 0.1)"&gt;</span><br><span class="line">  Enlarge text</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åå½“åœ¨çˆ¶çº§ç»„ä»¶ç›‘å¬è¿™ä¸ªäº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>$event</code> è®¿é—®åˆ°è¢«æŠ›å‡ºçš„è¿™ä¸ªå€¼ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-post</span><br><span class="line">  ...</span><br><span class="line">  v-on:enlarge-text="postFontSize += $event"</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">blog-post</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å½“è¿™ä¸ªæ˜¯ä¸ªå‡½æ•°çš„æ—¶å€™</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-post</span><br><span class="line">  ...</span><br><span class="line">  v-on:enlarge-text="onEnlargeText"</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">blog-post</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>é‚£ä¹ˆè¿™ä¸ªå€¼å°†ä¼šä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥è¿™ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods: {</span><br><span class="line">  onEnlargeText: <span class="function"><span class="keyword">function</span> (<span class="params">enlargeAmount</span>) </span>{</span><br><span class="line">    <span class="built_in">this</span>.postFontSize += enlargeAmount</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="åœ¨ç»„ä»¶ä¸Šä½¿ç”¨v-model"><a href="#åœ¨ç»„ä»¶ä¸Šä½¿ç”¨v-model" class="headerlink" title="åœ¨ç»„ä»¶ä¸Šä½¿ç”¨v-model"></a>åœ¨ç»„ä»¶ä¸Šä½¿ç”¨v-model</h4><p>è‡ªå®šä¹‰äº‹ä»¶ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºæ”¯æŒ <code>v-model</code> çš„è‡ªå®šä¹‰è¾“å…¥ç»„ä»¶ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"searchText"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç­‰ä»·äº</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  v-bind:value="searchText"</span><br><span class="line">  v-on:input="searchText = $event.target.value"</span><br><span class="line">&gt;</span><br></pre></td></tr></tbody></table></figure><h2 id="è®¡ç®—å±æ€§"><a href="#è®¡ç®—å±æ€§" class="headerlink" title="è®¡ç®—å±æ€§"></a>è®¡ç®—å±æ€§</h2><p>æ¨¡æ¿å†…çš„è¡¨è¾¾å¼éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯è®¾è®¡å®ƒä»¬çš„åˆè¡·æ˜¯ç”¨äºç®€å•è¿ç®—çš„ã€‚åœ¨æ¨¡æ¿ä¸­æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ä¼šè®©æ¨¡æ¿è¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span></span><br><span class="line">  {{ message.split('').reverse().join('') }}</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œæ¨¡æ¿ä¸å†æ˜¯ç®€å•çš„å£°æ˜å¼é€»è¾‘ã€‚ä½ å¿…é¡»çœ‹ä¸€æ®µæ—¶é—´æ‰èƒ½æ„è¯†åˆ°ï¼Œè¿™é‡Œæ˜¯æƒ³è¦æ˜¾ç¤ºå˜é‡ message çš„ç¿»è½¬å­—ç¬¦ä¸²ã€‚å½“ä½ æƒ³è¦åœ¨æ¨¡æ¿ä¸­çš„å¤šå¤„åŒ…å«æ­¤ç¿»è½¬å­—ç¬¦ä¸²æ—¶ï¼Œå°±ä¼šæ›´åŠ éš¾ä»¥å¤„ç†ã€‚æ‰€ä»¥ï¼Œå¯¹äºä»»ä½•å¤æ‚é€»è¾‘ï¼Œä½ éƒ½åº”å½“ä½¿ç”¨<strong>è®¡ç®—å±æ€§</strong>ã€‚</p><p>For example</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>vueè®¡ç®—å±æ€§<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- methodsä¸­çš„æ˜¯æ–¹æ³• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>methodsä¸­çš„nowTime1: {{nowTime1()}}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¡ç®—å±æ€§ï¼Œé‡ç‚¹åœ¨äºå±æ€§ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>computedä¸­çš„nowTime2: {{nowTime2}}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue({</span></span><br><span class="line"><span class="javascript">            el:<span class="string">"#app"</span>,</span></span><br><span class="line"><span class="javascript">            <span class="comment">// Model</span></span></span><br><span class="line">            data:{</span><br><span class="line"><span class="javascript">                message:<span class="string">"hello world"</span>,</span></span><br><span class="line">            },</span><br><span class="line">            methods: {</span><br><span class="line"><span class="javascript">                nowTime1:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="built_in">Date</span>.now();</span></span><br><span class="line">                }</span><br><span class="line">            },</span><br><span class="line">            computed:{</span><br><span class="line"><span class="javascript">                <span class="comment">// å½“è®¡ç®—å±æ€§ä¸­æœ‰æ”¹å˜æ‰ä¼šé‡æ–°è®¡ç®—ï¼Œç›¸å½“äºç¼“å­˜</span></span></span><br><span class="line"><span class="javascript">                nowTime2:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.message;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="built_in">Date</span>.now();</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        })</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="è®¡ç®—å±æ€§ç¼“å­˜-vs-æ–¹æ³•"><a href="#è®¡ç®—å±æ€§ç¼“å­˜-vs-æ–¹æ³•" class="headerlink" title="è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³•"></a><a href="https://cn.vuejs.org/v2/guide/computed.html#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E7%BC%93%E5%AD%98-vs-%E6%96%B9%E6%B3%95">è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³•</a></h3><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨æ–¹æ³•æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Reversed message: "{{ reversedMessage() }}"&lt;/p&gt;</span><br><span class="line">// åœ¨ç»„ä»¶ä¸­</span><br><span class="line">methods: {</span><br><span class="line">  reversedMessage: function () {</span><br><span class="line">    return this.message.split('').reverse().join('')</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æˆ‘ä»¬å¯ä»¥å°†åŒä¸€å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚ä¸¤ç§æ–¹å¼çš„æœ€ç»ˆç»“æœç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ç„¶è€Œï¼Œä¸åŒçš„æ˜¯<strong>è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„</strong>ã€‚åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚è¿™å°±æ„å‘³ç€åªè¦ <code>message</code> è¿˜æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¤šæ¬¡è®¿é—® <code>reversedMessage</code> è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</p><p>è¿™ä¹ŸåŒæ ·æ„å‘³ç€ä¸‹é¢çš„è®¡ç®—å±æ€§å°†ä¸å†æ›´æ–°ï¼Œå› ä¸º <code>Date.now()</code> ä¸æ˜¯å“åº”å¼ä¾èµ–ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: {</span><br><span class="line">  now: function () {</span><br><span class="line">    return Date.now()</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¯å½“è§¦å‘é‡æ–°æ¸²æŸ“æ—¶ï¼Œè°ƒç”¨æ–¹æ³•å°†<strong>æ€»ä¼š</strong>å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è®¡ç®—å±æ€§å‘¢"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è®¡ç®—å±æ€§å‘¢" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è®¡ç®—å±æ€§å‘¢"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è®¡ç®—å±æ€§å‘¢</h3><blockquote><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§çš„è®¡ç®—å±æ€§ <strong>A</strong>ï¼Œå®ƒéœ€è¦éå†ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„å¹¶åšå¤§é‡çš„è®¡ç®—ã€‚ç„¶åæˆ‘ä»¬å¯èƒ½æœ‰å…¶ä»–çš„è®¡ç®—å±æ€§ä¾èµ–äº <strong>A</strong>ã€‚å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œæˆ‘ä»¬å°†ä¸å¯é¿å…çš„å¤šæ¬¡æ‰§è¡Œ <strong>A</strong> çš„ getterï¼å¦‚æœä½ ä¸å¸Œæœ›æœ‰ç¼“å­˜ï¼Œè¯·ç”¨æ–¹æ³•æ¥æ›¿ä»£ã€‚</p></blockquote><h2 id="Class-ä¸-Style-ç»‘å®š"><a href="#Class-ä¸-Style-ç»‘å®š" class="headerlink" title="Class ä¸ Style ç»‘å®š"></a>Class ä¸ Style ç»‘å®š</h2><h3 id="å¯¹è±¡è¯­æ³•"><a href="#å¯¹è±¡è¯­æ³•" class="headerlink" title="å¯¹è±¡è¯­æ³•"></a><a href="https://cn.vuejs.org/v2/guide/class-and-style.html#%E5%AF%B9%E8%B1%A1%E8%AF%AD%E6%B3%95">å¯¹è±¡è¯­æ³•</a></h3><p>æˆ‘ä»¬å¯ä»¥ä¼ ç»™ v-bind:class ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥åŠ¨æ€åœ°åˆ‡æ¢ classï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:class="{ active: isActive }"&gt;&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šé¢çš„è¯­æ³•è¡¨ç¤ºactive è¿™ä¸ª class å­˜åœ¨ä¸å¦å°†å–å†³äºæ•°æ® property isActive çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy">truthiness</a>ã€‚</p><p>ä½ å¯ä»¥åœ¨å¯¹è±¡ä¸­ä¼ å…¥æ›´å¤šå­—æ®µæ¥åŠ¨æ€åˆ‡æ¢å¤šä¸ª classã€‚æ­¤å¤–ï¼Œv-bind:class æŒ‡ä»¤ä¹Ÿå¯ä»¥ä¸æ™®é€šçš„ class attribute å…±å­˜ã€‚å½“æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  class="static"</span><br><span class="line">  v-bind:class="{ active: isActive, 'text-danger': hasError }"</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å’Œå¦‚ä¸‹ dataï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data: {</span><br><span class="line">  isActive: true,</span><br><span class="line">  hasError: false</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç»“æœæ¸²æŸ“ä¸ºï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"static active"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å½“ isActiveæˆ–è€… hasError å˜åŒ–æ—¶ï¼Œclass åˆ—è¡¨å°†ç›¸åº”åœ°æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ hasErrorçš„å€¼ä¸º trueï¼Œclass åˆ—è¡¨å°†å˜ä¸º â€œstatic active text-dangerâ€ã€‚</p><hr><h2 id="vueæ’æ§½ä¸è‡ªå®šä¹‰äº‹ä»¶"><a href="#vueæ’æ§½ä¸è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="vueæ’æ§½ä¸è‡ªå®šä¹‰äº‹ä»¶"></a>vueæ’æ§½ä¸è‡ªå®šä¹‰äº‹ä»¶</h2><blockquote><p>For Example</p></blockquote><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vueæ’æ§½,è‡ªå®šä¹‰äº‹ä»¶<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‰ç«¯ï¼Œçº¯è§†å›¾ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç”±äºç»„ä»¶æ— æ³•è®¿é—®åˆ°Vueå®ä¾‹ä¸­çš„æ–¹æ³•ï¼Œè§£å†³åŠæ³•ï¼Œè‡ªå®šä¹‰äº‹ä»¶ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨è§†å›¾ä¸­è‡ªå®šä¹‰äº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶ä¸­çš„æ–¹æ³•ï¼Œå¹¶æŠŠè‡ªå®šä¹‰äº‹ä»¶èµ‹å€¼ä¸ºVueå®ä¾‹ä¸­çš„æ–¹æ³• --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-onå¯ç¼©å†™ä¸º@ï¼Œv-bindï¼šå¯ç¼©å†™ä¸º: --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">todo</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">todo-title</span> <span class="attr">slot</span>=<span class="string">"todo-title"</span> <span class="attr">v-bind:title</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;/<span class="name">todo-title</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">todo-items</span> <span class="attr">slot</span>=<span class="string">"todo-items"</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in items"</span> <span class="attr">v-on:remove</span>=<span class="string">"removeItem(index)"</span> <span class="attr">v-bind:item</span>=<span class="string">"item"</span> <span class="attr">v-bind:index</span>=<span class="string">"index"</span>&gt;</span><span class="tag">&lt;/<span class="name">todo-items</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">todo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">"todo"</span>, {</span></span><br><span class="line"><span class="handlebars"><span class="xml">            template:'<span class="tag">&lt;<span class="name">div</span>&gt;</span>\</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"todo-title"</span> &gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span>\</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span>\</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"todo-items"</span> &gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span>\</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>\</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span>'</span></span></span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">"todo-title"</span>, {</span></span><br><span class="line"><span class="javascript">            props:[<span class="string">'title'</span>],</span></span><br><span class="line"><span class="handlebars"><span class="xml">            template:'<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">{{<span class="name">title</span>}}</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>'</span></span></span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">"todo-items"</span>,{</span></span><br><span class="line"><span class="javascript">            props:[<span class="string">'item'</span>,<span class="string">'index'</span>],</span></span><br><span class="line"><span class="javascript">            <span class="comment">// æ— æ³•åœ¨ç»„ä»¶é‡Œæ‰ç”¨åˆ°ä¸‹é¢vmçš„removeæ–¹æ³•ï¼Œæ€ä¹ˆåŠï¼Œé€šè¿‡å‰ç«¯è‡ªå®šä¹‰äº‹ä»¶æ­æ¡¥</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            template:'<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><span class="template-variable">{{<span class="name">index</span>}}</span><span class="xml">ï¼š</span><span class="template-variable">{{<span class="name">item</span>}}</span><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"remove"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>',</span></span></span><br><span class="line">            methods:{</span><br><span class="line"><span class="javascript">                remove:<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>{</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// removeItem(idnex)ï¼Œå†™æ³•é”™è¯¯ï¼Œæ‰ç”¨ä¸åˆ°vmå®ä¾‹ä¸­çš„æ–¹æ³•</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.$emit(<span class="string">"remove"</span>,index);</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue({</span></span><br><span class="line"><span class="javascript">            el:<span class="string">"#app"</span>,</span></span><br><span class="line">            data:{</span><br><span class="line"><span class="javascript">                title:<span class="string">"ç•ªå‰§"</span>,</span></span><br><span class="line">                items:[</span><br><span class="line"><span class="javascript">                    <span class="string">"ä½ å¥½ä¸–ç•Œ"</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="string">"æ¨±èŠ±åº„çš„å® ç‰©å¥³å­©"</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="string">"é’å‡ºäºè“"</span></span></span><br><span class="line">                ]</span><br><span class="line">            },</span><br><span class="line">            methods: {</span><br><span class="line"><span class="javascript">                removeItem:<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>{</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.items.splice(index,<span class="number">1</span>);</span></span><br><span class="line">                }</span><br><span class="line">            },</span><br><span class="line">        })</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue router"></a>vue router</h2><h2 id="vue-cli"><a href="#vue-cli" class="headerlink" title="vue-cli"></a>vue-cli</h2><p>å¼€å§‹ä½ çš„ç¬¬ä¸€ä¸ªvue-cliå¼€å‘</p><blockquote><ul><li><p>å…¨å±€å®‰è£…æ·˜å®é•œåƒåŠ é€Ÿå™¨ npm install cnpm -g</p></li><li><p>å®‰è£…vue-cli    cnpm install vue-cli -g (vue3.0åä¸ºnpm install -g @vue/cli)</p></li><li><p>åˆå§‹åŒ–ä¸€ä¸ª vueé¡¹ç›®ï¼š vue init webpack appname(vue3.0åä¸º vue create appname)</p></li><li><p>å¦‚æœä½¿ç”¨çš„ä¸º3.0ç‰ˆæœ¬çš„ vue-cli ï¼šæ¥ä¸‹æ¥ç›´æ¥ cd appnameç„¶ånpm run server</p></li><li><p>å¦‚æœä½¿ç”¨çš„ä¸º2.0ç‰ˆæœ¬çš„ vue-cli è¿˜éœ€è¦è¿›å…¥é¡¹ç›®ç›®å½•ä¸‹ä»¥åè¿è¡Œ npm installï¼ˆ3.0ç‰ˆæœ¬ä¾èµ–è‡ªåŠ¨ä¸‹è½½node_modulesï¼‰ç„¶å npm run dev</p></li></ul></blockquote><h2 id="Axioså¼‚æ­¥é€šä¿¡"><a href="#Axioså¼‚æ­¥é€šä¿¡" class="headerlink" title="Axioså¼‚æ­¥é€šä¿¡"></a>Axioså¼‚æ­¥é€šä¿¡</h2><p>Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ï¼Œä¸»è¦ä½œç”¨ç”¨äºå®ç°Ajaxå¼‚æ­¥é€šä¿¡ã€‚</p><blockquote><p>VueåšæŒå…³æ³¨åº¦åˆ†ç¦»åŸåˆ™ï¼Œåªå…³æ³¨äºè§†å›¾å±‚ï¼Œå› æ­¤å¹¶ä¸æä¾›ç½‘ç»œé€šä¿¡åŠŸèƒ½ï¼Œå®˜æ–¹æ¨èä½¿ç”¨Axiosï¼Œå‡å°‘ä½¿ç”¨jqueryï¼Œå› ä¸ºjQueryæ“ä½œDomé¢‘ç¹ã€‚</p></blockquote><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ul><li>ä»æµè§ˆå™¨ä¸­åˆ›å»º <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequests</a></li><li>ä» node.js åˆ›å»º <a href="http://nodejs.org/api/http.html">http</a> è¯·æ±‚</li><li>æ”¯æŒ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> API</li><li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li><li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®</li><li>å–æ¶ˆè¯·æ±‚</li><li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®</li><li>å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ <a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">XSRF</a></li></ul><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ä½¿ç”¨ npm:</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install axios</span></span><br></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨ bower:</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bower install axios</span></span><br></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨ cdn:</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/axios/dist/axios.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>å­¦ä¹ å‚è§å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://www.axios-js.com/zh-cn/docs/index.html">http://www.axios-js.com/zh-cn/docs/index.html</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ç›¸å…³é“¾æ¥&lt;/p&gt;
&lt;p&gt;Vue: &lt;a href=&quot;https://vuejs.org/&quot;&gt;https://vuejs.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;webpackï¼š&lt;a href=&quot;https://webpack.docschina.org/&quot;</summary>
      
    
    
    
    
    <category term="Vue" scheme="https://rain-sky.github.io/tags/Vue/"/>
    
    <category term="å‰ç«¯" scheme="https://rain-sky.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Ajaxåˆè§</title>
    <link href="https://rain-sky.github.io/2021/06/22/Ajax%E5%88%9D%E8%A7%81/"/>
    <id>https://rain-sky.github.io/2021/06/22/Ajax%E5%88%9D%E8%A7%81/</id>
    <published>2021-06-22T01:47:34.000Z</published>
    <updated>2021-06-23T01:29:17.277Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Ajaxåˆè§"><a href="#Ajaxåˆè§" class="headerlink" title="Ajaxåˆè§"></a>Ajaxåˆè§</h1><h2 id="ä»€ä¹ˆæ˜¯ajax"><a href="#ä»€ä¹ˆæ˜¯ajax" class="headerlink" title="ä»€ä¹ˆæ˜¯ajax"></a>ä»€ä¹ˆæ˜¯ajax</h2><p>Ajaxå³ Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„JavaScriptå’Œxmlï¼‰ï¼Œå®é™…ä¸Šæ•°æ®äº¤æ¢é€šå¸¸éƒ½æ˜¯jsonã€‚</p><p>AJAX æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºå¿«é€ŸåŠ¨æ€ç½‘é¡µçš„æŠ€æœ¯ã€‚</p><p>AJAX é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼Œä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸäº›éƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚</p><p>ä¼ ç»Ÿçš„ç½‘é¡µï¼ˆä¸ä½¿ç”¨ AJAXï¼‰å¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…é¡»é‡è½½æ•´ä¸ªé¡µé¢ã€‚</p><h2 id="ä½¿ç”¨ajax"><a href="#ä½¿ç”¨ajax" class="headerlink" title="ä½¿ç”¨ajax"></a>ä½¿ç”¨ajax</h2><h3 id="åŸç”Ÿjså®ç°"><a href="#åŸç”Ÿjså®ç°" class="headerlink" title="åŸç”Ÿjså®ç°"></a>åŸç”Ÿjså®ç°</h3><h4 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h4><p>XMLHttpRequestå¯¹è±¡æ˜¯ajaxçš„åŸºç¡€,XMLHttpRequest ç”¨äºåœ¨åå°ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚ç›®å‰æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒXMLHttpRequest</p><table><thead><tr><th>æ–¹  æ³•</th><th>æ  è¿°</th></tr></thead><tbody><tr><td>abort()</td><td>åœæ­¢å½“å‰è¯·æ±‚</td></tr><tr><td>getAllResponseHeaders()</td><td>æŠŠHTTPè¯·æ±‚çš„æ‰€æœ‰å“åº”é¦–éƒ¨ä½œä¸ºé”®/å€¼å¯¹è¿”å›</td></tr><tr><td>getResponseHeader(â€œheaderâ€)</td><td>è¿”å›æŒ‡å®šé¦–éƒ¨çš„ä¸²å€¼</td></tr><tr><td>open(â€œmethodâ€,â€URLâ€,[asyncFlag],[â€œuserNameâ€],[â€œpasswordâ€])</td><td>å»ºç«‹å¯¹æœåŠ¡å™¨çš„è°ƒç”¨ã€‚methodå‚æ•°å¯ä»¥æ˜¯GETã€POSTæˆ–PUTã€‚urlå‚æ•°å¯ä»¥æ˜¯ç›¸å¯¹URLæˆ–ç»å¯¹URLã€‚è¿™ä¸ªæ–¹æ³•è¿˜åŒ…æ‹¬3ä¸ªå¯é€‰çš„å‚æ•°ï¼Œæ˜¯å¦å¼‚æ­¥ï¼Œç”¨æˆ·åï¼Œå¯†ç </td></tr><tr><td>send(content)</td><td>å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</td></tr><tr><td>setRequestHeader(â€œheaderâ€, â€œvalueâ€)</td><td>æŠŠæŒ‡å®šé¦–éƒ¨è®¾ç½®ä¸ºæ‰€æä¾›çš„å€¼ã€‚åœ¨è®¾ç½®ä»»ä½•é¦–éƒ¨ä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨open()ã€‚è®¾ç½®headerå¹¶å’Œè¯·æ±‚ä¸€èµ·å‘é€ (â€˜postâ€™æ–¹æ³•ä¸€å®šè¦ )</td></tr></tbody></table><h4 id="äº”æ­¥ä½¿ç”¨æ³•"><a href="#äº”æ­¥ä½¿ç”¨æ³•" class="headerlink" title="äº”æ­¥ä½¿ç”¨æ³•"></a>äº”æ­¥ä½¿ç”¨æ³•</h4><p>ã€€ã€€1.åˆ›å»ºXMLHTTPRequestå¯¹è±¡</p><p>ã€€ã€€2.ä½¿ç”¨openæ–¹æ³•è®¾ç½®å’ŒæœåŠ¡å™¨çš„äº¤äº’ä¿¡æ¯</p><p>ã€€ã€€3.è®¾ç½®å‘é€çš„æ•°æ®ï¼Œå¼€å§‹å’ŒæœåŠ¡å™¨ç«¯äº¤äº’</p><p>ã€€ã€€4.æ³¨å†Œäº‹ä»¶</p><p>ã€€ã€€5.æ›´æ–°ç•Œé¢</p><h4 id="postæ–¹æ³•å®ä¾‹"><a href="#postæ–¹æ³•å®ä¾‹" class="headerlink" title="postæ–¹æ³•å®ä¾‹"></a>postæ–¹æ³•å®ä¾‹</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºå¼‚æ­¥å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">//è®¾ç½®è¯·æ±‚çš„ç±»å‹åŠurl</span></span><br><span class="line"><span class="comment">//postè¯·æ±‚ä¸€å®šè¦æ·»åŠ è¯·æ±‚å¤´æ‰è¡Œä¸ç„¶ä¼šæŠ¥é”™</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">"Content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line"> xhr.open(<span class="string">'post'</span>, <span class="string">'02.post.php'</span> );</span><br><span class="line"><span class="comment">//å‘é€è¯·æ±‚</span></span><br><span class="line">xhr.send(<span class="string">'name=fox&amp;age=18'</span>);</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="comment">// è¿™æ­¥ä¸ºåˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦æ­£ç¡®å“åº”</span></span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) {</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">loadXMLDoc</span>(<span class="params"></span>)</span></span></span><br><span class="line">{</span><br><span class="line"><span class="javascript"><span class="keyword">var</span> xmlhttp;</span></span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest)</span></span><br><span class="line">{</span><br><span class="line"><span class="javascript"><span class="comment">//  IE7+, Firefox, Chrome, Opera, Safari æµè§ˆå™¨æ‰§è¡Œä»£ç </span></span></span><br><span class="line"><span class="javascript">xmlhttp=<span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line">}</span><br><span class="line"><span class="javascript"><span class="keyword">else</span></span></span><br><span class="line">{</span><br><span class="line"><span class="javascript"><span class="comment">// IE6, IE5 æµè§ˆå™¨æ‰§è¡Œä»£ç </span></span></span><br><span class="line"><span class="javascript">xmlhttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span></span><br><span class="line">}</span><br><span class="line"><span class="javascript">xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span></span></span><br><span class="line">{</span><br><span class="line"><span class="javascript"><span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)</span></span><br><span class="line">{</span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=xmlhttp.responseText;</span></span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="javascript">xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"/try/ajax/ajax_info.txt"</span>,<span class="literal">true</span>);</span></span><br><span class="line">xmlhttp.send();</span><br><span class="line">}</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myDiv"</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>ä½¿ç”¨ AJAX ä¿®æ”¹è¯¥æ–‡æœ¬å†…å®¹<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"loadXMLDoc()"</span>&gt;</span>ä¿®æ”¹å†…å®¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ä½¿ç”¨jqueryæä¾›çš„Ajaxå®ç°-springMvcç¯å¢ƒ"><a href="#ä½¿ç”¨jqueryæä¾›çš„Ajaxå®ç°-springMvcç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨jqueryæä¾›çš„Ajaxå®ç°(springMvcç¯å¢ƒ)"></a>ä½¿ç”¨jqueryæä¾›çš„Ajaxå®ç°(springMvcç¯å¢ƒ)</h3><blockquote><p>è®©æˆ‘ä»¬æ¥ä½¿ç”¨AjaxåŠ¨æ€çš„ç»™å‰ç«¯é¡µé¢åŠ ç‚¹å°ä¸œè¥¿å§~</p></blockquote><h3 id="åˆ›å»ºDemo"><a href="#åˆ›å»ºDemo" class="headerlink" title="åˆ›å»ºDemo"></a>åˆ›å»ºDemo</h3><p>è‡³å°‘æœ‰ä¸ªæœ€åŸºæœ¬çš„äºšå­ï¼Œå¯¹å§~</p><img src="https://gitee.com/rain-sky/images/raw/master/20210622104900.png" style="zoom:50%;"><h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><blockquote><p>ç»™å‰ç«¯ä¼ ç‚¹æ•°æ®ï¼Œè§†å›¾æ§åˆ¶å’±ä¸åš(ï¿¢ï¸¿Ì«Ì¿ï¿¢â˜†)</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AjaxTest</span> </span>{</span><br><span class="line">    <span class="meta">@RequestMapping("/t2")</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">ajaxT2</span><span class="params">(String name)</span> </span>{</span><br><span class="line">        List&lt;User&gt; list = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> User(<span class="string">"PanPan"</span>,<span class="number">12</span>,<span class="string">"ç”·"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> User(<span class="string">"DanDan"</span>,<span class="number">13</span>,<span class="string">"å¥³"</span>));</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="æµ‹è¯•é¡µé¢"><a href="#æµ‹è¯•é¡µé¢" class="headerlink" title="æµ‹è¯•é¡µé¢"></a>æµ‹è¯•é¡µé¢</h3><blockquote><p>æˆ‘åªæƒ³è®©å±€éƒ¨çš„tableå¢åŠ ç‚¹æ•°æ®ï¼Œä½†æˆ‘åˆä¸æƒ³æ•´ä¸ªé¡µé¢åˆ·æ–°ï¼Œå¥½çƒ¦æ¼ï¼Œajaxæ¥å¸®å¿™(ã¥ï¿£ 3ï¿£)ã¥</p></blockquote><p>ç‚¹å‡»buttonæ—¶å‘èµ·ä¸€ä¸ªAjaxçš„postè¯·æ±‚ï¼Œå±€éƒ¨åˆ·æ–°tableã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://code.jquery.com/jquery-3.1.1.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">        $.post({</span></span><br><span class="line"><span class="handlebars"><span class="xml">          <span class="comment">&lt;!-- è¯·æ±‚url --&gt;</span></span></span></span><br><span class="line"><span class="javascript">          url: <span class="string">"${pageContext.request.contextPath}/t2"</span>,</span></span><br><span class="line"><span class="handlebars"><span class="xml">          <span class="comment">&lt;!-- æ•°æ®äº¤äº’ --&gt;</span></span></span></span><br><span class="line"><span class="javascript">          data:{<span class="string">'name'</span>:<span class="string">"hello"</span>},</span></span><br><span class="line"><span class="handlebars"><span class="xml">          <span class="comment">&lt;!-- å›è°ƒå‡½æ•°ï¼ŒåŒæ ·å¤±è´¥ä¹Ÿæœ‰ä¸€ä¸ªerror,æ­¤å¤„æœªå†™å‡º --&gt;</span></span></span></span><br><span class="line"><span class="javascript">          success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(data);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> html = <span class="string">""</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i++){</span></span><br><span class="line"><span class="javascript">              html+=<span class="string">"&lt;tr&gt;"</span>+</span></span><br><span class="line"><span class="javascript">                      <span class="string">"&lt;td&gt;"</span> + data[i].name + <span class="string">"&lt;/td&gt;"</span> +</span></span><br><span class="line"><span class="javascript">                      <span class="string">"&lt;td&gt;"</span> + data[i].age + <span class="string">"&lt;/td&gt;"</span> +</span></span><br><span class="line"><span class="javascript">                      <span class="string">"&lt;td&gt;"</span> + data[i].sex + <span class="string">"&lt;/td&gt;"</span> +</span></span><br><span class="line"><span class="javascript">                      <span class="string">"&lt;/tr&gt;"</span></span></span><br><span class="line">            }</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(html);</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#ajaxTest"</span>).html(html);</span></span><br><span class="line">        }</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"a()"</span>&gt;</span>æ†‹ç¢°æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">"ajaxTest"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="æµ‹è¯•ä¸€ä¸‹"><a href="#æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="æµ‹è¯•ä¸€ä¸‹"></a>æµ‹è¯•ä¸€ä¸‹</h3><blockquote><p>å¯åŠ¨æ±¤å§†çŒ«ï¼Œè®¿é—®æµ‹è¯•</p></blockquote><p>è¿™æ˜¯ä»–ä¸€å¼€å§‹çš„äºšå­~</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210622110307.png"></p><p>å½“æˆ‘ä»¬è§¦å‘è¿™ä¸ªç‚¹å‡»äº‹ä»¶(â—â€™â—¡â€™â—)</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210622110454.png"></p><p><code>æƒŠå–œçš„å‘ç°æˆ‘ä»¬çš„tableä»–æ›´æ–°äº†ï¼Œä½†æ˜¯é¡µé¢å¹¶æœªåˆ·æ–°ï¼Œæµ‹è¯•æˆåŠŸäº†ã€‚</code></p><h3 id="è¿‡ç¨‹è¯•æ¢"><a href="#è¿‡ç¨‹è¯•æ¢" class="headerlink" title="è¿‡ç¨‹è¯•æ¢"></a>è¿‡ç¨‹è¯•æ¢</h3><p>æ‰“å¼€æ§åˆ¶å°çœ‹çœ‹è¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿäº†å•¥ï¼Œxhrè¯·æ±‚ï¼Œæ˜¯ä¸ªå•¥ï¼Ÿ(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»*)ï¼Ÿajaxè¯·æ±‚ï¼Œä¸€ç§å¼‚æ­¥è¯·æ±‚ã€‚</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210622110836.png"></p><p>è¯¦ç»†</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210622110854.png"></p><blockquote><p>æ‰€è°“å¼‚æ­¥ï¼Œåœ¨è¿™é‡Œç®€å•åœ°è§£é‡Šå°±æ˜¯ï¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¿…ç­‰å¾…ç»“æœï¼Œè€Œæ˜¯å¯ä»¥åŒæ—¶åšå…¶ä»–çš„äº‹æƒ…ï¼Œç­‰åˆ°æœ‰äº†ç»“æœæˆ‘ä»¬å¯ä»¥å†æ¥å¤„ç†è¿™ä¸ªäº‹ã€‚ï¼ˆå½“ç„¶ï¼Œåœ¨å…¶ä»–è¯­å¢ƒä¸‹è¿™ä¸ªè§£é‡Šå¯èƒ½å°±ä¸å¯¹äº†ï¼‰<br>è¿™ä¸ªå¾ˆé‡è¦ï¼Œå¦‚æœä¸æ˜¯è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬ç‚¹å®ŒæŒ‰é’®ï¼Œé¡µé¢å°±ä¼šæ­»åœ¨é‚£é‡Œï¼Œå…¶ä»–çš„æ•°æ®è¯·æ±‚ä¸ä¼šå¾€ä¸‹èµ°äº†ã€‚è¿™æ ·æ¯”ç­‰å¾…åˆ·æ–°ä¼¼ä¹æ›´åŠ è®¨åŒã€‚<br>ï¼ˆè™½ç„¶æä¾›å¼‚æ­¥é€šè®¯åŠŸèƒ½çš„ç»„ä»¶é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä½†å®ƒä»¬ä¹Ÿæä¾›äº†åŒæ­¥é€‰é¡¹ï¼Œå¦‚æœä½ å¥½å¥‡æŠŠé‚£ä¸ªé€‰é¡¹æ”¹ä¸ºfalseçš„è¯ï¼Œä½ çš„é¡µé¢å°±ä¼šæ­»åœ¨é‚£é‡Œï¼‰<br>xmlåªæ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œåœ¨è¿™ä»¶äº‹é‡Œå¹¶ä¸é‡è¦ï¼Œæˆ‘ä»¬åœ¨æ›´æ–°ä¸€è¡Œå­—çš„æ—¶å€™ç†è®ºä¸Šè¯´ä¸éœ€è¦è¿™ä¸ªæ ¼å¼ï¼Œä½†å¦‚æœæˆ‘ä»¬æ›´æ–°å¾ˆå¤šå†…å®¹ï¼Œé‚£ä¹ˆæ ¼å¼åŒ–çš„æ•°æ®å¯ä»¥ä½¿æˆ‘ä»¬æœ‰æ¡ç†åœ°å»å®ç°æ›´æ–°ã€‚</p><p>ç°åœ¨å¤§éƒ¨åˆ†äººå…¶å®æ˜¯ç”¨JSONè¿™ç§æ ¼å¼æ¥ä»£æ›¿XMLçš„ï¼Œå› ä¸ºå‰è€…æ›´åŠ ç®€æ´ï¼Œæ®è¯´ç›®å‰çš„è§£æé€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚å¤šå¿«å¥½çœï¼Œèƒ½çœåˆ™çœå•Šã€‚</p><p><strong>æ€»ç»“ï¼šåªè¦æ˜¯JSè°ƒç”¨å¼‚æ­¥é€šè®¯ç»„ä»¶å¹¶ä½¿ç”¨æ ¼å¼åŒ–çš„æ•°æ®æ¥æ›´æ–°webé¡µé¢ä¸Šçš„å†…å®¹æˆ–æ“ä½œè¿‡ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç”¨çš„æ–¹æ³•å°±å¯ç®—æ˜¯AJAXã€‚</strong></p><p>ä½œè€…ï¼šé£Ÿé“å…½<br>é“¾æ¥ï¼š<a href="https://www.zhihu.com/question/20874229/answer/24708736">https://www.zhihu.com/question/20874229/answer/24708736</a><br>æ¥æºï¼šçŸ¥ä¹<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Ajaxåˆè§&quot;&gt;&lt;a href=&quot;#Ajaxåˆè§&quot; class=&quot;headerlink&quot; title=&quot;Ajaxåˆè§&quot;&gt;&lt;/a&gt;Ajaxåˆè§&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯ajax&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯ajax&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    
    <category term="Ajax" scheme="https://rain-sky.github.io/tags/Ajax/"/>
    
  </entry>
  
  <entry>
    <title>Javaå°ç§¯ç´¯</title>
    <link href="https://rain-sky.github.io/2021/05/26/Java%E5%B0%8F%E7%A7%AF%E7%B4%AF/"/>
    <id>https://rain-sky.github.io/2021/05/26/Java%E5%B0%8F%E7%A7%AF%E7%B4%AF/</id>
    <published>2021-05-26T01:37:27.000Z</published>
    <updated>2021-08-10T09:31:47.490Z</updated>
    
    <content type="html"><![CDATA[<div class="note orange icon simple"><i class="note-icon fas fa-bullhorn"></i><p>è¦è¸©çš„å‘è¿˜æœ‰å¾ˆå¤šï¼Œè‡ªå­¦è€…ï¼Œä½ å°†å»å¾€ä½•æ–¹~</p></div><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><blockquote><p>switch case</p></blockquote><p>åŸºæœ¬å†™æ³•</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(expression){</span><br><span class="line">    <span class="keyword">case</span> value :</span><br><span class="line">       <span class="comment">//è¯­å¥</span></span><br><span class="line">       <span class="keyword">break</span>; <span class="comment">//å¯é€‰</span></span><br><span class="line">    <span class="keyword">case</span> value :</span><br><span class="line">       <span class="comment">//è¯­å¥</span></span><br><span class="line">       <span class="keyword">break</span>; <span class="comment">//å¯é€‰</span></span><br><span class="line">    <span class="comment">//ä½ å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„caseè¯­å¥</span></span><br><span class="line">    <span class="keyword">default</span> : <span class="comment">//å¯é€‰</span></span><br><span class="line">       <span class="comment">//è¯­å¥</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>switch case è¯­å¥æœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p><ul><li>switch è¯­å¥ä¸­çš„å˜é‡ç±»å‹å¯ä»¥æ˜¯ï¼š byteã€shortã€int æˆ–è€… charã€‚ä» Java SE 7 å¼€å§‹ï¼Œswitch æ”¯æŒå­—ç¬¦ä¸² String ç±»å‹äº†ï¼ŒåŒæ—¶ case æ ‡ç­¾å¿…é¡»ä¸ºå­—ç¬¦ä¸²å¸¸é‡æˆ–å­—é¢é‡ã€‚</li><li>switch è¯­å¥å¯ä»¥æ‹¥æœ‰å¤šä¸ª case è¯­å¥ã€‚æ¯ä¸ª case åé¢è·Ÿä¸€ä¸ªè¦æ¯”è¾ƒçš„å€¼å’Œå†’å·ã€‚</li><li>case è¯­å¥ä¸­çš„å€¼çš„æ•°æ®ç±»å‹å¿…é¡»ä¸å˜é‡çš„æ•°æ®ç±»å‹ç›¸åŒï¼Œè€Œä¸”åªèƒ½æ˜¯å¸¸é‡æˆ–è€…å­—é¢å¸¸é‡ã€‚</li><li>å½“å˜é‡çš„å€¼ä¸ case è¯­å¥çš„å€¼ç›¸ç­‰æ—¶ï¼Œé‚£ä¹ˆ case è¯­å¥ä¹‹åçš„è¯­å¥å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ° break è¯­å¥å‡ºç°æ‰ä¼šè·³å‡º switch è¯­å¥ã€‚</li><li>å½“é‡åˆ° break è¯­å¥æ—¶ï¼Œswitch è¯­å¥ç»ˆæ­¢ã€‚ç¨‹åºè·³è½¬åˆ° switch è¯­å¥åé¢çš„è¯­å¥æ‰§è¡Œã€‚case è¯­å¥ä¸å¿…é¡»è¦åŒ…å« break è¯­å¥ã€‚å¦‚æœæ²¡æœ‰ break è¯­å¥å‡ºç°ï¼Œç¨‹åºä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡ case è¯­å¥ï¼Œç›´åˆ°å‡ºç° break è¯­å¥ã€‚</li><li>switch è¯­å¥å¯ä»¥åŒ…å«ä¸€ä¸ª default åˆ†æ”¯ï¼Œè¯¥åˆ†æ”¯ä¸€èˆ¬æ˜¯ switch è¯­å¥çš„æœ€åä¸€ä¸ªåˆ†æ”¯ï¼ˆå¯ä»¥åœ¨ä»»ä½•ä½ç½®ï¼Œä½†å»ºè®®åœ¨æœ€åä¸€ä¸ªï¼‰ã€‚default åœ¨æ²¡æœ‰ case è¯­å¥çš„å€¼å’Œå˜é‡å€¼ç›¸ç­‰çš„æ—¶å€™æ‰§è¡Œã€‚default åˆ†æ”¯ä¸éœ€è¦ break è¯­å¥ã€‚</li></ul><blockquote><p>if-else-ifè¯­æ³•</p></blockquote><p>if è¯­å¥åé¢å¯ä»¥è·Ÿ else ifâ€¦else è¯­å¥ï¼Œè¿™ç§è¯­å¥å¯ä»¥æ£€æµ‹åˆ°å¤šç§å¯èƒ½çš„æƒ…å†µã€‚</p><p>ä½¿ç”¨ ifï¼Œelse ifï¼Œelse è¯­å¥çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š</p><ul><li>if è¯­å¥è‡³å¤šæœ‰ 1 ä¸ª else è¯­å¥ï¼Œelse è¯­å¥åœ¨æ‰€æœ‰çš„ else if è¯­å¥ä¹‹åã€‚</li><li>if è¯­å¥å¯ä»¥æœ‰è‹¥å¹²ä¸ª else if è¯­å¥ï¼Œå®ƒä»¬å¿…é¡»åœ¨ else è¯­å¥ä¹‹å‰ã€‚</li><li>ä¸€æ—¦å…¶ä¸­ä¸€ä¸ª else if è¯­å¥æ£€æµ‹ä¸º trueï¼Œå…¶ä»–çš„ else if ä»¥åŠ else è¯­å¥éƒ½å°†è·³è¿‡æ‰§è¡Œã€‚</li></ul><p><span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸€ä¸ªé—®é¢˜</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1.å¤šä¸ªelse ifå—ä¹‹é—´çš„é¡ºåºå¯ä»¥æ”¹å˜ï¼Œæ”¹å˜ä¹‹åå¯¹ç¨‹åºçš„æ‰§è¡Œç»“æœæ²¡æœ‰å½±å“</span><br><span class="line">2.å¤šä¸ªelse ifå—ä¹‹é—´çš„é¡ºåºå¯ä»¥æ”¹å˜ï¼Œæ”¹å˜ä¹‹åå¯èƒ½å¯¹ç¨‹åºçš„æ‰§è¡Œç»“æœæœ‰å½±å“</span><br><span class="line">3.å¤šä¸ªelse ifå—ä¹‹é—´çš„é¡ºåºä¸å¯ä»¥æ”¹å˜ï¼Œæ”¹å˜åç¨‹åºç¼–è¯‘ä¸é€šè¿‡</span><br><span class="line">4.å¤šä¸ªelse ifå—ä¹‹é—´çš„é¡ºåºå¯ä»¥æ”¹å˜ï¼Œæ”¹å˜åç¨‹åºç¼–è¯‘å¯ä»¥é€šè¿‡</span><br><span class="line">å…¶ä¸­2ï¼Œ4æ­£ç¡®</span><br><span class="line">-----------------------------------------------------------</span><br><span class="line">int age = 11;</span><br><span class="line">int a = 0;</span><br><span class="line">if(age &lt; 10){</span><br><span class="line">    a += 1;</span><br><span class="line">}else if(age &lt; 15){</span><br><span class="line">    a += 2;</span><br><span class="line">}else if(age &lt; 25){</span><br><span class="line">    a += 3;</span><br><span class="line">}ä¸Šé¢çš„ä»£ç   ä¸¤ä¸ªifelseå¦‚æœäº’æ¢ä½ç½®   açš„å€¼å°±ä¸ä¸€æ ·äº†</span><br></pre></td></tr></tbody></table></figure><h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><blockquote><p>æ¦‚è¿°</p></blockquote><p>ç®—æœ¯è¿ç®—ç¬¦</p><table><thead><tr><th>+</th><th>åŠ æ³• - ç›¸åŠ è¿ç®—ç¬¦ä¸¤ä¾§çš„å€¼</th><th>A + B ç­‰äº 30</th></tr></thead><tbody><tr><td>-</td><td>å‡æ³• - å·¦æ“ä½œæ•°å‡å»å³æ“ä½œæ•°</td><td>A â€“ B ç­‰äº -10</td></tr><tr><td>*</td><td>ä¹˜æ³• - ç›¸ä¹˜æ“ä½œç¬¦ä¸¤ä¾§çš„å€¼</td><td>A * Bç­‰äº200</td></tr><tr><td>/</td><td>é™¤æ³• - å·¦æ“ä½œæ•°é™¤ä»¥å³æ“ä½œæ•°</td><td>B / Aç­‰äº2</td></tr><tr><td>ï¼…</td><td>å–ä½™ - å·¦æ“ä½œæ•°é™¤ä»¥å³æ“ä½œæ•°çš„ä½™æ•°</td><td>B%Aç­‰äº0</td></tr><tr><td>++</td><td>è‡ªå¢: æ“ä½œæ•°çš„å€¼å¢åŠ 1</td><td>B++ æˆ– ++B ç­‰äº 21ï¼ˆåŒºåˆ«è¯¦è§ä¸‹æ–‡ï¼‰</td></tr><tr><td>â€“</td><td>è‡ªå‡: æ“ä½œæ•°çš„å€¼å‡å°‘1</td><td>Bâ€“ æˆ– â€“B ç­‰äº 19ï¼ˆåŒºåˆ«è¯¦è§ä¸‹æ–‡ï¼‰</td></tr></tbody></table><p>å…³ç³»è¿ç®—ç¬¦</p><table><thead><tr><th align="left">è¿ç®—ç¬¦</th><th align="left">æè¿°</th><th align="left">ä¾‹å­</th></tr></thead><tbody><tr><td align="left">==</td><td align="left">æ£€æŸ¥å¦‚æœä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td><td align="left">ï¼ˆA == Bï¼‰ä¸ºå‡ã€‚</td></tr><tr><td align="left">!=</td><td align="left">æ£€æŸ¥å¦‚æœä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœå€¼ä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td><td align="left">(A != B) ä¸ºçœŸã€‚</td></tr><tr><td align="left">&gt;</td><td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯é‚£ä¹ˆæ¡ä»¶ä¸ºçœŸã€‚</td><td align="left">ï¼ˆA&gt; Bï¼‰ä¸ºå‡ã€‚</td></tr><tr><td align="left">&lt;</td><td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯é‚£ä¹ˆæ¡ä»¶ä¸ºçœŸã€‚</td><td align="left">ï¼ˆA &lt;Bï¼‰ä¸ºçœŸã€‚</td></tr><tr><td align="left">&gt;=</td><td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºæˆ–ç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯é‚£ä¹ˆæ¡ä»¶ä¸ºçœŸã€‚</td><td align="left">ï¼ˆA&gt; = Bï¼‰ä¸ºå‡ã€‚</td></tr><tr><td align="left">&lt;=</td><td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºæˆ–ç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯é‚£ä¹ˆæ¡ä»¶ä¸ºçœŸã€‚</td><td align="left">ï¼ˆA &lt;= Bï¼‰ä¸ºçœŸã€‚</td></tr></tbody></table><p>ä½è¿ç®—ç¬¦</p><table><thead><tr><th align="left">æ“ä½œç¬¦</th><th align="left">æè¿°</th><th align="left">ä¾‹å­</th></tr></thead><tbody><tr><td align="left">ï¼†</td><td align="left">å¦‚æœç›¸å¯¹åº”ä½éƒ½æ˜¯1ï¼Œåˆ™ç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0</td><td align="left">ï¼ˆAï¼†Bï¼‰ï¼Œå¾—åˆ°12ï¼Œå³0000 1100</td></tr><tr><td align="left">|</td><td align="left">å¦‚æœç›¸å¯¹åº”ä½éƒ½æ˜¯ 0ï¼Œåˆ™ç»“æœä¸º 0ï¼Œå¦åˆ™ä¸º 1</td><td align="left">ï¼ˆA | Bï¼‰å¾—åˆ°61ï¼Œå³ 0011 1101</td></tr><tr><td align="left">^</td><td align="left">å¦‚æœç›¸å¯¹åº”ä½å€¼ç›¸åŒï¼Œåˆ™ç»“æœä¸º0ï¼Œå¦åˆ™ä¸º1</td><td align="left">ï¼ˆA ^ Bï¼‰å¾—åˆ°49ï¼Œå³ 0011 0001</td></tr><tr><td align="left">ã€œ</td><td align="left">æŒ‰ä½å–åè¿ç®—ç¬¦ç¿»è½¬æ“ä½œæ•°çš„æ¯ä¸€ä½ï¼Œå³0å˜æˆ1ï¼Œ1å˜æˆ0ã€‚</td><td align="left">ï¼ˆã€œAï¼‰å¾—åˆ°-61ï¼Œå³1100 0011</td></tr><tr><td align="left">&lt;&lt;</td><td align="left">æŒ‰ä½å·¦ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°æŒ‰ä½å·¦ç§»å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚</td><td align="left">A &lt;&lt; 2å¾—åˆ°240ï¼Œå³ 1111 0000</td></tr><tr><td align="left">&gt;&gt;</td><td align="left">æŒ‰ä½å³ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°æŒ‰ä½å³ç§»å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚</td><td align="left">A &gt;&gt; 2å¾—åˆ°15å³ 1111</td></tr><tr><td align="left">&gt;&gt;&gt;</td><td align="left">æŒ‰ä½å³ç§»è¡¥é›¶æ“ä½œç¬¦ã€‚å·¦æ“ä½œæ•°çš„å€¼æŒ‰å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°å³ç§»ï¼Œç§»åŠ¨å¾—åˆ°çš„ç©ºä½ä»¥é›¶å¡«å……ã€‚</td><td align="left">A&gt;&gt;&gt;2å¾—åˆ°15å³0000 1111</td></tr></tbody></table><blockquote><p>å®¹æ˜“è¸©å‘</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = -<span class="number">3</span>ï¼›</span><br><span class="line">i = ++(i++);</span><br><span class="line"><span class="comment">//-----è¾“å‡ºï¼Ÿï¼Ÿï¼Ÿ----</span></span><br><span class="line"><span class="comment">//ç­”æ¡ˆæ˜¯ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º++å³ä¾§åº”è¯¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè€Œi++åæ˜¯ä¸€ä¸ªå¸¸æ•°</span></span><br></pre></td></tr></tbody></table></figure><h3 id="è®¿é—®ä¿®é¥°ç¬¦"><a href="#è®¿é—®ä¿®é¥°ç¬¦" class="headerlink" title="è®¿é—®ä¿®é¥°ç¬¦"></a>è®¿é—®ä¿®é¥°ç¬¦</h3><blockquote><p>Javaä¸­ï¼Œå¯ä»¥ä½¿ç”¨è®¿é—®æ§åˆ¶ç¬¦æ¥ä¿æŠ¤å¯¹ç±»ã€å˜é‡ã€æ–¹æ³•å’Œæ„é€ æ–¹æ³•çš„è®¿é—®ã€‚Java æ”¯æŒ 4 ç§ä¸åŒçš„è®¿é—®æƒé™ã€‚</p></blockquote><ul><li><strong>default</strong> (å³é»˜è®¤ï¼Œä»€ä¹ˆä¹Ÿä¸å†™ï¼‰: åœ¨åŒä¸€åŒ…å†…å¯è§ï¼Œä¸ä½¿ç”¨ä»»ä½•ä¿®é¥°ç¬¦ã€‚ä½¿ç”¨å¯¹è±¡ï¼šç±»ã€æ¥å£ã€å˜é‡ã€æ–¹æ³•ã€‚</li><li><strong>private</strong> : åœ¨åŒä¸€ç±»å†…å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šå˜é‡ã€æ–¹æ³•ã€‚ <strong>æ³¨æ„ï¼šä¸èƒ½ä¿®é¥°ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰</strong></li><li><strong>public</strong> : å¯¹æ‰€æœ‰ç±»å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šç±»ã€æ¥å£ã€å˜é‡ã€æ–¹æ³•ã€‚ç”±äºç±»çš„ç»§æ‰¿æ€§ï¼Œç±»æ‰€æœ‰çš„å…¬æœ‰æ–¹æ³•å’Œå˜é‡éƒ½èƒ½è¢«å…¶å­ç±»ç»§æ‰¿ã€‚</li><li><strong>protected</strong> : å¯¹åŒä¸€åŒ…å†…çš„ç±»å’Œæ‰€æœ‰å­ç±»å¯è§ã€‚ä½¿ç”¨å¯¹è±¡ï¼šå˜é‡ã€æ–¹æ³•ã€‚ <strong>æ³¨æ„ï¼šä¸èƒ½ä¿®é¥°ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰</strong>ã€‚</li></ul><table><thead><tr><th align="left">ä¿®é¥°ç¬¦</th><th align="left">å½“å‰ç±»</th><th align="left">åŒä¸€åŒ…å†…</th><th align="left">å­å­™ç±»(åŒä¸€åŒ…)</th><th align="left">å­å­™ç±»(ä¸åŒåŒ…)</th><th align="left">å…¶ä»–åŒ…</th></tr></thead><tbody><tr><td align="left"><code>public</code></td><td align="left">Y</td><td align="left">Y</td><td align="left">Y</td><td align="left">Y</td><td align="left">Y</td></tr><tr><td align="left"><code>protected</code></td><td align="left">Y</td><td align="left">Y</td><td align="left">Y</td><td align="left">Y/Nï¼ˆ<a href="https://www.runoob.com/java/java-modifier-types.html#protected-desc">è¯´æ˜</a>ï¼‰</td><td align="left">N</td></tr><tr><td align="left"><code>default</code></td><td align="left">Y</td><td align="left">Y</td><td align="left">Y</td><td align="left">N</td><td align="left">N</td></tr><tr><td align="left"><code>private</code></td><td align="left">Y</td><td align="left">N</td><td align="left">N</td><td align="left">N</td><td align="left">N</td></tr></tbody></table><blockquote><p>è®¿é—®æ§åˆ¶å’Œç»§æ‰¿</p></blockquote><p>è¯·æ³¨æ„ä»¥ä¸‹æ–¹æ³•ç»§æ‰¿çš„è§„åˆ™ï¼š</p><ul><li>çˆ¶ç±»ä¸­å£°æ˜ä¸º public çš„æ–¹æ³•åœ¨å­ç±»ä¸­ä¹Ÿå¿…é¡»ä¸º publicã€‚</li><li>çˆ¶ç±»ä¸­å£°æ˜ä¸º protected çš„æ–¹æ³•åœ¨å­ç±»ä¸­è¦ä¹ˆå£°æ˜ä¸º protectedï¼Œè¦ä¹ˆå£°æ˜ä¸º publicï¼Œä¸èƒ½å£°æ˜ä¸º privateã€‚</li><li>çˆ¶ç±»ä¸­å£°æ˜ä¸º private çš„æ–¹æ³•ï¼Œä¸èƒ½å¤Ÿè¢«ç»§æ‰¿ï¼Œå®é™…å­ç±»å†…å­˜ç©ºé—´ä¸­æœ‰è¯¥æ–¹æ³•æˆ–ç±»å˜é‡çš„å†…å­˜ï¼Œä½†æ— æ³•è®¿é—®ï¼Œprivateå˜é‡å¯ä»¥é€šè¿‡publicæ–¹æ³•é—´æ¥è®¿é—®ã€‚</li></ul><h3 id="ç»§æ‰¿ä¸å¤šæ€"><a href="#ç»§æ‰¿ä¸å¤šæ€" class="headerlink" title="ç»§æ‰¿ä¸å¤šæ€"></a>ç»§æ‰¿ä¸å¤šæ€</h3><blockquote><p>æ˜“è¸©å‘</p></blockquote><p>å­ç±»æ— æ³•è®¿é—®çˆ¶ç±»ç§æœ‰åŸŸæˆå‘˜ï¼Œæƒ³è¦è®¿é—®é€šè¿‡å…¬æœ‰æ¥å£è·å¾—</p><h3 id="å…³äºStringï¼ŒStringBufferï¼ŒStringBuilder"><a href="#å…³äºStringï¼ŒStringBufferï¼ŒStringBuilder" class="headerlink" title="å…³äºStringï¼ŒStringBufferï¼ŒStringBuilder"></a>å…³äºStringï¼ŒStringBufferï¼ŒStringBuilder</h3><h4 id="ä½“ç³»ç»“æ„"><a href="#ä½“ç³»ç»“æ„" class="headerlink" title="ä½“ç³»ç»“æ„"></a>ä½“ç³»ç»“æ„</h4><p><img src="https://gitee.com/rain-sky/images/raw/master/20210810161050.png"></p><h4 id="String"><a href="#String" class="headerlink" title="String"></a>String</h4><blockquote><p>åˆ›å»º</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²åˆ›å»ºï¼ŒæŒ‡å‘çš„æ˜¯å¸¸é‡æ± ä¸­çš„å¸¸é‡</span></span><br><span class="line">String s1 = <span class="string">"Runoob"</span>;              <span class="comment">// String ç›´æ¥åˆ›å»º</span></span><br><span class="line">String s2 = <span class="string">"Runoob"</span>;              <span class="comment">// String ç›´æ¥åˆ›å»º</span></span><br><span class="line">String s3 = s1;                    <span class="comment">// ç›¸åŒå¼•ç”¨</span></span><br><span class="line">String s4 = <span class="keyword">new</span> String(<span class="string">"Runoob"</span>);   <span class="comment">// String å¯¹è±¡åˆ›å»º</span></span><br><span class="line">String s5 = <span class="keyword">new</span> String(<span class="string">"Runoob"</span>);   <span class="comment">// String å¯¹è±¡åˆ›å»º</span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/rain-sky/images/raw/master/20210810161223.png"></p><blockquote><p>æºç ä¸€ç¥ï¼ŒåŸºäºjdk1.8ç‰ˆæœ¬ï¼Œå…¶ä»–ç‰ˆæœ¬æˆ–å·²æœ‰æ›´æ”¹</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> </span>{</span><br><span class="line">    <span class="comment">/** The value is used for character storage. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span> value[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Cache the hash code for the string */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hash; <span class="comment">// Default to 0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/** use serialVersionUID from JDK 1.0.2 for interoperability */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">6849794470754667710L</span>;</span><br><span class="line">    </span><br><span class="line">   ......</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>ğŸ’¡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä»æºç å¯ä»¥çœ‹å‡ºStringåº•å±‚æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªèƒŒfinalä¿®é¥°çš„æ•°ç»„ï¼Œ</p><p><span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>Stringä¸ºä»€ä¹ˆä¸å¯å˜ï¼Ÿæœ¬è´¨æ˜¯ç”±äºprivateä¸finalä¸¤ä¸ªå…³é”®å­—ä¿®é¥°äº†value[]è¿™ä¸ªæ•°ç»„ï¼Œfinalä¿®é¥°äº†valueè¯´æ˜valueè¿™ä¸ªå¼•ç”¨ä¸å¯å˜ï¼Œä¸å¯å†æŒ‡å‘å…¶ä»–æ•°ç»„ï¼Œä½†æ˜¯valueæŒ‡å‘çš„æ•°ç»„æœ¬èº«æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œç”±äºprivateæˆ‘ä»¬æ— æ³•æ“ä½œåˆ°è¿™ä¸ªvalueæ•°ç»„ï¼Œæ•…æˆ‘ä»¬æ— æ³•å»æ”¹å˜è¿™ä¸ªæ•°ç»„çš„å€¼ã€‚</p><p><span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>é‚£ä¹ˆç”¨ä»€ä¹ˆæ–¹å¼å¯ä»¥è®¿é—®ç§æœ‰æˆå‘˜å‘¢ï¼Ÿ æ²¡é”™ï¼Œç”¨åå°„ï¼Œ å¯ä»¥åå°„å‡ºStringå¯¹è±¡ä¸­çš„valueå±æ€§ï¼Œ è¿›è€Œæ”¹å˜é€šè¿‡è·å¾—çš„valueå¼•ç”¨æ”¹å˜æ•°ç»„çš„ç»“æ„ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testReflection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºå­—ç¬¦ä¸²"Hello World"ï¼Œ å¹¶èµ‹ç»™å¼•ç”¨s</span></span><br><span class="line">    String s = <span class="string">"Hello World"</span>; </span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"s = "</span> + s);<span class="comment">//Hello World</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–Stringç±»ä¸­çš„valueå­—æ®µ</span></span><br><span class="line">    Field valueFieldOfString = String.class.getDeclaredField(<span class="string">"value"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ”¹å˜valueå±æ€§çš„è®¿é—®æƒé™</span></span><br><span class="line">    valueFieldOfString.setAccessible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–så¯¹è±¡ä¸Šçš„valueå±æ€§çš„å€¼</span></span><br><span class="line">    <span class="keyword">char</span>[] value = (<span class="keyword">char</span>[]) valueFieldOfString.get(s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ”¹å˜valueæ‰€å¼•ç”¨çš„æ•°ç»„ä¸­çš„ç¬¬5ä¸ªå­—ç¬¦</span></span><br><span class="line">    value[<span class="number">5</span>] = <span class="string">'_'</span>;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"s = "</span> + s);  <span class="comment">//Hello_World</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="comment">//è¾“å‡º--------------------------------------------------</span></span><br><span class="line">s = Hello World</span><br><span class="line">s = Hello_World</span><br></pre></td></tr></tbody></table></figure><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œså§‹ç»ˆå¼•ç”¨çš„åŒä¸€ä¸ªStringå¯¹è±¡ï¼Œä½†æ˜¯å†åå°„å‰åï¼Œè¿™ä¸ªStringå¯¹è±¡å‘ç”Ÿäº†å˜åŒ–ï¼Œ ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡åå°„æ˜¯å¯ä»¥ä¿®æ”¹æ‰€è°“çš„â€œä¸å¯å˜â€å¯¹è±¡çš„ã€‚</p><blockquote><p>å¸¸ç”¨æ–¹æ³•ï¼Œè§£é¢˜å¤šç”¨</p></blockquote><table><thead><tr><th><a href="https://www.runoob.com/java/java-string-charat.html">char charAt(int index)</a> è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„ char å€¼ã€‚</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/java/java-string-compareto.html">int compareTo(String anotherString)</a> æŒ‰å­—å…¸é¡ºåºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-concat.html">String concat(String str)</a> å°†æŒ‡å®šå­—ç¬¦ä¸²è¿æ¥åˆ°æ­¤å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-contentequals.html">boolean contentEquals(StringBuffer sb)</a> å½“ä¸”ä»…å½“å­—ç¬¦ä¸²ä¸æŒ‡å®šçš„StringBufferæœ‰ç›¸åŒé¡ºåºçš„å­—ç¬¦æ—¶å€™è¿”å›çœŸã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-endswith.html">boolean endsWith(String suffix)</a> æµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“æŸã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-equals.html">boolean equals(Object anObject)</a> å°†æ­¤å­—ç¬¦ä¸²ä¸æŒ‡å®šçš„å¯¹è±¡æ¯”è¾ƒã€‚</td></tr><tr><td>[byte<a href="https://www.runoob.com/java/java-string-getbytes.html">] getBytes()</a>  ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†å°†æ­¤ String ç¼–ç ä¸º byte åºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„ byte æ•°ç»„ä¸­ã€‚</td></tr><tr><td>[byte<a href="https://www.runoob.com/java/java-string-getbytes.html">] getBytes(String charsetName)</a> ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†æ­¤ String ç¼–ç ä¸º byte åºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„ byte æ•°ç»„ä¸­ã€‚</td></tr><tr><td>[void getChars(int srcBegin, int srcEnd, char<a href="https://www.runoob.com/java/java-string-getchars.html">] dst, int dstBegin)</a> å°†å­—ç¬¦ä»æ­¤å­—ç¬¦ä¸²å¤åˆ¶åˆ°ç›®æ ‡å­—ç¬¦æ•°ç»„ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-hashcode.html">int hashCode()</a> è¿”å›æ­¤å­—ç¬¦ä¸²çš„å“ˆå¸Œç ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-indexof.html">int indexOf(int ch)</a> è¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-indexof.html">int indexOf(int ch, int fromIndex)</a> è¿”å›åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°æŒ‡å®šå­—ç¬¦å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹æœç´¢ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-indexof.html">int indexOf(String str)</a>  è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-indexof.html">int indexOf(String str, int fromIndex)</a> è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-lastindexof.html">int lastIndexOf(int ch)</a>  è¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-lastindexof.html">int lastIndexOf(int ch, int fromIndex)</a> è¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¤„å¼€å§‹è¿›è¡Œåå‘æœç´¢ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-lastindexof.html">int lastIndexOf(String str)</a> è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€å³è¾¹å‡ºç°å¤„çš„ç´¢å¼•ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-lastindexof.html">int lastIndexOf(String str, int fromIndex)</a>  è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹åå‘æœç´¢ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-length.html">int length()</a> è¿”å›æ­¤å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-matches.html">boolean matches(String regex)</a> å‘ŠçŸ¥æ­¤å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-replace.html">String replace(char oldChar, char newChar)</a> è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯é€šè¿‡ç”¨ newChar æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€æœ‰ oldChar å¾—åˆ°çš„ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-replaceall.html">String replaceAll(String regex, String replacement)</a> ä½¿ç”¨ç»™å®šçš„ replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-replacefirst.html">String replaceFirst(String regex, String replacement)</a>  ä½¿ç”¨ç»™å®šçš„ replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>[String<a href="https://www.runoob.com/java/java-string-split.html">] split(String regex)</a> æ ¹æ®ç»™å®šæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ‹†åˆ†æ­¤å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>[String<a href="https://www.runoob.com/java/java-string-split.html">] split(String regex, int limit)</a> æ ¹æ®åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¥æ‹†åˆ†æ­¤å­—ç¬¦ä¸²ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-startswith.html">boolean startsWith(String prefix)</a> æµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å§‹ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-substring.html">String substring(int beginIndex)</a> è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-substring.html">String substring(int beginIndex, int endIndex)</a> è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>[char<a href="https://www.runoob.com/java/java-string-tochararray.html">] toCharArray()</a> å°†æ­¤å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦æ•°ç»„ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-tolowercase.html">String toLowerCase()</a> ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒçš„è§„åˆ™å°†æ­¤ String ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå°å†™ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-tolowercase.html">String toLowerCase(Locale locale)</a>  ä½¿ç”¨ç»™å®š Locale çš„è§„åˆ™å°†æ­¤ String ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå°å†™ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-touppercase.html">String toUpperCase()</a> ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒçš„è§„åˆ™å°†æ­¤ String ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå¤§å†™ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-touppercase.html">String toUpperCase(Locale locale)</a> ä½¿ç”¨ç»™å®š Locale çš„è§„åˆ™å°†æ­¤ String ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå¤§å†™ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-contains.html">contains(CharSequence chars)</a> åˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­—ç¬¦ç³»åˆ—ã€‚</td></tr><tr><td><a href="https://www.runoob.com/java/java-string-isempty.html">isEmpty()</a> åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºã€‚</td></tr></tbody></table><h4 id="StringBuffer"><a href="#StringBuffer" class="headerlink" title="StringBuffer"></a>StringBuffer</h4><blockquote><p>å…³äº</p></blockquote><p>åœ¨ä½¿ç”¨ StringBuffer ç±»æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šå¯¹ StringBuffer å¯¹è±¡æœ¬èº«è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹æ¨èä½¿ç”¨ StringBufferã€‚</p><p>StringBuilder ç±»åœ¨ Java 5 ä¸­è¢«æå‡ºï¼Œå®ƒå’Œ StringBuffer ä¹‹é—´çš„æœ€å¤§ä¸åŒåœ¨äº StringBuilder çš„æ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆä¸èƒ½åŒæ­¥è®¿é—®ï¼‰ã€‚</p><p>ç”±äº StringBuilder ç›¸è¾ƒäº StringBuffer æœ‰é€Ÿåº¦ä¼˜åŠ¿ï¼Œæ‰€ä»¥å¤šæ•°æƒ…å†µä¸‹å»ºè®®ä½¿ç”¨ StringBuilder ç±»ã€‚</p><blockquote><p>å¸¸ç”¨æ–¹æ³•</p></blockquote><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³•æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">public StringBuffer append(String s) å°†æŒ‡å®šçš„å­—ç¬¦ä¸²è¿½åŠ åˆ°æ­¤å­—ç¬¦åºåˆ—ã€‚</td></tr><tr><td align="left">2</td><td align="left">public StringBuffer reverse()  å°†æ­¤å­—ç¬¦åºåˆ—ç”¨å…¶åè½¬å½¢å¼å–ä»£ã€‚</td></tr><tr><td align="left">3</td><td align="left">public delete(int start, int end) ç§»é™¤æ­¤åºåˆ—çš„å­å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚</td></tr><tr><td align="left">4</td><td align="left">public insert(int offset, int i) å°† <code>int</code> å‚æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼æ’å…¥æ­¤åºåˆ—ä¸­ã€‚</td></tr><tr><td align="left">5</td><td align="left">insert(int offset, String str) å°† <code>str</code> å‚æ•°çš„å­—ç¬¦ä¸²æ’å…¥æ­¤åºåˆ—ä¸­ã€‚</td></tr><tr><td align="left">6</td><td align="left">replace(int start, int end, String str) ä½¿ç”¨ç»™å®š <code>String</code> ä¸­çš„å­—ç¬¦æ›¿æ¢æ­¤åºåˆ—çš„å­å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚</td></tr></tbody></table><p><span class="github-emoji"><span>ğŸ’¦</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a6.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>Stringä¸­çš„æ–¹æ³•StringBufferä¹ŸåŸºæœ¬æœ‰</p><h4 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h4><blockquote><p>æè¿°</p></blockquote><p>ä¸€ä¸ªå¯å˜çš„å­—ç¬¦åºåˆ—ã€‚ æ­¤ç±»æä¾›ä¸<code>StringBuffer</code>å…¼å®¹çš„APIï¼Œä½†ä¸ä¿è¯åŒæ­¥ã€‚ æ­¤ç±»è®¾è®¡ç”¨ä½œ<code>StringBuffer</code>æ›¿ä»£å“ï¼Œç”¨äºå•ä¸ªçº¿ç¨‹ä½¿ç”¨å­—ç¬¦ä¸²ç¼“å†²åŒºçš„ä½ç½®ï¼ˆé€šå¸¸æƒ…å†µä¸‹ï¼‰ã€‚ åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨æ­¤ç±»ä¼˜å…ˆäº<code>StringBuffer</code>å› ä¸ºåœ¨å¤§å¤šæ•°å®ç°ä¸­å®ƒä¼šæ›´å¿«ã€‚<code>StringBuilder</code>å®ä¾‹ä¸é€‚åˆå¤šçº¿ç¨‹ä½¿ç”¨ã€‚ å¦‚æœéœ€è¦è¿™æ ·çš„åŒæ­¥ï¼Œåˆ™å»ºè®®ä½¿ç”¨<a href="https://www.runoob.com/manual/jdk11api/java.base/java/lang/StringBuffer.html"><code>StringBuffer</code></a> ã€‚</p><h3 id="å…³äºstatic"><a href="#å…³äºstatic" class="headerlink" title="å…³äºstatic"></a>å…³äºstatic</h3><blockquote><p>åŸºæœ¬è§£é‡Š</p></blockquote><p>åœ¨ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹P86é¡µæœ‰è¿™æ ·ä¸€æ®µè¯ï¼š</p><p>ã€€ã€€â€œstaticæ–¹æ³•å°±æ˜¯æ²¡æœ‰thisçš„æ–¹æ³•ã€‚åœ¨staticæ–¹æ³•å†…éƒ¨ä¸èƒ½è°ƒç”¨éé™æ€æ–¹æ³•ï¼Œåè¿‡æ¥æ˜¯å¯ä»¥çš„ã€‚è€Œä¸”å¯ä»¥åœ¨æ²¡æœ‰åˆ›å»ºä»»ä½•å¯¹è±¡çš„å‰æä¸‹ï¼Œä»…ä»…é€šè¿‡ç±»æœ¬èº«æ¥è°ƒç”¨staticæ–¹æ³•ã€‚è¿™å®é™…ä¸Šæ­£æ˜¯staticæ–¹æ³•çš„ä¸»è¦ç”¨é€”ã€‚â€</p><blockquote><p>ä½¿ç”¨</p></blockquote><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¿®é¥°æ–¹æ³•</p><p>staticæ–¹æ³•ä¸€èˆ¬ç§°ä½œé™æ€æ–¹æ³•ï¼Œç”±äºé™æ€æ–¹æ³•ä¸ä¾èµ–äºä»»ä½•å¯¹è±¡å°±å¯ä»¥è¿›è¡Œè®¿é—®ï¼Œå› æ­¤å¯¹äºé™æ€æ–¹æ³•æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰thisçš„ï¼Œå› ä¸ºå®ƒä¸ä¾é™„äºä»»ä½•å¯¹è±¡ï¼Œæ—¢ç„¶éƒ½æ²¡æœ‰å¯¹è±¡ï¼Œå°±è°ˆä¸ä¸Šthisäº†ã€‚å¹¶ä¸”ç”±äºè¿™ä¸ªç‰¹æ€§ï¼Œåœ¨é™æ€æ–¹æ³•ä¸­ä¸èƒ½è®¿é—®ç±»çš„éé™æ€æˆå‘˜å˜é‡å’Œéé™æ€æˆå‘˜æ–¹æ³•ï¼Œå› ä¸ºéé™æ€æˆå‘˜æ–¹æ³•/å˜é‡éƒ½æ˜¯å¿…é¡»ä¾èµ–å…·ä½“çš„å¯¹è±¡æ‰èƒ½å¤Ÿè¢«è°ƒç”¨ã€‚</p><h3 id="å…³äºfinal"><a href="#å…³äºfinal" class="headerlink" title="å…³äºfinal"></a>å…³äºfinal</h3><blockquote><p>åŸºæœ¬è§£é‡Š</p></blockquote><p>final è¡¨ç¤ºâ€æœ€åçš„ã€æœ€ç»ˆçš„â€å«ä¹‰ï¼Œå˜é‡ä¸€æ—¦èµ‹å€¼åï¼Œä¸èƒ½è¢«é‡æ–°èµ‹å€¼ã€‚è¢« final ä¿®é¥°çš„å®ä¾‹å˜é‡å¿…é¡»æ˜¾å¼æŒ‡å®šåˆå§‹å€¼ã€‚</p><p>final ä¿®é¥°ç¬¦é€šå¸¸å’Œ static ä¿®é¥°ç¬¦ä¸€èµ·ä½¿ç”¨æ¥åˆ›å»ºç±»å¸¸é‡ã€‚</p><blockquote><p>ä½¿ç”¨</p></blockquote><p><span class="github-emoji"><span>ğŸ’¡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> finalå…³é”®å­—å¯ä»¥ç”¨æ¥ä¿®é¥°å¼•ç”¨ã€æ–¹æ³•å’Œç±»ã€‚ä¿®é¥°çš„ç±»ä¸å¯è¢«ç»§æ‰¿ï¼Œä¿®é¥°æ–¹æ³•ä¸å¯è¢«é‡å†™ã€‚</p><p>ç”¨finalä¿®é¥°å˜é‡é€šå¸¸åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¿®é¥°æ™®é€šåŸºæœ¬ç±»å˜é‡å’Œä¿®é¥°å¼•ç”¨ç±»å‹å˜é‡ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡ç±»å‹å˜é‡ã€‚</p><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¿®é¥°åŸºæœ¬å˜é‡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>{</span><br><span class="line">  <span class="keyword">final</span> <span class="keyword">int</span> value = <span class="number">10</span>;</span><br><span class="line">  <span class="comment">// ä¸‹é¢æ˜¯å£°æ˜å¸¸é‡çš„å®ä¾‹</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BOXWIDTH = <span class="number">6</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> String TITLE = <span class="string">"Manager"</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changeValue</span><span class="params">()</span></span>{</span><br><span class="line">     value = <span class="number">12</span>; <span class="comment">//å°†è¾“å‡ºä¸€ä¸ªé”™è¯¯</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¿®é¥°å¼•ç”¨å˜é‡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> StringBuilder sb = <span class="keyword">new</span> StringBuilder(<span class="string">"Java"</span>);</span><br><span class="line">sb.append(<span class="string">"Script"</span>);</span><br><span class="line">System.out.println(sb);  <span class="comment">//resultJavaScript</span></span><br></pre></td></tr></tbody></table></figure><p>finalä¿®é¥°å¼•ç”¨è¡¨æ˜æœ¬èº«ä¸å¯è¢«ä¿®æ”¹ï¼Œä½†æ— æ³•é˜»æ­¢å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡æœ¬èº«è¢«ä¿®æ”¹</p><p><span class="github-emoji"><span>3âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0033-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>åˆ›å»ºå¸¸é‡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CONST_ONE = <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure><h3 id="å…³äºæŠ½è±¡ç±»"><a href="#å…³äºæŠ½è±¡ç±»" class="headerlink" title="å…³äºæŠ½è±¡ç±»"></a>å…³äºæŠ½è±¡ç±»</h3><h3 id="å…³äºæ¥å£"><a href="#å…³äºæ¥å£" class="headerlink" title="å…³äºæ¥å£"></a>å…³äºæ¥å£</h3><blockquote><p>æ¦‚è¿°</p></blockquote><p>æ¥å£é‡Œçš„å˜é‡éƒ½éšå¼å£°æ˜ä¸º <strong>public static final</strong>,è€Œæ¥å£é‡Œçš„æ–¹æ³•é»˜è®¤æƒ…å†µä¸‹è®¿é—®æƒé™ä¸º <strong>public</strong>ã€‚</p><h3 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h3><h3 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h3><blockquote><p>é›†åˆæ¡†æ¶ä½“ç³»</p></blockquote><p><img src="https://gitee.com/rain-sky/images/raw/master/20210810160733.gif"></p><h3 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h3><h3 id="æ³¨è§£ä¸åå°„"><a href="#æ³¨è§£ä¸åå°„" class="headerlink" title="æ³¨è§£ä¸åå°„"></a>æ³¨è§£ä¸åå°„</h3><h2 id="é”™é¢˜ç§¯ç´¯"><a href="#é”™é¢˜ç§¯ç´¯" class="headerlink" title="é”™é¢˜ç§¯ç´¯"></a>é”™é¢˜ç§¯ç´¯</h2><blockquote><p>1</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tester</span></span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>{</span><br><span class="line">   Integer var1=<span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">   Integer var2=var1;</span><br><span class="line">   doSomething(var2);</span><br><span class="line">   System.out.print(var1.intValue());</span><br><span class="line">   System.out.print(var1==var2);</span><br><span class="line">}</span><br><span class="line"><span class="comment">//ä¼ é€’çš„integeråªæ˜¯åŸvar2çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œç”Ÿå‘½å‘¨æœŸä»…é™äºæ­¤æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(Integer integer)</span></span>{</span><br><span class="line">    integer=<span class="keyword">new</span> Integer(<span class="number">2</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿è¡Œç»“æœï¼š1true</p><p>è§£é‡Šï¼š</p><p>åªæœ‰å¯¹å¼•ç”¨å¯¹è±¡çš„å†…éƒ¨åšäº†ä¿®æ”¹ï¼Œæ‰ä¼šå½±å“åŸå¯¹è±¡ï¼Œå¦‚æœç›´æ¥å°†å¼•ç”¨ä¿®æ”¹äº†ï¼Œåˆ™å¯¹åŸå¯¹è±¡æ²¡æœ‰å½±å“ï¼Œå”¯ä¸€çš„å½±å“å°±æ˜¯ï¼šè¿™ä¸ªè¢«ä¿®æ”¹çš„å¼•ç”¨ï¼Œç°åœ¨ä¸æ˜¯åŸæ¥å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œæ˜¯æ–°å¯¹è±¡çš„å¼•ç”¨ã€‚</p><p>å¼•ç”¨ä¼ é€’æŒ‡çš„æ˜¯ä¼ é€’çš„æ—¶å€™ï¼Œä¼ é€’çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚å¦‚æœå¯¹å¼•ç”¨çš„å†…éƒ¨æˆå‘˜è¿›è¡Œæ“ä½œï¼Œåˆ™ä¼šç›´æ¥å½±å“åˆ°åŸå¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœç›´æ¥æŠŠæ­¤å¼•ç”¨æŒ‡å‘äº†å…¶ä»–å¯¹è±¡ï¼Œé‚£å¯¹ä¸èµ·ï¼Œè¿™ä¸ªå¼•ç”¨ä»æ­¤ä»¥åï¼Œä¾¿ä¸ä¹‹å‰çš„å¯¹è±¡æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå½“å‰ä»£è¡¨çš„ä»…ä»…æ˜¯æ–°æŒ‡å‘çš„å¯¹è±¡ã€‚</p><p><span class="github-emoji"><span>âš </span><img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å…¶å®Javaé‡Œå¹¶æ— ä»€ä¹ˆå¼•ç”¨ä¼ é€’ï¼Œå½’æ ¹ç»“åº•éƒ½æ˜¯å€¼ä¼ é€’</p><blockquote><p>2</p></blockquote><p>1.sleepä¼šä½¿å½“å‰çº¿ç¨‹ç¡çœ æŒ‡å®šæ—¶é—´ï¼Œä¸é‡Šæ”¾é”</p><p>2.yieldä¼šä½¿å½“å‰çº¿ç¨‹é‡å›åˆ°å¯æ‰§è¡ŒçŠ¶æ€ï¼Œç­‰å¾…cpuçš„è°ƒåº¦ï¼Œä¸é‡Šæ”¾é”</p><p>3.waitä¼šä½¿å½“å‰çº¿ç¨‹å›åˆ°çº¿ç¨‹æ± ä¸­ç­‰å¾…ï¼Œé‡Šæ”¾é”ï¼Œå½“è¢«å…¶ä»–çº¿ç¨‹ä½¿ç”¨notifyï¼ŒnotifyAllå”¤é†’æ—¶è¿›å…¥å¯æ‰§è¡ŒçŠ¶æ€</p><p>4.å½“å‰çº¿ç¨‹è°ƒç”¨ æŸçº¿ç¨‹.joinï¼ˆï¼‰æ—¶ä¼šä½¿å½“å‰çº¿ç¨‹ç­‰å¾…æŸçº¿ç¨‹æ‰§è¡Œå®Œæ¯•å†ç»“æŸï¼Œåº•å±‚è°ƒç”¨äº†waitï¼Œé‡Šæ”¾é”</p><blockquote><p>3</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">returnTest</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">catch</span> (Exception e)</span><br><span class="line">    {</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">finally</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¾“å‡ºï¼šfalse</p><p>è§£é‡Šï¼štryå¤„returnå‰ä¼šå…ˆæ‰§è¡Œfinallyï¼Œæ•…ç›´æ¥è¿”å›false</p><blockquote><p>4</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> String sRet = <span class="string">""</span>;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"> </span>{</span><br><span class="line"> <span class="keyword">try</span></span><br><span class="line"> {</span><br><span class="line"> <span class="keyword">if</span> (i%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line"> {</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> Exception();</span><br><span class="line"> }</span><br><span class="line"> }</span><br><span class="line"> <span class="keyword">catch</span> (Exception e)</span><br><span class="line"> {</span><br><span class="line"> sRet += <span class="string">"0"</span>;</span><br><span class="line"> <span class="keyword">return</span>;</span><br><span class="line"> } </span><br><span class="line"> <span class="keyword">finally</span></span><br><span class="line"> {</span><br><span class="line"> sRet += <span class="string">"1"</span>;</span><br><span class="line"> }</span><br><span class="line"> sRet += <span class="string">"2"</span>;</span><br><span class="line"> }</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"> </span>{</span><br><span class="line"> func(<span class="number">1</span>);</span><br><span class="line"> func(<span class="number">2</span>);</span><br><span class="line"> System.out.println(sRet);</span><br><span class="line"> }</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure><p>è¾“å‡ºï¼š1201</p><p>è§£é‡Šï¼šç¬¬ä¸€æ­¥ï¼Œfunc(1)ï¼Œifæ¡ä»¶ä¸æˆç«‹ï¼Œä¸æŠ›å‡ºå¼‚å¸¸ï¼Œcatchä¸è¿è¡Œï¼Œfinalè¿è¡Œï¼Œæ‹¼ä¸²å¾—åˆ°â€œ1â€ï¼Œç¨‹åºç»§ç»­å¾€ä¸‹èµ°ï¼Œæ‹¼ä¸²å¾—åˆ°â€œ12â€ã€‚ ç¬¬äºŒæ­¥ï¼Œfun(2)ï¼Œifæ¡ä»¶æˆç«‹ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œcatchæ•è·å¼‚å¸¸ï¼Œè¿è¡Œcatché‡Œé¢ä»£ç ï¼Œæ‹¼ä¸²å¾—åˆ°â€œ120â€ï¼Œè™½ç„¶æœ‰returnï¼Œä½†æ˜¯ä¸ç®¡å‡ºä¸å‡ºå¼‚å¸¸ï¼Œfinalé‡Œä»£ç å¿…é¡»æ‰§è¡Œï¼Œæ‰§è¡Œfinalï¼Œæ‹¼ä¸²å¾—åˆ°â€œ1201â€ï¼Œç„¶åreturnç»“æŸã€‚æ‰€ä»¥æœ€ç»ˆç»“æœâ€œ1201â€ã€‚</p><blockquote><p>5</p></blockquote><p>Servletçš„ç”Ÿå‘½å‘¨æœŸ</p><p>1.åŠ è½½ï¼šå®¹å™¨é€šè¿‡ç±»åŠ è½½å™¨ä½¿ç”¨Servletç±»å¯¹åº”çš„æ–‡ä»¶æ¥åŠ è½½Servlet</p><p>2.åˆ›å»ºï¼šé€šè¿‡<strong>è°ƒç”¨Servletçš„æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªServletå®ä¾‹</strong></p><p>3.åˆå§‹åŒ–ï¼šé€šè¿‡è°ƒç”¨Servletçš„init()æ–¹æ³•æ¥å®Œæˆåˆå§‹åŒ–å·¥ä½œï¼Œ<strong>è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Servletå·²ç»è¢«åˆ›å»ºï¼Œä½†åœ¨å‘å®¢æˆ·ç«¯æä¾›æœåŠ¡ä¹‹å‰è°ƒç”¨ã€‚</strong></p><p>4.å¤„ç†å®¢æˆ·è¯·æ±‚ï¼šServletåˆ›å»ºåå°±å¯ä»¥å¤„ç†è¯·æ±‚ï¼Œå½“æœ‰æ–°çš„å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼ŒWebå®¹å™¨éƒ½ä¼š<strong>åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹</strong>æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚æ¥ç€è°ƒç”¨Servletçš„</p><p>Service()æ–¹æ³•æ¥å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼ˆServiceæ–¹***æ ¹æ®è¯·æ±‚çš„methodå±æ€§æ¥è°ƒç”¨doGetï¼ˆï¼‰å’ŒdoPostï¼ˆï¼‰ï¼‰</p><p>5.å¸è½½ï¼š<strong>å®¹å™¨åœ¨å¸è½½Servletä¹‹å‰</strong>éœ€è¦è°ƒç”¨destroy()æ–¹æ³•ï¼Œè®©Servleté‡Šæ”¾å…¶å ç”¨çš„èµ„æºã€‚</p><blockquote><p>6</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span> b1=<span class="number">1</span>,b2=<span class="number">2</span>,b3,b6,b8;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">byte</span> b4=<span class="number">4</span>,b5=<span class="number">6</span>,b7;</span><br><span class="line">b3=(b1+b2);  <span class="comment">/*è¯­å¥1*/</span></span><br><span class="line">b6=b4+b5;    <span class="comment">/*è¯­å¥2*/</span></span><br><span class="line">b8=(b1+b4);  <span class="comment">/*è¯­å¥3*/</span></span><br><span class="line">b7=(b2+b5);  <span class="comment">/*è¯­å¥4*/</span></span><br><span class="line">System.out.println(b3+b6);</span><br></pre></td></tr></tbody></table></figure><p>ç»“æœï¼šè¯­å¥1ï¼Œ3ï¼Œ4é”™è¯¯</p><p>è§£é‡Šï¼šä¸€ã€å…³äºfinalçš„é‡è¦çŸ¥è¯†ç‚¹;</p><p>1ã€finalå…³é”®å­—å¯ä»¥ç”¨äºæˆå‘˜å˜é‡ã€æœ¬åœ°å˜é‡ã€æ–¹æ³•ä»¥åŠç±»ã€‚</p><p>2ã€ finalæˆå‘˜å˜é‡å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™åˆå§‹åŒ–æˆ–è€…åœ¨æ„é€ å™¨ä¸­åˆå§‹åŒ–ï¼Œå¦åˆ™å°±ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚</p><p>3ã€ ä½ ä¸èƒ½å¤Ÿå¯¹finalå˜é‡å†æ¬¡èµ‹å€¼ã€‚</p><p>4ã€ æœ¬åœ°å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶èµ‹å€¼ã€‚</p><p>5ã€ åœ¨åŒ¿åç±»ä¸­æ‰€æœ‰å˜é‡éƒ½å¿…é¡»æ˜¯finalå˜é‡ã€‚</p><p>6ã€ finalæ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚</p><p>7ã€ finalç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚</p><p>8ã€ æ²¡æœ‰åœ¨å£°æ˜æ—¶åˆå§‹åŒ–finalå˜é‡çš„ç§°ä¸ºç©ºç™½finalå˜é‡(blank final variable)ï¼Œå®ƒä»¬å¿…é¡»åœ¨æ„é€ å™¨ä¸­åˆå§‹åŒ–ï¼Œæˆ–è€…è°ƒç”¨this()åˆå§‹åŒ–ã€‚ä¸è¿™ä¹ˆåšçš„è¯ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™â€œfinalå˜é‡(å˜é‡å)éœ€è¦è¿›è¡Œåˆå§‹åŒ–â€ã€‚</p><p>äºŒã€æ•°æ®ç±»å‹è½¬æ¢</p><p>å½“ä½¿ç”¨ +ã€-ã€*ã€/ã€%ã€è¿ç®—æ“ä½œæ˜¯ï¼Œéµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š</p><p>åªè¦ä¸¤ä¸ªæ“ä½œæ•°ä¸­æœ‰ä¸€ä¸ªæ˜¯doubleç±»å‹çš„ï¼Œå¦ä¸€ä¸ªå°†ä¼šè¢«è½¬æ¢æˆdoubleç±»å‹ï¼Œå¹¶ä¸”ç»“æœä¹Ÿæ˜¯doubleç±»å‹ï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°ä¸­æœ‰ä¸€ä¸ªæ˜¯floatç±»å‹çš„ï¼Œå¦ä¸€ä¸ªå°†ä¼šè¢«è½¬æ¢ä¸ºfloatç±»å‹ï¼Œå¹¶ä¸”ç»“æœä¹Ÿæ˜¯floatç±»å‹ï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°ä¸­æœ‰ä¸€ä¸ªæ˜¯longç±»å‹çš„ï¼Œå¦ä¸€ä¸ªå°†ä¼šè¢«è½¬æ¢æˆlongç±»å‹ï¼Œå¹¶ä¸”ç»“æœä¹Ÿæ˜¯longç±»å‹ï¼Œå¦åˆ™ï¼ˆæ“ä½œæ•°ä¸ºï¼šbyteã€shortã€int ã€charï¼‰ï¼Œä¸¤ä¸ªæ•°éƒ½ä¼šè¢«è½¬æ¢æˆintç±»å‹ï¼Œå¹¶ä¸”ç»“æœä¹Ÿæ˜¯intç±»å‹ã€‚</p><p>è¯­å¥ 1  :ï¼ˆb1 + b2ï¼‰ è¢«è½¬æ¢ä¸ºintç±»å‹ ä½†æ˜¯ b3ä»ä¸º byte ï¼Œæ‰€ä»¥å‡ºé”™ è¦ä¹ˆå°†b3è½¬åŒ–ä¸ºint è¦ä¹ˆå°†ï¼ˆb1 + b2ï¼‰ å¼ºåˆ¶è½¬æ¢ä¸ºbyteç±»å‹ã€‚æ‰€ä»¥è¯­å¥1é”™è¯¯ã€‚</p><p>è¯­å¥ 2ï¼šb4 ã€b5è¢«å£°æ˜final æ‰€ä»¥ç±»å‹æ˜¯ä¸ä¼šè½¬æ¢ï¼Œ è®¡ç®—ç»“æœä»»ç„¶æ˜¯byte  ï¼Œæ‰€ä»¥ è¯­å¥2æ­£ç¡®ã€‚</p><p>è¯­å¥ 3ï¼š(b1 + b4)  ç»“æœä»ç„¶è½¬æ¢æˆint  æ‰€ä»¥è¯­å¥ 3 é”™è¯¯ã€‚</p><p>è¯­å¥ 4 : (b2 + b5)  ç»“æœä»ç„¶è½¬æ¢ä¸ºint ï¼Œ æ‰€ä»¥è¯­å¥4é”™è¯¯ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note orange icon simple&quot;&gt;&lt;i class=&quot;note-icon fas fa-bullhorn&quot;&gt;&lt;/i&gt;&lt;p&gt;è¦è¸©çš„å‘è¿˜æœ‰å¾ˆå¤šï¼Œè‡ªå­¦è€…ï¼Œä½ å°†å»å¾€ä½•æ–¹~&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;åŸºç¡€&quot;&gt;&lt;a href=&quot;#åŸºç¡€&quot; </summary>
      
    
    
    
    
    <category term="Java" scheme="https://rain-sky.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>æµ…æ==,equals,hashcode</title>
    <link href="https://rain-sky.github.io/2021/04/27/%E6%B5%85%E6%9E%90-equals-hashcode/"/>
    <id>https://rain-sky.github.io/2021/04/27/%E6%B5%85%E6%9E%90-equals-hashcode/</id>
    <published>2021-04-27T00:52:45.000Z</published>
    <updated>2021-05-16T08:31:31.391Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æµ…æ-equals-hashcode"><a href="#æµ…æ-equals-hashcode" class="headerlink" title="æµ…æ==,equals,hashcode"></a>æµ…æ==,equals,hashcode</h1><h2 id="æƒ…æ™¯å›é¡¾"><a href="#æƒ…æ™¯å›é¡¾" class="headerlink" title="æƒ…æ™¯å›é¡¾"></a>æƒ…æ™¯å›é¡¾</h2><p>æœ‰ä¸€é—®æ›°ï¼šä¸¤ä¸ªobjï¼Œå¦‚æœequalsç›¸ç­‰ï¼ŒhashCode()ä¸€å®šç›¸ç­‰(ç¬¦åˆä»£ç è§„èŒƒçš„æƒ…å†µä¸‹)</p><p>é¦–å…ˆï¼š</p><ol><li>== æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡åœ¨javaè™šæ‹Ÿæœºä¸­çš„åœ°å€</li><li>equals é»˜è®¤æ¯”è¾ƒçš„ä¹Ÿæ˜¯ä¸¤ä¸ªå¯¹è±¡åœ¨javaè™šæ‹Ÿæœºä¸­çš„åœ°å€ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¯¹ä¸€ä¸ªå¯¹è±¡çš„equalsæ–¹æ³•è¿›è¡Œé‡å†™ï¼Œè€Œâ€œ==â€æˆ‘ä»¬æ— æ³•é‡å†™</li><li>hashcode è¿”å›ä¸€ä¸ªå¯¹è±¡åœ¨javaè™šæ‹Ÿæœºä¸­çš„åœ°å€</li></ol><h2 id="JDK-8ä¸­Objectç±»ä¸­å¯¹äºequalsä¸hashcodeæ–¹æ³•çš„æè¿°"><a href="#JDK-8ä¸­Objectç±»ä¸­å¯¹äºequalsä¸hashcodeæ–¹æ³•çš„æè¿°" class="headerlink" title="JDK 8ä¸­Objectç±»ä¸­å¯¹äºequalsä¸hashcodeæ–¹æ³•çš„æè¿°"></a>JDK 8ä¸­Objectç±»ä¸­å¯¹äºequalsä¸hashcodeæ–¹æ³•çš„æè¿°</h2><blockquote><h4 id="equals"><a href="#equals" class="headerlink" title="equals"></a>equals</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span></span><br></pre></td></tr></tbody></table></figure><p>æŒ‡ç¤ºä¸€äº›å…¶ä»–å¯¹è±¡æ˜¯å¦ç­‰äºæ­¤ã€‚</p><p><code>equals</code>æ–¹æ³•åœ¨éç©ºå¯¹è±¡å¼•ç”¨ä¸Šå®ç°ç­‰ä»·å…³ç³»ï¼š </p><ul><li><em>è‡ªåæ€§</em> ï¼šå¯¹äºä»»ä½•éç©ºçš„å‚è€ƒå€¼<code>x</code> ï¼Œ  <code>x.equals(x)</code>åº”è¯¥è¿”å›<code>true</code> ã€‚ </li><li>å®ƒæ˜¯<em>å¯¹ç§°çš„</em> ï¼šå¯¹äºä»»ä½•éç©ºå¼•ç”¨å€¼<code>x</code>å’Œ<code>y</code> ï¼Œ  <code>x.equals(y)</code>åº”è¯¥è¿”å›<code>true</code>å½“ä¸”ä»…å½“<code>y.equals(x)</code>å›æŠ¥<code>true</code>  ã€‚ </li><li><em>ä¼ é€’æ€§</em> ï¼šå¯¹äºä»»ä½•éç©ºå¼•ç”¨å€¼<code>x</code> ï¼Œ <code>y</code>å’Œ<code>z</code>  ï¼Œå¦‚æœ<code>x.equals(y)</code>å›æŠ¥<code>true</code>ä¸ª<code>y.equals(z)</code>å›æŠ¥<code>true</code>  ï¼Œç„¶å<code>x.equals(z)</code>åº”è¯¥è¿”å›<code>true</code> ã€‚ </li><li>å®ƒæ˜¯<em>ä¸€è‡´çš„</em> ï¼šå¯¹äºä»»ä½•éç©ºå¼•ç”¨å€¼<code>x</code>å’Œ<code>y</code>  ï¼Œå¤šæ¬¡è°ƒç”¨<code>x.equals(y)</code>å§‹ç»ˆè¿”å›<code>true</code>æˆ–å§‹ç»ˆè¿”å›<code>false</code>  ï¼Œæ²¡æœ‰è®¾ç½®ä¸­ä½¿ç”¨çš„ä¿¡æ¯<code>equals</code>æ¯”è¾ƒä¸Šçš„å¯¹è±¡è¢«ä¿®æ”¹ã€‚ </li><li>å¯¹äºä»»ä½•éç©ºçš„å‚è€ƒå€¼<code>x</code> ï¼Œ  <code>x.equals(null)</code>åº”è¯¥è¿”å›<code>false</code> ã€‚ </li></ul><p>è¯¥<code>equals</code>ç±»æ–¹æ³•<code>Object</code>å®ç°å¯¹è±¡ä¸Šå·®åˆ«å¯èƒ½æ€§æœ€å¤§çš„ç›¸ç­‰å…³ç³»;  ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä»»ä½•éç©ºçš„å‚è€ƒå€¼<code>x</code>å’Œ<code>y</code>  ï¼Œå½“ä¸”ä»…å½“<code>x</code>å’Œ<code>y</code>å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼ˆ <code>x ==  y</code>å…·æœ‰å€¼<code>true</code> ï¼‰æ—¶ï¼Œè¯¥æ–¹æ³•è¿”å›<code>true</code> ã€‚ </p><p>è¯·æ³¨æ„ï¼Œæ— è®ºä½•æ—¶è¦†ç›–è¯¥æ–¹æ³•ï¼Œé€šå¸¸éœ€è¦è¦†ç›–<code>hashCode</code>æ–¹æ³•ï¼Œä»¥ä¾¿ç»´æŠ¤<code>hashCode</code>æ–¹æ³•çš„é€šç”¨åˆåŒï¼Œè¯¥æ–¹æ³•è§„å®šç›¸ç­‰çš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸ç­‰çš„å“ˆå¸Œç ã€‚ </p><ul><li><p>å‚æ•° </p><p><code>obj</code> - ä¸ä¹‹æ¯”è¾ƒçš„å‚è€ƒå¯¹è±¡ã€‚ </p></li><li><p>ç»“æœ </p><p><code>true</code>å¦‚æœæ­¤å¯¹è±¡ä¸objå‚æ•°ç›¸åŒ;  <code>false</code>å¦åˆ™ã€‚ </p></li></ul></blockquote><blockquote><h4 id="hashCode"><a href="#hashCode" class="headerlink" title="hashCode"></a>hashCode</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span></span><br></pre></td></tr></tbody></table></figure><p>è¿”å›å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚æ”¯æŒè¿™ç§æ–¹æ³•æ˜¯ä¸ºäº†æ•£åˆ—è¡¨ï¼Œå¦‚<a href="../../java/util/HashMap.html"><code>HashMap</code></a>æä¾›çš„é‚£æ · ã€‚</p><p><code>hashCode</code>çš„æ€»åˆåŒæ˜¯ï¼š </p><ul><li>åªè¦åœ¨æ‰§è¡ŒJavaåº”ç”¨ç¨‹åºæ—¶å¤šæ¬¡åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œ  <code>hashCode</code>æ–¹æ³•å¿…é¡»å§‹ç»ˆè¿”å›ç›¸åŒçš„æ•´æ•°ï¼Œå‰ææ˜¯ä¿®æ”¹äº†å¯¹è±¡ä¸­<code>equals</code>æ¯”è¾ƒä¸­çš„ä¿¡æ¯ã€‚  è¯¥æ•´æ•°ä¸éœ€è¦ä»ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ‰§è¡Œåˆ°ç›¸åŒåº”ç”¨ç¨‹åºçš„å¦ä¸€ä¸ªæ‰§è¡Œä¿æŒä¸€è‡´ã€‚ </li><li>å¦‚æœæ ¹æ®<code>equals(Object)</code>æ–¹æ³•ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™åœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„æ¯ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨<code>hashCode</code>æ–¹æ³•å¿…é¡»äº§ç”Ÿç›¸åŒçš„æ•´æ•°ç»“æœã€‚ </li><li><em>ä¸</em>è¦æ±‚å¦‚æœä¸¤ä¸ªå¯¹è±¡æ ¹æ®equals(java.lang.Object)æ–¹æ³•ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆåœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„æ¯ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨hashCodeæ–¹æ³•å¿…é¡»äº§ç”Ÿä¸åŒçš„æ•´æ•°ç»“æœã€‚  ä½†æ˜¯ï¼Œç¨‹åºå‘˜åº”è¯¥æ„è¯†åˆ°ï¼Œä¸ºä¸ç­‰å¯¹è±¡ç”Ÿæˆä¸åŒçš„æ•´æ•°ç»“æœå¯èƒ½ä¼šæé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚ </li></ul><p>å°½å¯èƒ½å¤šçš„åˆç†å®ç”¨ï¼Œç”±ç±»åˆ«Objectå®šä¹‰çš„hashCodeæ–¹æ³•ç¡®å®ä¸ºä¸åŒå¯¹è±¡è¿”å›ä¸åŒçš„æ•´æ•°ã€‚  ï¼ˆè¿™é€šå¸¸é€šè¿‡å°†å¯¹è±¡çš„å†…éƒ¨åœ°å€è½¬æ¢ä¸ºæ•´æ•°æ¥å®ç°ï¼Œä½†Javaçš„ç¼–ç¨‹è¯­è¨€ä¸éœ€è¦æ­¤å®ç°æŠ€æœ¯ã€‚ï¼‰ </p><ul><li><p>ç»“æœ </p><p>è¯¥å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚ </p></li></ul></blockquote><hr><p><strong>ç”±ä»¥ä¸Šæè¿°å¯çŸ¥ï¼š</strong></p><blockquote><p><strong>hashCodeæ˜¯æ‰€æœ‰javaå¯¹è±¡çš„å›ºæœ‰æ–¹æ³•ï¼Œå¦‚æœä¸é‡è½½çš„è¯ï¼Œè¿”å›çš„å®é™…ä¸Šæ˜¯è¯¥å¯¹è±¡åœ¨jvmçš„å †ä¸Šçš„å†…å­˜åœ°å€ï¼Œè€Œä¸åŒå¯¹è±¡çš„å†…å­˜åœ°å€è‚¯å®šä¸åŒï¼Œæ‰€ä»¥è¿™ä¸ªhashCodeä¹Ÿå°±è‚¯å®šä¸åŒ</strong>äº†ã€‚å¦‚æœé‡è½½äº†çš„è¯ï¼Œç”±äºé‡‡ç”¨çš„ç®—æ³•çš„é—®é¢˜ï¼Œæœ‰å¯èƒ½å¯¼è‡´ä¸¤ä¸ªä¸åŒå¯¹è±¡çš„hashCodeç›¸åŒã€‚</p><p>ä¸¤ä¸ªå¯¹è±¡equalsï¼ˆï¼‰ç›¸åŒï¼Œé‚£ä¹ˆhashcodeè‚¯å®šä¹Ÿç›¸åŒï¼Œä½†equals()ä¸åŒï¼Œhashcodeä¸ä¸€å®šä¸åŒã€‚</p><p>è€Œä¸”ï¼Œè¿˜éœ€è¦æ³¨æ„ä¸€ä¸‹ä¸¤ç‚¹ï¼š</p><p>1ï¼‰hashCodeå’Œequalsä¸¤ä¸ªæ–¹æ³•æ˜¯æœ‰è¯­ä¹‰å…³è”çš„ï¼Œå®ƒä»¬éœ€è¦æ»¡è¶³ï¼š</p><p>A.equals(B)==true â€“&gt; A.hashCode()==B.hashCode()</p><p>å› æ­¤é‡è½½å…¶ä¸­ä¸€ä¸ªæ–¹æ³•æ—¶ä¹Ÿéœ€è¦å°†å¦ä¸€ä¸ªä¹Ÿé‡è½½ã€‚</p></blockquote><p>é™„ä¸ŠStringç±»equalsæºç å®ç°</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object anObject)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == anObject) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (anObject <span class="keyword">instanceof</span> String) {</span><br><span class="line">        String anotherString = (String)anObject;</span><br><span class="line">        <span class="keyword">int</span> n = value.length;</span><br><span class="line">        <span class="keyword">if</span> (n == anotherString.value.length) {</span><br><span class="line">            <span class="keyword">char</span> v1[] = value;</span><br><span class="line">            <span class="keyword">char</span> v2[] = anotherString.value;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (n-- != <span class="number">0</span>) {</span><br><span class="line">                <span class="keyword">if</span> (v1[i] != v2[i])</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                i++;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æµ…æ-equals-hashcode&quot;&gt;&lt;a href=&quot;#æµ…æ-equals-hashcode&quot; class=&quot;headerlink&quot; title=&quot;æµ…æ==,equals,hashcode&quot;&gt;&lt;/a&gt;æµ…æ==,equals,hashcode&lt;/h1&gt;&lt;h2 i</summary>
      
    
    
    
    
    <category term="Java" scheme="https://rain-sky.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>ssmæ•´åˆ</title>
    <link href="https://rain-sky.github.io/2021/04/24/ssm%E6%95%B4%E5%90%88/"/>
    <id>https://rain-sky.github.io/2021/04/24/ssm%E6%95%B4%E5%90%88/</id>
    <published>2021-04-24T01:49:32.000Z</published>
    <updated>2021-08-08T07:25:41.274Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ssmæ•´åˆæµç¨‹"><a href="#ssmæ•´åˆæµç¨‹" class="headerlink" title="ssmæ•´åˆæµç¨‹"></a>ssmæ•´åˆæµç¨‹</h1><h2 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1 å‡†å¤‡å·¥ä½œ"></a>1 å‡†å¤‡å·¥ä½œ</h2><h3 id="1-1-æ•°æ®åº“å»ºç«‹"><a href="#1-1-æ•°æ®åº“å»ºç«‹" class="headerlink" title="1.1 æ•°æ®åº“å»ºç«‹"></a>1.1 æ•°æ®åº“å»ºç«‹</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> ssmbuild;</span><br><span class="line"><span class="keyword">USE</span> ssmbuild;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`books`</span>(</span><br><span class="line"><span class="string">`bookID`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">"ä¹¦id"</span>,</span><br><span class="line"><span class="string">`bookName`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">"ä¹¦å"</span>,</span><br><span class="line"><span class="string">`bookCounts`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">"æ•°é‡"</span>,</span><br><span class="line"><span class="string">`detail`</span> <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">"æè¿°"</span>,</span><br><span class="line"><span class="keyword">KEY</span> <span class="string">`bookID`</span>(<span class="string">`bookID`</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`books`</span> <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">'Spring'</span>,<span class="number">1</span>,<span class="string">'ä»å…¥é—¨åˆ°æ”¾å¼ƒ'</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">'MySQL'</span>,<span class="number">10</span>,<span class="string">'ä»åˆ åº“åˆ°è·‘è·¯'</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">'Linux'</span>,<span class="number">5</span>,<span class="string">'ä»è¿›é—¨åˆ°è¿›ç‰¢'</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="1-2-åœ¨IDEAä¸­è¿æ¥æ•°æ®åº“-æµ‹è¯•è¿æ¥æˆåŠŸ"><a href="#1-2-åœ¨IDEAä¸­è¿æ¥æ•°æ®åº“-æµ‹è¯•è¿æ¥æˆåŠŸ" class="headerlink" title="1.2 åœ¨IDEAä¸­è¿æ¥æ•°æ®åº“(æµ‹è¯•è¿æ¥æˆåŠŸ)"></a>1.2 åœ¨IDEAä¸­è¿æ¥æ•°æ®åº“(æµ‹è¯•è¿æ¥æˆåŠŸ)</h3><p><img src="https://gitee.com/rain-sky/images/raw/master/20210428140125.png"></p><h3 id="1-3-ç¼–å†™æ•°æ®åº“å®ä½“æ˜ å°„ç±»"><a href="#1-3-ç¼–å†™æ•°æ®åº“å®ä½“æ˜ å°„ç±»" class="headerlink" title="1.3 ç¼–å†™æ•°æ®åº“å®ä½“æ˜ å°„ç±»"></a>1.3 ç¼–å†™æ•°æ®åº“å®ä½“æ˜ å°„ç±»</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.chen.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> boolID;</span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> bookCounts;</span><br><span class="line">    <span class="keyword">private</span> String detail;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Book</span><span class="params">(<span class="keyword">int</span> boolID, String bookName, <span class="keyword">int</span> bookCounts, String detail)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.boolID = boolID;</span><br><span class="line">        <span class="keyword">this</span>.bookName = bookName;</span><br><span class="line">        <span class="keyword">this</span>.bookCounts = bookCounts;</span><br><span class="line">        <span class="keyword">this</span>.detail = detail;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Book</span><span class="params">()</span></span>{}</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBoolID</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> boolID;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBoolID</span><span class="params">(<span class="keyword">int</span> boolID)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.boolID = boolID;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getBookName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> bookName;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookName</span><span class="params">(String bookName)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.bookName = bookName;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBookCounts</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> bookCounts;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookCounts</span><span class="params">(<span class="keyword">int</span> bookCounts)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.bookCounts = bookCounts;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDetail</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> detail;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDetail</span><span class="params">(String detail)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.detail = detail;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"The book: "</span>+<span class="keyword">this</span>.bookName+<span class="string">", "</span>+<span class="keyword">this</span>.boolID+<span class="string">", "</span>+<span class="keyword">this</span>.bookCounts+<span class="string">", "</span>+<span class="keyword">this</span>.detail;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="2-mavené…ç½®ï¼Œä¾èµ–å¯¼å…¥ä»¥åŠèµ„æºè¿‡æ»¤"><a href="#2-mavené…ç½®ï¼Œä¾èµ–å¯¼å…¥ä»¥åŠèµ„æºè¿‡æ»¤" class="headerlink" title="2 mavené…ç½®ï¼Œä¾èµ–å¯¼å…¥ä»¥åŠèµ„æºè¿‡æ»¤"></a>2 mavené…ç½®ï¼Œä¾èµ–å¯¼å…¥ä»¥åŠèµ„æºè¿‡æ»¤</h2><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.chen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>BookManage<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿ç”¨Jackson --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="3-é…ç½®DAOå±‚"><a href="#3-é…ç½®DAOå±‚" class="headerlink" title="3. é…ç½®DAOå±‚"></a>3. é…ç½®DAOå±‚</h2><h3 id="3-1-ç¼–å†™å¤–éƒ¨æ•°æ®æºé…ç½®database-properties"><a href="#3-1-ç¼–å†™å¤–éƒ¨æ•°æ®æºé…ç½®database-properties" class="headerlink" title="3.1 ç¼–å†™å¤–éƒ¨æ•°æ®æºé…ç½®database.properties"></a>3.1 ç¼–å†™å¤–éƒ¨æ•°æ®æºé…ç½®database.properties</h3><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/ssmbuild?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="meta">jdbc.user</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123123</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-ç¼–å†™mybatis-config-xml"><a href="#3-2-ç¼–å†™mybatis-config-xml" class="headerlink" title="3.2 ç¼–å†™mybatis-config.xml"></a>3.2 ç¼–å†™mybatis-config.xml</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"LOG4J"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.chen.pojo"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨mybatis-config.xmlåšsetçš„é…ç½®ï¼Œå¦‚é…ç½®æ—¥å¿— --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>log4j.properties</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For JBoss: Avoid to setup Log4J outside $JBOSS_HOME/server/default/deploy/log4j.xml!</span></span><br><span class="line"><span class="comment"># For all other servers: Comment out the Log4J listener in web.xml to activate Log4J.</span></span><br><span class="line"><span class="comment">#log4j.rootLogger=INFO, stdout, logfile</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG,stdout</span></span><br><span class="line"></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%d %p [%c] - %m%n</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#log4j.appender.logfile=org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="comment">#log4j.appender.logfile.File=system.log</span></span><br><span class="line"><span class="comment">#log4j.appender.logfile.MaxFileSize=512KB</span></span><br><span class="line"><span class="comment"># Keep three backup files.</span></span><br><span class="line"><span class="comment">#log4j.appender.logfile.MaxBackupIndex=3</span></span><br><span class="line"><span class="comment"># Pattern to output: date priority [category] - message</span></span><br><span class="line"><span class="comment">#log4j.appender.logfile.layout=org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="comment">#log4j.appender.logfile.layout.ConversionPattern=%d %p [%c] - %m%n</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-3-ç¼–å†™spring-dao-xml"><a href="#3-3-ç¼–å†™spring-dao-xml" class="headerlink" title="3.3 ç¼–å†™spring-dao.xml"></a>3.3 ç¼–å†™spring-dao.xml</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œå¦‚æœä½¿ç”¨åŒ…æ‰«æåï¼Œå¯ä»¥çœç•¥ä¸å†™  &lt;context:component-config/&gt;  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.chen.pojo"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.chen.dao"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/ssmbuild?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123123"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:com/chen/dao/*.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionTemplate"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">ref</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ³¨å…¥mybatisä»£ç†ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥sqlSessionFactory --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»™å‡ºéœ€è¦æ‰«æDaoæ¥å£åŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.chen.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-4-ç¼–å†™DAOå±‚æ¥å£"><a href="#3-4-ç¼–å†™DAOå±‚æ¥å£" class="headerlink" title="3.4 ç¼–å†™DAOå±‚æ¥å£"></a>3.4 ç¼–å†™DAOå±‚æ¥å£</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.chen.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.chen.pojo.Book;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookMapper</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insertBook</span><span class="params">(Book book)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteBookById</span><span class="params">( <span class="meta">@Param("bookId")</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateBook</span><span class="params">(Book book)</span></span>;</span><br><span class="line">    <span class="function">Book <span class="title">queryBookById</span><span class="params">(<span class="meta">@Param("bookId")</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function">List&lt;Book&gt; <span class="title">queryAllBook</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-5-ç¼–å†™æ¥å£å¯¹åº”çš„mapper"><a href="#3-5-ç¼–å†™æ¥å£å¯¹åº”çš„mapper" class="headerlink" title="3.5 ç¼–å†™æ¥å£å¯¹åº”çš„mapper"></a>3.5 ç¼–å†™æ¥å£å¯¹åº”çš„mapper</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.chen.dao.BookMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertBook"</span> <span class="attr">parameterType</span>=<span class="string">"com.chen.pojo.Book"</span>&gt;</span></span><br><span class="line">        insert into ssmbuild.books values (#{bookId},#{bookName},#{bookCounts},#{detail});</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteBookById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        delete * from ssmbuild.books where bookID = #{bookId};</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateBook"</span> <span class="attr">parameterType</span>=<span class="string">"com.chen.pojo.Book"</span>&gt;</span></span><br><span class="line">        update ssmbuild.books set bookID = #{bookId},bookCounts = #{bookCounts},bookName = #{bookName},detail = #{detail};</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryBookById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"com.chen.pojo.Book"</span>&gt;</span></span><br><span class="line">        select * from ssmbuild.books where bookID = #{bookId};</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryAllBook"</span> <span class="attr">resultType</span>=<span class="string">"com.chen.pojo.Book"</span>&gt;</span></span><br><span class="line">        select * from ssmbuild.books;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="4-é…ç½®serviceå±‚"><a href="#4-é…ç½®serviceå±‚" class="headerlink" title="4 é…ç½®serviceå±‚"></a>4 é…ç½®serviceå±‚</h2><h3 id="4-1-é…ç½®spring-service-xml"><a href="#4-1-é…ç½®spring-service-xml" class="headerlink" title="4.1 é…ç½®spring-service.xml"></a>4.1 é…ç½®spring-service.xml</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‰«ææ‰€æœ‰service,äº¤ç»™springIOCå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.chen.service"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="4-2-ç¼–å†™serviceå±‚æ¥å£"><a href="#4-2-ç¼–å†™serviceå±‚æ¥å£" class="headerlink" title="4.2 ç¼–å†™serviceå±‚æ¥å£"></a>4.2 ç¼–å†™serviceå±‚æ¥å£</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.chen.servises;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.chen.pojo.Book;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookService</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insertBook</span><span class="params">(Book book)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteBookById</span><span class="params">( <span class="meta">@Param("bookId")</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateBook</span><span class="params">(Book book)</span></span>;</span><br><span class="line">    <span class="function">Book <span class="title">queryBookById</span><span class="params">(<span class="meta">@Param("bookId")</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function">List&lt;Book&gt; <span class="title">queryAllBook</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4-3-ç¼–å†™æ¥å£å®ç°ç±»"><a href="#4-3-ç¼–å†™æ¥å£å®ç°ç±»" class="headerlink" title="4.3 ç¼–å†™æ¥å£å®ç°ç±»"></a>4.3 ç¼–å†™æ¥å£å®ç°ç±»</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.chen.servises;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.chen.dao.BookMapper;</span><br><span class="line"><span class="keyword">import</span> com.chen.pojo.Book;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title">BookMapper</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertBook</span><span class="params">(Book book)</span> </span>{</span><br><span class="line">        bookMapper.insertBook(book);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBookById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{</span><br><span class="line">        bookMapper.deleteBookById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateBook</span><span class="params">(Book book)</span> </span>{</span><br><span class="line">        bookMapper.updateBook(book);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Book <span class="title">queryBookById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> bookMapper.queryBookById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">queryAllBook</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> bookMapper.queryAllBook();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="5-é…ç½®springMvc"><a href="#5-é…ç½®springMvc" class="headerlink" title="5 é…ç½®springMvc"></a>5 é…ç½®springMvc</h2><p>springmvc-servlet.xml</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">   http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">   http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">   http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">   http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">   https://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®SpringMVC --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.å¼€å¯SpringMVCæ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç»Ÿä¸€è§£å†³jsonä¹±ç é—®é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‹¦æˆªå™¨é…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/book/**"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.chen.interceptor.LoginInterceptor"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 2.é™æ€èµ„æºé»˜è®¤servleté…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 3.é…ç½®jsp æ˜¾ç¤ºViewResolverè§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewClass"</span> <span class="attr">value</span>=<span class="string">"org.springframework.web.servlet.view.JstlView"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 4.æ‰«æwebç›¸å…³çš„bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.chen.controller"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="6-é…ç½®web-xml"><a href="#6-é…ç½®web-xml" class="headerlink" title="6 é…ç½®web.xml"></a>6 é…ç½®web.xml</h2><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- springçš„è¿‡æ»¤å™¨ï¼Œè§£å†³ä¹±ç é—®é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>æ€»é…ç½®</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"spring-service.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"spring-mvc.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"spring-dao.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>å¤‡ç”¨spring æ€»é…ç½®</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"spring-service.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"spring-mvc.xml"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.chen.pojo"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.chen.dao"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/ssmbuild?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123123"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:com/chen/dao/*.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionTemplate"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">ref</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥sqlSessionFactory --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»™å‡ºéœ€è¦æ‰«æDaoæ¥å£åŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.chen.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ssmæ•´åˆæµç¨‹&quot;&gt;&lt;a href=&quot;#ssmæ•´åˆæµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;ssmæ•´åˆæµç¨‹&quot;&gt;&lt;/a&gt;ssmæ•´åˆæµç¨‹&lt;/h1&gt;&lt;h2 id=&quot;1-å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;a href=&quot;#1-å‡†å¤‡å·¥ä½œ&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    
    <category term="spring" scheme="https://rain-sky.github.io/tags/spring/"/>
    
    <category term="mybatis" scheme="https://rain-sky.github.io/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>é—®é¢˜é›†é”¦</title>
    <link href="https://rain-sky.github.io/2021/04/24/%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/"/>
    <id>https://rain-sky.github.io/2021/04/24/%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/</id>
    <published>2021-04-24T00:48:41.000Z</published>
    <updated>2021-08-04T09:08:49.122Z</updated>
    
    <content type="html"><![CDATA[<p><strong>ä¸“ä¸šæŠ€èƒ½</strong></p><ul><li>åŸºç¡€ï¼šJDK å¸¸ç”¨ç±»çš„åŸç†ã€æºç ã€ä½¿ç”¨åœºæ™¯ã€‚</li><li>è®¾è®¡æ¨¡å¼ï¼šå¸¸ç”¨å‡ ç§çš„åŸç†ã€ä½¿ç”¨åœºæ™¯ï¼Œå•ä¾‹ã€åŠ¨æ€ä»£ç†ã€æ¨¡æ¿ã€è´£ä»»é“¾ç­‰ã€‚</li><li>æ•°æ®ç»“æ„ï¼šæ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ ‘ã€‚</li><li>ç½‘ç»œï¼šTCPã€HTTPã€HTTPSã€è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚</li><li>æ¡†æ¶ï¼šSpring IoC åŸç†ã€Spring AOP åŸç†å’Œä½¿ç”¨ã€Spring å¸¸ç”¨çš„æ‰©å±•ç‚¹ã€MyBatis çš„æ ¸å¿ƒæµç¨‹ã€‚</li><li>ä¸­é—´ä»¶ï¼šå¸¸ç”¨ä¸­é—´ä»¶çš„æ ¸å¿ƒåŸç†ä¸æœ€ä½³å®è·µï¼Œå¹¶å¯¹å…¶ä¸­çš„ 1 åˆ° 2 ä¸ªæœ‰æ·±å…¥çš„å­¦ä¹ ï¼ŒRedisã€Kafkaï¼ˆRocketMQã€RabbitMQï¼‰ã€Dubboã€Zookeeperã€‚</li><li>æ•°æ®åº“ï¼ˆMySQLï¼‰ï¼šç´¢å¼•åŸç†ã€éš”ç¦»çº§åˆ«ã€é”æœºåˆ¶ã€åˆ†åº“åˆ†è¡¨ã€æ…¢ SQL å®šä½åŠä¼˜åŒ–ã€çº¿ä¸Šé—®é¢˜è§£å†³ã€‚</li><li>Nettyï¼šNIO åŸç†ã€æ ¸å¿ƒç»„ä»¶ã€I/O å¤šè·¯å¤ç”¨ï¼ˆepollï¼‰ã€é›¶æ‹·è´ã€‚</li><li>JVMï¼šè¿è¡Œæ—¶æ•°æ®åŒºã€åƒåœ¾å›æ”¶ç®—æ³•ã€åƒåœ¾å›æ”¶å™¨ï¼ˆCMSã€G1ï¼‰ã€å¸¸ç”¨é…ç½®å‚æ•°ã€çº¿ä¸Šé—®é¢˜å®šä½åŠè§£å†³ã€‚</li><li>ç¨³å®šæ€§ä¿éšœï¼šéš”ç¦»ã€é™æµã€ç†”æ–­ã€é™çº§ç­‰ã€‚</li><li>Linuxï¼šåŸºæœ¬å‘½ä»¤çš„ä½¿ç”¨ã€å¿«é€Ÿå®šä½å’Œæ’æŸ¥é—®é¢˜ã€‚</li><li>åˆ†å¸ƒå¼ç†è®ºï¼šCAPã€BASEã€2PCã€3PCã€TCCã€‚</li></ul><h2 id="é’ˆå¯¹æ€§é—®é¢˜"><a href="#é’ˆå¯¹æ€§é—®é¢˜" class="headerlink" title="é’ˆå¯¹æ€§é—®é¢˜"></a>é’ˆå¯¹æ€§é—®é¢˜</h2><h3 id="è®¡ç®—æœºç»„æˆåŸç†"><a href="#è®¡ç®—æœºç»„æˆåŸç†" class="headerlink" title="è®¡ç®—æœºç»„æˆåŸç†"></a>è®¡ç®—æœºç»„æˆåŸç†</h3><h3 id="è®¡ç®—æœºç½‘ç»œ"><a href="#è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="è®¡ç®—æœºç½‘ç»œ"></a>è®¡ç®—æœºç½‘ç»œ</h3><ul><li>HTTPS æ˜¯æ€ä¹ˆåŠ å¯†çš„</li><li>æ™®é€š Hash å’Œä¸€è‡´æ€§ Hash åŸç†</li><li>ä¸€è‡´æ€§ Hash çš„ç¼ºç‚¹</li><li>TCP ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹</li><li>ä¸ºä»€ä¹ˆ TIME_WAIT çŠ¶æ€éœ€è¦ç»è¿‡ 2MSL æ‰èƒ½è¿”å›åˆ° CLOSE çŠ¶æ€</li><li>TCP çš„æ‹¥å¡æ§åˆ¶</li><li>TCP å¦‚ä½•è§£å†³æµæ§ã€ä¹±åºã€ä¸¢åŒ…é—®é¢˜</li><li>ä¸ºä»€ä¹ˆä¼šå‡ºç°ç²˜åŒ…å’Œæ‹†åŒ…ï¼Œå¦‚ä½•è§£å†³</li></ul><h3 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h3><h3 id="æ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•</h3><h3 id="JAVAåŸºç¡€"><a href="#JAVAåŸºç¡€" class="headerlink" title="JAVAåŸºç¡€"></a>JAVAåŸºç¡€</h3><h4 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h4><h4 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h4><ul><li>ç»å¸¸ç”¨åˆ°å“ªäº› Map</li><li>è¿™å‡ ç§ Map çš„åŒºåˆ«</li><li>CocurrentHashMap æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨</li><li>CocurrentHashMap åœ¨ JDK 1.8 å‰åçš„é”æœ‰ä»€ä¹ˆåŒºåˆ«</li><li>èŠä¸‹ HashMap çš„åŸç†</li><li>HashMap åœ¨ Put æ—¶ï¼Œæ–°é“¾è¡¨èŠ‚ç‚¹æ˜¯æ”¾åœ¨å¤´éƒ¨è¿˜æ˜¯å°¾éƒ¨</li><li>HashMap æ‰©å®¹æ—¶çš„æµç¨‹</li><li>HashMap åœ¨ JDK 1.8 æœ‰ä»€ä¹ˆæ”¹å˜</li><li>CocurrentHashMap åœ¨ JDK 1.8 æœ‰ä»€ä¹ˆæ”¹å˜</li><li>TreeMap çš„åŸç†</li><li>Mapã€Listã€Set åˆ†åˆ«è¯´ä¸‹ä½ çŸ¥é“çš„çº¿ç¨‹å®‰å…¨ç±»å’Œçº¿ç¨‹ä¸å®‰å…¨çš„ç±»</li></ul><h3 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h3><ul><li>çº¿ç¨‹æ± ä½¿ç”¨çš„æ˜¯å“ªç§</li><li>çº¿ç¨‹æ± å‚æ•°æ€ä¹ˆé…ç½®</li><li>çº¿ç¨‹æ± å„ä¸ªå‚æ•°çš„ä½œç”¨</li><li>çº¿ç¨‹æ± çš„å‚æ•°é…ç½®è¦æ³¨æ„ä»€ä¹ˆ</li><li>çº¿ç¨‹æ± çš„å·¥ä½œæµç¨‹</li><li>JDK ä¸­çš„å¹¶å‘ç±»çŸ¥é“å“ªäº›</li><li>AQS çš„åº•å±‚åŸç†</li><li>ä»‹ç»ä¸‹æ‚²è§‚é”å’Œä¹è§‚é”</li><li>ä½¿ç”¨è¿‡å“ªäº›é”</li><li>synchronized å’Œ Lock çš„åŒºåˆ«ã€ä½¿ç”¨åœºæ™¯</li><li>synchronized åŸç†</li><li>synchronized ä½œç”¨äºé™æ€æ–¹æ³•ã€æ™®é€šæ–¹æ³•ã€thisã€Lock.class çš„åŒºåˆ«</li><li>ä¸ºä»€ä¹ˆå¼•å…¥åå‘é”ã€è½»é‡çº§é”ï¼Œä»‹ç»ä¸‹å‡çº§æµç¨‹</li><li>æ­»é”çš„å¿…è¦æ¡ä»¶ï¼Œå¦‚ä½•é¢„é˜²æ­»é”</li><li>ä»‹ç»ä¸‹ CountDownLatch å’Œ CyclicBarrier</li><li>ä»‹ç»ä¸‹ CASï¼Œå­˜åœ¨ä»€ä¹ˆé—®é¢˜</li><li>ä»‹ç»ä¸‹ ThreadLocalï¼Œå­˜åœ¨ä»€ä¹ˆé—®é¢˜</li></ul><h3 id="Jvm"><a href="#Jvm" class="headerlink" title="Jvm"></a>Jvm</h3><ul><li>è¿è¡Œæ—¶æ•°æ®åŒº</li><li>æœåŠ¡å™¨ä½¿ç”¨çš„ä»€ä¹ˆåƒåœ¾æ”¶é›†å™¨</li><li>CMS åƒåœ¾æ”¶é›†çš„åŸç†</li><li>G1 åƒåœ¾æ”¶é›†çš„ç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆä½å»¶è¿Ÿ</li><li>æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Œä¼˜ç¼ºç‚¹</li><li>å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º GC Roots</li><li>æœ‰å“ªäº›ç±»åŠ è½½å™¨</li><li>åŒäº²å§”æ´¾æ¨¡å¼ï¼Œå“ªäº›åœºæ™¯æ˜¯æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å¼</li><li>çº¿ä¸ŠæœåŠ¡å™¨å‡ºç°é¢‘ç¹ Full GCï¼Œæ€ä¹ˆæ’æŸ¥</li><li>å®šä½é—®é¢˜å¸¸ç”¨å“ªäº›å‘½ä»¤</li><li>ä»‹ç»ä¸‹ JVM è°ƒä¼˜çš„è¿‡ç¨‹</li></ul><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><ul><li>MySQL ç´¢å¼•çš„æ•°æ®ç»“æ„</li><li>ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ï¼Œä¸å…¶ä»–ç´¢å¼•ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜ç‚¹</li><li>å„ç§ç´¢å¼•ä¹‹é—´çš„åŒºåˆ«</li><li>B+ æ ‘åœ¨è¿›è¡ŒèŒƒå›´æŸ¥æ‰¾æ—¶æ€ä¹ˆå¤„ç†</li><li>MySQL ç´¢å¼•å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯ä»€ä¹ˆ</li><li>è”åˆç´¢å¼•ï¼ˆå¤åˆç´¢å¼•ï¼‰çš„åº•å±‚å®ç°</li><li>MySQL å¦‚ä½•é”ä½ä¸€è¡Œæ•°æ®</li><li>SELECT è¯­å¥èƒ½åŠ äº’æ–¥é”å—</li><li>å¤šä¸ªäº‹åŠ¡åŒæ—¶å¯¹ä¸€è¡Œæ•°æ®è¿›è¡Œ SELECT FOR UPDATE ä¼šé˜»å¡è¿˜æ˜¯å¼‚å¸¸</li><li>MySQL ä½¿ç”¨çš„ç‰ˆæœ¬å’Œæ‰§è¡Œå¼•æ“</li><li>MySQL ä¸åŒæ‰§è¡Œå¼•æ“çš„åŒºåˆ«</li><li>MySQL çš„äº‹åŠ¡éš”ç¦»çº§åˆ«</li><li>MySQL çš„å¯é‡å¤è¯»æ˜¯æ€ä¹ˆå®ç°çš„</li><li>MySQL æ˜¯å¦ä¼šå‡ºç°å¹»è¯»</li><li>MySQL çš„ gap é”</li><li>MySQL çš„ä¸»ä»åŒæ­¥åŸç†</li><li>åˆ†åº“åˆ†è¡¨çš„å®ç°æ–¹æ¡ˆ</li><li>åˆ†å¸ƒå¼å”¯ä¸€ ID æ–¹æ¡ˆ</li><li>å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢</li><li>explain ä¸­æ¯ä¸ªå­—æ®µçš„æ„æ€</li><li>explain ä¸­çš„ type å­—æ®µæœ‰å“ªäº›å¸¸è§çš„å€¼</li><li>explain ä¸­ä½ é€šå¸¸å…³æ³¨å“ªäº›å­—æ®µï¼Œä¸ºä»€ä¹ˆ</li></ul><h3 id="JavaWeb"><a href="#JavaWeb" class="headerlink" title="JavaWeb"></a>JavaWeb</h3><h3 id="mybatis"><a href="#mybatis" class="headerlink" title="mybatis"></a>mybatis</h3><ul><li>Mybatis ä¸­ # å’Œ $ çš„åŒºåˆ«</li><li>æ€ä¹ˆé˜²æ­¢ SQL æ³¨å…¥</li><li>ä½¿ç”¨ Mybatis æ—¶ï¼Œè°ƒç”¨ DAOï¼ˆMapperï¼‰æ¥å£æ—¶æ˜¯æ€ä¹ˆè°ƒç”¨åˆ° SQL çš„</li></ul><h3 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h3><ul><li>ä»‹ç»ä¸‹ Spring IoC çš„æµç¨‹</li><li>BeanFactory å’Œ FactoryBean çš„åŒºåˆ«</li><li>Spring çš„ AOP æ˜¯æ€ä¹ˆå®ç°çš„</li><li>Spring çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæœ‰å“ªäº›ï¼Œè®²ä¸‹åµŒå¥—äº‹åŠ¡</li><li>ä»€ä¹ˆæƒ…å†µä¸‹å¯¹è±¡ä¸èƒ½è¢«ä»£ç†</li><li>Spring æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜</li><li>è¦åœ¨ Spring IoC å®¹å™¨æ„å»ºå®Œæ¯•ä¹‹åæ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œæ€ä¹ˆå®ç°</li><li>@Resource å’Œ @Autowire çš„åŒºåˆ«</li><li>@Autowire æ€ä¹ˆä½¿ç”¨åç§°æ¥æ³¨å…¥</li><li>bean çš„ init-method å±æ€§æŒ‡å®šçš„æ–¹æ³•é‡Œç”¨åˆ°äº†å…¶ä»– bean å®ä¾‹ï¼Œä¼šæœ‰é—®é¢˜å—</li><li>@PostConstruct ä¿®é¥°çš„æ–¹æ³•é‡Œç”¨åˆ°äº†å…¶ä»– bean å®ä¾‹ï¼Œä¼šæœ‰é—®é¢˜å—</li><li>Spring ä¸­ï¼Œæœ‰ä¸¤ä¸ª id ç›¸åŒçš„ beanï¼Œä¼šæŠ¥é”™å—ï¼Œå¦‚æœä¼šæŠ¥é”™ï¼Œåœ¨å“ªä¸ªé˜¶æ®µæŠ¥é”™</li><li>Spring ä¸­ï¼Œbean çš„ class å±æ€§æŒ‡å®šäº†ä¸€ä¸ªä¸å­˜åœ¨çš„ classï¼Œä¼šæŠ¥é”™å—ï¼Œå¦‚æœä¼šæŠ¥é”™ï¼Œåœ¨å“ªä¸ªé˜¶æ®µ</li><li>Spring ä¸­çš„å¸¸è§æ‰©å±•ç‚¹æœ‰å“ªäº›</li></ul><h3 id="springboot"><a href="#springboot" class="headerlink" title="springboot"></a>springboot</h3><h3 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h3><ul><li>é¡¹ç›®ä¸­ä½¿ç”¨çš„ Redis ç‰ˆæœ¬</li><li>Redis åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨åœºæ™¯</li><li>Redis æ€ä¹ˆä¿è¯é«˜å¯ç”¨</li><li>Redis çš„é€‰ä¸¾æµç¨‹</li><li>Redis å’Œ Memcache çš„åŒºåˆ«</li><li>Redis çš„é›†ç¾¤æ¨¡å¼</li><li>Redis é›†ç¾¤è¦å¢åŠ åˆ†ç‰‡ï¼Œæ§½çš„è¿ç§»æ€ä¹ˆä¿è¯æ— æŸ</li><li>Redis åˆ†å¸ƒå¼é”çš„å®ç°</li><li>Redis åˆ é™¤è¿‡æœŸé”®çš„ç­–ç•¥</li><li>Redis çš„å†…å­˜æ·˜æ±°ç­–ç•¥</li><li>Redis çš„ Hash å¯¹è±¡åº•å±‚ç»“æ„</li><li>Redis ä¸­ Hash å¯¹è±¡çš„æ‰©å®¹æµç¨‹</li><li>Redis çš„ Hash å¯¹è±¡çš„æ‰©å®¹æµç¨‹åœ¨æ•°æ®é‡å¤§çš„æ—¶å€™ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—</li><li>Redis çš„æŒä¹…åŒ–æœºåˆ¶æœ‰å“ªå‡ ç§</li><li>RDB å’Œ AOF çš„å®ç°åŸç†ã€ä¼˜ç¼ºç‚¹</li><li>AOF é‡å†™çš„è¿‡ç¨‹</li><li>å“¨å…µæ¨¡å¼çš„åŸç†</li><li>ä½¿ç”¨ç¼“å­˜æ—¶ï¼Œå…ˆæ“ä½œæ•°æ®åº“è¿˜æ˜¯å…ˆæ“ä½œç¼“å­˜</li><li>ä¸ºä»€ä¹ˆæ˜¯è®©ç¼“å­˜å¤±æ•ˆï¼Œè€Œä¸æ˜¯æ›´æ–°ç¼“å­˜</li><li>ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©</li><li>æ›´æ–°ç¼“å­˜çš„å‡ ç§è®¾è®¡æ¨¡å¼</li></ul><h3 id="kafka"><a href="#kafka" class="headerlink" title="kafka"></a>kafka</h3><ul><li>ä¸ºä»€ä¹ˆä½¿ç”¨ Kafka</li><li>ä»‹ç»ä¸‹ Kafka çš„å„ä¸ªç»„ä»¶</li><li>å¦‚ä½•ä¿è¯å†™å…¥ Kafka çš„æ•°æ®ä¸ä¸¢å¤±</li><li>å¦‚ä½•ä¿è¯ä» Kafka æ¶ˆè´¹çš„æ•°æ®ä¸ä¸¢å¤±</li><li>Kafka ä¸ºä»€ä¹ˆæ€§èƒ½è¿™ä¹ˆé«˜</li><li>é›¶æ‹·è´æŠ€æœ¯ä½¿ç”¨å“ªä¸ªæ–¹æ³•å®ç°</li><li>Java ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„é›¶æ‹·è´æŠ€æœ¯ï¼Œæ˜¯å“ªä¸ªæ–¹æ³•</li><li>Kafka æ€ä¹ˆä¿è¯æ¶ˆæ¯çš„é¡ºåºæ¶ˆè´¹</li><li>Kafka æ€ä¹ˆé¿å…é‡å¤æ¶ˆè´¹</li><li>ä»€ä¹ˆæ˜¯ HighWatermark å’Œ LEO</li><li>ä»€ä¹ˆæ˜¯ ISRï¼Œä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥ ISR</li></ul><h3 id="åˆ†å¸ƒå¼ç†è®º"><a href="#åˆ†å¸ƒå¼ç†è®º" class="headerlink" title="åˆ†å¸ƒå¼ç†è®º"></a>åˆ†å¸ƒå¼ç†è®º</h3><ul><li>CAP ç†è®º</li><li>BASE ç†è®º</li><li>åˆ†å¸ƒå¼äº‹åŠ¡ 2PC å’Œ TCC çš„åŸç†</li><li>TCC åœ¨ cancel é˜¶æ®µå¦‚æœå‡ºç°å¤±è´¥æ€ä¹ˆå¤„ç†</li><li>Paxos ç®—æ³•ã€Raft ç®—æ³•</li></ul><h2 id="é¢ç»"><a href="#é¢ç»" class="headerlink" title="é¢ç»"></a>é¢ç»</h2><h3 id="å­—èŠ‚è·³åŠ¨"><a href="#å­—èŠ‚è·³åŠ¨" class="headerlink" title="å­—èŠ‚è·³åŠ¨"></a>å­—èŠ‚è·³åŠ¨</h3><h2 id="å­—èŠ‚è·³åŠ¨æŠ€æœ¯ä¸€é¢"><a href="#å­—èŠ‚è·³åŠ¨æŠ€æœ¯ä¸€é¢" class="headerlink" title="å­—èŠ‚è·³åŠ¨æŠ€æœ¯ä¸€é¢"></a><strong>å­—èŠ‚è·³åŠ¨æŠ€æœ¯ä¸€é¢</strong></h2><ul><li>è®²ä¸€ä¸‹çº¿ç¨‹å‚æ•°çš„å«ä¹‰</li><li>Innodbçš„ç´¢å¼•å®ç°</li><li>ä¸ºä»€ä¹ˆæ˜¯B+æ ‘ï¼Ÿ</li><li>Redisçš„ä½¿ç”¨ï¼Œåˆ†å¸ƒå¼é”çš„å®ç°</li><li>æ“ä½œç³»ç»Ÿè™šæ‹Ÿå†…å­˜æ¢é¡µçš„è¿‡ç¨‹</li><li>TCPä¸‰æ¬¡æ¡æ‰‹</li><li>volatileå…³é”®å­—çš„ä½œç”¨</li><li>ä¹è§‚é”ã€æ‚²è§‚é”</li><li>ä¹‹å‰ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</li><li>ç®—æ³•é¢˜ï¼šæ»‘åŠ¨çª—å£</li></ul><h2 id="å­—èŠ‚è·³åŠ¨æŠ€æœ¯äºŒé¢"><a href="#å­—èŠ‚è·³åŠ¨æŠ€æœ¯äºŒé¢" class="headerlink" title="å­—èŠ‚è·³åŠ¨æŠ€æœ¯äºŒé¢"></a><strong>å­—èŠ‚è·³åŠ¨æŠ€æœ¯äºŒé¢</strong></h2><ul><li>è¯´ä¸€ä¸‹Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«</li><li>è¯´ä¸€ä¸‹HashMapçš„å®ç°ï¼Œæ‰©å®¹æœºåˆ¶ï¼Œæ‰©å®¹æ—¶å¦‚ä½•ä¿è¯å¯æ“ä½œï¼Ÿ</li><li>Redisæ‰©å®¹æœºåˆ¶ï¼ˆæ¸è¿›å¼å•çº¿ç¨‹æ‰©å®¹ï¼‰</li><li>Spring IoCçš„åŸç†ï¼Œå¦‚ä½•å®ç°ï¼Œå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</li><li>ä¸¤çº¿ç¨‹å¯¹å˜é‡iè¿›è¡ŒåŠ 1æ“ä½œï¼Œç»“æœå¦‚ä½•ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</li><li>CASæ¦‚å¿µã€åŸå­ç±»å®ç°åŸç†</li><li>synchronizeåº•å±‚å®ç°ï¼Œå¦‚ä½•å®ç°Lockï¼Ÿ</li><li>AQSæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</li><li>æ‰‹å†™é¡¹ç›®ä¸­æŸä¸ªæ¨¡å—ä»£ç ã€‚</li><li>ä»‹ç»å„ç§ç½‘ç»œåè®®ã€‚</li><li>DNSåœ¨ç½‘ç»œå±‚ç”¨å“ªä¸ªåè®®ï¼Œä¸ºä»€ä¹ˆã€‚</li><li>ä»‹ç»HTTPSåè®®ï¼Œè¯¦è¿°SSLå»ºç«‹è¿æ¥è¿‡ç¨‹ã€‚</li><li>ä»£ç é¢˜ï¼šåè½¬å•é“¾è¡¨ã€‚</li><li>ä»£ç é¢˜ï¼šå¤æ‚é“¾è¡¨å¤åˆ¶ã€‚</li></ul><h2 id="å­—èŠ‚è·³åŠ¨æŠ€æœ¯ä¸‰é¢"><a href="#å­—èŠ‚è·³åŠ¨æŠ€æœ¯ä¸‰é¢" class="headerlink" title="å­—èŠ‚è·³åŠ¨æŠ€æœ¯ä¸‰é¢"></a><strong>å­—èŠ‚è·³åŠ¨æŠ€æœ¯ä¸‰é¢</strong></h2><ul><li>ç®—æ³•é¢˜å¤šåˆ°çˆ†ç‚¸ï¼Œæ„Ÿè§‰æ˜¯ç®—æ³•ä¸“åœºï¼Œå®‡å®™æ¡æœçœŸåä¸è™šä¼ </li><li>è¯´ä¸€ä¸‹Javaåƒåœ¾å›æ”¶æœºåˆ¶</li><li>64åŒ¹é©¬ï¼Œ8ä¸ªèµ›é“ï¼Œæ‰¾æœ€å¿«çš„4åŒ¹é©¬</li><li>ç»™å‡ºä¸¤ä¸ªå‡åºæ•°ç»„Aã€Bå’Œé•¿åº¦mã€nï¼Œæ±‚ç¬¬kä¸ªå¤§çš„</li><li>ç»™å‡ºæ•°ç»„Aï¼Œé•¿åº¦ä¸ºnï¼Œæ•°ç»„ä¸­å…ƒç´ çš„å€¼ä½äº[0, n - 1]ä¹‹é—´ï¼Œæ±‚æ˜¯å¦æœ‰é‡å¤å…ƒç´ </li><li>è®²ä¸€ä¸‹å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹åŒºåˆ«</li><li>JVMä¸­ä»€ä¹ˆæ—¶å€™ä¼šè¿›è¡Œåƒåœ¾å›æ”¶ï¼Ÿä»€ä¹ˆæ ·çš„å¯¹è±¡æ˜¯å¯ä»¥å›æ”¶çš„ï¼Ÿ</li><li>Springä¸»è¦æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ</li></ul><h2 id="å­—èŠ‚è·³åŠ¨æŠ€æœ¯å››é¢"><a href="#å­—èŠ‚è·³åŠ¨æŠ€æœ¯å››é¢" class="headerlink" title="å­—èŠ‚è·³åŠ¨æŠ€æœ¯å››é¢"></a><strong>å­—èŠ‚è·³åŠ¨æŠ€æœ¯å››é¢</strong></h2><ul><li>åœºæ™¯é¢˜ç›®ï¼šè®¾è®¡ä¸€ä¸ªçŸ­åŸŸåæœåŠ¡ï¼šçŸ­ä¿¡å­˜ä¸äº†å¤ªé•¿ç½‘ç«™ï¼Œéœ€è¦å¼„æˆçŸ­åŸŸåï¼Œä½ è¯¥å¦‚ä½•è®¾è®¡ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥ä¸ºå…¨å›½çš„ç½‘å€æœåŠ¡ã€‚</li><li>TCPä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</li><li>æ•°æ®åº“çš„éš”ç¦»çº§åˆ«</li><li>sqlé¢˜ï¼Œå†™äº†ä¸ªè¿è¡¨æŸ¥è¯¢å¤–åŠ æ¨¡ç³ŠæŸ¥è¯¢</li><li>ç®—æ³•ï¼šé•œåƒäºŒå‰æ ‘ â€¦â€¦</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;ä¸“ä¸šæŠ€èƒ½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºç¡€ï¼šJDK å¸¸ç”¨ç±»çš„åŸç†ã€æºç ã€ä½¿ç”¨åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;è®¾è®¡æ¨¡å¼ï¼šå¸¸ç”¨å‡ ç§çš„åŸç†ã€ä½¿ç”¨åœºæ™¯ï¼Œå•ä¾‹ã€åŠ¨æ€ä»£ç†ã€æ¨¡æ¿ã€è´£ä»»é“¾ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®ç»“æ„ï¼šæ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ ‘ã€‚&lt;/li&gt;
&lt;l</summary>
      
    
    
    
    
    <category term="é¢è¯•" scheme="https://rain-sky.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>springMvcæ‰§è¡Œæµç¨‹</title>
    <link href="https://rain-sky.github.io/2021/04/12/springMvc%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/"/>
    <id>https://rain-sky.github.io/2021/04/12/springMvc%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/</id>
    <published>2021-04-12T02:21:46.000Z</published>
    <updated>2021-07-17T02:14:41.208Z</updated>
    
    <content type="html"><![CDATA[<h1 id="springMvcæ‰§è¡Œæµç¨‹"><a href="#springMvcæ‰§è¡Œæµç¨‹" class="headerlink" title="springMvcæ‰§è¡Œæµç¨‹"></a>springMvcæ‰§è¡Œæµç¨‹</h1><h2 id="spring4-2-4åŸæ–‡æ¡£å›¾"><a href="#spring4-2-4åŸæ–‡æ¡£å›¾" class="headerlink" title="spring4.2.4åŸæ–‡æ¡£å›¾"></a>spring4.2.4åŸæ–‡æ¡£å›¾</h2><p><img src="https://gitee.com/rain-sky/images/raw/master/20210414220342.png"></p><p><code>å‰ç½®æ§åˆ¶å™¨ï¼ŒspringMvcæ ¸å¿ƒ</code></p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210419100723.png"></p><p>å‚ç…§ï¼š</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210419102208.png"></p><h2 id="springMvcæ‰§è¡Œæµç¨‹-1"><a href="#springMvcæ‰§è¡Œæµç¨‹-1" class="headerlink" title="springMvcæ‰§è¡Œæµç¨‹"></a>springMvcæ‰§è¡Œæµç¨‹</h2><h3 id="å‡†å¤‡æ¦‚è¦ï¼š"><a href="#å‡†å¤‡æ¦‚è¦ï¼š" class="headerlink" title="å‡†å¤‡æ¦‚è¦ï¼š"></a>å‡†å¤‡æ¦‚è¦ï¼š</h3><h4 id="mavené…ç½®"><a href="#mavené…ç½®" class="headerlink" title="mavené…ç½®"></a>mavené…ç½®</h4><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.chen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>SpringMVC-01-servlet<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springMVC-02-hellomvc<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="é…ç½®web-xmlï¼Œæ³¨å†ŒDispatcherServlet"><a href="#é…ç½®web-xmlï¼Œæ³¨å†ŒDispatcherServlet" class="headerlink" title="é…ç½®web.xmlï¼Œæ³¨å†ŒDispatcherServlet"></a>é…ç½®web.xmlï¼Œæ³¨å†ŒDispatcherServlet</h4><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å…³è”ä¸€ä¸ªspringmvcçš„é…ç½®æ–‡ä»¶:ã€servlet-nameã€‘-servlet.xml--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¯åŠ¨çº§åˆ«-1--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--/ åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆä¸åŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--/* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆåŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>ç¼–å†™springMvc-servlet.xmlï¼Œæ­¤å¤„ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- æ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰controller --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.chen.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯æ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®©springMvcä¸å¤„ç†é™æ€èµ„æº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯æ³¨è§£æ”¯æŒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ å¤„ç†æ˜ å°„å™¨ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/&gt;   --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ å¤„ç†é€‚é…å™¨ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/&gt;  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="ç¼–å†™è‡ªå·±çš„controller"><a href="#ç¼–å†™è‡ªå·±çš„controller" class="headerlink" title="ç¼–å†™è‡ªå·±çš„controller"></a>ç¼–å†™è‡ªå·±çš„controller</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServlertContorller</span></span>{</span><br><span class="line">    <span class="meta">@RequestMapping("/hello")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPageHello</span><span class="params">(Model model)</span></span>{</span><br><span class="line">        model.addAttribute(<span class="string">"msg"</span>,<span class="string">"hello world!"</span>);</span><br><span class="line">        <span class="comment">//è¿”å›éœ€è¦æ‹¼æ¥çš„è§†å›¾å</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="æ‰§è¡Œæµç¨‹åˆ†æ"><a href="#æ‰§è¡Œæµç¨‹åˆ†æ" class="headerlink" title="æ‰§è¡Œæµç¨‹åˆ†æ"></a>æ‰§è¡Œæµç¨‹åˆ†æ</h2><ol><li>ç”¨æˆ·å‘èµ·è¯·æ±‚ï¼Œæ­¤å¤„ä»¥localhost:8080\hello ä¸ºä¾‹</li><li>å‰ç«¯æ§åˆ¶å™¨DispatcherServletæ‹¦æˆªè¯·æ±‚\hello**(é…ç½®æ‰€æœ‰\ è¯·æ±‚å‡è¢«å‰ç«¯æ§åˆ¶å™¨æ‹¦æˆª)**</li><li>DispatcherServletè°ƒç”¨å¤„ç†æ˜ å°„å™¨HandlerMappingï¼Œå¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚urlæ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨æ˜ å°„å™¨(ä¸€å…±æœ‰äº”ä¸ª)ï¼Œç”Ÿæˆå¤„ç†å™¨æ‰§è¡Œé“¾HandlerExecutionChain(åŒ…æ‹¬å¤„ç†å™¨å¯¹è±¡å’Œå¤„ç†å™¨æ‹¦æˆªå™¨)ä¸€å¹¶è¿”å›ç»™DispatcherServletã€‚<code>æ­¤å¤„å…·ä½“çš„å¤„ç†å™¨å³ä¸º &lt;bean id="/hello" class="com.chen.controller.ServlertContorller"/&gt;</code></li><li>DispatcherServletè°ƒç”¨å¤„ç†é€‚é…å™¨HandlerAdapterï¼Œè¯·æ±‚æ‰§è¡Œå¯¹åº”handler(å³æ­¤å¤„è‡ªå·±ç¼–å†™çš„controller)</li><li>HandlerAdapterè°ƒç”¨å¯¹åº”controlleræ‰§è¡Œå¯¹åº”çš„å¤„ç†ï¼Œå¤„ç†ç»“æœè¿”å›ModelAndViewå›ä¼ HandlerAdapter</li><li>HandlerAdapterå°†ModelAndViewä¸­ç»§åˆ°å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</li><li>DispatcherServletå°†ModelAndViewä¼ é€ç»™ViewResolve</li><li>è§†å›¾è§£æå™¨å¯¹ModelAndViewè¿›è¡Œè§†å›¾è§£æï¼Œæ‹¼æ¥å…·ä½“è§†å›¾è·¯å¾„ï¼Œè§£æè¿”å›å…·ä½“è§†å›¾Viewhuiå‰ç«¯æ§åˆ¶å™¨</li><li>å‰ç«¯æ§åˆ¶å™¨è°ƒç”¨å…·ä½“è§†å›¾(æ¸²æŸ“è£…å¡«modelä¸­çš„æ•°æ®)</li><li>å°†è§†å›¾è¿”å›ç»™ç”¨æˆ·</li></ol><p>ç¬¬ä¸‰æ­¥åŒ¹é…æ˜ å°„å™¨æºç </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (HandlerMapping mapping : <span class="keyword">this</span>.handlerMappings) {</span><br><span class="line">HandlerExecutionChain handler = mapping.getHandler(request);</span><br><span class="line"><span class="keyword">if</span> (handler != <span class="keyword">null</span>) {</span><br><span class="line"><span class="keyword">return</span> handler;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ç»„ä»¶è¯´æ˜"><a href="#ç»„ä»¶è¯´æ˜" class="headerlink" title="ç»„ä»¶è¯´æ˜"></a>ç»„ä»¶è¯´æ˜</h2><ul><li>DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨ï¼Œä¹Ÿç§°ä¸ºä¸­å¤®æ§åˆ¶å™¨ï¼Œå®ƒæ˜¯æ•´ä¸ªè¯·æ±‚å“åº”çš„æ§åˆ¶ä¸­å¿ƒï¼Œç»„ä»¶çš„è°ƒç”¨ç”±å®ƒç»Ÿä¸€è°ƒåº¦ã€‚</li><li>HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨ï¼Œå®ƒæ ¹æ®ç”¨æˆ·è®¿é—®çš„ URL æ˜ å°„åˆ°å¯¹åº”çš„åç«¯å¤„ç†å™¨ Handlerï¼Œspringmvcæä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œæ ¹æ®ä¸€å®šçš„è§„åˆ™å»æŸ¥æ‰¾,ä¾‹å¦‚ï¼šxmlé…ç½®æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚å®ƒçŸ¥é“å¤„ç†ç”¨æˆ·è¯·æ±‚çš„åç«¯å¤„ç†å™¨ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ‰§è¡Œåç«¯å¤„ç†å™¨ï¼Œè€Œæ˜¯å°†å¤„ç†å™¨å‘Šè¯‰ç»™ä¸­å¤®å¤„ç†å™¨ã€‚</li><li>HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨ï¼Œå®ƒè°ƒç”¨åç«¯å¤„ç†å™¨ä¸­çš„æ–¹æ³•ï¼Œè¿”å›é€»è¾‘è§†å›¾ ModelAndView å¯¹è±¡ã€‚</li><li>ViewResolverï¼šè§†å›¾è§£æå™¨ï¼Œå°† ModelAndView é€»è¾‘è§†å›¾è§£æä¸ºå…·ä½“çš„è§†å›¾ï¼ˆå¦‚ JSPï¼‰ã€‚</li><li>Handlerï¼šåç«¯å¤„ç†å™¨ï¼Œå¯¹ç”¨æˆ·å…·ä½“è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„ Controller ç±»ã€‚Handler æ˜¯ç»§DispatcherServletå‰ç«¯æ§åˆ¶å™¨çš„åç«¯æ§åˆ¶å™¨ï¼Œåœ¨DispatcherServletçš„æ§åˆ¶ä¸‹Handlerå¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚ç”±äºHandleræ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·ä¸šåŠ¡è¯·æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µéœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘Handlerã€‚</li><li>View: æ˜¯springmvcçš„å°è£…å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªæ¥å£, springmvcæ¡†æ¶æä¾›äº†å¾ˆå¤šçš„Viewè§†å›¾ç±»å‹ï¼ŒåŒ…æ‹¬ï¼šjspviewï¼Œpdfview,jstlViewã€freemarkerViewã€pdfViewç­‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;springMvcæ‰§è¡Œæµç¨‹&quot;&gt;&lt;a href=&quot;#springMvcæ‰§è¡Œæµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;springMvcæ‰§è¡Œæµç¨‹&quot;&gt;&lt;/a&gt;springMvcæ‰§è¡Œæµç¨‹&lt;/h1&gt;&lt;h2 id=&quot;spring4-2-4åŸæ–‡æ¡£å›¾&quot;&gt;&lt;a h</summary>
      
    
    
    
    
    <category term="sprigMvc" scheme="https://rain-sky.github.io/tags/sprigMvc/"/>
    
  </entry>
  
  <entry>
    <title>springMvcé¡¹ç›®æ‰“åŒ…åæœªæ‰“åŒ…ä¾èµ–å¯¼è‡´404é—®é¢˜</title>
    <link href="https://rain-sky.github.io/2021/04/11/springMvc%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E5%90%8E%E6%9C%AA%E6%89%93%E5%8C%85%E4%BE%9D%E8%B5%96%E5%AF%BC%E8%87%B4404%E9%97%AE%E9%A2%98/"/>
    <id>https://rain-sky.github.io/2021/04/11/springMvc%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E5%90%8E%E6%9C%AA%E6%89%93%E5%8C%85%E4%BE%9D%E8%B5%96%E5%AF%BC%E8%87%B4404%E9%97%AE%E9%A2%98/</id>
    <published>2021-04-11T02:52:47.000Z</published>
    <updated>2021-05-26T01:38:47.247Z</updated>
    
    <content type="html"><![CDATA[<p>controller</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServlertContorller</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">"msg"</span>,<span class="string">"the first springMvc program"</span>);</span><br><span class="line">        mv.setViewName(<span class="string">"hello"</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>springmvc-servlet.xml</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯æ³¨è§£æ”¯æŒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ å¤„ç†æ˜ å°„å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ å¤„ç†é€‚é…å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span> <span class="attr">id</span>=<span class="string">"InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- å°†è‡ªå·±ç¼–å†™çš„controlleräº¤ç”±iocå®¹å™¨ç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"/hello"</span> <span class="attr">class</span>=<span class="string">"com.chen.controller.ServlertContorller"</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ç›®å½•ç»“æ„</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210414220343.png"></p><p>404é”™è¯¯åŸå› ï¼ŒE:\javaweb\springMVC\out\artifacts\springMVC_02_hellomvc_war_explodedä¸­æ²¡æœ‰æ‰“åŒ…ç›¸å…³ä¾èµ–jaråŒ…</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>æ‰‹åŠ¨æ·»åŠ libç›®å½•å¹¶å¯¼å…¥ç›¸å…³ä¾èµ–</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210414220344.png"></p><p>æ·»åŠ å®Œæˆï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://gitee.com/rain-sky/images/raw/master/20210414220345.png"></p><p>å†æ¬¡æµ‹è¯•è®¿é—®localhost:8080/hello æˆåŠŸï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;controller&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;</summary>
      
    
    
    
    
    <category term="springMvc" scheme="https://rain-sky.github.io/tags/springMvc/"/>
    
    <category term="maven" scheme="https://rain-sky.github.io/tags/maven/"/>
    
  </entry>
  
</feed>
